CREATE DATABASE giftcards_0_A;
USE giftcards_0_A;

CREATE TABLE `access_worldpay_3ds2_challenge` (
  `access_worldpay_3ds2_challenge_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `challenge_jwt` longblob NOT NULL,
  `challenge_url` longblob NOT NULL,
  `challenge_reference` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `authentication_version` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_value` longblob,
  `authentication_eci` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_transaction_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`access_worldpay_3ds2_challenge_id`),
  KEY `challenge_reference` (`challenge_reference`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `access_worldpay_3ds2_fingerprint` (
  `access_worldpay_3ds2_fingerprint_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `device_data_collection_jwt` longblob NOT NULL,
  `hashed_device_data_collection_jwt` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `device_data_collection_url` longblob NOT NULL,
  `device_data_collection_bin` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `notification_session_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_version` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_value` longblob,
  `authentication_eci` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_transaction_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`access_worldpay_3ds2_fingerprint_id`),
  KEY `session_id` (`notification_session_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`),
  KEY `hashed_device_data_collection_jwt_idx` (`hashed_device_data_collection_jwt`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `access_worldpay_messages` (
  `access_worldpay_message_id` bigint unsigned NOT NULL,
  `transaction_reference` bigint unsigned NOT NULL,
  `event_id` varchar(100) NOT NULL,
  `type` varchar(30) NOT NULL,
  `classification` varchar(30) NOT NULL,
  `reference` varchar(40) NOT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `next_process_date` int unsigned DEFAULT '0',
  PRIMARY KEY (`access_worldpay_message_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `key_transaction_reference` (`transaction_reference`),
  KEY `key_reference_id` (`reference`),
  KEY `key_type_classification_create_date` (`type`,`classification`,`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `access_worldpay_txn_reference` (
  `reference_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `access_wp_correlation_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `billing_shardifier_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shop_id',
  `request_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `request_success` tinyint(1) NOT NULL DEFAULT '1',
  `access_wp_link` varchar(2048) NOT NULL DEFAULT '',
  PRIMARY KEY (`reference_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`),
  KEY `txn_reqtype_success` (`txn_type_id`,`txn_id`,`request_type`,`request_success`),
  KEY `correlation_idx` (`access_wp_correlation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `access_worldpay_txn_reference2` (
  `reference_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `access_wp_correlation_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `billing_shardifier_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shop_id',
  `request_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `request_success` tinyint(1) NOT NULL DEFAULT '1',
  `access_wp_link` varchar(600) NOT NULL DEFAULT '',
  PRIMARY KEY (`reference_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`),
  KEY `txn_reqtype_success` (`txn_type_id`,`txn_id`,`request_type`,`request_success`),
  KEY `correlation_idx` (`access_wp_correlation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_batch` (
  `ach_batch_id` bigint unsigned NOT NULL,
  `ach_job_id` bigint unsigned DEFAULT NULL,
  `status` varchar(20) NOT NULL,
  `type` varchar(20) DEFAULT NULL,
  `upload_date` int unsigned DEFAULT NULL COMMENT 'timestamp: when batch was uploaded to SVB',
  `item_count` int unsigned DEFAULT NULL,
  `credit_amount` bigint unsigned DEFAULT NULL,
  `file_name` varchar(20) DEFAULT NULL,
  `ids` longtext,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_batch_id`),
  KEY `status` (`status`),
  KEY `upload_date` (`upload_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `ach_job_id_type_idx` (`ach_job_id`,`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_batch_items` (
  `ach_batch_item_id` bigint unsigned NOT NULL,
  `ach_batch_id` bigint unsigned NOT NULL,
  `ach_job_id` bigint unsigned DEFAULT NULL,
  `status` varchar(20) DEFAULT NULL,
  `reference_type` varchar(20) NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `reference_part` tinyint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `return_reason_code` varchar(3) DEFAULT NULL,
  `return_date` int unsigned DEFAULT NULL,
  `ach_return_entry_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `rdfi_trace_number` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`ach_batch_item_id`),
  UNIQUE KEY `reference_type` (`reference_type`,`reference_id`,`reference_part`),
  KEY `ach_batch_id` (`ach_batch_id`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `ach_job_id` (`ach_job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_batches` (
  `ach_batch_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `process_status` varchar(20) DEFAULT NULL,
  `iso_country_code` char(2) NOT NULL,
  `currency` varchar(3) NOT NULL,
  `type` varchar(20) NOT NULL,
  `item_count` int unsigned DEFAULT NULL,
  `credit_amount` bigint unsigned DEFAULT NULL,
  `upload_worker` varchar(255) DEFAULT NULL,
  `file_name` varchar(20) DEFAULT NULL,
  `upload_date` int unsigned DEFAULT NULL,
  `last_error_date` int unsigned DEFAULT NULL,
  `retry_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_batch_id`),
  KEY `disbursement_job_id` (`disbursement_job_id`),
  KEY `status` (`status`),
  KEY `upload_date` (`upload_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_items` (
  `ach_item_id` bigint unsigned NOT NULL,
  `ach_batch_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `amount` int unsigned NOT NULL,
  `iso_country_code` char(2) NOT NULL,
  `currency` varchar(3) NOT NULL,
  `reference_type` varchar(20) NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `rdfi_trace_number` varchar(20) DEFAULT NULL,
  `return_reason_code` varchar(3) DEFAULT NULL,
  `return_date` int unsigned DEFAULT NULL,
  `ach_return_entry_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_item_id`),
  KEY `ach_batch_id` (`ach_batch_id`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `reference_type` (`reference_type`,`reference_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_job` (
  `ach_job_id` bigint unsigned NOT NULL,
  `status` varchar(20) DEFAULT NULL,
  `batch_count` int unsigned DEFAULT NULL,
  `total_credit_amount` bigint unsigned DEFAULT NULL,
  `disbursement_credit_amount` bigint unsigned DEFAULT NULL,
  `penny_test_credit_amount` int unsigned DEFAULT NULL,
  `disbursement_item_count` int unsigned DEFAULT NULL,
  `penny_test_item_count` int unsigned DEFAULT NULL,
  `total_item_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_job_id`),
  KEY `status` (`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_return` (
  `ach_return_id` bigint unsigned NOT NULL,
  `file_name` varchar(64) NOT NULL,
  `contents` longtext NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_return_id`),
  UNIQUE KEY `file_name` (`file_name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ach_return_entry` (
  `ach_return_entry_id` bigint unsigned NOT NULL,
  `ach_return_id` bigint unsigned NOT NULL COMMENT 'reference to the parent return record',
  `ach_batch_item_id` bigint unsigned DEFAULT NULL COMMENT 'reference to the original batch item',
  `trace_number` varchar(15) NOT NULL COMMENT 'the contents of the return file',
  `return_reason_code` varchar(3) DEFAULT NULL,
  `amount` int unsigned DEFAULT NULL,
  `transaction_code` varchar(2) DEFAULT NULL,
  `addenda_information_encrypted` varchar(255) DEFAULT NULL,
  `status` varchar(20) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ach_return_entry_id`),
  KEY `ach_return_id` (`ach_return_id`),
  KEY `ach_batch_item_id` (`ach_batch_item_id`),
  KEY `trace_number` (`trace_number`),
  KEY `status` (`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_3ds2_challenge` (
  `adyen_3ds2_challenge_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `server_trans_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token` longblob NOT NULL,
  `acs_trans_id` longblob NOT NULL,
  `acs_url` longblob NOT NULL,
  `message_version` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `notification_trans_status` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'U',
  `authentication_psp_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_result_code` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`adyen_3ds2_challenge_id`),
  KEY `server_trans_id` (`server_trans_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_3ds2_fingerprint` (
  `adyen_3ds2_fingerprint_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `server_trans_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `token` longblob NOT NULL,
  `method_url` longblob NOT NULL,
  `notification_comp_ind` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'N',
  `authentication_psp_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_trans_status` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_result_code` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`adyen_3ds2_fingerprint_id`),
  KEY `server_trans_id` (`server_trans_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_3ds_browser_info` (
  `adyen_3ds_browser_info_id` bigint unsigned NOT NULL,
  `cc_txn_id` bigint unsigned NOT NULL,
  `user_agent` longblob NOT NULL,
  `accept_header` longblob NOT NULL,
  `language` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `color_depth` int unsigned NOT NULL,
  `screen_height` int unsigned NOT NULL,
  `screen_width` int unsigned NOT NULL,
  `time_zone_offset` int NOT NULL,
  `java_enabled` tinyint NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`adyen_3ds_browser_info_id`),
  KEY `txn_id_idx` (`cc_txn_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_3ds_challenge` (
  `adyen_3ds_challenge_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `issuer_url` longblob NOT NULL,
  `md` longblob NOT NULL,
  `hashed_md` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `pa_request` longblob NOT NULL,
  `notification_pa_result` longblob,
  `authentication_psp_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `authentication_result_code` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`adyen_3ds_challenge_id`),
  KEY `hashed_md` (`hashed_md`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_balance_batches` (
  `adyen_balance_batch_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `batch_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `batch_item_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_count` int unsigned NOT NULL DEFAULT '0',
  `credit_amount` bigint unsigned NOT NULL DEFAULT '0',
  `retry_count` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`adyen_balance_batch_id`),
  KEY `job_idx` (`disbursement_job_id`),
  KEY `batch_status_idx` (`batch_status`),
  KEY `iso_country_code_idx` (`iso_country_code`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_balance_items` (
  `adyen_balance_item_id` bigint unsigned NOT NULL COMMENT 'Used as Adyen merchantReference',
  `adyen_balance_batch_id` bigint unsigned NOT NULL,
  `disbursement_id` bigint unsigned NOT NULL,
  `balance_account_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen balance account id that was used for the disbursement',
  `priority` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'regular' COMMENT 'Adyen transfer priority used {regular,fast,wire,instant}',
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'Adyen shopperReference',
  `seller_name` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen shopperEmail',
  `seller_address_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen Bank referenceForBeneficiary',
  `original_reference` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `reason_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `direction` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `item_status` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `category` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `disbursement_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `disbursement_entity` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`adyen_balance_item_id`),
  KEY `adyen_balance_batch_idx` (`adyen_balance_batch_id`),
  KEY `bank_account_idx` (`bank_account_id`),
  KEY `disbursement_idx` (`disbursement_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `original_reference_idx` (`original_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_balance_messages` (
  `adyen_message_id` bigint unsigned NOT NULL,
  `original_adyen_message_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `txn_reference` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `message_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message_sequence` int unsigned DEFAULT '0',
  `message_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  PRIMARY KEY (`adyen_message_id`),
  KEY `environment_idx` (`environment`),
  KEY `next_process_date_composite_idx` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `original_adyen_message_idx` (`original_adyen_message_id`(32)),
  KEY `txn_reference_idx` (`txn_reference`(32)),
  KEY `event_type_environment_create_date_composite_idx` (`event_type`(32),`environment`,`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_balance_reversals` (
  `adyen_balance_reversal_id` bigint unsigned NOT NULL,
  `adyen_balance_item_id` bigint unsigned NOT NULL,
  `event_date` int unsigned NOT NULL,
  `reference_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'The id provided in the adyen notification body',
  `original_reference_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'The payout original_reference on adyen_bank_items',
  `balance_account_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen balance account id that was used for the disbursement',
  `reason` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'If success is false, contains the reason why payout failed',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`adyen_balance_reversal_id`),
  UNIQUE KEY `reference_idx` (`reference_id`,`adyen_balance_item_id`),
  KEY `adyen_balance_item_idx` (`adyen_balance_item_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `original_reference_idx` (`original_reference_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_batches` (
  `adyen_batch_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_count` int unsigned NOT NULL DEFAULT '0',
  `credit_amount` bigint unsigned NOT NULL DEFAULT '0',
  `retry_count` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`adyen_batch_id`),
  KEY `job_id_idx` (`disbursement_job_id`),
  KEY `status_idx` (`status`),
  KEY `iso_country_code_idx` (`iso_country_code`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_items` (
  `adyen_item_id` bigint unsigned NOT NULL COMMENT 'Used as Adyen merchantReference',
  `adyen_batch_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `disbursement_id` bigint unsigned NOT NULL,
  `merchant_account` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen merchant account for Etsy IE',
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'Adyen shopperReference',
  `seller_email` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen shopperEmail',
  `seller_statement` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen shopperStatement',
  `original_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `result_code` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `disbursement_type` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`adyen_item_id`),
  KEY `batch_id_idx` (`adyen_batch_id`),
  KEY `bank_account_id_idx` (`bank_account_id`),
  KEY `disbursement_id_idx` (`disbursement_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `original_reference_idx` (`original_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_messages` (
  `adyen_message_id` bigint unsigned NOT NULL,
  `original_reference` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `psp_reference` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_code` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_success` tinyint unsigned NOT NULL DEFAULT '0',
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `message_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  PRIMARY KEY (`adyen_message_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `environment` (`environment`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `original_reference_idx` (`original_reference`(32)),
  KEY `psp_reference_idx` (`psp_reference`(32)),
  KEY `event_code_environment_create_date_composite_idx` (`event_code`(32),`environment`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_reversals` (
  `adyen_reversal_id` bigint unsigned NOT NULL,
  `adyen_item_id` bigint unsigned NOT NULL COMMENT 'Adyen merchantReference, pk of adyen_items',
  `event_date` int unsigned NOT NULL,
  `psp_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `original_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'The payout pspReference, psp_reference_id on adyen_items',
  `merchant_account` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Adyen merchant account for Etsy IE',
  `reason` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'If success is false, contains the reason why payout failed',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`adyen_reversal_id`),
  UNIQUE KEY `psp_reference_idx` (`psp_reference`),
  KEY `adyen_item_idx` (`adyen_item_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `original_reference_idx` (`original_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `adyen_txn_reference` (
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` int unsigned NOT NULL,
  `billing_shardifier_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shop_id',
  `psp_reference` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `request_type` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `request_success` tinyint(1) NOT NULL DEFAULT '1',
  `threeds_data` varchar(10000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`psp_reference`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_idx` (`txn_id`),
  KEY `txn_reqtype_success_createdate` (`txn_type_id`,`txn_id`,`request_type`(32),`request_success`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `audit_trail` (
  `audit_trail_id` bigint unsigned NOT NULL,
  `model` varchar(255) NOT NULL COMMENT 'EtsyORM model name',
  `reference_id` bigint unsigned NOT NULL COMMENT 'pk of the row that was updated',
  `column_name` varchar(255) NOT NULL COMMENT 'column that was updated',
  `old_value` varchar(255) DEFAULT NULL COMMENT 'value prior to update',
  `new_value` varchar(255) DEFAULT NULL COMMENT 'value after update',
  `actor` varchar(255) NOT NULL COMMENT 'ldap id, user_id or name of the process that caused the change',
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_trail_id`),
  KEY `model` (`model`(20),`column_name`(20)),
  KEY `actor` (`actor`),
  KEY `create_date` (`create_date`),
  KEY `reference_id` (`reference_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_check_logs` (
  `bank_account_check_log_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `check_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `check_result` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`bank_account_check_log_id`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_fingerprints` (
  `bank_account_fingerprint_id` bigint unsigned NOT NULL,
  `routing_number` varchar(255) NOT NULL DEFAULT '',
  `account_number_encrypted` varchar(255) NOT NULL,
  `account_number_last_four` char(4) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `iso_country_code` char(2) NOT NULL DEFAULT '',
  PRIMARY KEY (`bank_account_fingerprint_id`),
  KEY `routing_number` (`routing_number`,`account_number_last_four`),
  KEY `account_number_last_four` (`account_number_last_four`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `iso_country_code` (`iso_country_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_verification_email_log` (
  `bank_account_verification_email_log_id` bigint unsigned NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email_campaign_id` bigint unsigned NOT NULL,
  `email_address_id` bigint unsigned NOT NULL,
  `scheduled_date` int unsigned NOT NULL,
  `sent_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`bank_account_verification_email_log_id`),
  KEY `reference_id` (`reference_id`),
  KEY `email_address_id` (`email_address_id`),
  KEY `sent_date` (`sent_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_accounts` (
  `bank_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `account_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `routing_number` varchar(9) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_number_encrypted` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_account_fingerprint_id` bigint unsigned DEFAULT NULL,
  `name_on_account` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status_date` int DEFAULT NULL,
  `deleted` tinyint(1) NOT NULL,
  `replacement_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `last_updated_by` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `branch_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `branch_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `iban_encrypted` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `swift` varchar(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `should_use_legal_name` tinyint(1) NOT NULL DEFAULT '0',
  `sanctioned_date` int unsigned NOT NULL DEFAULT '0',
  `last_four_digits` varchar(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_account_tokenized` tinyint(1) NOT NULL DEFAULT '0',
  `plaid_persistent_account_id` varchar(56) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`bank_account_id`),
  KEY `shop_id` (`shop_id`),
  KEY `routing_number` (`routing_number`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `status` (`status`,`status_date`),
  KEY `bank_account_fingerprint_id` (`bank_account_fingerprint_id`,`shop_id`),
  KEY `iso_country_code` (`iso_country_code`),
  KEY `sanctioned_date` (`sanctioned_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cdc_etet` (
  `id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `f_varchar` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `debezium_signal` (
  `id` varchar(42) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `data` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Used only to send signals to Debezium';

CREATE TABLE `disbursement_jobs` (
  `disbursement_job_id` bigint unsigned NOT NULL,
  `disbursement_method` varchar(20) NOT NULL,
  `disbursement_method_segment` varchar(20) DEFAULT NULL,
  `disbursement_entity` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `type` varchar(20) NOT NULL,
  `payday` tinyint(1) NOT NULL DEFAULT '0',
  `status` varchar(20) NOT NULL,
  `batch_count` int unsigned DEFAULT NULL,
  `item_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`disbursement_job_id`),
  KEY `status` (`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `disbursement_method_and_segment` (`disbursement_method`,`disbursement_method_segment`),
  KEY `disbursement_method_and_entity` (`disbursement_method`,`disbursement_entity`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `disbursement_reversals` (
  `reversal_id` bigint unsigned NOT NULL,
  `reversal_reference` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'Our partners reference to the original transaction',
  `reversal_method` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The method/partner like TRANSPAY',
  `item_id` bigint unsigned NOT NULL COMMENT 'PK of an item like transpay_items',
  `event_date` int unsigned NOT NULL,
  `reason` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'If success is false, contains the reason why payout failed',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`reversal_id`),
  UNIQUE KEY `reversal_reference_idx` (`reversal_reference`),
  KEY `item_idx` (`item_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `reversal_method_item_id_idx` (`reversal_method`,`item_id`),
  KEY `reversal_method_reversal_reference_idx` (`reversal_method`,`reversal_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='This will store reversals for a variety of reversals unlike the tables for Adyen/WP';

CREATE TABLE `disbursements` (
  `disbursement_id` bigint unsigned NOT NULL,
  `ledger_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `amount` int unsigned DEFAULT NULL,
  `currency` varchar(3) DEFAULT NULL,
  `scheduled_date` int unsigned NOT NULL COMMENT 'date this is/was scheduled for',
  `execution_date` int unsigned DEFAULT NULL COMMENT 'date this was executed',
  `method` varchar(10) DEFAULT NULL COMMENT 'paypal, ach, other?',
  `reference_id` varchar(255) DEFAULT NULL COMMENT 'paypal transaction id, etc',
  `ledger_entry_id` bigint unsigned DEFAULT NULL COMMENT 'seller_ledger disbursement debit entry',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `schedule_type` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`disbursement_id`),
  KEY `ledger_id` (`ledger_id`),
  KEY `scheduled_date` (`scheduled_date`),
  KEY `status` (`status`,`scheduled_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `schedule_type` (`status`,`schedule_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `disbursements2` (
  `disbursement_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `ledger_id` bigint unsigned DEFAULT NULL,
  `schedule_type` varchar(128) NOT NULL,
  `scheduled_date` int unsigned NOT NULL,
  `amount` int unsigned DEFAULT NULL,
  `currency` varchar(3) DEFAULT NULL,
  `status` varchar(20) NOT NULL,
  `process_status` varchar(20) DEFAULT NULL,
  `disbursement_method` varchar(20) DEFAULT NULL,
  `ledger_entry_id` bigint unsigned DEFAULT NULL,
  `disbursement_job_id` bigint unsigned DEFAULT NULL,
  `disbursement_batch_id` bigint unsigned DEFAULT NULL,
  `disbursement_item_id` bigint unsigned DEFAULT NULL,
  `disbursement_entity` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `bank_account_id` bigint unsigned DEFAULT NULL,
  `email_sent_date` int unsigned DEFAULT NULL,
  `execution_date` int unsigned DEFAULT NULL,
  `last_error_date` int unsigned DEFAULT NULL,
  `retry_count` int unsigned DEFAULT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `requires_user_verification` tinyint(1) NOT NULL DEFAULT '0',
  `verification_attempts` int NOT NULL DEFAULT '0',
  `verified` tinyint(1) NOT NULL DEFAULT '0',
  `verified_date` int unsigned NOT NULL DEFAULT '0',
  `verification_status` varchar(25) NOT NULL DEFAULT '',
  `single_ledger_entry_id` bigint DEFAULT NULL,
  `available_uncapped_amount` bigint unsigned NOT NULL DEFAULT '0',
  `aborted_reason` varchar(64) NOT NULL DEFAULT '',
  PRIMARY KEY (`disbursement_id`),
  KEY `ledger_id` (`ledger_id`),
  KEY `disbursement_batch_id` (`disbursement_batch_id`),
  KEY `disbursement_job_id_2` (`disbursement_job_id`,`status`),
  KEY `disbursement_job_id_3` (`disbursement_job_id`,`email_sent_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `verification_status` (`verification_status`,`execution_date`),
  KEY `partial_disbursement_method_idx` (`disbursement_method`,`create_date`),
  KEY `status_on_scheduled_date` (`status`,`scheduled_date`),
  KEY `shop_id_status` (`shop_id`,`status`),
  KEY `partial_disbursement_method_entity_idx` (`disbursement_method`,`disbursement_entity`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_batch` (
  `envoy_job_id` bigint unsigned NOT NULL,
  `envoy_batch_id` bigint unsigned NOT NULL,
  `iso_country_code` char(2) DEFAULT NULL,
  `status` varchar(20) NOT NULL,
  `disbursement_ids` text,
  `sent_date` int unsigned DEFAULT NULL,
  `item_count` int DEFAULT NULL,
  `credit_amount` int DEFAULT NULL,
  `status_code` int DEFAULT NULL,
  `received_date` int unsigned DEFAULT NULL,
  `status_message` varchar(255) DEFAULT NULL,
  `raw_response` longtext,
  `raw_request` longtext,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_job_id`,`envoy_batch_id`),
  KEY `status` (`status`),
  KEY `country` (`iso_country_code`),
  KEY `sent_date` (`sent_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_batch_item_reversal` (
  `envoy_batch_item_reversal_id` bigint unsigned NOT NULL,
  `envoy_batch_item_id` bigint unsigned NOT NULL,
  `epacs_reference` varchar(36) DEFAULT NULL,
  `reversal_reason` varchar(255) DEFAULT NULL,
  `reversal_posting_date` int DEFAULT NULL,
  `reversal_item_number` varchar(255) DEFAULT NULL,
  `reversal_statement_id` varchar(255) DEFAULT NULL,
  `raw_callback` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_batch_item_reversal_id`),
  UNIQUE KEY `epacs_reference` (`epacs_reference`),
  KEY `envoy_batch_item_id` (`envoy_batch_item_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_batch_items` (
  `envoy_job_id` bigint NOT NULL,
  `envoy_batch_item_id` bigint unsigned NOT NULL,
  `envoy_batch_id` bigint NOT NULL,
  `status` varchar(20) NOT NULL,
  `merchant_reference` bigint unsigned NOT NULL,
  `reference_type` varchar(20) NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `iso_country_code` char(2) DEFAULT NULL,
  `currency` varchar(3) NOT NULL,
  `epacs_reference` varchar(36) DEFAULT NULL,
  `payment_status_code` int DEFAULT NULL,
  `payment_status_message` varchar(255) DEFAULT NULL,
  `statement_id` varchar(255) DEFAULT NULL,
  `item_number` varchar(20) DEFAULT NULL,
  `execution_date` int DEFAULT NULL,
  `raw_callback` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_job_id`,`envoy_batch_item_id`),
  UNIQUE KEY `epacs_reference` (`epacs_reference`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `reference_type` (`reference_type`,`reference_id`),
  KEY `status` (`status`),
  KEY `envoy_batch_id` (`envoy_batch_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_batches` (
  `envoy_batch_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `iso_country_code` char(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_count` int unsigned DEFAULT NULL,
  `credit_amount` bigint unsigned DEFAULT NULL,
  `status_code` int DEFAULT NULL,
  `status_message` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `raw_request` longtext COLLATE utf8mb4_unicode_ci,
  `raw_response` longtext COLLATE utf8mb4_unicode_ci,
  `sent_date` int unsigned DEFAULT NULL,
  `received_date` int unsigned DEFAULT NULL,
  `last_error_date` int unsigned DEFAULT NULL,
  `retry_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_batch_id`),
  KEY `disbursement_job_id` (`disbursement_job_id`),
  KEY `status` (`status`),
  KEY `iso_country_code` (`iso_country_code`),
  KEY `sent_date` (`sent_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_items` (
  `envoy_item_id` bigint unsigned NOT NULL,
  `envoy_batch_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `amount` int unsigned NOT NULL,
  `iso_country_code` char(2) NOT NULL,
  `currency` varchar(3) NOT NULL,
  `merchant_reference` bigint unsigned NOT NULL,
  `reference_type` varchar(20) NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `epacs_reference` varchar(36) DEFAULT NULL,
  `payment_status_code` int DEFAULT NULL,
  `payment_status_message` varchar(255) DEFAULT NULL,
  `statement_id` varchar(255) DEFAULT NULL,
  `item_number` varchar(20) DEFAULT NULL,
  `execution_date` int unsigned DEFAULT NULL,
  `raw_callback` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_item_id`),
  KEY `envoy_batch_id` (`envoy_batch_id`),
  KEY `status` (`status`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `reference_type` (`reference_type`,`reference_id`),
  KEY `epacs_reference` (`epacs_reference`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_job` (
  `envoy_job_id` bigint unsigned NOT NULL,
  `batch_count` int unsigned DEFAULT NULL,
  `disbursement_item_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_job_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `envoy_reversals` (
  `envoy_reversal_id` bigint unsigned NOT NULL,
  `envoy_item_id` bigint unsigned NOT NULL,
  `epacs_reference` varchar(36) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `reversal_reason` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `reversal_posting_date` int unsigned DEFAULT NULL,
  `reversal_item_number` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `reversal_statement_id` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `raw_callback` text COLLATE utf8mb4_general_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`envoy_reversal_id`),
  UNIQUE KEY `epacs_reference` (`epacs_reference`),
  KEY `envoy_item_id` (`envoy_item_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fed_ach_banks` (
  `fed_ach_bank_id` bigint unsigned NOT NULL,
  `routing_number` varchar(9) NOT NULL COMMENT 'Bank routing number',
  `name` varchar(36) NOT NULL COMMENT 'Bank name',
  `updated_routing_number` varchar(9) DEFAULT NULL COMMENT 'New routing number from merger or renumber',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`fed_ach_bank_id`),
  UNIQUE KEY `routing_number` (`routing_number`),
  KEY `name` (`name`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `finpay_ingestor_jobs` (
  `finpay_job_id` bigint unsigned NOT NULL COMMENT 'Synthetic ID uniquely identifying this job, from ticket server',
  `job_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'The type of Finpay ingestor job this record represents; truncated classname',
  `job_data` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'JSON data maintaining state for this job',
  `last_error` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Last error encountered by this job',
  `last_error_status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Status when last error was encountered',
  `status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'The state of the job within the ingestor flow',
  `process_status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'The readiness of the job to be processed to its next state',
  `next_process_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'The time the job should next be picked up for processing',
  `state_retry_count` int NOT NULL DEFAULT '0' COMMENT 'Count of attempts made to process state given in status field',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `source_mode` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT 'How the source was identified. Should be AUTO if source was identified automatically by algorithm, SCHEDULED if source was set on a schedule, or MANUAL if source was specified with e.g. --report-date or --source-file command-line parameters',
  `source_hostname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Hostname of primary source file, if provided by ingestor',
  `source_pathname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Path to primary source file, if provided by ingestor',
  `source_filename` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Name of primary source file, if provided by ingestor',
  `source_date` int unsigned DEFAULT NULL COMMENT 'Timestamp of source file, if provided by ingestor',
  `source_row_count` int unsigned DEFAULT NULL COMMENT 'Count of total rows in the input file',
  `header_row_count` int unsigned DEFAULT NULL COMMENT 'Count of header rows found by this job; these will not be ingested, but identify fields processed.',
  `dropped_row_count` int unsigned DEFAULT NULL COMMENT 'Count of data rows filtered out by the criteria of this job. A common example is a blank line at the end of a CSV.',
  `valid_row_count` int unsigned DEFAULT NULL COMMENT 'Count of valid data rows found by this job; some may be redundant with existing data and will be dropped during merge.',
  `row_count` int unsigned DEFAULT NULL COMMENT 'Count of new rows ingested by this job; duplicate rows dropped during merge are not included here.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`finpay_job_id`),
  KEY `processable_idx` (`environment`,`job_type`,`process_status`,`next_process_date`),
  KEY `source_idx` (`environment`,`job_type`,`source_filename`(64),`source_pathname`(64),`source_hostname`(64))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `french_sellers_report` (
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `year` smallint unsigned NOT NULL,
  `report_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'french' COMMENT 'Report type - french/dac7',
  `vat_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `siren_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `siret_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `total_yearly_payment_amount_ledger` decimal(10,2) DEFAULT NULL,
  `total_yearly_payment_amount_eur` decimal(10,2) DEFAULT NULL,
  `total_yearly_payment_count` int unsigned DEFAULT NULL,
  `q1_consideration` decimal(10,2) DEFAULT NULL,
  `q1_sale_count` int unsigned DEFAULT NULL,
  `q1_taxes` decimal(10,2) DEFAULT NULL,
  `q1_fees` decimal(10,2) DEFAULT NULL,
  `q2_consideration` decimal(10,2) DEFAULT NULL,
  `q2_sale_count` int unsigned DEFAULT NULL,
  `q2_taxes` decimal(10,2) DEFAULT NULL,
  `q2_fees` decimal(10,2) DEFAULT NULL,
  `q3_consideration` decimal(10,2) DEFAULT NULL,
  `q3_sale_count` int unsigned DEFAULT NULL,
  `q3_taxes` decimal(10,2) DEFAULT NULL,
  `q3_fees` decimal(10,2) DEFAULT NULL,
  `q4_consideration` decimal(10,2) DEFAULT NULL,
  `q4_sale_count` int unsigned DEFAULT NULL,
  `q4_taxes` decimal(10,2) DEFAULT NULL,
  `q4_fees` decimal(10,2) DEFAULT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_business` tinyint(1) DEFAULT NULL,
  `seller_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Individual: first & last name, Business: business name',
  `seller_first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_zip` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_birth_date` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_account_holder_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_country` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`year`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gci_shop_data` (
  `shop_id` bigint unsigned NOT NULL,
  `is_onboarded` tinyint unsigned NOT NULL DEFAULT '0',
  `onboarded_date` int unsigned DEFAULT NULL,
  `is_locked` tinyint unsigned NOT NULL DEFAULT '0',
  `payments_enabled` tinyint unsigned NOT NULL DEFAULT '1',
  `first_disbursement_date` int unsigned NOT NULL,
  `disbursement_delay_days` int unsigned NOT NULL,
  `disbursement_method` varchar(255) NOT NULL,
  `disbursement_eligibility_date` int unsigned DEFAULT NULL,
  `disbursement_eligibility_ledger_balance` bigint DEFAULT NULL,
  `disbursement_eligibility_ledger_currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `disbursement_iso_country_code` char(2) DEFAULT NULL,
  `last_four_ssn` varchar(4) DEFAULT NULL,
  `social_security_number_encrypted` varchar(255) DEFAULT NULL,
  `employer_identification_number_encrypted` varchar(255) DEFAULT NULL,
  `birthday_month` tinyint unsigned DEFAULT NULL,
  `birthday_year` smallint unsigned DEFAULT NULL,
  `birthday_day` tinyint unsigned DEFAULT NULL,
  `business_name` varchar(255) DEFAULT NULL,
  `early_deposit_status` varchar(255) NOT NULL DEFAULT 'ineligible',
  `last_recoupment_fail_date` int unsigned DEFAULT NULL COMMENT 'set when a recoupment fails, null otherwise',
  `last_lock_date` int unsigned DEFAULT NULL,
  `last_unlock_date` int unsigned DEFAULT NULL,
  `tou_accepted_date` int unsigned DEFAULT NULL,
  `address_confirmed_date` int unsigned DEFAULT NULL,
  `bank_acct_linked_date` int unsigned DEFAULT NULL,
  `tax_id_encrypted` varchar(255) DEFAULT NULL,
  `idology_log_id` bigint unsigned DEFAULT NULL,
  `idology_result` varchar(100) DEFAULT NULL,
  `dc_fee_tier` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `last_updated_by` varchar(255) NOT NULL,
  `taxpayer_id` varchar(1024) DEFAULT NULL,
  `taxpayer_id_last_four` varchar(4) DEFAULT NULL,
  `taxpayer_id_type` varchar(12) NOT NULL DEFAULT 'NOT_PROVIDED' COMMENT 'one of: SSN, EIN, NOT_PROVIDED',
  `taxpayer_id_status` varchar(16) NOT NULL DEFAULT 'NOT_CHECKED' COMMENT 'one of: NOT_CHECKED, ERROR, VALID',
  `taxpayer_id_verify_date` int unsigned DEFAULT NULL,
  `taxpayer_id_name` varchar(255) DEFAULT NULL,
  `taxpayer_id_address` varchar(255) DEFAULT NULL,
  `paypal_email` varchar(255) DEFAULT NULL,
  `taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `vat_id` varchar(1024) NOT NULL DEFAULT '',
  `is_verified_mononame` tinyint unsigned NOT NULL DEFAULT '0',
  `disbursement_frequency` varchar(191) NOT NULL DEFAULT 'weekly',
  `exposure_percentage` int unsigned NOT NULL DEFAULT '0',
  `exposure_start_date` int unsigned NOT NULL DEFAULT '0',
  `exposure_end_date` int unsigned NOT NULL DEFAULT '0',
  `exposure_source` varchar(128) NOT NULL DEFAULT '',
  `is_epil_seller` tinyint unsigned NOT NULL DEFAULT '0',
  `risky_disbursement_override_date` int unsigned DEFAULT NULL,
  `circuit_breaker_disbursement_override_date` int unsigned DEFAULT NULL,
  `sanction_resident_selection_date` int unsigned DEFAULT NULL,
  `last_settled_payment_date` int unsigned DEFAULT NULL,
  `persona_module_completion_date` int unsigned DEFAULT NULL,
  `persona_biometric_consent` tinyint DEFAULT NULL COMMENT 'boolean indicating whether seller consents to biometric data through persona',
  `persona_biometric_consent_date` int unsigned DEFAULT NULL COMMENT 'when did seller answer consent question',
  PRIMARY KEY (`shop_id`),
  KEY `match_check_status` (`is_onboarded`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `last_updated_by` (`last_updated_by`(20)),
  KEY `birthday_year` (`birthday_year`,`birthday_month`,`birthday_day`),
  KEY `bank_acct_linked_date_idx` (`bank_acct_linked_date`),
  KEY `idology_log_id` (`idology_log_id`),
  KEY `idology_result` (`idology_result`(30)),
  KEY `last_four_ssn` (`last_four_ssn`),
  KEY `taxpayer_id_type` (`taxpayer_id_type`,`taxpayer_id_status`),
  KEY `taxpayer_id_token` (`taxpayer_id_token`),
  KEY `disbursement_frequency_idx` (`disbursement_frequency`),
  KEY `exposure_percentage` (`exposure_percentage`),
  KEY `disbursement_iso_bank_acct_linked` (`disbursement_iso_country_code`,`bank_acct_linked_date`),
  KEY `disbursement_eligibility_date` (`disbursement_eligibility_date`),
  KEY `disbursement_method_frequency_eligibility_date` (`disbursement_method`,`disbursement_frequency`,`disbursement_eligibility_date`),
  KEY `disbursement_method_eligibility_date` (`disbursement_method`,`disbursement_eligibility_date`),
  KEY `disbursement_method_eligibility_ledger_balance` (`disbursement_method`,`disbursement_eligibility_ledger_balance`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `giftcards` (
  `giftcard_id` bigint unsigned NOT NULL,
  `purchase_user_id` bigint unsigned NOT NULL,
  `claim_user_id` bigint unsigned DEFAULT NULL,
  `type` varchar(10) CHARACTER SET utf8 NOT NULL DEFAULT 'STANDARD',
  `sfs_id` varchar(20) CHARACTER SET utf8 DEFAULT NULL,
  `claim_code` varchar(30) CHARACTER SET utf8 DEFAULT NULL,
  `purchase_payment_id` bigint unsigned DEFAULT NULL,
  `purchase_transaction_id` bigint unsigned DEFAULT NULL,
  `token` bigint unsigned DEFAULT NULL,
  `exp_month` varchar(2) CHARACTER SET utf8 DEFAULT NULL,
  `exp_year` varchar(4) CHARACTER SET utf8 DEFAULT NULL,
  `num_tail` varchar(4) CHARACTER SET utf8 DEFAULT NULL,
  `amount_start` int unsigned NOT NULL,
  `amount_current` int unsigned NOT NULL,
  `amount_etsy` int unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8 NOT NULL,
  `claim_code_version` tinyint unsigned NOT NULL,
  `status` varchar(20) CHARACTER SET utf8 NOT NULL,
  `is_locked` tinyint(1) NOT NULL DEFAULT '0',
  `design_id` int unsigned NOT NULL,
  `campaign_id` bigint unsigned DEFAULT NULL,
  `purchase_date` int unsigned NOT NULL,
  `requested_delivery_date` int unsigned NOT NULL,
  `actual_delivery_date` int unsigned DEFAULT NULL,
  `claimable_after_date` int NOT NULL DEFAULT '0',
  `claim_date` int unsigned DEFAULT NULL,
  `last_amount_sync_date` int unsigned DEFAULT NULL,
  `sender_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `recipient_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `recipient_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `issuer_staff_id` bigint unsigned DEFAULT NULL,
  `reminder_sent_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `redeem_expire_date` int unsigned NOT NULL DEFAULT '0',
  `promo_credit_expire_date` int unsigned NOT NULL DEFAULT '0',
  `last_value_change_date` int unsigned NOT NULL DEFAULT '0',
  `num_head` varchar(8) COLLATE utf8mb4_general_ci DEFAULT '',
  PRIMARY KEY (`giftcard_id`),
  UNIQUE KEY `claim_code` (`claim_code`),
  KEY `purchase_user_id` (`purchase_user_id`,`create_date`),
  KEY `claim_user_id` (`claim_user_id`,`create_date`),
  KEY `purchase_transaction_id` (`purchase_transaction_id`),
  KEY `purchase_date` (`purchase_date`),
  KEY `claim_date` (`claim_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `purchase_payment_id` (`purchase_payment_id`,`create_date`),
  KEY `last_amount_sync_date` (`last_amount_sync_date`),
  KEY `recipient_email` (`recipient_email`(191)),
  KEY `campaign_id` (`campaign_id`,`amount_start`,`giftcard_id`),
  KEY `exp_month` (`exp_month`,`exp_year`,`type`,`create_date`),
  KEY `giftcard_id_last_amount_sync_date_status_composite_idx` (`giftcard_id`,`last_amount_sync_date`,`status`),
  KEY `redeem_expire_date_type_status_idx` (`redeem_expire_date`,`type`,`status`),
  KEY `promo_credit_expire_date_idx` (`promo_credit_expire_date`,`type`,`campaign_id`),
  KEY `promo_credit_expire_date_type_status_idx` (`promo_credit_expire_date`,`type`,`status`),
  KEY `status_value_change_date` (`status`,`last_value_change_date`),
  KEY `key_purchase_user_sfs_id` (`purchase_user_id`,`sfs_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `giftcards_status_log` (
  `giftcards_status_log_id` bigint unsigned NOT NULL,
  `giftcard_id` bigint unsigned NOT NULL,
  `status` varchar(30) NOT NULL,
  `amount_start` int unsigned NOT NULL,
  `amount_current` int unsigned NOT NULL,
  `amount_etsy` int unsigned NOT NULL,
  `is_locked` tinyint(1) NOT NULL DEFAULT '0',
  `last_amount_sync_date` int unsigned DEFAULT NULL,
  `process_status` varchar(30) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`giftcards_status_log_id`),
  KEY `status` (`status`),
  KEY `last_amount_sync_date` (`last_amount_sync_date`),
  KEY `giftcard_id` (`giftcard_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `holds` (
  `hold_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) NOT NULL,
  `is_active` tinyint unsigned NOT NULL,
  `reference_id` bigint unsigned DEFAULT NULL,
  `reference_type` varchar(10) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`hold_id`),
  UNIQUE KEY `reference_id` (`reference_id`,`reference_type`,`create_date`),
  KEY `shop_id` (`shop_id`,`is_active`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `inperson_signatures` (
  `signature_id` bigint unsigned NOT NULL,
  `cc_txn_id` bigint unsigned NOT NULL,
  `signature_encrypted` mediumblob NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`signature_id`),
  UNIQUE KEY `cc_txn_id` (`cc_txn_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `jpm_batches` (
  `jpm_batch_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `process_status` varchar(20) DEFAULT NULL,
  `iso_country_code` char(2) NOT NULL,
  `currency` varchar(3) NOT NULL,
  `type` varchar(20) NOT NULL,
  `item_count` int unsigned DEFAULT NULL,
  `credit_amount` bigint unsigned DEFAULT NULL,
  `upload_worker` varchar(255) DEFAULT NULL,
  `file_name` varchar(200) DEFAULT NULL,
  `upload_date` int unsigned DEFAULT NULL,
  `last_error_date` int unsigned DEFAULT NULL,
  `retry_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`jpm_batch_id`),
  KEY `job_id` (`disbursement_job_id`),
  KEY `status` (`status`),
  KEY `upload_date` (`upload_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `jpm_items` (
  `jpm_item_id` bigint unsigned NOT NULL,
  `jpm_batch_id` bigint unsigned DEFAULT NULL COMMENT 'Only used for H2H file based transfers, no need to batch GMP API items',
  `polling_batch_id` bigint unsigned DEFAULT NULL COMMENT 'Only used when polling for GMP item statuses',
  `disbursement_id` bigint unsigned NOT NULL,
  `end_to_end_id` varchar(35) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Unique Txn ID generated used for this disbursement (Max Char 15 for H2H, Max 35 for GMP, Unique)',
  `jpm_account_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'JPM account id that was used for the disbursement',
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `seller_name` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_address_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `reference_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'JPM TXN Status code',
  `item_status` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `disbursement_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'DISBURSEMENT/PENNYTEST',
  `gateway_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'GMP/BATCH',
  `polling_count` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`jpm_item_id`),
  UNIQUE KEY `end_to_end_id` (`end_to_end_id`),
  KEY `jpm_batch_idx` (`jpm_batch_id`),
  KEY `bank_account_idx` (`bank_account_id`),
  KEY `disbursement_idx` (`disbursement_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `reference_idx` (`reference_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ledgers` (
  `ledger_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `currency` varchar(3) NOT NULL,
  `iso_country_code` char(2) DEFAULT NULL,
  `disbursement_eligibility_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ledger_id`),
  UNIQUE KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `currency` (`currency`,`ledger_id`),
  KEY `disbursement_eligibility_date` (`disbursement_eligibility_date`),
  KEY `shop_id_disb_elig_date` (`shop_id`,`disbursement_eligibility_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ledgers_adjustments` (
  `ledger_adjustment_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `ledger_id` bigint unsigned DEFAULT NULL,
  `admin_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `staff_ldap` varchar(255) DEFAULT NULL,
  `amount` int NOT NULL,
  `currency` varchar(3) DEFAULT NULL,
  `adjustment_type` varchar(20) NOT NULL,
  `reason` varchar(20) NOT NULL,
  `comments` text NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`ledger_adjustment_id`),
  KEY `create_date` (`create_date`),
  KEY `admin_user_id` (`admin_user_id`),
  KEY `update_date` (`update_date`),
  KEY `staff_ldap` (`staff_ldap`(15)),
  KEY `shop_create_idx` (`shop_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ledgers_entries` (
  `ledger_entry_id` bigint unsigned NOT NULL,
  `ledger_id` bigint unsigned NOT NULL,
  `sequence` int unsigned NOT NULL COMMENT 'unique within the entries associated a particular ledger',
  `credit_amount` int unsigned DEFAULT NULL,
  `debit_amount` int unsigned DEFAULT NULL,
  `entry_type` varchar(25) NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `running_balance` int NOT NULL,
  PRIMARY KEY (`ledger_entry_id`),
  UNIQUE KEY `ledger_id` (`ledger_id`,`sequence`),
  UNIQUE KEY `reference_id_type` (`reference_id`,`entry_type`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `locks_admin_log` (
  `lock_admin_log_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `action_type` varchar(10) NOT NULL,
  `admin_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `reason` text,
  PRIMARY KEY (`lock_admin_log_id`),
  KEY `shop_id` (`shop_id`,`create_date`),
  KEY `admin_user_id` (`admin_user_id`,`create_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `payments_audit` (
  `payment_audit_id` bigint NOT NULL COMMENT 'pk (from generic tickets table)',
  `shop_id` bigint NOT NULL DEFAULT '0' COMMENT 'Maps to Shop. If 0, this is a GroupPayment Audit which is not Shop-specific',
  `group_payment_id` bigint NOT NULL COMMENT 'Maps to GCI_Payment',
  `shop_payment_id` bigint NOT NULL DEFAULT '0' COMMENT 'Maps to GCI_ShopPayment. If 0, this is a GroupPayment Audit',
  `receipt_id` bigint NOT NULL DEFAULT '0' COMMENT 'Maps to Shop_Receipt2.',
  `audit_group` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT 'The group the audit is a part of',
  `audit_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Type of audit',
  `audit_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'json blob of Audit data',
  `payment_data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'json blob of Payment state',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`payment_audit_id`,`create_date`),
  KEY `group_payment_id` (`group_payment_id`),
  KEY `shop_payment_id` (`shop_payment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `receipt_id` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Audit trails for GroupPayments and ShopPayments';

CREATE TABLE `payoneer_messages` (
  `payoneer_message_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `event_type` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `item_id` bigint unsigned NOT NULL DEFAULT '0',
  `failure_reason_code` int unsigned NOT NULL DEFAULT '0',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_status_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  `deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`payoneer_message_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `events_idx` (`environment`,`event_type`,`shop_id`,`item_id`),
  KEY `shop_idx` (`shop_id`),
  KEY `item_idx` (`item_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_accounts_batches` (
  `paypal_accounts_batch_id` bigint unsigned NOT NULL,
  `sequence_number` int unsigned NOT NULL DEFAULT '0' COMMENT '001-999 are valid for PP',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_count` int unsigned DEFAULT NULL,
  `file_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `raw_request` longtext COLLATE utf8mb4_unicode_ci,
  `raw_receipt_response` longtext COLLATE utf8mb4_unicode_ci,
  `raw_result_response` longtext COLLATE utf8mb4_unicode_ci,
  `upload_date` int unsigned DEFAULT NULL COMMENT 'timestamp: when batch was uploaded to Paypal',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_accounts_batch_id`),
  KEY `upload_date` (`upload_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `status` (`status`),
  KEY `file_name` (`file_name`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_batch` (
  `paypal_job_id` bigint unsigned NOT NULL,
  `paypal_batch_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_general_ci NOT NULL,
  `currency` char(3) COLLATE utf8mb4_general_ci NOT NULL,
  `disbursement_ids` text COLLATE utf8mb4_general_ci,
  `item_count` int DEFAULT NULL,
  `credit_amount` int DEFAULT NULL,
  `error_code` int DEFAULT NULL,
  `short_message` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `long_message` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `raw_response` text COLLATE utf8mb4_general_ci,
  `raw_request` text COLLATE utf8mb4_general_ci,
  `sent_date` int unsigned DEFAULT NULL,
  `received_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_job_id`,`paypal_batch_id`),
  KEY `status` (`status`),
  KEY `currency` (`currency`),
  KEY `sent_date` (`sent_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_batch_items` (
  `paypal_job_id` bigint NOT NULL,
  `paypal_batch_id` bigint NOT NULL,
  `paypal_batch_item_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_general_ci NOT NULL,
  `reference_type` varchar(20) COLLATE utf8mb4_general_ci NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `email_address` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_job_id`,`paypal_batch_id`,`paypal_batch_item_id`),
  KEY `email_address` (`email_address`(191)),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `reference_type` (`reference_type`,`reference_id`),
  KEY `status` (`status`),
  KEY `paypal_batch_id` (`paypal_batch_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_job` (
  `paypal_job_id` bigint unsigned NOT NULL,
  `batch_count` int unsigned DEFAULT NULL,
  `disbursement_item_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_job_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_messages` (
  `paypal_message_id` bigint unsigned NOT NULL,
  `resource_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `resource_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_type` varchar(180) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `message_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `paypal_txn_reference_id` bigint unsigned NOT NULL,
  `paypal_txn_id` bigint unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_message_id`),
  KEY `resource_type_and_id` (`resource_id`,`resource_type`),
  KEY `reference_id` (`paypal_txn_reference_id`),
  KEY `paypal_txn_id` (`paypal_txn_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_txn_references` (
  `paypal_txn_reference_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type_id` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `request_success` tinyint(1) NOT NULL DEFAULT '1',
  `paypal_object_type` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `paypal_object_id` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`paypal_txn_reference_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `txn_id_txn_type_id_reference_type` (`txn_id`,`txn_type_id`,`paypal_object_type`(32),`request_success`),
  KEY `object_id_object_type` (`paypal_object_id`(32),`paypal_object_type`(32))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_txns_shop_txns` (
  `paypal_txn_shop_txn_id` bigint unsigned NOT NULL,
  `paypal_txn_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `pending_reason` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_paypal_account_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `auth_transaction_id` varchar(36) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `amount` int NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_txn_shop_txn_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `paypal_txn_id` (`paypal_txn_id`,`shop_id`),
  KEY `auth_transaction_id` (`auth_transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `pci_messages` (
  `message_id` bigint NOT NULL,
  `pubsub_message_id` varchar(255) NOT NULL DEFAULT '',
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `environment` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`message_id`),
  KEY `pubsub_message_id_idx` (`pubsub_message_id`(32)),
  KEY `process_status_idx` (`process_status`,`environment`,`next_process_date`,`update_date`),
  KEY `key_create_date` (`create_date`),
  KEY `key_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `pci_proxy_req_log` (
  `req_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `txn_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(1000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `request_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `headers` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `test` tinyint NOT NULL,
  `token` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `token_indicator` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ap_cavv_indicator` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ap_eci_indicator` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `token_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `cc_tail` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`req_id`),
  KEY `token` (`token`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `environment` (`environment`),
  KEY `txn_id_txn_type` (`txn_id`,`txn_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `pci_proxy_resp_log` (
  `req_id` bigint unsigned NOT NULL,
  `status` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `response` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`req_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `penny_tests` (
  `penny_test_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `status` varchar(20) NOT NULL,
  `test_val1` tinyint unsigned NOT NULL,
  `test_val2` tinyint unsigned NOT NULL,
  `verified` tinyint(1) NOT NULL,
  `verified_date` int unsigned DEFAULT NULL,
  `incorrect_verifications` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`penny_test_id`),
  KEY `status` (`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `bank_account_id` (`bank_account_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `penny_tests2` (
  `penny_test_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) NOT NULL,
  `verified_date` int unsigned DEFAULT NULL,
  `status` varchar(20) NOT NULL,
  `process_status` varchar(20) DEFAULT NULL,
  `disbursement_method` varchar(20) NOT NULL,
  `disbursement_job_id` bigint unsigned DEFAULT NULL,
  `disbursement_batch_id` bigint unsigned DEFAULT NULL,
  `disbursement_item_id` bigint unsigned DEFAULT NULL,
  `disbursement_entity` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `last_error_date` int unsigned DEFAULT NULL,
  `retry_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `verification_attempts` int NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `verification_status` varchar(25) NOT NULL DEFAULT '',
  `execution_date` int unsigned NOT NULL DEFAULT '0',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `aborted_reason` varchar(64) NOT NULL DEFAULT '',
  PRIMARY KEY (`penny_test_id`),
  KEY `bank_account_id` (`bank_account_id`),
  KEY `disbursement_method` (`disbursement_method`),
  KEY `disbursement_batch_id` (`disbursement_batch_id`),
  KEY `disbursement_job_id_2` (`disbursement_job_id`,`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id` (`shop_id`),
  KEY `verification_status` (`verification_status`,`execution_date`),
  KEY `disbursement_method_entity_idx` (`disbursement_method`,`disbursement_entity`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `processor_mids` (
  `payin_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `settlement_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_gateway` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `merchant_account_type` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `mid` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `accounting_payin_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `accounting_settlement_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `label` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'A label that represents what the MID is used for. Should match the MID in most cases, unless the MID is numeric.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`payin_entity`,`settlement_entity`,`currency`,`payment_gateway`,`merchant_account_type`),
  KEY `mid` (`mid`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `processor_mids_legacy` (
  `payin_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `settlement_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_gateway` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `merchant_account_type` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `mid` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `accounting_payin_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `accounting_settlement_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `label` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'A label that represents what the MID is used for. Should match the MID in most cases, unless the MID is numeric.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`payin_entity`,`settlement_entity`,`currency`,`payment_gateway`,`merchant_account_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_account_messages` (
  `razorpay_message_id` bigint unsigned NOT NULL,
  `shop_id` bigint NOT NULL DEFAULT '0',
  `account_id` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_status_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `message_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`razorpay_message_id`),
  KEY `shop_id` (`shop_id`),
  KEY `account_id` (`account_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_items` (
  `razorpay_item_id` bigint unsigned NOT NULL,
  `disbursement_job_id` bigint unsigned NOT NULL,
  `payout_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utr` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `disbursement_id` bigint unsigned NOT NULL,
  `amount` bigint unsigned NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `iso_country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `retry_count` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`razorpay_item_id`),
  KEY `job_id_idx` (`disbursement_job_id`),
  KEY `bank_account_id_idx` (`bank_account_id`),
  KEY `disbursement_id_idx` (`disbursement_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `process_status_idx` (`process_status`),
  KEY `utr_idx` (`utr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_kyc_jobs` (
  `job_id` bigint unsigned NOT NULL,
  `job_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_type` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `record_count` int unsigned NOT NULL,
  `pass_count` int unsigned NOT NULL,
  `fail_count` int unsigned NOT NULL,
  `format_error_count` int unsigned NOT NULL DEFAULT '0',
  `base_file_name` varchar(150) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`job_id`),
  KEY `job_status_idx` (`job_status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_kyc_validation_records` (
  `validation_record_id` bigint unsigned NOT NULL,
  `file_number` int unsigned NOT NULL COMMENT 'equivalent to a batch number',
  `record_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `pan_verification_status_error` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `bank_account_verification_status_error` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gstin_verification_status_error` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `job_id` bigint unsigned DEFAULT NULL,
  `download_job_id` bigint unsigned DEFAULT NULL,
  `bank_account_id` bigint unsigned DEFAULT NULL,
  `pan_token_id` bigint unsigned DEFAULT NULL,
  `user_identity_id` bigint unsigned DEFAULT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `notes` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`validation_record_id`),
  KEY `job_id_file_number_idx` (`job_id`,`file_number`),
  KEY `job_id_shop_idx` (`job_id`,`shop_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `record_status_idx` (`record_status`),
  KEY `download_job_idx` (`download_job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_messages` (
  `razorpay_message_id` bigint unsigned NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `payout_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_id` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `utr` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `failure_reason` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_status_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `message_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`razorpay_message_id`),
  UNIQUE KEY `event_id_idx` (`event_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `key_reference_id` (`reference_id`),
  KEY `key_payout_id` (`payout_id`),
  KEY `key_type_create_date` (`event_type`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_payinmessages` (
  `razorpay_payinmessage_id` bigint unsigned NOT NULL,
  `razorpay_order_id` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `razorpay_payment_id` varchar(18) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `event_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_status` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL,
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `error_reason` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_status_date` int unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `message_body` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'for different mids',
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`razorpay_payinmessage_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `key_razorpay_order_id` (`razorpay_order_id`),
  KEY `key_razorpay_payment_id` (`razorpay_payment_id`),
  KEY `key_type_create_date` (`event_type`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `schemanator_dummy_test` (
  `c1` int NOT NULL DEFAULT '0',
  `id` int NOT NULL,
  `c3` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_beneficial_owners` (
  `beneficial_owner_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a beneficial owner',
  `shop_id` bigint unsigned DEFAULT NULL COMMENT 'Shop identifier that the beneficial owner belongs to',
  `user_id` bigint unsigned DEFAULT NULL COMMENT 'User identifier that the beneficial owner belongs to',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Full name',
  `last_four_ssn` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Last four social security number digits',
  `birthday_year` smallint DEFAULT NULL,
  `birthday_month` tinyint DEFAULT NULL,
  `birthday_day` tinyint DEFAULT NULL,
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `user_address_id` bigint unsigned DEFAULT NULL COMMENT 'User address associated to the beneficial owner',
  `primary` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Flag indicating if a beneficial owner is the primary contact for a shop',
  `relationship` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Enumerated field that explains a persons relationship to the shop (e.g. owner or employee)',
  `taxpayer_id_token_id` bigint unsigned DEFAULT NULL COMMENT 'Optional taxpayer identifier token id associated to the beneficial owner',
  `is_active` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating if this beneficial owner is active',
  `ownership_percentage` tinyint unsigned DEFAULT NULL COMMENT 'percentage of the business this beneficial owner owns, should have a max of 100',
  PRIMARY KEY (`beneficial_owner_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Contains beneficial owners and primary contacts for a shop';

CREATE TABLE `shop_business_registration` (
  `shop_id` bigint unsigned NOT NULL,
  `registration_number_encrypted` varchar(255) NOT NULL,
  `registration_number_type` varchar(255) NOT NULL,
  `jurisdiction` varchar(255) DEFAULT NULL,
  `user_business_registration_id` bigint unsigned DEFAULT NULL COMMENT 'User business registration id',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_business_verification_attempt_watchlist_hits` (
  `business_verification_attempt_watchlist_hit_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a business verification attempt watchlist match',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the watchlist match belongs to',
  `business_verification_attempt_id` bigint unsigned NOT NULL COMMENT 'Business verification attempt the match belongs to',
  `name` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Watchlist name',
  `description` text COLLATE utf8mb4_unicode_ci COMMENT 'Description of the reason for being on a watchlist',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`business_verification_attempt_watchlist_hit_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_business_verification_attempts` (
  `business_verification_attempt_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a business verification attempt',
  `shop_id` bigint unsigned DEFAULT NULL COMMENT 'Shop identifier that the business verification attempt belongs to',
  `etsy_payment_lock_id` bigint unsigned DEFAULT NULL COMMENT 'Lock associated to this attempt',
  `registration_number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Business registration number used in the verification attempt',
  `jurisdiction` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Jurisdiction in country where business is registered',
  `user_address_id` bigint unsigned NOT NULL COMMENT 'User Address ID used in the verification attempt',
  `vendor` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'trulioo' COMMENT 'Vendor providing the verification request',
  `transaction_id` varchar(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Transaction ID used by the vendor',
  `response_id` varchar(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Response identifier',
  `result` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'unknown' COMMENT 'Result of the verification (e.g. pass or fail)',
  `is_on_watchlist` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'If the business was found to be on a watchlist',
  `scope` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'To store additional information about the type of check being performed ',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `verification_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'identity_and_watchlist' COMMENT 'Type of verification that was performed by the vendor (i.e. business identity or watchlist)',
  `identity_verification_request_id` bigint unsigned DEFAULT NULL COMMENT 'identify verification request associated to this attempt',
  PRIMARY KEY (`business_verification_attempt_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `etsy_payment_lock_id` (`etsy_payment_lock_id`),
  KEY `identity_verification_request_id` (`identity_verification_request_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `subscription_plans` (
  `plan_id` bigint unsigned NOT NULL,
  `name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `amount` int NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `interval_unit` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `interval_count` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`plan_id`),
  UNIQUE KEY `plan_signature` (`name`,`amount`,`currency`,`interval_unit`,`interval_count`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `svb_holidays` (
  `holiday` int unsigned NOT NULL,
  `name` varchar(50) DEFAULT NULL,
  `year` int NOT NULL,
  `month` tinyint NOT NULL,
  `day` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`holiday`),
  KEY `create_date` (`create_date`),
  KEY `year_month_day_idx` (`year`,`month`,`day`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tax_form_eligibility_states` (
  `eligibility_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `tax_form_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `year` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `taxpayer_id_token` bigint unsigned NOT NULL DEFAULT '0',
  `eligibility_state` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`eligibility_id`),
  KEY `taxpayer_id_token_idx` (`taxpayer_id_token`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_tax_form_type_year_idx` (`shop_id`,`tax_form_type`,`year`),
  KEY `shop_tax_form_type_create_date_idx` (`shop_id`,`tax_form_type`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `taxpayer_id_tokens` (
  `token_id` bigint unsigned NOT NULL,
  `taxpayer_id_encrypted` varchar(255) DEFAULT NULL,
  `taxpayer_id_last_four` varchar(4) DEFAULT NULL,
  `taxpayer_id_type` varchar(12) NOT NULL DEFAULT 'NOT_PROVIDED' COMMENT 'one of: SSN, EIN, VAT, GST, NOT_PROVIDED',
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`token_id`),
  KEY `taxpayer_id_last_four_and_type` (`taxpayer_id_last_four`,`taxpayer_id_type`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `threeds_browser_info` (
  `threeds_browser_info_id` bigint unsigned NOT NULL,
  `cc_txn_id` bigint unsigned NOT NULL,
  `user_agent` varchar(4000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `accept_header` varchar(4000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `language` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `color_depth` int unsigned NOT NULL,
  `screen_height` int unsigned NOT NULL,
  `screen_width` int unsigned NOT NULL,
  `time_zone_offset` int NOT NULL,
  `java_enabled` tinyint NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`threeds_browser_info_id`),
  KEY `txn_id_idx` (`cc_txn_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vitess_etet` (
  `id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `f_varchar` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `wpap_reconciliation` (
  `wpap_reconciliation_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `raw_request` longtext COLLATE utf8mb4_unicode_ci,
  `raw_response` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`wpap_reconciliation_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `wpap_reconciliation_txns` (
  `wpap_reconciliation_txn_id` bigint unsigned NOT NULL,
  `wpap_reconciliation_id` bigint unsigned NOT NULL,
  `reference_id` bigint unsigned DEFAULT NULL,
  `epacs_reference` varchar(36) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `merchant_reference` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `unique_reference` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `amount` int NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_code` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `posting_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`wpap_reconciliation_id`,`wpap_reconciliation_txn_id`),
  UNIQUE KEY `epacs_reference` (`epacs_reference`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `youlend_messages` (
  `youlend_message_id` bigint unsigned NOT NULL,
  `event_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `lead_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  PRIMARY KEY (`youlend_message_id`),
  KEY `environment` (`environment`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `lead_id` (`lead_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

