CREATE DATABASE etsy_shard_002_0_A;
USE etsy_shard_002_0_A;

CREATE TABLE `actioning` (
  `actioning_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of an actioning',
  `user_id` bigint unsigned NOT NULL COMMENT 'Associated user id (used for sharding)',
  `target_type` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Target type (e.g. shop)',
  `target_id` bigint unsigned NOT NULL COMMENT 'Target identifier (e.g. shop_id)',
  `actioning_type_id` bigint unsigned NOT NULL COMMENT 'Associated action type id',
  `actioning_type_configuration_id` bigint unsigned NOT NULL COMMENT 'Associated configuration required for the given action (e.g. action type of MASS_CONVO, with configuration for the LVM_MESSAGE ))',
  `additional_params` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT (_utf8mb4'') COMMENT 'JSON optional arguments to pass to the related action (eg. MASS CONVO template identifier)',
  `actioning_source_id` varchar(250) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Source type identifier, if it has an associated record (e.g. user_id)',
  `actioning_source_type` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Source target type (e.g. DAG | Agent )',
  `one_time_action_key` varchar(250) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Key used to validate actionings that are not idempotent, such as email sends',
  `is_adhoc` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Boolean; 1 if actioning is for immediate processing, 0 scheduled actioning',
  `success_date` int unsigned NOT NULL,
  `failure_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`actioning_id`),
  KEY `actioning_job_query_idx` (`actioning_type_id`,`actioning_type_configuration_id`,`success_date`,`failure_date`,`is_adhoc`),
  KEY `success_date_idx` (`success_date`),
  KEY `failure_date_idx` (`failure_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `actioning_inclusions_exclusions` (
  `actioning_inclusion_exclusion_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of an actioning exlusion inclusion',
  `user_id` bigint unsigned NOT NULL COMMENT 'Associated user id (used for sharding)',
  `target_type` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Target type (e.g. shop)',
  `target_id` bigint unsigned NOT NULL COMMENT 'Target identifier (e.g. shop_id)',
  `filter_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Identify if the filter is an exclusion or an inclusion',
  `actioning_type_configuration_id` bigint unsigned NOT NULL COMMENT 'Identify the associated configuration required for the exclusion/inclusion (e.g. action type of MASS_CONVO, with configuration for the LVM_MESSAGE ))',
  `actioning_type_id` bigint unsigned NOT NULL COMMENT 'Identify the (e.g. action type of MASS_CONVO, with configuration for the LVM_MESSAGE ))',
  `actioning_id` bigint unsigned DEFAULT '0' COMMENT 'Actioning id foreign key',
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`actioning_inclusion_exclusion_id`),
  KEY `actioning_job_query_filter_idx` (`actioning_type_configuration_id`,`actioning_type_id`,`filter_type`,`start_date`,`end_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `activity` (
  `activity_id` bigint unsigned NOT NULL,
  `owner_id` bigint unsigned NOT NULL COMMENT 'The owner of this activity. (Shard key.)',
  `owner_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what owner_id identifies. (Shard key.)',
  `subject_id` bigint unsigned NOT NULL COMMENT 'A user_id, shop_id, etc; the thing that caused the activity.',
  `subject_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what subject_id identifies.',
  `verb_id` smallint unsigned NOT NULL COMMENT 'Indicates what kind of action this is.',
  `object_id` bigint unsigned NOT NULL COMMENT 'The target of the activity.',
  `object_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what object_id identifies.',
  `creation_time` int unsigned NOT NULL,
  `update_time` int unsigned NOT NULL DEFAULT '0',
  `deleted` int unsigned NOT NULL DEFAULT '0' COMMENT 'Zero if live, otherwise the user_id that deleted the activity.',
  `public` int unsigned NOT NULL DEFAULT '1',
  `user_id` bigint unsigned NOT NULL COMMENT 'The user_id that caused this activity. Auditing. Not necessarily the subject_id.',
  `circular_unique_id` bigint unsigned NOT NULL DEFAULT '0',
  `comment_count` int NOT NULL DEFAULT '0' COMMENT 'denormalized comment count',
  `last_comment_time` int unsigned NOT NULL DEFAULT '0' COMMENT 'denormalized comment update time',
  PRIMARY KEY (`activity_id`,`creation_time`),
  KEY `activity_by_owner_and_update_idx` (`owner_id`,`owner_type_id`,`update_time`),
  KEY `activity_by_owner_public_idx` (`owner_id`,`owner_type_id`,`creation_time`,`public`),
  KEY `activity_by_subject_public_verb` (`subject_id`,`subject_type_id`,`public`,`verb_id`),
  KEY `activity_by_subject_deleted_verb` (`subject_id`,`subject_type_id`,`deleted`,`verb_id`),
  KEY `object_id_object_type_id` (`object_id`,`object_type_id`),
  KEY `updatetime` (`update_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores a stream of actions taken by one subject.';

CREATE TABLE `activity_circular` (
  `activity_id` bigint unsigned NOT NULL COMMENT 'Circular activity ID, generated by the circular ticket table',
  `owner_id` bigint unsigned NOT NULL COMMENT 'The owner of this activity. (Shard key.)',
  `owner_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what owner_id identifies. (Shard key.)',
  `subject_id` bigint unsigned NOT NULL COMMENT 'A user_id, shop_id, etc, the thing that caused the activity.',
  `subject_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what subject_id identifies.',
  `verb_id` smallint unsigned NOT NULL COMMENT 'Indicates what kind of action this is.',
  `object_id` bigint unsigned NOT NULL COMMENT 'The target of the activity',
  `object_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what object_id identifies.',
  `creation_time` int unsigned NOT NULL,
  `update_time` int unsigned NOT NULL DEFAULT '0',
  `deleted` int unsigned NOT NULL DEFAULT '0' COMMENT 'Zero if live, otherwise the user_id that deleted the activity.',
  `public` int unsigned NOT NULL DEFAULT '1',
  `user_id` bigint unsigned DEFAULT NULL,
  `unique_activity_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`owner_id`,`owner_type_id`,`activity_id`),
  KEY `activity_by_subject_public_idx` (`subject_id`,`subject_type_id`,`creation_time`,`public`),
  KEY `activity_by_owner_public_idx` (`owner_id`,`owner_type_id`,`creation_time`,`public`),
  KEY `activity_by_subject_public_verb` (`subject_id`,`subject_type_id`,`public`,`verb_id`),
  KEY `activity_by_subject_deleted_verb` (`subject_id`,`subject_type_id`,`deleted`,`verb_id`),
  KEY `object_id_object_type_id` (`object_id`,`object_type_id`),
  KEY `createtime` (`creation_time`),
  KEY `activity_unique_id_idx` (`unique_activity_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores a stream of actions taken by one subject.';

CREATE TABLE `activity_migration` (
  `owner_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `odd_activity_id_max` bigint unsigned DEFAULT NULL,
  `even_activity_id_max` bigint unsigned DEFAULT NULL,
  `last_circular_activity_id` bigint unsigned DEFAULT NULL,
  `backfill_complete` tinyint unsigned DEFAULT '0',
  `update_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`owner_id`,`owner_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `activity_owner_block_list` (
  `activity_id` bigint unsigned NOT NULL COMMENT 'ID of the activity that the user specifically blocked',
  `feed_owner_id` bigint unsigned NOT NULL COMMENT 'The owner of this feed, the one who did the block',
  `feed_owner_type_id` smallint unsigned NOT NULL COMMENT 'The type of the feed owner - user, shop etc.',
  `owner_id` bigint unsigned NOT NULL COMMENT 'The owner of this activity. (Shard key)',
  `owner_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what owner_id identifies. (Shard key)',
  `subject_id` bigint unsigned NOT NULL COMMENT 'A user_id, shop_id, etc the thing that caused the activity.',
  `subject_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what subject_id identifies.',
  `verb_id` smallint unsigned NOT NULL COMMENT 'Indicates what kind of action this is.',
  `object_id` bigint unsigned NOT NULL COMMENT 'The target of the activity.',
  `object_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what object_id identifies.',
  `activity_creation_time` int unsigned NOT NULL COMMENT 'Time when the original activity was created',
  `block_type` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Type of block, to allow more flexible blocking',
  `feed_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'owner',
  `deleted` int unsigned NOT NULL DEFAULT '0' COMMENT 'Zero if block is active, 1 otherwise.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`feed_owner_id`,`feed_owner_type_id`,`block_type`,`activity_id`,`feed_type`),
  KEY `deleted_idx` (`deleted`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store feed items blocked by the owner';

CREATE TABLE `activity_reference` (
  `activity_id` bigint unsigned NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `suppressed` int unsigned NOT NULL DEFAULT '0',
  `appearance_count` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`activity_id`,`owner_id`,`owner_type_id`),
  KEY `owner_id_owner_type_id_idx` (`owner_id`,`owner_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='A feed owner''s instance of an activity owned by someone else';

CREATE TABLE `ads_attributed_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `click_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned DEFAULT NULL,
  `customer_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `browser_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `channel` int unsigned NOT NULL,
  `clicked_listing_id` bigint unsigned NOT NULL,
  `click_date` int unsigned NOT NULL,
  `purchase_date` int unsigned NOT NULL,
  `gms` int unsigned NOT NULL,
  `seller_gms` int unsigned NOT NULL DEFAULT '0' COMMENT 'The amount the seller receives in the ledger currency [OSA-2028, go/osa_seller_gms]',
  `acquisition_fee` int unsigned NOT NULL,
  `status` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `gms_usd` int unsigned NOT NULL DEFAULT '0',
  `seller_gms_usd` int unsigned NOT NULL DEFAULT '0' COMMENT 'The amount the seller receives in USD [OSA-2028, go/osa_seller_gms]',
  `acquisition_fee_usd` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `usd_fx_rate` int unsigned NOT NULL DEFAULT '0',
  `purchase_event_guid` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `sdt_credit` int unsigned NOT NULL DEFAULT '0',
  `sdt_credit_usd` int unsigned NOT NULL DEFAULT '0',
  `applied_sdt_credit_rate` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `clicked_listing_id` (`clicked_listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_purchase_click_idx` (`shop_id`,`purchase_date`,`click_date`),
  KEY `status` (`status`),
  KEY `purchase_event_guid` (`purchase_event_guid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ads_attributed_receipts_adjustments` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `ledger_entry_id` bigint unsigned NOT NULL COMMENT 'The ID of the ledger entry for the credit reversal or fee refund',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `gms_amount_refunded` int unsigned NOT NULL COMMENT 'Total value of items, giftwrap, and shipping being refunded',
  `acquisition_fee_adjustment` int unsigned NOT NULL DEFAULT '0' COMMENT 'Offsite ads fee refund',
  `sdt_credit_adjustment` int unsigned NOT NULL DEFAULT '0' COMMENT 'Seller Driven Traffic credit reversal',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`receipt_id`,`ledger_entry_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ads_attribution_clicks` (
  `shop_id` bigint unsigned NOT NULL,
  `click_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `customer_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'May have been backfilled after click_date',
  `browser_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `channel` int unsigned NOT NULL,
  `click_date` int unsigned NOT NULL,
  `external_click_id` varchar(300) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL DEFAULT '1',
  `click_event_guid` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `widget_id` bigint unsigned DEFAULT '0' COMMENT 'Not every click came from a widget; non-null defaults preferred',
  `utm_medium` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_source` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_campaign` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_term` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_content` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `affil` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_name` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`click_id`),
  UNIQUE KEY `unique_channel_external_click_id` (`channel`,`external_click_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `click_event_guid` (`click_event_guid`),
  KEY `shop_channel_click_date_idx` (`shop_id`,`channel`,`click_date`),
  KEY `shop_user_click_date_idx` (`shop_id`,`user_id`,`click_date`),
  KEY `shop_browser_click_date_idx` (`shop_id`,`browser_id`,`click_date`),
  KEY `shop_customer_click_date_idx` (`shop_id`,`customer_id`,`click_date`),
  KEY `customer_click_date_idx` (`customer_id`,`click_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ads_attribution_fee_rates` (
  `shop_id` bigint unsigned NOT NULL,
  `rate_fee_percent` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `update_reason` int unsigned NOT NULL DEFAULT '0',
  `updated_by_staff_id` bigint unsigned NOT NULL DEFAULT '0',
  `gms_tier` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`update_date`),
  KEY `updated_by_staff_id` (`updated_by_staff_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ads_credit_limit` (
  `shop_id` bigint unsigned NOT NULL,
  `channel` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'channel: PROLIST = 1, GOOGLEADS = 2 (Deprecated)',
  `current_limit` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `previous_limit` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `score` tinyint unsigned NOT NULL DEFAULT '0',
  `multiplier` tinyint unsigned NOT NULL DEFAULT '0',
  `last_due_closing_balance` int NOT NULL DEFAULT '0',
  `last_payment_amount` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `calculation_log` varchar(2048) DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`channel`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store credit limits for prolist and google ads';

CREATE TABLE `ads_credit_limit_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `channel` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'channel: PROLIST = 1, GOOGLEADS = 2 (Deprecated)',
  `current_limit` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `previous_limit` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `score` tinyint unsigned NOT NULL DEFAULT '0',
  `multiplier` tinyint unsigned NOT NULL DEFAULT '0',
  `last_due_closing_balance` int NOT NULL DEFAULT '0',
  `last_payment_amount` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `calculation_log` varchar(2048) DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store historical credit limits for prolist and google ads';

CREATE TABLE `ads_shared_incentive` (
  `shop_id` bigint unsigned NOT NULL,
  `incentive_type` int unsigned NOT NULL COMMENT 'enum for incentive type',
  `incentive_start_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`incentive_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT=' ads incentives and coupon stats by incentive type and shop id';

CREATE TABLE `ads_shared_incentive_qualifying_budget` (
  `shop_id` bigint NOT NULL DEFAULT '0',
  `qualifying_budget` bigint unsigned NOT NULL DEFAULT '0',
  `incentive_type` int unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`incentive_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store qualifying budget for incentives';

CREATE TABLE `advector_billing_ledger` (
  `advector_billing_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `ad_product_billing_id` bigint NOT NULL,
  `ledger_entry_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_id` bigint NOT NULL DEFAULT '0',
  `charge_date` int NOT NULL,
  `amount` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`advector_billing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `advector_budget_balancer_steps` (
  `shop_id` bigint unsigned NOT NULL,
  `step_number` int NOT NULL DEFAULT '0',
  `direction` int NOT NULL,
  `step_size` int NOT NULL,
  `metric_change` int NOT NULL,
  `reason` int NOT NULL,
  `create_date` int NOT NULL,
  `old_split` float NOT NULL,
  `new_split` float NOT NULL,
  `period_start` int NOT NULL DEFAULT '0',
  `period_end` int NOT NULL DEFAULT '0',
  `total_clicks` int NOT NULL DEFAULT '0',
  `prolist_clicks` int NOT NULL DEFAULT '0',
  `google_clicks` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `advector_campaign_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `budget` int NOT NULL COMMENT 'USD in pennies',
  `budget_split` float NOT NULL,
  `status` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `af_rated_tastemakers` (
  `bucket` char(64) NOT NULL COMMENT 'A bucket/category name that onboarding user will select as a preference',
  `tastemaker_user_id` bigint unsigned NOT NULL,
  `is_approved` tinyint(1) NOT NULL,
  `in_dataset` tinyint(1) NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `hash_bucket` int NOT NULL COMMENT 'For sharding via ArbitraryKeyHash',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`bucket`,`tastemaker_user_id`),
  KEY `bucket` (`bucket`,`is_approved`,`in_dataset`,`tastemaker_user_id`) COMMENT 'Serve time will query for approved tastemakers for a given category',
  KEY `hash_bucket` (`hash_bucket`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table for serving approved tastemakers for a given bucket';

CREATE TABLE `af_tastemaker_ratings` (
  `bucket` char(64) NOT NULL COMMENT 'A bucket/category name that onboarding user will select as a preference',
  `tastemaker_user_id` bigint unsigned NOT NULL,
  `is_approved` tinyint(1) NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `hash_bucket` int NOT NULL COMMENT 'For sharding via ArbitraryKeyHash',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`bucket`,`tastemaker_user_id`,`staff_id`),
  KEY `bucket` (`bucket`,`tastemaker_user_id`,`update_date`),
  KEY `hash_bucket` (`hash_bucket`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table for logging tastemaker approvals, for auditing and examining inter-anotater agreement.  Not used at serve time.';

CREATE TABLE `affiliate_campaign_publisher_lookup` (
  `campaign_publisher_id` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `publisher_id` bigint unsigned NOT NULL,
  `type` tinyint unsigned NOT NULL,
  `external_campaign_publisher_id` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`campaign_publisher_id`),
  KEY `type_external_campaign_publisher_id_idx` (`type`,`external_campaign_publisher_id`(191)),
  KEY `status_idx` (`status`),
  KEY `hash_bucket_idx` (`hash_bucket`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `affiliate_campaign_publishers` (
  `campaign_id` bigint unsigned NOT NULL,
  `publisher_id` bigint unsigned NOT NULL,
  `campaign_publisher_id` bigint unsigned NOT NULL,
  `type` tinyint unsigned NOT NULL,
  `external_campaign_publisher_id` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`campaign_id`,`publisher_id`),
  KEY `type_external_campaign_publisher_id_idx` (`type`,`external_campaign_publisher_id`(191)),
  KEY `status_idx` (`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `affiliate_owner_publishers` (
  `owner_type_id` smallint unsigned NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  `publisher_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`owner_type_id`,`owner_id`,`publisher_id`),
  KEY `status_idx` (`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `affiliate_publisher_campaigns` (
  `publisher_id` bigint unsigned NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `campaign_publisher_id` bigint unsigned NOT NULL,
  `type` tinyint unsigned NOT NULL,
  `external_campaign_publisher_id` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`publisher_id`,`campaign_id`),
  KEY `type_external_campaign_publisher_id_idx` (`type`,`external_campaign_publisher_id`(191)),
  KEY `status_idx` (`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `affiliate_publisher_owners` (
  `publisher_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`publisher_id`,`owner_type_id`,`owner_id`),
  KEY `status_idx` (`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `affiliate_users` (
  `user_id` bigint unsigned NOT NULL,
  `network_type` tinyint NOT NULL,
  `affiliate_key` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `zanox_subkey` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_user_submitted` tinyint(1) NOT NULL DEFAULT '0',
  `country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `auditor_staff_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`network_type`,`affiliate_key`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `is_user_submitted` (`is_user_submitted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `api_key_access_tokens` (
  `api_key_access_token_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `oauth_token` varchar(128) NOT NULL DEFAULT '',
  `oauth_token_secret` varchar(100) NOT NULL DEFAULT '',
  `oauth_verifier` varchar(100) NOT NULL DEFAULT '',
  `scope` varchar(4096) NOT NULL DEFAULT '',
  `active` tinyint(1) NOT NULL DEFAULT '0',
  `api_key_request_token_id` bigint unsigned NOT NULL DEFAULT '0',
  `revoke_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`api_key_id`,`api_key_access_token_id`),
  KEY `apikey_user` (`api_key_id`,`user_id`),
  KEY `apikey_token` (`api_key_id`,`oauth_token`),
  KEY `apikey_date` (`api_key_id`,`create_date`),
  KEY `created` (`create_date`),
  KEY `updated` (`update_date`),
  KEY `oauth_token_idx` (`oauth_token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `api_key_callbackuri` (
  `api_key_callbackuri_id` bigint unsigned NOT NULL,
  `application_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL,
  `callbackuri` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `active` tinyint unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`application_id`,`api_key_callbackuri_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `api_key_request_tokens` (
  `api_key_request_token_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `oauth_token` varchar(128) NOT NULL DEFAULT '',
  `oauth_token_secret` varchar(100) NOT NULL DEFAULT '',
  `oauth_verifier` varchar(100) NOT NULL DEFAULT '',
  `oauth_callback` varchar(255) NOT NULL DEFAULT '',
  `scope` varchar(4096) NOT NULL DEFAULT '',
  `approved` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`api_key_id`,`api_key_request_token_id`),
  KEY `apikey_user` (`api_key_id`,`user_id`),
  KEY `apikey_token` (`api_key_id`,`oauth_token`),
  KEY `oauth_token_idx` (`oauth_token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `api_request_log_guest_user` (
  `api_request_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `reference_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `headers` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `request_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `http_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `response` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`api_request_log_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `id_type` (`reference_id`,`reference_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `api_request_log_user` (
  `api_request_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `reference_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `headers` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `request_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `http_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `response` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`api_request_log_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `id_type` (`reference_id`,`reference_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `apple_attestation` (
  `device_uaid` varbinary(128) NOT NULL DEFAULT '',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `hashed_challenge` binary(32) NOT NULL DEFAULT '\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0',
  `public_key` blob NOT NULL,
  `public_key_id` varbinary(44) NOT NULL DEFAULT '',
  `apple_environment` int unsigned NOT NULL DEFAULT '0',
  `receipt` blob NOT NULL,
  `receipt_expiration_date` int unsigned NOT NULL DEFAULT '0',
  `signature_counter` int unsigned NOT NULL DEFAULT '0',
  `token` blob NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`device_uaid`,`public_key_id`,`apple_environment`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `apple_attestation_public_key_id_device` (
  `device_uaid` varbinary(128) NOT NULL DEFAULT '',
  `public_key_id` varbinary(44) NOT NULL DEFAULT '',
  `apple_environment` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`public_key_id`,`device_uaid`,`apple_environment`),
  UNIQUE KEY `public_key_id_unique` (`public_key_id`,`apple_environment`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `application_data` (
  `application_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `excerpt` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `application_domain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `mashery_account` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `mashery_key_v2` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `approver_admin_id` bigint unsigned NOT NULL DEFAULT '0',
  `approver_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `users_of_app` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `charge` tinyint(1) DEFAULT NULL,
  `app_behavior` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `approval_description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status_reason` tinyint DEFAULT NULL,
  `allowed_user_ids` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `count_of_auth_users` int unsigned NOT NULL DEFAULT '0',
  `buyer_email_access` tinyint unsigned NOT NULL DEFAULT '0',
  `rank` int NOT NULL DEFAULT '100',
  PRIMARY KEY (`application_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `application_images` (
  `application_image_id` bigint unsigned NOT NULL,
  `application_id` bigint unsigned NOT NULL,
  `rank` int NOT NULL DEFAULT '0',
  `active` tinyint unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `storage_volume` smallint NOT NULL DEFAULT '0',
  `version` int NOT NULL DEFAULT '0',
  `secret` varchar(20) NOT NULL DEFAULT '',
  `file_extension` varchar(8) DEFAULT NULL,
  PRIMARY KEY (`application_image_id`),
  KEY `app_rank_idx` (`application_id`,`rank`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `arbitrary_context` (
  `arbitrary_context_id` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `object_type_id` bigint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `type` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`arbitrary_context_id`),
  KEY `type_idx` (`type`),
  KEY `hash_bucket_idx` (`hash_bucket`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `athena_session` (
  `user_id` bigint unsigned NOT NULL,
  `session_id` bigint unsigned NOT NULL,
  `type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `authenticator` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `reason` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `www_key_hash` char(56) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `apex_key_hash` char(56) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `legacy_token` char(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_agent` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `client_ip` varchar(39) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `device_id` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `active_date` int unsigned NOT NULL,
  `expire_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`session_id`),
  KEY `legacy_token_index` (`user_id`,`legacy_token`),
  KEY `expire_date_index` (`expire_date`),
  KEY `update_date_index` (`update_date`),
  KEY `user_id_session_type` (`user_id`,`state`,`type`),
  KEY `client_ip_index` (`user_id`,`client_ip`),
  KEY `device_id_index` (`user_id`,`device_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `athena_session_context` (
  `user_id` bigint unsigned NOT NULL,
  `session_id` bigint unsigned NOT NULL,
  `attribute` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`session_id`,`attribute`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `attributee_attribution` (
  `attributee_id` bigint unsigned NOT NULL DEFAULT '0',
  `action_type_id` smallint unsigned NOT NULL,
  `object_type_id` smallint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `object_shardifier_id` bigint unsigned DEFAULT NULL,
  `favoriter_id` bigint unsigned NOT NULL,
  `orig_attributee_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`attributee_id`,`object_id`,`object_type_id`,`action_type_id`,`favoriter_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `audio` (
  `audio_id` bigint unsigned NOT NULL,
  `audio_type_id` int unsigned NOT NULL DEFAULT '0',
  `provider_type_id` bigint unsigned NOT NULL,
  `provider_token` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `provider_status` int unsigned NOT NULL DEFAULT '0',
  `duration` int NOT NULL DEFAULT '0',
  `filename` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `size_bytes` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `owner_type_id` smallint NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`audio_id`,`audio_type_id`),
  KEY `owner_index` (`owner_id`,`owner_type_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `auto_blocking_renewals_bucketing_state` (
  `user_id` bigint unsigned NOT NULL,
  `is_enabled` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`is_enabled`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `autocoupon_attribution` (
  `shop_id` bigint unsigned NOT NULL,
  `autocoupon_attribution_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint NOT NULL,
  `promotion_id` bigint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `send_date` int unsigned DEFAULT '0',
  PRIMARY KEY (`shop_id`,`autocoupon_attribution_id`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_shop_promotion_send_date` (`shop_id`,`promotion_id`,`send_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `back_in_stock_waitlist_subscription` (
  `subscription_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `subscriber_id` bigint unsigned NOT NULL,
  `is_notified` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `product_offering_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`subscription_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_listing_id_idx` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_prerequisites` (
  `bank_account_prerequisite_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a bank account requirement',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the this requirement belongs to',
  `bank_account_id` bigint unsigned DEFAULT NULL COMMENT 'Bank account identifier that this requirement belongs to',
  `group` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Cohort group shop was in when the prerequisite was created (if applicable)',
  `reason` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'BANK_VERIFICATION' COMMENT 'Reason for this prerequisite (BANK_VERIFICATION, NAME_MATCH, ...)',
  `status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Prerequisites status (PENDING, FIRST_WARN, SECOND_WARN, SHOP_SUSPENDED, DONE)',
  `required_from_date` int unsigned NOT NULL COMMENT 'Date which the prerequisite became required',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to mark a requirement as deleted',
  `aborted_date` int unsigned DEFAULT NULL COMMENT 'Date which the prerequisite was aborted',
  `aborted_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason the prerequisite was aborted',
  `aborted_actor` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'User identifier that aborted the requirement',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  `is_on_hold` tinyint DEFAULT NULL COMMENT 'Flag to mark a requirement as on hold',
  `hold_admin_id` bigint unsigned DEFAULT NULL COMMENT 'User identifier that put the requirement on hold',
  `hold_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason for putting the requirement on hold',
  `hold_notes` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Notes for putting the requirement on hold',
  `hold_from_date` int unsigned DEFAULT NULL COMMENT 'Date which the prerequisite was put on hold',
  `restart_date` int unsigned DEFAULT NULL COMMENT 'Date which the prerequisite was restarted',
  `restart_notes` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Notes for restarting the requirement',
  `restart_admin_id` bigint unsigned DEFAULT NULL COMMENT 'User identifier that restarted the requirement',
  `restart_ticket_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'URL to the ticket (Zendesk)',
  `is_rejected` tinyint DEFAULT NULL COMMENT 'Flag to mark a requirement as rejected',
  `rejected_date` int unsigned DEFAULT NULL COMMENT 'Date which the prerequisite was rejected',
  `rejected_admin_id` bigint unsigned DEFAULT NULL COMMENT 'User identifier that rejected the requirement',
  `rejected_notes` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Notes for rejecting the requirement',
  `is_manually_verified` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to mark a requirement as manually verified',
  `manually_verified_by` bigint unsigned DEFAULT NULL COMMENT 'User who manually verified the requirement',
  `manually_verified_date` int unsigned DEFAULT NULL COMMENT 'Date when the requirement was manually verified',
  `manually_verified_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason for manually verifying the requirement',
  PRIMARY KEY (`bank_account_prerequisite_id`),
  KEY `shop_id` (`shop_id`),
  KEY `reason_status` (`reason`,`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_prerequisites_attempt_log` (
  `bank_account_prerequisite_attempt_log_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a bank account prerequisite verify attempt log',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the this requirement belongs to',
  `bank_account_prerequisite_id` bigint unsigned DEFAULT NULL COMMENT 'Bank account prerequisite identifier that this log belongs to',
  `log` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Attempt logs for this prerequisite BANK_VERIFICATION',
  `logged_by_admin_id` bigint unsigned DEFAULT NULL COMMENT 'User identifier that add the attempt log',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`bank_account_prerequisite_attempt_log_id`),
  KEY `shop_id` (`shop_id`),
  KEY `bank_account_prerequisite_id` (`bank_account_prerequisite_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bank_account_statement_uploads` (
  `bank_account_statement_upload_id` bigint unsigned NOT NULL,
  `verification_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Should be WAITING_BANK_ACCOUNT, REQUIRES_UPLOAD, VALIDATION, VALIDATED, REJECTED, CANCELED',
  `shop_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned DEFAULT NULL,
  `original_file_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Name of file when we receive it',
  `original_file_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'MIME type max length is 254 if you can believe it',
  `original_file_size` int unsigned DEFAULT NULL,
  `remote_file_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Name of file stored in the remote storage',
  `upload_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Should be SUCCESS, FAILED, ARCHIVED, or DELETED',
  `user_comments` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Seller comments about document',
  `deleted_by_admin_id` bigint unsigned DEFAULT NULL,
  `archived_by_admin_id` bigint unsigned DEFAULT NULL,
  `archived_notes` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `archived_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`bank_account_statement_upload_id`),
  KEY `shop_id_index` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bill_payment_adjustments` (
  `user_id` bigint unsigned NOT NULL,
  `bill_payment_adjustment_id` bigint unsigned NOT NULL,
  `bill_payment_id` bigint unsigned NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `reference_type` varchar(255) NOT NULL,
  `reference_type_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`bill_payment_adjustment_id`),
  KEY `bill_payment_id` (`user_id`,`bill_payment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `reference` (`reference_type`,`reference_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bill_payment_exchange` (
  `bill_payment_exchange_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `bill_payment_id` bigint unsigned NOT NULL,
  `ledger_entry_id` bigint unsigned NOT NULL,
  `ledger_debit_amount` bigint unsigned NOT NULL,
  `ledger_currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL,
  `bill_payment_amount` bigint unsigned NOT NULL,
  `bill_currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL,
  `fxrate` bigint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`bill_payment_exchange_id`),
  KEY `user_id` (`user_id`,`bill_payment_id`,`ledger_entry_id`),
  KEY `user_id_3` (`user_id`,`ledger_entry_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bill_recoupment_exchange` (
  `bill_recoupment_exchange_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `recoupment_id` bigint unsigned NOT NULL,
  `recoupment_amount` int unsigned NOT NULL DEFAULT '0',
  `recoupment_currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `bill_payment_id` bigint unsigned NOT NULL,
  `bill_payment_amount` int unsigned NOT NULL DEFAULT '0',
  `bill_currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `ledger_to_bill_fxrate` bigint NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`bill_recoupment_exchange_id`),
  KEY `user_id_bill_payment_id` (`user_id`,`bill_payment_id`,`recoupment_id`),
  KEY `user_id_recoupment_id` (`user_id`,`recoupment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bill_statement_job_log` (
  `bill_statement_job_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `job_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_result` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_start_date` int unsigned NOT NULL,
  `job_end_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`job_start_date`,`bill_statement_job_log_id`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bill_txns` (
  `bill_txn_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `txn_type` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_gateway` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'worldpay',
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `etsy_billing_country` char(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `charge_date` int unsigned DEFAULT NULL,
  `auth_date` int unsigned DEFAULT NULL,
  `settle_date` int unsigned DEFAULT NULL,
  `response_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `auth_response_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `settle_response_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `ack_msg` tinyint(1) NOT NULL DEFAULT '0',
  `charge_reason` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shop_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_token` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_type` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `name_on_card` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_num_head` varchar(6) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_num_tail` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_exp_month` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_exp_year` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_addr_first_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_addr_second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_addr_city` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_addr_state` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_addr_zip` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `iso_country_code` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`bill_txn_id`),
  UNIQUE KEY `shop_id` (`shop_id`,`bill_txn_id`),
  KEY `shop_id_2` (`shop_id`,`create_date`),
  KEY `card_id` (`card_id`,`create_date`),
  KEY `user_id` (`user_id`,`create_date`),
  KEY `status` (`status`,`create_date`),
  KEY `card_token` (`card_token`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `billing_monthly_overdue_check` (
  `billing_monthly_overdue_check_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `check_status` varchar(50) COLLATE utf8mb4_general_ci NOT NULL,
  `check_result` varchar(50) COLLATE utf8mb4_general_ci NOT NULL,
  `check_start_date` int unsigned NOT NULL,
  `check_end_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`check_start_date`,`billing_monthly_overdue_check_id`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `billing_overdue_freezer_job_log` (
  `billing_overdue_freezer_job_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `job_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_result` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_start_date` int unsigned NOT NULL,
  `job_end_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`job_start_date`,`billing_overdue_freezer_job_log_id`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `blacklist` (
  `blacklist_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `type` int NOT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`blacklist_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `braze_transactional_dispatched_emails` (
  `id` bigint unsigned NOT NULL,
  `shard_id` int unsigned NOT NULL,
  `email_id` bigint unsigned NOT NULL,
  `email_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `dispatch_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `campaign_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `campaign_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_type` tinyint unsigned NOT NULL,
  `builder_context_params` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `success_ts` int unsigned DEFAULT '0',
  `failed_ts` int unsigned DEFAULT '0',
  `failed_reason` tinyint unsigned DEFAULT '0',
  `retry_dispatch_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shard_id`,`id`),
  KEY `email_address_dispatch_id_idx` (`email_address`,`dispatch_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `bulk_discount_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `has_bulk_discount` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_buyer_coupon` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `coupon_state` tinyint(1) NOT NULL DEFAULT '0',
  `shop_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `granted_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`promotion_id`,`receipt_id`),
  UNIQUE KEY `receipt_id_idx` (`receipt_id`),
  KEY `buyer_user_id_shop_id_idx` (`buyer_user_id`,`shop_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `buyer_state_status_expire_create_idx` (`buyer_user_id`,`coupon_state`,`shop_status`,`expire_date`,`granted_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_buyer_coupon_event` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `event_type` tinyint(1) NOT NULL,
  `event_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `buyer_user_id_promotion_id_idx` (`buyer_user_id`,`promotion_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_custom_order` (
  `buyer_user_id` bigint NOT NULL,
  `conversation_id` bigint NOT NULL,
  `custom_listing_id` bigint DEFAULT NULL,
  `shop_id` bigint NOT NULL,
  `reserved_listing_id` bigint DEFAULT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = open',
  `transaction_id` bigint DEFAULT NULL,
  `origin_type_id` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = listing',
  `visibility` tinyint unsigned NOT NULL DEFAULT '0',
  `final_image_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `desired_delivery_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`buyer_user_id`,`conversation_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_email_marketing` (
  `email_marketing_id` bigint unsigned NOT NULL,
  `email_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `email_campaign_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `state` tinyint NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`email_id`,`email_marketing_id`),
  KEY `email_campaign_id` (`email_campaign_id`),
  KEY `state` (`state`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

-- Owner: Payments Tax & Compliance
-- Slack: #paytax
CREATE TABLE `buyer_fee` (
  `buyer_fee_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL COMMENT 'user_id of buyer',
  `seller_user_id` bigint unsigned NOT NULL COMMENT 'user_id of seller',
  `parent_type` smallint unsigned NOT NULL,
  `parent_id` bigint unsigned NOT NULL,
  `fee_type` smallint unsigned NOT NULL,
  `tax_region_country_code` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO3166_1 country code for the tax region that this fee was applied in',
  `tax_region_region_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Region portion of a ISO3166_1 sub division code for the tax region that this fee was applied in',
  `amount` bigint NOT NULL COMMENT 'Amount the buyer was charged for the buyer fee. See currency column',
  `currency` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'currency for amount',
  `create_at` bigint unsigned NOT NULL COMMENT 'Date row was created in microseconds since epoch',
  `delete_at` bigint unsigned DEFAULT NULL COMMENT 'Date row was deleted in microseconds since epoch',
  `refund_at` bigint unsigned DEFAULT NULL COMMENT 'Date row was refunded in microseconds since epoch',
  `buyer_location_country_code` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO3166_1 country code for the buyer',
  `buyer_location_region_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Region portion of an ISO3166_1 sub division code for the buyer',
  `seller_location_country_code` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO3166_1 country code for the seller',
  `seller_location_region_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Region portion of an ISO3166_1 sub division code for the seller',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Soft delete flag where 0 is not deleted and 1 is deleted',
  `create_date` bigint unsigned DEFAULT NULL COMMENT 'Date row was created in seconds since epoch',
  `update_date` bigint unsigned DEFAULT NULL COMMENT 'Date row was updated in seconds since epoch',
  PRIMARY KEY (`buyer_user_id`,`buyer_fee_id`),
  KEY `create_at` (`create_at`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `is_deleted` (`buyer_user_id`,`buyer_fee_id`,`is_deleted`),
  KEY `parent_id_is_deleted` (`buyer_user_id`,`parent_type`,`parent_id`,`is_deleted`,`buyer_fee_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

-- Owner: Payments Tax & Compliance
-- Slack: #payments-compliance
CREATE TABLE `buyer_fee_audit_log` (
  `buyer_fee_audit_log_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `buyer_fee_id` bigint unsigned NOT NULL,
  `actor_user_id` bigint unsigned NOT NULL,
  `actor_user_type` smallint unsigned NOT NULL,
  `action_type` smallint unsigned NOT NULL,
  `create_at` bigint unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`buyer_fee_audit_log_id`),
  KEY `actor` (`actor_user_id`,`create_at`),
  KEY `buyer_fee` (`buyer_user_id`,`buyer_fee_id`,`create_at`),
  KEY `create_at` (`create_at`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_initiated_offer` (
  `buyer_initiated_offer_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_user_id` bigint unsigned NOT NULL,
  `offer_price` int unsigned NOT NULL,
  `offer_currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `accepted_price` int unsigned DEFAULT NULL,
  `accepted_date` int unsigned DEFAULT NULL,
  `closed_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `purchase_date` int unsigned DEFAULT NULL,
  `promotion_id` bigint unsigned DEFAULT NULL,
  `is_expired` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_initiated_offer_id`,`buyer_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `ix_open_buyer_shop` (`buyer_user_id`,`shop_user_id`,`accepted_date`),
  KEY `ix_open_buyer_listing_id` (`buyer_user_id`,`listing_id`,`accepted_date`),
  KEY `ix_accepted_buyer_user_id` (`buyer_user_id`,`accepted_date`,`purchase_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_initiated_offer_listing_details` (
  `buyer_initiated_offer_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `quantity` int unsigned NOT NULL DEFAULT '1',
  `accepted_quantity` int unsigned NOT NULL DEFAULT '1',
  `product_offering_id` bigint unsigned DEFAULT NULL,
  `personalization` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_initiated_offer_id`,`buyer_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_order_feedback_survey_responses` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `survey_response_id` bigint unsigned NOT NULL,
  `buyer_id` bigint unsigned DEFAULT '0',
  `buyer_email_id` bigint unsigned NOT NULL,
  `seller_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `bof_version` smallint unsigned NOT NULL,
  `survey_response` tinyint unsigned NOT NULL,
  `campaign_label` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`,`bof_version`),
  UNIQUE KEY `survey_response_idx` (`survey_response_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `transaction_bof_version_idx` (`transaction_id`,`bof_version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Survey responses collected from the Buyer Order Feedback experiment';

CREATE TABLE `buyer_reported_transactions` (
  `reported_transaction_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_id` bigint unsigned NOT NULL DEFAULT '0',
  `buyer_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `message` text COLLATE utf8mb4_unicode_ci,
  `is_closed` tinyint(1) NOT NULL DEFAULT '0',
  `resolution_date` int unsigned DEFAULT '0',
  `resolution_message` text COLLATE utf8mb4_unicode_ci,
  `admin_id` bigint unsigned DEFAULT '0',
  `reason` text COLLATE utf8mb4_unicode_ci,
  `convo_id` bigint unsigned DEFAULT '0',
  PRIMARY KEY (`buyer_id`,`reported_transaction_id`),
  KEY `shop_reported_transaction_transaction_id_index` (`transaction_id`),
  KEY `buyer_reported_transaction_create_date_index` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_segment` (
  `user_id` bigint unsigned NOT NULL,
  `buyer_segment` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_subscription_receipts` (
  `buyer_id` bigint unsigned NOT NULL,
  `subscription_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_id`,`subscription_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_subscriptions` (
  `buyer_id` bigint unsigned NOT NULL,
  `subscription_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `original_receipt_id` bigint unsigned NOT NULL,
  `frequency_in_weeks` int unsigned NOT NULL,
  `coupon_id` bigint unsigned NOT NULL DEFAULT '0',
  `credit_card_id` bigint unsigned NOT NULL,
  `shipping_address_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'ACTIVE',
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPEN',
  `next_payment_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `cancel_date` int unsigned NOT NULL DEFAULT '0',
  `expiry_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_id`,`subscription_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`buyer_id`,`shop_id`),
  KEY `status` (`buyer_id`,`status`),
  KEY `next_date` (`next_payment_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `buyer_support_experiment_bucketing_assignments` (
  `record_id` bigint unsigned NOT NULL,
  `feature_flag` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `variant_id` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `campaign_label` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `browser_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`buyer_user_id`,`record_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Bucketing assignments for Buyer Support Squad experiments';

CREATE TABLE `calculated_listing_shipping_service` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `mail_carrier_id` int DEFAULT NULL,
  `mail_class_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign` (
  `campaign_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `budget` int NOT NULL,
  `auto_renew` tinyint(1) NOT NULL DEFAULT '0',
  `user_activated` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `listings_scope_type` varchar(64) NOT NULL,
  `first_start_date` int unsigned NOT NULL DEFAULT '0',
  `last_end_date` int unsigned NOT NULL DEFAULT '0',
  `zombie_since` int unsigned NOT NULL DEFAULT '0',
  `auto_add_keywords` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`campaign_id`),
  KEY `campaign_update_date` (`update_date`),
  KEY `active_idx` (`is_active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign_daily_sales_cpc` (
  `campaign_id` bigint unsigned NOT NULL,
  `sale_date` int unsigned NOT NULL,
  `budget` int unsigned NOT NULL COMMENT 'Amount budgeted for the day',
  `sale_amount_running` int unsigned NOT NULL COMMENT 'Amount sold so far for the day',
  `sale_amount` int unsigned NOT NULL COMMENT 'Amount sold for the entire day',
  `sale_amount_billed` int unsigned NOT NULL COMMENT 'Amount billed, includes discount',
  `keywords` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`campaign_id`,`sale_date`),
  KEY `sale_date` (`sale_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Rescheduler';

CREATE TABLE `campaign_expenditures` (
  `campaign_id` bigint unsigned NOT NULL,
  `start_date` int unsigned NOT NULL DEFAULT '0',
  `end_date` int unsigned NOT NULL DEFAULT '0',
  `spent` int unsigned NOT NULL DEFAULT '0' COMMENT 'ads served in USD pennies',
  `served` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`campaign_id`,`start_date`),
  KEY `idx_up` (`update_date`),
  KEY `idx_sd` (`start_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='campaign level spend rollup up into 30 minute intervals';

CREATE TABLE `campaign_instances` (
  `campaign_id` bigint unsigned NOT NULL,
  `campaign_instance_id` bigint unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL,
  `hard_stop_date` int unsigned NOT NULL DEFAULT '0',
  `budget` int NOT NULL,
  `sale_amount_running` int NOT NULL DEFAULT '0',
  `sale_amount` int NOT NULL,
  `start_reason` varchar(32) NOT NULL DEFAULT '',
  `campaign_action_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_free` tinyint(1) NOT NULL DEFAULT '0',
  `pricing_type` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`campaign_id`,`campaign_instance_id`),
  UNIQUE KEY `campaign_id` (`campaign_id`,`start_date`),
  KEY `campaign_id_2` (`campaign_id`,`end_date`),
  KEY `start_date` (`start_date`),
  KEY `end_date` (`end_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `camp_start_end_hard` (`campaign_id`,`start_date`,`end_date`,`hard_stop_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign_keywords` (
  `campaign_keywords_id` bigint unsigned NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `keyword` varchar(64) NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '0',
  `excluded` tinyint(1) NOT NULL DEFAULT '0',
  `score` double NOT NULL DEFAULT '0',
  PRIMARY KEY (`campaign_keywords_id`),
  UNIQUE KEY `campaign_id` (`campaign_id`,`keyword`),
  KEY `campaign_id_2` (`campaign_id`,`keyword`,`is_active`),
  KEY `campaign_keywords_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign_listings_scope` (
  `campaign_id` bigint unsigned NOT NULL,
  `scoped_entity_id` bigint unsigned NOT NULL,
  `scope_type` varchar(64) NOT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`campaign_id`,`scope_type`,`scoped_entity_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign_recommendation_action` (
  `shop_id` bigint unsigned NOT NULL,
  `action_type` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL,
  `before_campaign_state` bigint unsigned NOT NULL,
  `after_campaign_state` bigint unsigned NOT NULL,
  `recommendation_taken` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `campaign_scheduled_listings` (
  `campaign_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`start_date`,`campaign_id`,`listing_id`),
  KEY `campaign_id` (`campaign_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cardreader_requests` (
  `shop_id` bigint unsigned NOT NULL,
  `request_id` bigint unsigned NOT NULL,
  `shipping_address_id` bigint unsigned NOT NULL,
  `fulfillment_order_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `initial_request_date` int unsigned NOT NULL DEFAULT '0',
  `submitted_date` int unsigned NOT NULL DEFAULT '0',
  `canceled_date` int unsigned NOT NULL DEFAULT '0',
  `shipped_date` int unsigned NOT NULL DEFAULT '0',
  `returned_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`request_id`),
  KEY `process_status` (`process_status`),
  KEY `status` (`shop_id`,`status`,`process_status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_children` (
  `cart_id` bigint unsigned NOT NULL,
  `child_cart_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`cart_id`,`child_cart_id`),
  KEY `child_cart_id` (`child_cart_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store the list of child carts associated with a parent cart';

CREATE TABLE `cart_data` (
  `cart_id` bigint NOT NULL,
  `shipping_address_id` bigint DEFAULT '0' COMMENT 'shipping address id (fk)',
  `message_to_seller` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin,
  `coupon_id` bigint DEFAULT NULL COMMENT 'coupon fk',
  `destination_country_id` int DEFAULT NULL COMMENT 'destination country id',
  `payment_method` varchar(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `dc_payment_method` varchar(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `payment_token` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'token used to identify payment with provider',
  `bank_fx_timestamp` bigint unsigned DEFAULT '0' COMMENT 'used for bank transfer apm',
  `payment_shipping_address_id` bigint DEFAULT '0' COMMENT 'shipping address (fk) set by payment',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `destination_postal_code` varchar(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `is_expedited` tinyint NOT NULL DEFAULT '0',
  `shipping_method_id` bigint unsigned NOT NULL,
  `ship_to_third_party` tinyint(1) NOT NULL DEFAULT '0',
  `apply_gift_card_balance` tinyint(1) DEFAULT NULL,
  `shipping_address_owner_id` bigint unsigned DEFAULT NULL,
  `nonce` varchar(13) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL,
  `selected_shipping_option` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `google_wallet_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT '',
  `dc_paypal_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT '',
  `requested_gift_wrap` tinyint(1) NOT NULL DEFAULT '0',
  `is_gift` tinyint(1) NOT NULL DEFAULT '0',
  `gift_message` varchar(4095) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `gift_buyer_first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `shop_gift_wrap_price` bigint unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT 'USD',
  `klarna_details_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_payment_confirmed` tinyint(1) NOT NULL DEFAULT '0',
  `opted_in_to_dtc` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_listing_customization` (
  `cart_id` bigint NOT NULL,
  `cart_listing_customization_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `listing_inventory_id` bigint NOT NULL,
  `required_variations_signature` varchar(32) NOT NULL,
  `optional_variations_signature` varchar(32) NOT NULL,
  `variation_data_version` smallint NOT NULL,
  `required_variation_details` blob,
  `optional_variation_details` blob,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`cart_id`,`cart_listing_customization_id`),
  UNIQUE KEY `variation_idx` (`cart_id`,`listing_id`,`listing_inventory_id`,`required_variations_signature`,`optional_variations_signature`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_listing_groups` (
  `cart_id` bigint NOT NULL,
  `listing_group_num` smallint unsigned NOT NULL DEFAULT '0',
  `shipping_method_id` bigint unsigned NOT NULL,
  `is_expedited` tinyint unsigned NOT NULL DEFAULT '0',
  `is_explicitly_separate` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`,`listing_group_num`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_listing_property_values` (
  `cart_listing_property_value_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `cart_id` bigint unsigned NOT NULL,
  `instance_num` int unsigned NOT NULL,
  `property_id` bigint unsigned NOT NULL,
  `value_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`cart_id`,`cart_listing_property_value_id`),
  UNIQUE KEY `property_id_idx` (`cart_id`,`property_id`,`value_id`,`listing_id`,`instance_num`),
  KEY `created_idx` (`create_date`),
  KEY `modified_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_listings` (
  `cart_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `listing_group_num` smallint unsigned NOT NULL DEFAULT '0',
  `purchase_quantity` int NOT NULL DEFAULT '0' COMMENT 'amount being purchased',
  `original_price` float NOT NULL DEFAULT '0' COMMENT 'price of the listing at time of add',
  `original_vat_cost` int unsigned NOT NULL DEFAULT '0',
  `original_currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'currency of listing at time of add',
  `original_shipping_options` text,
  `decorator_type` smallint unsigned DEFAULT NULL,
  `decoration_id` bigint unsigned DEFAULT NULL,
  `decoration_creator_id` bigint unsigned DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `listing_inventory_id` bigint NOT NULL DEFAULT '0',
  `cart_listing_customization_id` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`,`listing_id`,`listing_inventory_id`,`cart_listing_customization_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `cart_promotion` (
  `cart_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store shop-level sales & coupons in a cart';

CREATE TABLE `cart_promotionlisting` (
  `cart_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `stackable_type` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`,`listing_id`,`stackable_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `idx_promotion_id` (`promotion_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store listing-level sales & coupons in a cart';

CREATE TABLE `cart_properties` (
  `cart_id` bigint unsigned NOT NULL,
  `property_type` int unsigned NOT NULL,
  `property_value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`cart_id`,`property_type`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store properties of a cart';

CREATE TABLE `cdc_etet` (
  `id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `f_varchar` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `certificate_meta_info` (
  `shop_id` bigint unsigned NOT NULL,
  `domain_id` bigint unsigned NOT NULL,
  `state` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `old_issue_date` bigint unsigned NOT NULL DEFAULT '0',
  `expire_date` bigint unsigned NOT NULL DEFAULT '0',
  `update_date` bigint unsigned NOT NULL,
  `current_issue_date` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`domain_id`),
  KEY `state_current_issue_date_idx` (`state`(32),`current_issue_date`),
  KEY `expire_date_idx` (`expire_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_action_audit` (
  `action_audit_id` bigint unsigned NOT NULL,
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `action_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the type of action being performed (ex. debit_seller)',
  `target_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'type of the target object being referenced',
  `target_id` bigint unsigned NOT NULL COMMENT 'id of the target object being referenced',
  `flag_type_mnemonic` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `flag_type_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`action_audit_id`),
  KEY `review` (`review_id`),
  KEY `chargeback_review` (`chargeback_id`,`review_id`),
  KEY `audit_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_action_audit_data` (
  `action_audit_data_id` bigint unsigned NOT NULL,
  `action_audit_id` bigint unsigned NOT NULL,
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `attribute_name` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `attribute_value` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`action_audit_data_id`),
  KEY `action_audit` (`action_audit_id`),
  KEY `review` (`review_id`),
  KEY `chargeback_review` (`chargeback_id`,`review_id`),
  KEY `audit_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_evidence` (
  `evidence_id` bigint unsigned NOT NULL,
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `provider` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `api_struct_name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `api_field_name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `api_field_value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`evidence_id`),
  KEY `review` (`review_id`),
  KEY `chargeback_review` (`chargeback_id`,`review_id`),
  KEY `evidence_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_evidence_child` (
  `evidence_id` bigint unsigned NOT NULL,
  `parent_evidence_id` bigint unsigned NOT NULL,
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`evidence_id`),
  KEY `parent_evidence` (`parent_evidence_id`),
  KEY `review` (`review_id`),
  KEY `chargeback_review` (`chargeback_id`,`review_id`),
  KEY `evidence_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_filter_audit` (
  `audit_id` bigint unsigned NOT NULL,
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `filter_name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `filter_type` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `severity` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `weight` int NOT NULL,
  `outcome` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'bool for Force filters, numeric for Calc filters',
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `review` (`review_id`),
  KEY `chargeback_review` (`chargeback_id`,`review_id`),
  KEY `audit_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_repayment` (
  `repayment_id` bigint unsigned NOT NULL,
  `seller_id` bigint unsigned NOT NULL COMMENT 'the seller who has incurred this repayment',
  `dispute_id` bigint unsigned NOT NULL COMMENT 'pk of the dispute that is the source of this repayment',
  `dispute_type` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'e.g. chargeback',
  `review_id` bigint unsigned NOT NULL COMMENT 'pk of Chargeback_Review record',
  `receipt_id` bigint unsigned NOT NULL,
  `ledger_id` bigint unsigned NOT NULL,
  `ledger_currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_to_usd_fxn_rate` float NOT NULL COMMENT 'conversion rate when repayment was created',
  `start_amount` bigint unsigned NOT NULL COMMENT 'original amount that seller owed etsy (ledger currency)',
  `start_amount_usd` bigint unsigned NOT NULL,
  `owed_amount` bigint unsigned NOT NULL COMMENT 'outstanding repayment (ledger currency)',
  `owed_amount_usd` bigint unsigned NOT NULL,
  `collected_amount` bigint unsigned NOT NULL COMMENT 'amount collected from seller (ledger currency)',
  `collected_amount_usd` bigint unsigned NOT NULL,
  `refunded_amount` bigint unsigned NOT NULL COMMENT 'amount refunded to seller (ledger currency)',
  `refunded_amount_usd` bigint unsigned NOT NULL,
  `repayment_status` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the current state of this repayment',
  `status_update_date` int unsigned NOT NULL COMMENT 'time of most recent repayment_status change',
  `expire_date` int unsigned NOT NULL COMMENT 'time when we stop attempting to collect this repayment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`repayment_id`),
  KEY `seller_id_repayment_status` (`seller_id`,`repayment_status`),
  KEY `repayment_status_create_date` (`repayment_status`,`create_date`),
  KEY `repayment_create_date` (`create_date`),
  KEY `repayment_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chargeback_review` (
  `review_id` bigint unsigned NOT NULL,
  `chargeback_id` bigint unsigned NOT NULL,
  `chargeback_type` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `reason_group` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'corresponds to the reporting group in chargebacks table',
  `provider` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `provider_ref_num` varchar(28) COLLATE utf8mb4_unicode_ci NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `is_auto_review` tinyint unsigned NOT NULL,
  `decision` varchar(24) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_coerced_decision` tinyint unsigned NOT NULL,
  `is_decided_from_force_filter` tinyint unsigned NOT NULL,
  `autoreview_score` int DEFAULT NULL,
  `max_autoreview_score` int NOT NULL COMMENT 'highest possible score at time of run',
  `min_autoreview_score` int NOT NULL COMMENT 'lowest possible score at time of run',
  `score_buckets` int unsigned NOT NULL COMMENT 'ntile for score range',
  `user_id` bigint unsigned NOT NULL COMMENT 'id of user or guest filing chargeback',
  `is_payer_guest` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'true if the cardholder is a guest',
  `api_payload` longtext COLLATE utf8mb4_unicode_ci,
  `http_code` int DEFAULT '0' COMMENT 'response code from the provider',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`review_id`),
  KEY `chargeback` (`chargeback_id`),
  KEY `provider_provider_ref_num` (`provider`,`provider_ref_num`),
  KEY `provider_ref_num` (`provider_ref_num`),
  KEY `payer_chargeback` (`user_id`,`chargeback_id`),
  KEY `review_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `chatbot_email_token` (
  `chatbot_email_token_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `token` char(6) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `redeem_date` int unsigned NOT NULL,
  `expire_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`chatbot_email_token_id`),
  KEY `reedem_date_index` (`redeem_date`),
  KEY `create_date_index` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores tokens used for verifying email ownership when a user is interacting with a chatbot.';

CREATE TABLE `checkout_audit_actions` (
  `checkout_audit_action_id` bigint NOT NULL COMMENT 'pk (from generic tickets table)',
  `checkout_audit_id` bigint NOT NULL COMMENT 'foreign key to checkout_audit',
  `action_type_id` smallint NOT NULL,
  `action_values` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `cart_values` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`checkout_audit_action_id`),
  KEY `checkout_audit_id` (`checkout_audit_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='checkout audit trail actions';

CREATE TABLE `circular_activity_tickets` (
  `owner_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `circular_activity_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`owner_id`,`owner_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `collection` (
  `collection_id` bigint unsigned NOT NULL,
  `creator_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `privacy_level` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Default: 0 = unlisted',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `slug` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gift_profile_id` bigint unsigned DEFAULT NULL COMMENT 'The gift_profile this collection is associated with, if any',
  PRIMARY KEY (`collection_id`),
  KEY `creator_id-status-privacy` (`creator_id`,`status`,`privacy_level`),
  KEY `creator_id_slug` (`creator_id`,`slug`(191)),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `collection_collaborator` (
  `collection_id` bigint unsigned NOT NULL,
  `collaborator_user_id` bigint unsigned NOT NULL,
  `creator_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned DEFAULT NULL COMMENT 'whether this collaborator is active on this list',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`collaborator_user_id`,`collection_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `collection_listing` (
  `collection_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `state` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'listing state enum. 0 = active, 1 = inactive, 2 = soldout, 3 = draft, 4 = removed, 5 = expired',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int unsigned NOT NULL COMMENT 'date listing is added to collection',
  `update_date` int unsigned NOT NULL COMMENT 'date the listing was updated',
  PRIMARY KEY (`collection_creator_id`,`collection_id`,`listing_id`,`shop_id`),
  KEY `collection_creator_id-status-listing_id` (`collection_creator_id`,`status`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `IX___collection_status_created` (`collection_id`,`status`,`create_date`),
  KEY `shop_listing_id` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `collection_listing_restrictions` (
  `collection_creator_id` bigint unsigned NOT NULL COMMENT 'User Identifier',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Shop Listing Identifier',
  `restriction` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Listing restriction (e.g. a specific region like IN)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`collection_creator_id`,`listing_id`,`restriction`),
  KEY `listing_id` (`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `collection_listing_state` (
  `owner_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `listing_state` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`owner_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_blocked` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `creation_time` int NOT NULL,
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_edges_forward` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `privacy` tinyint NOT NULL,
  `affinity` float NOT NULL,
  `creation_time` int NOT NULL,
  `to_name` varchar(32) NOT NULL DEFAULT '',
  `hidden` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`),
  KEY `from_vtx_idx` (`from_id`,`from_type_id`,`affinity`,`hidden`),
  KEY `conn_type_name_idx` (`from_id`,`from_type_id`,`to_type_id`,`to_name`,`hidden`),
  KEY `conn_type_time_idx` (`from_id`,`from_type_id`,`to_type_id`,`creation_time`,`hidden`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_edges_forward_backfill` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `privacy` tinyint NOT NULL,
  `affinity` float NOT NULL,
  `creation_time` int NOT NULL,
  `update_time` int NOT NULL,
  `connection_type` bigint NOT NULL DEFAULT '0',
  `consumption_production_ratio` int NOT NULL DEFAULT '0',
  `deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`,`connection_type`),
  KEY `from_vtx_idx` (`from_id`,`from_type_id`,`connection_type`,`deleted`),
  KEY `conn_type_idx` (`from_id`,`from_type_id`,`to_type_id`,`connection_type`,`deleted`),
  KEY `conn_type_time_idx` (`from_id`,`from_type_id`,`to_type_id`,`connection_type`,`creation_time`,`deleted`),
  KEY `from_cpr_lp_idx` (`from_id`,`from_type_id`,`connection_type`,`consumption_production_ratio`,`deleted`),
  KEY `conn_type_updatetime_idx` (`from_id`,`from_type_id`,`to_type_id`,`connection_type`,`update_time`,`deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_edges_reverse` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `privacy` tinyint NOT NULL,
  `affinity` float NOT NULL,
  `creation_time` int NOT NULL,
  `to_name` varchar(32) NOT NULL DEFAULT '',
  `hidden` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`),
  KEY `from_vtx_idx` (`from_id`,`from_type_id`,`affinity`,`hidden`),
  KEY `conn_type_name_idx` (`from_id`,`from_type_id`,`to_type_id`,`to_name`,`hidden`),
  KEY `conn_type_time_idx` (`from_id`,`from_type_id`,`to_type_id`,`creation_time`,`hidden`),
  KEY `creation_time` (`creation_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_edges_reverse_backfill` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `privacy` tinyint NOT NULL,
  `affinity` float NOT NULL,
  `creation_time` int NOT NULL,
  `update_time` int NOT NULL,
  `connection_type` bigint NOT NULL DEFAULT '0',
  `consumption_production_ratio` int NOT NULL DEFAULT '0',
  `deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`,`connection_type`),
  KEY `from_vtx_idx` (`from_id`,`from_type_id`,`connection_type`,`deleted`),
  KEY `conn_type_idx` (`from_id`,`from_type_id`,`to_type_id`,`connection_type`,`deleted`),
  KEY `conn_type_time_idx` (`from_id`,`from_type_id`,`to_type_id`,`connection_type`,`creation_time`,`deleted`),
  KEY `from_cpr_lp_idx` (`from_id`,`from_type_id`,`connection_type`,`consumption_production_ratio`,`deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connection_log` (
  `from_id` bigint NOT NULL,
  `from_type_id` tinyint NOT NULL,
  `to_id` bigint NOT NULL,
  `to_type_id` tinyint NOT NULL,
  `connection_type` bigint NOT NULL,
  `deleted` tinyint NOT NULL,
  `creation_time` int NOT NULL,
  `updated_time` int NOT NULL,
  `connection_count` int NOT NULL,
  PRIMARY KEY (`from_id`,`from_type_id`,`to_id`,`to_type_id`,`connection_type`),
  KEY `updated_time_idx` (`updated_time`),
  KEY `connection_log_edges_fwd` (`from_id`,`from_type_id`,`updated_time`,`deleted`),
  KEY `connection_log_edges_rev` (`to_id`,`to_type_id`,`updated_time`,`deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `connections_from_import` (
  `from_id` bigint NOT NULL,
  `to_id` bigint NOT NULL,
  `import_batch_id` bigint NOT NULL,
  PRIMARY KEY (`from_id`,`to_id`,`import_batch_id`),
  KEY `connections_from_import_by_batch` (`import_batch_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Match connections with the import that led to them';

CREATE TABLE `consent_log` (
  `consent_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `consent_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `consent_state` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`consent_log_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `user_consent_type_create_date_idx` (`user_id`,`consent_type`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `consolidated_fulfillment_seller_info` (
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `country_id` int NOT NULL,
  `is_eligible` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `contentful_content` (
  `contentful_content_id` bigint unsigned NOT NULL,
  `content_type_id` bigint unsigned NOT NULL,
  `contentful_entry_id` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `platform` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `slug` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `looker_landing_page_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`contentful_content_id`),
  UNIQUE KEY `content_type_id_2` (`content_type_id`,`contentful_entry_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `contentful_eligibility` (
  `contentful_eligibility_id` bigint unsigned NOT NULL,
  `contentful_content_id` bigint unsigned NOT NULL,
  `content_type_id` bigint unsigned NOT NULL,
  `key` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `published` tinyint unsigned NOT NULL DEFAULT '0',
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`contentful_eligibility_id`),
  KEY `content_type_id` (`content_type_id`),
  KEY `lookup` (`contentful_content_id`,`published`,`start_date`,`end_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `contextual_recommendation` (
  `user_id` bigint unsigned NOT NULL,
  `recommendation_set_id` bigint unsigned NOT NULL,
  `recommendation_id` bigint unsigned NOT NULL,
  `source_id` bigint unsigned NOT NULL,
  `source_type_id` int unsigned NOT NULL,
  `recommended_id` bigint unsigned NOT NULL,
  `recommended_type_id` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`recommendation_set_id`,`recommendation_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `conversation_images` (
  `origin_user_id` bigint unsigned NOT NULL,
  `conversation_message_id` bigint unsigned NOT NULL,
  `image_order` tinyint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `marked_for_death` tinyint(1) DEFAULT '0',
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`origin_user_id`,`conversation_message_id`,`image_order`),
  UNIQUE KEY `conversation_images_image_id` (`image_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `conversation_messages` (
  `origin_user_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `conversation_message_id` bigint unsigned NOT NULL,
  `sender_id` bigint unsigned NOT NULL,
  `message_order` smallint unsigned NOT NULL,
  `message` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `has_images` tinyint(1) DEFAULT '0',
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`origin_user_id`,`conversation_message_id`),
  KEY `conversation_lookup_idx` (`origin_user_id`,`conversation_id`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `conversation_id` (`conversation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `conversation_tags` (
  `user_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `tag_id` int unsigned NOT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`conversation_id`,`tag_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `conversations` (
  `user_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `other_user_id` bigint unsigned NOT NULL,
  `other_login_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `last_sender_id` bigint unsigned NOT NULL,
  `is_read` tinyint(1) DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `is_sender` tinyint(1) NOT NULL,
  `is_trash` tinyint NOT NULL DEFAULT '0',
  `is_sent` tinyint NOT NULL DEFAULT '0',
  `is_inbox` tinyint NOT NULL DEFAULT '1',
  `is_spam` tinyint(1) NOT NULL DEFAULT '0',
  `has_attachments` int NOT NULL DEFAULT '0',
  `message_count` int unsigned NOT NULL DEFAULT '0',
  `context_id` bigint unsigned NOT NULL DEFAULT '0',
  `context_type_id` int unsigned NOT NULL DEFAULT '0',
  `title` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `last_me_message_excerpt` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_other_message_excerpt` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_message_date` int NOT NULL,
  `last_message_other_date` int NOT NULL DEFAULT '0',
  `last_message_me_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `other_display_name` varchar(257) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_custom_order_buyer_flag_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `is_custom_order_seller_flag_enabled` tinyint(1) NOT NULL DEFAULT '0',
  `is_created_by_thank_you_coupon` tinyint(1) NOT NULL DEFAULT '0',
  `has_replies_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `conversation_request_accepted_time` int unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`user_id`,`conversation_id`,`other_user_id`),
  KEY `other_user_lookup_idx` (`user_id`,`other_user_id`),
  KEY `conversation_lookup_idx` (`user_id`,`is_visible`,`last_message_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `inbox_lookup_idx` (`user_id`,`is_inbox`,`is_visible`,`last_message_other_date`),
  KEY `sent_lookup_idx` (`user_id`,`is_sent`,`is_visible`,`last_message_me_date`),
  KEY `trash_lookup_idx` (`user_id`,`is_trash`,`is_visible`,`last_message_other_date`),
  KEY `spam_lookup_idx` (`user_id`,`is_spam`,`is_visible`,`last_message_other_date`),
  KEY `context_type_lookup_idx` (`user_id`,`context_type_id`,`is_visible`,`last_message_other_date`),
  KEY `other_username_idx` (`user_id`,`other_login_name`(32)),
  KEY `user_read_visible` (`user_id`,`is_read`,`is_visible`),
  KEY `conversation_id` (`conversation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `convo_system_message` (
  `origin_user_id` bigint unsigned NOT NULL,
  `conversation_message_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `message_type_id` smallint unsigned NOT NULL,
  `sender_id` bigint unsigned NOT NULL,
  `message_order` smallint unsigned NOT NULL,
  `context_id` bigint unsigned DEFAULT NULL,
  `context_shardifier_id` int unsigned DEFAULT NULL,
  `context_type_id` bigint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`origin_user_id`,`conversation_message_id`),
  KEY `conversation_lookup_idx` (`origin_user_id`,`conversation_id`,`message_order`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `convos_canned_response` (
  `user_id` bigint unsigned NOT NULL,
  `convos_canned_response_id` bigint unsigned NOT NULL,
  `title` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `type` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `content` text COLLATE utf8mb4_general_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `category_id` bigint unsigned DEFAULT '0',
  `usage_count` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `is_template` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`convos_canned_response_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`),
  KEY `category_id_idx` (`user_id`,`category_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `convos_user_thread` (
  `user_id` bigint NOT NULL,
  `conversation_id` bigint NOT NULL,
  `read_count` int NOT NULL DEFAULT '0',
  `last_read_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`conversation_id`),
  KEY `last_read_date` (`last_read_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `coupons` (
  `coupon_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `coupon_code` varchar(20) NOT NULL,
  `seller_active` tinyint(1) NOT NULL DEFAULT '0',
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `pct_discount` int NOT NULL DEFAULT '0',
  `free_shipping` tinyint(1) DEFAULT NULL,
  `domestic_only` tinyint(1) DEFAULT NULL,
  `section_required` int NOT NULL DEFAULT '0',
  `start_active_date` int NOT NULL DEFAULT '0',
  `promoted` tinyint(1) DEFAULT NULL,
  `is_automatic` tinyint unsigned NOT NULL DEFAULT '0',
  `is_wholesale` tinyint unsigned NOT NULL DEFAULT '0',
  `coupon_class` varchar(20) NOT NULL DEFAULT 'NORMAL',
  `fixed_discount` int NOT NULL DEFAULT '0',
  `minimum_purchase_price` int NOT NULL DEFAULT '0',
  `currency_code` varchar(3) NOT NULL DEFAULT '',
  `use_count` int unsigned NOT NULL DEFAULT '0',
  `max_uses` int unsigned NOT NULL DEFAULT '0',
  `expiration_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`coupon_id`),
  UNIQUE KEY `coupon_id_idx` (`coupon_id`),
  KEY `shop_id_idx` (`shop_id`,`deleted`,`coupon_code`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `craft_content_listing_sections` (
  `user_id` bigint unsigned NOT NULL,
  `craft_content_section_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `craft_content_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`craft_content_section_id`,`listing_id`,`shop_id`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `craft_content_overview` (
  `user_id` bigint unsigned NOT NULL,
  `craft_content_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `language` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `title` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `author_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `excerpt` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `introduction` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `image_key` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL,
  `video_id` bigint unsigned NOT NULL DEFAULT '0',
  `completed_quantity` bigint unsigned NOT NULL DEFAULT '0',
  `completion_time` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `skill_level` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `estimated_cost` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_taxonomy_node` bigint unsigned NOT NULL DEFAULT '0',
  `craft_taxonomy_attrval` bigint unsigned NOT NULL DEFAULT '0',
  `occasion_taxonomy_attrval` bigint unsigned NOT NULL DEFAULT '0',
  `publish_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'diy',
  `author_name` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `author_brand` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `author_brand_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `author_bio` longtext COLLATE utf8mb4_unicode_ci,
  `author_image_key` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`user_id`,`craft_content_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `craft_content_section` (
  `user_id` bigint unsigned NOT NULL,
  `craft_content_id` bigint unsigned NOT NULL,
  `craft_content_section_id` bigint unsigned NOT NULL,
  `type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `rank` int unsigned NOT NULL,
  `language` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `display_num` int unsigned NOT NULL,
  `title` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `image_key` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL,
  `video_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`craft_content_id`,`craft_content_section_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `craft_content_section_listings` (
  `user_id` bigint unsigned NOT NULL,
  `craft_content_section_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `craft_content_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `rank` tinyint unsigned NOT NULL,
  `label` varchar(2048) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`craft_content_section_id`,`listing_id`,`shop_id`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `craft_seller_incentives` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `listings` tinyint unsigned NOT NULL DEFAULT '0',
  `processing` tinyint unsigned NOT NULL DEFAULT '0',
  `policies` tinyint unsigned NOT NULL DEFAULT '0',
  `enrolled_processing` tinyint unsigned NOT NULL DEFAULT '0',
  `enrolled_struc_data` tinyint unsigned NOT NULL DEFAULT '0',
  `enrolled_policies` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `creator_collection_collaborator` (
  `collection_id` bigint unsigned NOT NULL,
  `collaborator_user_id` bigint unsigned NOT NULL,
  `creator_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned DEFAULT NULL COMMENT 'whether this collaborator is active on this list',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`creator_user_id`,`collaborator_user_id`,`collection_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `creator_feedback` (
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `creator_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `target_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `feedback_id` int unsigned DEFAULT NULL,
  `feedback_type` tinyint NOT NULL DEFAULT '0',
  `message` varchar(4000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `value` int DEFAULT NULL,
  `image_feedback_id` int DEFAULT NULL,
  `kiss_and_makeup_id` int DEFAULT NULL,
  `create_date` bigint unsigned NOT NULL DEFAULT '0',
  `update_date` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`creator_user_id`,`transaction_id`),
  UNIQUE KEY `feedback_id_idx` (`feedback_id`),
  KEY `creator_id` (`creator_user_id`,`feedback_type`),
  KEY `target_id` (`target_user_id`,`feedback_type`),
  KEY `transaction_id` (`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='stores rows for the creator side of a feedback instance. sha';

CREATE TABLE `custom_domain_domain_history` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'The shop_id of the shop that owns custom domain',
  `domain_id` bigint unsigned NOT NULL COMMENT 'The domain_id of the custom domain',
  `domain_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The domain name',
  `domain_create_date` int DEFAULT NULL COMMENT 'The date the domain was created',
  `domain_update_date` int DEFAULT NULL COMMENT 'The date the domain was last updated',
  `domain_expiry_date` int DEFAULT NULL COMMENT 'The date the domain expires',
  `statuses` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Array of integers representing domain statuses',
  `lapse_risk` tinyint DEFAULT '0' COMMENT 'Whether the domain is at risk of lapsing',
  `registrar_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '' COMMENT 'The name of the registrar',
  `is_private` tinyint NOT NULL DEFAULT '0' COMMENT 'Whether the domain is private',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`domain_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `domain_create_date` (`domain_create_date`),
  KEY `domain_update_date` (`domain_update_date`),
  KEY `domain_expiry_date` (`domain_expiry_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_domain_lapse_history` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'The shop_id of the shop that owns custom domain',
  `lapse_history_id` bigint unsigned NOT NULL COMMENT 'The lapse_history_id of the custom domain',
  `domain_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The domain name',
  `lapse_start_date` int NOT NULL COMMENT 'The date when the lapse occured',
  `lapse_end_date` int NOT NULL COMMENT 'The date when the lapse ended',
  `is_lapse` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Boolean to check if the domain is in lapse state',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`lapse_history_id`),
  KEY `lapse_start_date` (`lapse_start_date`),
  KEY `lapse_end_date` (`lapse_end_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_order_requests` (
  `shop_id` bigint NOT NULL,
  `custom_order_request_id` bigint NOT NULL,
  `legacy_conversation_id` bigint DEFAULT NULL,
  `source_listing_id` bigint DEFAULT NULL,
  `source_receipt_id` bigint DEFAULT NULL,
  `buyer_user_id` bigint NOT NULL,
  `request_state` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'initiated',
  `message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `listing_id` bigint DEFAULT NULL,
  `transaction_id` bigint DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`custom_order_request_id`),
  KEY `legacy_conversation_id_idx` (`shop_id`,`legacy_conversation_id`),
  KEY `listing_id_idx` (`shop_id`,`listing_id`),
  KEY `buyer_user_and_legacy_conversation_id_idx` (`buyer_user_id`,`legacy_conversation_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shop_charge_creation_job_log` (
  `charge_creation_job_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `job_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_result` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `job_start_date` int unsigned NOT NULL,
  `job_end_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`job_start_date`,`charge_creation_job_log_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_cancel_survey_results` (
  `survey_result_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `reason_type_id` int unsigned NOT NULL,
  `reason_text` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`survey_result_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_domain` (
  `domain_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `unicode_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state` tinyint unsigned NOT NULL COMMENT 'Defines if the domain was auto-assigned, mapped or purchased.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`domain_id`),
  UNIQUE KEY `name` (`name`(191)),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_domain_dns_record` (
  `record_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `domain_id` bigint unsigned NOT NULL,
  `api_record_id` bigint unsigned NOT NULL,
  `host_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `record_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `preference` int unsigned NOT NULL,
  `is_generated` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`record_id`),
  KEY `shop_id` (`shop_id`),
  KEY `domain_id` (`domain_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_domain_purchase` (
  `shop_id` bigint unsigned NOT NULL,
  `domain_id` bigint unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `unicode_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `whois_protected` tinyint NOT NULL COMMENT 'boolean indicating if whois protected is enabled',
  `auto_renew` tinyint NOT NULL COMMENT 'boolean indicating whether domain will auto renew or not',
  `expiration_date` bigint NOT NULL,
  `domain_price` bigint NOT NULL,
  `create_date` bigint NOT NULL,
  `update_date` bigint NOT NULL,
  `whois_privacy_price` bigint NOT NULL,
  `seller_billed` tinyint NOT NULL,
  `state_mask` bigint NOT NULL DEFAULT '0',
  `auth_code` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `wholesale_whois_privacy_price` bigint NOT NULL DEFAULT '0',
  `wholesale_domain_price` bigint NOT NULL DEFAULT '0',
  `wholesale_price` smallint unsigned NOT NULL DEFAULT '0',
  `wholesale_renewal_price` bigint unsigned NOT NULL DEFAULT '0',
  `retail_renewal_price` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`domain_id`),
  UNIQUE KEY `name` (`name`(191)),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `expiration_date` (`expiration_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_domain_purchase_charge` (
  `shop_id` bigint unsigned NOT NULL,
  `domain_id` bigint unsigned NOT NULL,
  `charge_id` bigint unsigned NOT NULL,
  `type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'what type of charge is this',
  `wholesale_price` int NOT NULL,
  `price` int NOT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `end_date` int NOT NULL COMMENT 'end date of charge coverage',
  PRIMARY KEY (`shop_id`,`domain_id`,`charge_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `end_date` (`end_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_domain_user` (
  `shop_id` bigint unsigned NOT NULL,
  `vendor_user_id` bigint unsigned NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `single_access_token` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `default_contact_id` bigint unsigned NOT NULL,
  `domain_count` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`vendor_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_email_forward` (
  `email_forward_id` bigint unsigned NOT NULL,
  `email_username` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `forward_recipient` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `domain_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`email_forward_id`),
  KEY `domain_id` (`domain_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_email_subscriptions` (
  `email_subscription_id` bigint unsigned NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `vendor_list_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `vendor_email_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`email_subscription_id`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_images` (
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `caption` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`image_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id_status` (`shop_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_pages_modules` (
  `shop_id` bigint unsigned NOT NULL,
  `module_id` bigint unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `value` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `draft_value` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` int NOT NULL DEFAULT '1',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`module_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `type` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_preferences` (
  `shop_id` bigint unsigned NOT NULL,
  `preference_id` bigint unsigned NOT NULL,
  `preference_value` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`preference_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_shop_content` (
  `shop_id` bigint unsigned NOT NULL,
  `content_type_id` bigint unsigned NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`content_type_id`,`state`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_shop_events` (
  `shop_id` bigint unsigned NOT NULL,
  `event_id` bigint unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL DEFAULT '0',
  `all_day` tinyint(1) NOT NULL DEFAULT '0',
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `location` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`event_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `start_date` (`start_date`),
  KEY `end_date` (`end_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_state_changes` (
  `state_change_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `actor_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `from_state` int NOT NULL,
  `to_state` int NOT NULL,
  `context` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` bigint unsigned NOT NULL,
  `from_state_meta` bigint NOT NULL DEFAULT '0',
  `to_state_meta` bigint NOT NULL DEFAULT '0',
  `from_start_date` bigint NOT NULL DEFAULT '0',
  `to_start_date` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`state_change_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custom_shops_trials` (
  `trial_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL,
  `type` int unsigned NOT NULL,
  PRIMARY KEY (`trial_id`),
  KEY `shop_id` (`shop_id`),
  KEY `start_date` (`start_date`),
  KEY `end_date` (`end_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `customshops_state_transition_queue` (
  `transition_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `from_state` int unsigned NOT NULL,
  `from_state_meta` bigint unsigned NOT NULL,
  `to_state` int unsigned NOT NULL,
  `to_state_meta` bigint unsigned NOT NULL,
  `from_date` bigint unsigned NOT NULL,
  `to_date` bigint unsigned NOT NULL,
  `reason` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `invalidated_by` bigint unsigned NOT NULL,
  `completed` int unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transition_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custshop` (
  `shop_id` bigint unsigned NOT NULL,
  `template` text NOT NULL,
  `preview_template` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `custshop_template` (
  `shop_id` bigint unsigned NOT NULL,
  `theme_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `language` varchar(255) NOT NULL DEFAULT 'en',
  PRIMARY KEY (`shop_id`,`theme_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `dac7_sellers_report` (
  `report_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `year` smallint unsigned NOT NULL,
  `report_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Report type - french/dac7',
  `vat_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `siren_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `siret_taxpayer_id_token` bigint unsigned DEFAULT NULL,
  `total_yearly_payment_amount_ledger` decimal(10,2) DEFAULT NULL,
  `total_yearly_payment_amount_eur` decimal(10,2) DEFAULT NULL,
  `total_yearly_payment_count` int unsigned DEFAULT NULL,
  `q1_consideration` decimal(10,2) DEFAULT NULL,
  `q1_sale_count` int unsigned DEFAULT NULL,
  `q1_taxes` decimal(10,2) DEFAULT NULL,
  `q1_fees` decimal(10,2) DEFAULT NULL,
  `q2_consideration` decimal(10,2) DEFAULT NULL,
  `q2_sale_count` int unsigned DEFAULT NULL,
  `q2_taxes` decimal(10,2) DEFAULT NULL,
  `q2_fees` decimal(10,2) DEFAULT NULL,
  `q3_consideration` decimal(10,2) DEFAULT NULL,
  `q3_sale_count` int unsigned DEFAULT NULL,
  `q3_taxes` decimal(10,2) DEFAULT NULL,
  `q3_fees` decimal(10,2) DEFAULT NULL,
  `q4_consideration` decimal(10,2) DEFAULT NULL,
  `q4_sale_count` int unsigned DEFAULT NULL,
  `q4_taxes` decimal(10,2) DEFAULT NULL,
  `q4_fees` decimal(10,2) DEFAULT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_business` tinyint(1) DEFAULT NULL,
  `seller_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Individual: first & last name, Business: business name',
  `seller_first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_zip` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_birth_date` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_account_holder_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bank_country` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` int unsigned DEFAULT '0',
  PRIMARY KEY (`shop_id`,`report_id`),
  KEY `user_id` (`user_id`,`year`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `dap_test` (
  `id` bigint unsigned NOT NULL,
  `shard_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `uniq_name` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `num` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shard_id`,`id`),
  UNIQUE KEY `uniq_name` (`uniq_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='For use in Data Access Platorm testing';

CREATE TABLE `dap_test2` (
  `id` bigint unsigned NOT NULL,
  `shard_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `uniq_name` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `num` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shard_id`,`id`),
  UNIQUE KEY `uniq_name` (`uniq_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='For use in Data Access Platorm testing. This one uses a different vindex than the dap_test table.';

CREATE TABLE `dap_test_shop_shipment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tracking_status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `shipment_details` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipment_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='For use in Data Access Platform testing';

CREATE TABLE `dap_test_shop_shipment_tracking_events` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `tracking_event_id` bigint unsigned NOT NULL,
  `tracking_event` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tracking_event_details` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipment_id`,`tracking_event_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='For use in Data Access Platform testing';

CREATE TABLE `dap_test_shop_shipping_labels` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `carrier` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`shop_id`,`shipment_id`,`shipping_label_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='For use in Data Access Platform testing';

CREATE TABLE `data_access_request` (
  `data_access_request_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `state` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT 'requested, processing, failed, or complete',
  `gearman_handle` varchar(2000) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `completion_date` int NOT NULL DEFAULT '0' COMMENT 'The timestamp of when the completed folder was uploaded to the google cloud bucket. This can be used to calculate if the folder is still in the bucket based on bucket ttl.',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `download_link` varchar(2000) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `requested_by` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `consent_given` tinyint unsigned NOT NULL DEFAULT '0',
  `consent_code` varchar(32) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`user_id`,`data_access_request_id`),
  KEY `state` (`state`),
  KEY `completion_date` (`completion_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `dataplatform_spark_to_db_sharded` (
  `user_id` bigint unsigned NOT NULL,
  `key_id` bigint NOT NULL,
  `data` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`key_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `dawanda_import_batches` (
  `shop_id` bigint unsigned NOT NULL,
  `batch_id` bigint unsigned NOT NULL DEFAULT '0',
  `product_count` int unsigned NOT NULL DEFAULT '0',
  `import_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`batch_id`),
  KEY `batch_id` (`batch_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `deals_weekly_listings` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `promotion_discount` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`listing_id`,`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `debezium_signal` (
  `id` varchar(42) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `data` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Used only to send signals to Debezium';

CREATE TABLE `defective_orders` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `order_date` int unsigned NOT NULL,
  `case_date` int unsigned DEFAULT NULL,
  `low_review_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `external_id` bigint unsigned DEFAULT NULL,
  `rating` tinyint unsigned DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `case_type` varchar(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `device` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `device_uaid` varbinary(128) NOT NULL DEFAULT '',
  `device_type_id` int unsigned NOT NULL DEFAULT '0',
  `environment_id` int unsigned NOT NULL DEFAULT '0',
  `risk_score` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`device_uaid`,`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `discount_user_promotion_mappings` (
  `email_id` bigint unsigned NOT NULL,
  `external_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `promotion_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`email_id`,`campaign_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `dormant_shop_closure_notification` (
  `dormant_shop_closure_notification_id` bigint unsigned NOT NULL COMMENT 'Dormant shop closure notification id',
  `user_id` bigint unsigned NOT NULL COMMENT 'User id of shop owner',
  `notification_type` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Notification type indicating step in shop closure process',
  `days_notice` smallint unsigned NOT NULL COMMENT 'Days notice given until shop closure',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Created date',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date',
  PRIMARY KEY (`dormant_shop_closure_notification_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Dormant shop closure notification';

CREATE TABLE `download_tax_report` (
  `download_tax_report_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `report_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `tax_year` int unsigned NOT NULL,
  `additional_metadata` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`download_tax_report_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `email_address_campaign_metadata` (
  `email_address_campaign_metadata_id` bigint unsigned NOT NULL DEFAULT '0',
  `email_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` varchar(32) NOT NULL DEFAULT '',
  `data` varchar(512) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`email_address_campaign_metadata_id`),
  KEY `email_address_id` (`email_address_id`),
  KEY `data` (`data`(191)),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf16 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `email_invitation` (
  `user_id` bigint unsigned NOT NULL COMMENT 'The user sending the invitation',
  `import_batch_id` bigint unsigned DEFAULT NULL COMMENT 'which gearman batch this email was imported in',
  `email_hash` char(28) NOT NULL COMMENT 'A base64 encoded sha1 hash of the recipient email address',
  `email_type` smallint unsigned NOT NULL COMMENT 'The type of invitation sent',
  `creation_time` int unsigned NOT NULL COMMENT 'The time at which the user the invitation',
  PRIMARY KEY (`user_id`,`email_hash`,`email_type`),
  KEY `creation_time` (`creation_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores individual email invitations that are sent out';

CREATE TABLE `email_to_last_purchases` (
  `email_id` bigint unsigned NOT NULL,
  `last_purchase_date` int NOT NULL DEFAULT '0',
  `second_to_last_purchase_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`email_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `embedding_stats_curators` (
  `curator_type` tinyint(1) NOT NULL DEFAULT '0',
  `curator_id` bigint unsigned NOT NULL DEFAULT '0',
  `content_owner_type` tinyint(1) NOT NULL DEFAULT '0',
  `content_owner_id` bigint unsigned NOT NULL DEFAULT '0',
  `widget_type` tinyint(1) NOT NULL DEFAULT '0',
  `widget_id` bigint unsigned NOT NULL DEFAULT '0',
  `parent_page_domain` varchar(179) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `n_impressions` int NOT NULL DEFAULT '0',
  `n_clicks` int NOT NULL DEFAULT '0',
  `epoch_s` int NOT NULL,
  `hash_bucket` int NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`epoch_s`,`curator_type`,`curator_id`,`content_owner_type`,`content_owner_id`,`widget_type`,`widget_id`),
  KEY `owner_key` (`epoch_s`,`content_owner_type`,`content_owner_id`),
  KEY `widget_key` (`epoch_s`,`widget_type`,`widget_id`),
  KEY `domain_key` (`epoch_s`,`parent_page_domain`),
  KEY `hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `embedding_stats_owners` (
  `content_owner_type` tinyint(1) NOT NULL DEFAULT '0',
  `content_owner_id` bigint unsigned NOT NULL DEFAULT '0',
  `curator_type` tinyint(1) NOT NULL DEFAULT '0',
  `curator_id` bigint unsigned NOT NULL DEFAULT '0',
  `widget_type` tinyint(1) NOT NULL DEFAULT '0',
  `widget_id` bigint unsigned NOT NULL DEFAULT '0',
  `parent_page_domain` varchar(179) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `n_impressions` int NOT NULL DEFAULT '0',
  `n_clicks` int NOT NULL DEFAULT '0',
  `epoch_s` int NOT NULL,
  `hash_bucket` int NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`epoch_s`,`content_owner_type`,`content_owner_id`,`curator_type`,`curator_id`,`widget_type`,`widget_id`),
  KEY `curator_key` (`epoch_s`,`curator_type`,`curator_id`),
  KEY `widget_key` (`epoch_s`,`widget_type`,`widget_id`),
  KEY `domain_key` (`epoch_s`,`parent_page_domain`),
  KEY `hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `enforcement_actions` (
  `action_id` bigint unsigned NOT NULL,
  `decision_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `admin_action_id` bigint unsigned NOT NULL,
  `state_key` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `mutation_key` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `state_value` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `params` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `previous_state_value` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `resulting_state_value` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `action_status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`action_id`),
  KEY `decision_id` (`decision_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `enforcement_conditions` (
  `condition_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `decision_id` bigint unsigned NOT NULL,
  `trigger_id` bigint unsigned NOT NULL COMMENT 'RTT control id, Apollo task id, etc',
  `trigger_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'RTT, Securify, AFQ, Apollo, Atlas, etc',
  `rcdm_control_id` bigint unsigned DEFAULT NULL,
  `rcdm_control_revision_id` bigint unsigned DEFAULT NULL,
  `evaluation_time` int NOT NULL,
  `conditions` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `metadata` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`condition_id`),
  KEY `user_id` (`user_id`),
  KEY `decision_id` (`decision_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `trigger_id` (`trigger_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `enforcement_decisions` (
  `decision_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `etsy_request_uuid` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `flag_id` bigint unsigned NOT NULL,
  `target_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `target_id` bigint unsigned NOT NULL,
  `policy_id` bigint unsigned NOT NULL,
  `policy_audit_id` bigint unsigned NOT NULL,
  `no_op_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'If no action taken, why? already_frozen, already_restricted, etc',
  `created_by` bigint unsigned NOT NULL COMMENT 'Staff id or admin bot id',
  `enforcement_status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`decision_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `enforcement_flag` (
  `id` bigint unsigned NOT NULL,
  `flag_id` bigint unsigned NOT NULL,
  `related_flag_id` bigint unsigned NOT NULL,
  `account_id` bigint unsigned NOT NULL,
  `is_guest` tinyint(1) NOT NULL DEFAULT '0',
  `reporter_user_id` bigint unsigned NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `flag_type_id` bigint unsigned NOT NULL,
  `target_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_id` bigint unsigned NOT NULL,
  `task_id` bigint unsigned NOT NULL,
  `subject` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `reason` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `ref_count` int unsigned NOT NULL,
  `is_auto_action` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `review_state` tinyint(1) NOT NULL,
  `review_reason` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `control_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `control_id` bigint unsigned NOT NULL,
  `control_revision_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `flag_id` (`flag_id`),
  KEY `account_id_flag_type_id_target_type_target_id` (`account_id`,`flag_type_id`,`target_type`,`target_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `enforcement_noop_actions` (
  `noop_action_id` bigint unsigned NOT NULL,
  `decision_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `admin_action_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'which admin action was attempted',
  `blocked_by` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'reason the action could not be performed',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`noop_action_id`),
  KEY `decision_id` (`decision_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `estimated_delivery_framework_coverage` (
  `id` bigint unsigned NOT NULL,
  `base_listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `selected_framework_version` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_using_inferred_destination` tinyint unsigned NOT NULL DEFAULT '0',
  `dataset_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `module_placement` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `destination_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `destination_zip` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `locale_region` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `recommended_listings_min_edd_bucket` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `recommended_listings_max_edd_bucket` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `recommended_listings_query` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `et_interaction_data` (
  `interaction_data_id` bigint unsigned NOT NULL,
  `interaction_id` bigint unsigned NOT NULL,
  `field_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `field_value` varchar(16100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `removed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`interaction_id`,`interaction_data_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `etsy_ads_shop_goals` (
  `shop_id` bigint unsigned NOT NULL,
  `goal` int unsigned NOT NULL,
  `is_selected` tinyint NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`goal`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `etsy_coupons` (
  `email_id` bigint unsigned NOT NULL,
  `coupon_id` bigint unsigned NOT NULL,
  `expiration_date` int NOT NULL,
  `is_used` tinyint(1) NOT NULL DEFAULT '0',
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `maximum_use_count` int unsigned DEFAULT '1',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`email_id`,`coupon_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `etsy_coupons_receipt_group_map` (
  `email_id` bigint unsigned NOT NULL,
  `etsy_coupons_id` bigint unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`email_id`,`etsy_coupons_id`,`receipt_group_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `examplemodule_listing_comparisons` (
  `listing_comparison_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `notes` varchar(10000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`listing_comparison_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `exempt_1099k_shops` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `experiment_eligibility` (
  `user_id` bigint NOT NULL,
  `experiment_key` varchar(255) NOT NULL,
  PRIMARY KEY (`user_id`,`experiment_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `external_contact_users` (
  `external_account_type` tinyint unsigned NOT NULL,
  `external_user_id` bigint unsigned NOT NULL,
  `import_batch_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `external_username` varchar(255) NOT NULL,
  `external_name` varchar(255) NOT NULL,
  `hash_bucket` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`hash_bucket`,`external_account_type`,`external_user_id`,`user_id`,`import_batch_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id_import_batch_id` (`user_id`,`import_batch_id`),
  KEY `ext_acct_type_ext_user_id_user_id_import_batch` (`external_account_type`,`external_user_id`,`user_id`,`import_batch_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebook_account` (
  `facebook_account_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'user_id corresponding to facebook account',
  `access_token` varchar(255) DEFAULT NULL COMMENT 'facebook oauth token',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`facebook_account_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebook_account_profile` (
  `facebook_account_id` bigint unsigned NOT NULL,
  `profile` longtext COMMENT 'facebook profile',
  `friends` longtext COMMENT 'facebook friends',
  `likes` longtext COMMENT 'facebook likes',
  `groups` longtext COMMENT 'facebook groups',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`facebook_account_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebook_action_user` (
  `facebook_action_id` bigint unsigned NOT NULL,
  `hash_bucket` int unsigned NOT NULL,
  `facebook_user_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `action_type_id` smallint unsigned NOT NULL,
  `object_type_id` smallint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`facebook_action_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebook_profiles` (
  `user_id` bigint unsigned NOT NULL,
  `access_token` varchar(255) DEFAULT NULL COMMENT 'facebook authorization token',
  `profile` longtext COMMENT 'facebook profile',
  `friends` longtext COMMENT 'facebook friends',
  `likes` longtext COMMENT 'facebook likes',
  `groups` longtext COMMENT 'facebook groups',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebookads_bill_charge` (
  `shop_id` bigint unsigned NOT NULL,
  `facebookads_bill_charge_id` bigint unsigned NOT NULL,
  `bill_period_first_day` int NOT NULL,
  `bill_period_last_day` int NOT NULL,
  `amount` int unsigned NOT NULL,
  `written` tinyint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`facebookads_bill_charge_id`),
  UNIQUE KEY `idx_shop_bill_start` (`shop_id`,`bill_period_first_day`),
  UNIQUE KEY `idx_shop_bill_end` (`shop_id`,`bill_period_last_day`),
  KEY `idx_period` (`bill_period_first_day`,`bill_period_last_day`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_written` (`written`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `facebookads_visits` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `visit_date` int NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `location` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `uaid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `utm_campaign` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`shop_id`,`uaid`,`visit_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `favoritelistings_users` (
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_state` varchar(10) NOT NULL DEFAULT 'active' COMMENT 'de-normalized listing state',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `state` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`listing_id`,`user_id`),
  KEY `create_date-listing_id` (`create_date`,`listing_id`),
  KEY `update_date-listing_id` (`update_date`,`listing_id`),
  KEY `listing_id-listing_state-user_state-create_date` (`listing_id`,`listing_state`,`user_state`,`create_date`),
  KEY `listing_id-user_state-create_date` (`listing_id`,`user_state`,`create_date`),
  KEY `user_id-listing_state-user_state-create_date` (`user_id`,`listing_state`,`user_state`,`create_date`),
  KEY `shop_id-listing_state-user_state-create_date` (`shop_id`,`listing_state`,`user_state`,`create_date`),
  KEY `shop_user_id-listing_state-user_state-create_date` (`shop_user_id`,`listing_state`,`user_state`,`create_date`),
  KEY `shop_id-create_date` (`shop_id`,`create_date`),
  KEY `shop_id-update_date` (`shop_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `favoriter_attribution` (
  `favoriter_id` bigint unsigned NOT NULL,
  `action_type_id` smallint unsigned NOT NULL,
  `object_type_id` smallint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `object_shardifier_id` bigint unsigned DEFAULT NULL,
  `attributee_id` bigint unsigned NOT NULL DEFAULT '0',
  `orig_attributee_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`favoriter_id`,`object_id`,`object_type_id`,`action_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `favoriteshopposts_users` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Id of the shop that owns the shop post. Shardifier.',
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that favorited the shop post',
  `shop_post_id` bigint unsigned NOT NULL COMMENT 'Id of shop post in the shop_posts table',
  `shop_state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'De-normalized from shops_index status field',
  `user_state` varchar(15) CHARACTER SET utf8 NOT NULL DEFAULT 'active' COMMENT 'De-normalized from users_index user_state field',
  `shop_post_is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'De-normalized from shop_post is_deleted field',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`user_id`,`shop_post_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_post_id` (`shop_post_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `favoriteshops_users` (
  `shop_id` bigint unsigned NOT NULL,
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `shop_state` varchar(25) NOT NULL DEFAULT 'active' COMMENT 'de-normalized from shop table',
  `user_id` bigint unsigned NOT NULL,
  `shop_user_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`user_id`),
  KEY `create_date-shop_id` (`create_date`,`shop_id`),
  KEY `shop_id-user_state-shop_state-create_date` (`shop_id`,`user_state`,`shop_state`,`create_date`),
  KEY `shop_user_id-user_state-shop_state-create_date` (`shop_user_id`,`user_state`,`shop_state`,`create_date`),
  KEY `user_id-shop_user_id-user_state` (`user_id`,`shop_user_id`,`user_state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `favoritetreasuries_users` (
  `treasury_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `treasury_owner_id` bigint unsigned NOT NULL,
  `user_state` varchar(15) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`treasury_id`,`user_id`,`treasury_owner_id`),
  KEY `user_id` (`user_id`),
  KEY `treasury_owner_id` (`treasury_owner_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_cost_adjustment_by_state` (
  `log_id` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `adjustment_id` bigint unsigned DEFAULT NULL,
  `invoice_item_id` bigint unsigned DEFAULT NULL,
  `cost_amount_usd` decimal(18,8) NOT NULL,
  `cost_amount_eur` decimal(18,8) DEFAULT NULL,
  `cost_amount_ledger` decimal(18,8) NOT NULL,
  `cost_amount_provider` decimal(18,8) DEFAULT NULL,
  `date` bigint unsigned NOT NULL,
  `ledger_currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `provider_currency` varchar(3) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_country_entity` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country_id` bigint unsigned NOT NULL,
  `seller_state` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_postal_code` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `sbrf_type` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `adjustment_type` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_cost_insert` (
  `log_id` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `date` bigint unsigned NOT NULL,
  `ledger_currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country_entity` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_country_id` bigint unsigned NOT NULL,
  `seller_state` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_postal_code` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `sbrf_type` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `gl_account` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `carrier_id` int unsigned DEFAULT NULL COMMENT 'The parcel carrier that will deliver the package',
  `provider_id` int unsigned NOT NULL COMMENT 'The service provider Etsy integrates with to obtain the label',
  `provider_currency` varchar(3) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shipping_label_id` bigint NOT NULL,
  `revenue_amount` decimal(18,8) NOT NULL,
  `revenue_amount_eur` decimal(18,8) NOT NULL,
  `revenue_amount_ledger` decimal(18,8) NOT NULL,
  `revenue_amount_provider` decimal(18,8) DEFAULT NULL,
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_ledger_entry_insert` (
  `log_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(60) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `provider_id` int unsigned DEFAULT NULL,
  `carrier_id` int unsigned DEFAULT NULL,
  `ledger_entry_insert_date` bigint unsigned NOT NULL,
  `type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `type_id` bigint unsigned DEFAULT NULL,
  `country_id` int unsigned NOT NULL,
  `country` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `postal_code` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_payin_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_settlement_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_payout_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `etsy_receivable_source` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'External partner retaining Etsy revenue.',
  `origin_currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `eur_rate` bigint unsigned NOT NULL,
  `amount_origin_ccy` decimal(18,2) NOT NULL,
  `amount_eur` decimal(18,2) NOT NULL,
  `amount_ledger` decimal(18,2) NOT NULL,
  `balance` decimal(18,2) NOT NULL,
  `entry_id` bigint unsigned NOT NULL,
  `sequence_number` int NOT NULL,
  `ledger_id` bigint unsigned NOT NULL,
  `parent_entry_id` bigint unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `conversion_rate` double NOT NULL,
  `description` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `source` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_listing_change` (
  `log_id` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `seller_flags_before` bigint unsigned DEFAULT NULL,
  `seller_flags_after` bigint unsigned NOT NULL,
  `state_before` int DEFAULT NULL,
  `state_after` int NOT NULL,
  `create_date_before` int unsigned DEFAULT NULL,
  `create_date_after` int unsigned NOT NULL,
  `ending_date_before` int unsigned DEFAULT NULL,
  `ending_date_after` int unsigned NOT NULL,
  `country_id` bigint unsigned DEFAULT NULL,
  `country` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `postal_code` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `entity` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `seller_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `epil_seller_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_payment_adjustment_by_status` (
  `log_id` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_adjustment_id` bigint unsigned NOT NULL,
  `payment_id` bigint unsigned NOT NULL,
  `shop_payment_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned DEFAULT NULL,
  `payment_adjustment_create_date` bigint unsigned NOT NULL,
  `total_fee_adjustment_amount` int DEFAULT NULL,
  `total_adjustment_amount` int DEFAULT NULL,
  `total_vat_adjustment_amount` int DEFAULT NULL,
  `buyer_total_adjustment_amount` int DEFAULT NULL,
  `ledger_to_usd_fxrate` bigint unsigned DEFAULT NULL,
  `ledger_to_eur_fxrate` bigint unsigned DEFAULT NULL,
  `buyer_to_usd_fxrate` bigint unsigned DEFAULT NULL,
  `buyer_to_eur_fxrate` bigint unsigned DEFAULT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_country` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_method` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_gateway` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `giftcard_payment_gateway` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_type` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `cc_amount` int NOT NULL DEFAULT '0',
  `cc_giftcard_amount` int NOT NULL DEFAULT '0',
  `promo_giftcard_amount` int NOT NULL DEFAULT '0',
  `refund_credit_amount` int NOT NULL DEFAULT '0',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_date` bigint unsigned DEFAULT NULL,
  `is_giftcard` tinyint(1) NOT NULL,
  `is_refund_credit_reversal` tinyint NOT NULL DEFAULT '0',
  `total_tax_adjustment_amount` int DEFAULT NULL,
  `total_buyer_fee_adjustment_amount` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_adjustment_amount` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_adjustment_amount` int DEFAULT NULL,
  `buyer_vat_adjustment_amount` int DEFAULT NULL,
  `buyer_amount_etsy_coupon` int NOT NULL DEFAULT '0',
  `amount_etsy_coupon` int NOT NULL DEFAULT '0',
  `posted_etsy_coupon` int NOT NULL DEFAULT '0',
  `adjusted_etsy_coupon` int DEFAULT NULL,
  `total_etsy_coupon_adjustment_amount` int DEFAULT NULL,
  `total_loyalty_shipping_adjustment_amount` int DEFAULT NULL,
  `ros_loyalty_shipping_discount` int DEFAULT NULL,
  `markup_delta_adjustment` bigint DEFAULT NULL,
  `markdown_delta_adjustment` bigint DEFAULT NULL,
  `payment_date_market_rate` bigint unsigned NOT NULL,
  `adj_date_market_rate` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `country_id` bigint unsigned NOT NULL,
  `country` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `postal_code` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_payout_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `financially_relevant_event_payment_by_status` (
  `log_id` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `log_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_payment_id` bigint unsigned NOT NULL,
  `payment_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned DEFAULT NULL,
  `payment_create_date` bigint unsigned NOT NULL,
  `amount_gross` int NOT NULL,
  `amount_fees` int NOT NULL,
  `amount_vat` int unsigned NOT NULL,
  `posted_gross` int DEFAULT NULL,
  `posted_fees` int DEFAULT NULL,
  `posted_vat` int unsigned NOT NULL,
  `ledger_markdown_amount` int DEFAULT NULL,
  `markup_delta` bigint DEFAULT NULL,
  `markdown_delta` bigint DEFAULT NULL,
  `adjusted_markup_delta` bigint DEFAULT NULL,
  `adjusted_markdown_delta` bigint DEFAULT NULL,
  `buyer_amount_etsy_coupon` int NOT NULL DEFAULT '0',
  `amount_etsy_coupon` int NOT NULL DEFAULT '0',
  `posted_etsy_coupon` int NOT NULL DEFAULT '0',
  `amount_loyalty_shipping_discount` int NOT NULL DEFAULT '0',
  `posted_loyalty_shipping_discount` int NOT NULL DEFAULT '0',
  `ros_loyalty_shipping_discount` int DEFAULT NULL,
  `adjusted_etsy_coupon` int DEFAULT NULL,
  `ledger_to_usd_fxrate` bigint unsigned DEFAULT NULL,
  `ledger_to_eur_fxrate` bigint unsigned DEFAULT NULL,
  `shop_buyer_amount` int NOT NULL,
  `buyer_amount` int NOT NULL,
  `buyer_to_usd_fxrate` bigint unsigned DEFAULT NULL,
  `buyer_to_eur_fxrate` bigint unsigned DEFAULT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_method` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_gateway` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `giftcard_payment_gateway` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `card_type` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `cc_amount` int NOT NULL DEFAULT '0',
  `cc_giftcard_amount` int NOT NULL DEFAULT '0',
  `promo_giftcard_amount` int NOT NULL DEFAULT '0',
  `refund_credit_amount` int NOT NULL DEFAULT '0',
  `status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_date` bigint unsigned DEFAULT NULL,
  `is_giftcard` tinyint(1) NOT NULL,
  `amount_tax` int unsigned NOT NULL,
  `posted_tax` int DEFAULT NULL,
  `adjusted_vat` int DEFAULT NULL,
  `adjusted_tax` int DEFAULT NULL,
  `amount_buyer_fee` int unsigned NOT NULL DEFAULT '0',
  `posted_buyer_fee` int unsigned NOT NULL DEFAULT '0',
  `adjusted_buyer_fee` int unsigned DEFAULT NULL,
  `buyer_amount_buyer_fee` int unsigned NOT NULL DEFAULT '0',
  `buyer_amount_tax` int DEFAULT NULL,
  `buyer_amount_vat` int DEFAULT NULL,
  `market_rate` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `country_id` bigint unsigned NOT NULL,
  `country` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `postal_code` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `entity` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_revenue_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_payout_entity` varchar(48) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_date` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`log_id`,`log_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `finds_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `finds_page_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`finds_page_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `finds_page_module` (
  `finds_page_module_id` bigint unsigned NOT NULL,
  `finds_page_id` bigint unsigned NOT NULL,
  `type` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `module_order` tinyint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`finds_page_module_id`),
  KEY `finds_page_id` (`finds_page_id`,`is_deleted`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `finds_page_module_data` (
  `finds_page_module_id` bigint unsigned NOT NULL,
  `finds_page_id` bigint unsigned NOT NULL,
  `name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `data_order` tinyint unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`finds_page_module_id`,`name`,`data_order`),
  KEY `finds_page_id` (`finds_page_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `finds_page_published` (
  `finds_page_id` bigint unsigned NOT NULL,
  `finds_page_published_id` bigint unsigned NOT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `publish_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`finds_page_id`,`finds_page_published_id`),
  KEY `finds_page_id_2` (`finds_page_id`,`publish_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fm_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `ending_date` int unsigned NOT NULL,
  `quantity` int NOT NULL DEFAULT '1',
  `original_create_date` int unsigned NOT NULL,
  `state` int NOT NULL DEFAULT '0',
  `state_date` int unsigned NOT NULL,
  `seller_flags` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fm_shop_data` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `is_frozen` tinyint(1) NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fm_shop_settings` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fonoa_tax_id_verification_batch_items` (
  `batch_item_id` bigint unsigned NOT NULL COMMENT 'Generated key for a tax id verification batch item',
  `batch_id` bigint unsigned NOT NULL COMMENT 'Batch id that the batch item belongs to',
  `user_identity_program_verification_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The user identity verification program that this verification result belongs to',
  `user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'User id that the batch item belongs to',
  `shop_id` bigint unsigned NOT NULL,
  `validation_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Batch item validation id return by fonoa',
  `batch_item_status` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Status of the response',
  `note` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'notes',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`batch_item_id`),
  KEY `batch_id_idx` (`batch_id`),
  KEY `shop_id_idx` (`shop_id`,`batch_item_id`),
  KEY `batch_item_status_idx` (`batch_item_status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fonoa_tax_id_verification_results` (
  `user_id` bigint unsigned NOT NULL COMMENT 'User id that the verification result belongs to',
  `user_identity_id` bigint unsigned NOT NULL COMMENT 'The user identity that this verification result belongs to',
  `user_identity_program_verification_id` bigint unsigned NOT NULL COMMENT 'The user identity verification program that this verification result belongs to',
  `registration_date` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Registration date string back from fonoa',
  `is_business` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies whether the taxpayer is an individual, or a legal entity - yes, no',
  `business_status` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies whether the company TIN is currently active in the relevant government register - active, inactive, unknown',
  `validation_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies the unique string for particular validation',
  `country_iso_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies country of registration',
  `tax_identification_number` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'A provided TIN number',
  `tin_format` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies whether the TIN format is correct - valid, invalid',
  `found_in_official_database` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies whether TIN found in the official database - yes, no, unknown, not_applicable',
  `tax_registered` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specifies whether TIN is currently registered for VAT/GST - yes, no, unknown, not_applicable',
  `validation_database_source` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Optional - Specifies the database source where the TIN was identified - vies, local, vies_and_local, not_available',
  `registration_name` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Optional - name',
  `fuzzy_match_name_expected` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Optional -fuzzy match expected name',
  `fuzzy_match_name_similarity_percentage` tinyint DEFAULT NULL COMMENT 'Optional -fuzzy match name similarity percentage',
  `registration_address` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Optional -address',
  `india_state_name` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Optional India state name',
  `india_einvoice_status_active` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Optional India einvoice status - yes, no, unknown, not_applicable',
  `india_gstin_status` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Optional India GSTIN status - Active, Cancelled, Suspended.',
  `legal_entity_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'type of entity - Public Limited Company, Private Limited Company etc',
  `tax_registration_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'type of tax registration- Regular,Composition,Special Economic Zone etc',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`user_id`,`user_identity_program_verification_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_notification_log` (
  `forum_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `notification_type` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `forum_notification_log_id` bigint unsigned NOT NULL,
  `forum_thread_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`forum_notification_log_id`),
  KEY `user_in_forum` (`user_id`,`forum_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_post_edit_log` (
  `forum_thread_post_id` bigint NOT NULL,
  `previous_post` mediumtext COLLATE utf8mb4_unicode_ci,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `user_id` bigint NOT NULL,
  `forum_thread_id` bigint NOT NULL,
  PRIMARY KEY (`forum_thread_post_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`),
  KEY `forum_thread_id` (`forum_thread_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_tag_by_thread` (
  `forum_id` bigint unsigned NOT NULL,
  `forum_thread_id` bigint unsigned NOT NULL,
  `forum_tag_id` bigint unsigned NOT NULL,
  `owner_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_user_id` bigint unsigned NOT NULL,
  `update_user_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`forum_id`,`forum_thread_id`,`forum_tag_id`,`owner_user_id`),
  KEY `forum_thread_owner_tag_idx` (`forum_id`,`forum_thread_id`,`owner_user_id`,`forum_tag_id`),
  KEY `forum_date_owner_idx` (`forum_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_tag_link` (
  `forum_tag_id` bigint unsigned NOT NULL,
  `link_target_type` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `link_target_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`forum_tag_id`,`link_target_type`,`link_target_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_thread_by_tag` (
  `forum_tag_id` bigint unsigned NOT NULL,
  `forum_id` bigint unsigned NOT NULL,
  `forum_thread_id` bigint unsigned NOT NULL,
  `owner_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_user_id` bigint unsigned NOT NULL,
  `update_user_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`forum_tag_id`,`forum_id`,`forum_thread_id`,`owner_user_id`),
  KEY `tag_owner_forum_thread_idx` (`forum_tag_id`,`owner_user_id`,`forum_id`,`forum_thread_id`),
  KEY `tag_owner_date_idx` (`forum_tag_id`,`owner_user_id`,`update_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_thread_note` (
  `forum_thread_id` bigint unsigned NOT NULL,
  `forum_thread_post_id` bigint unsigned NOT NULL DEFAULT '0',
  `forum_thread_note_id` bigint unsigned NOT NULL,
  `status` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `create_user_id` bigint unsigned NOT NULL,
  `update_user_id` bigint unsigned NOT NULL,
  `note` text COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`forum_thread_id`,`forum_thread_post_id`,`forum_thread_note_id`),
  KEY `forum_thread_post_status` (`forum_thread_id`,`forum_thread_post_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_thread_post_votes` (
  `forum_thread_id` bigint NOT NULL,
  `forum_thread_post_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `vote_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`forum_thread_id`,`forum_thread_post_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_status` (`forum_thread_id`,`user_id`,`vote_status`),
  KEY `oldest_vote` (`forum_thread_id`,`user_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_thread_posts` (
  `forum_thread_id` bigint unsigned NOT NULL DEFAULT '0',
  `forum_thread_post_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `ip_address` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `post_order` int NOT NULL,
  `post` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `is_admin` tinyint(1) NOT NULL,
  `is_noteworthy` tinyint unsigned NOT NULL DEFAULT '0',
  `last_edit_time` int unsigned NOT NULL DEFAULT '0',
  `user_agent` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `parent_post_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`forum_thread_id`,`forum_thread_post_id`),
  UNIQUE KEY `forum_thread_post_id` (`forum_thread_post_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `thread_time` (`forum_thread_id`,`create_date`),
  KEY `user_id` (`user_id`),
  KEY `forum_thread_parent_post_idx` (`forum_thread_id`,`parent_post_id`,`create_date`),
  KEY `forum_thread_user_active_date_idx` (`forum_thread_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_thread_tag_by_owner` (
  `owner_user_id` bigint unsigned NOT NULL,
  `forum_tag_id` bigint unsigned NOT NULL,
  `forum_id` bigint unsigned NOT NULL,
  `forum_thread_id` bigint unsigned NOT NULL,
  `create_user_id` bigint unsigned NOT NULL,
  `update_user_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`owner_user_id`,`forum_tag_id`,`forum_id`,`forum_thread_id`),
  KEY `owner_forum_thread_tag_idx` (`owner_user_id`,`forum_id`,`forum_thread_id`,`forum_tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_threads` (
  `forum_id` bigint NOT NULL,
  `forum_thread_id` bigint NOT NULL,
  `creator_user_id` bigint NOT NULL,
  `latest_user_id` bigint NOT NULL,
  `latest_post_id` bigint NOT NULL,
  `latest_post_date` int NOT NULL,
  `title` varchar(256) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `post_count` int NOT NULL,
  `privacy` int NOT NULL DEFAULT '0',
  `is_locked` tinyint(1) NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `is_pinned` tinyint(1) NOT NULL DEFAULT '0',
  `is_voting` tinyint(1) NOT NULL DEFAULT '0',
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `admin_title` varchar(256) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`forum_id`,`forum_thread_id`),
  UNIQUE KEY `forum_thread_id` (`forum_thread_id`),
  KEY `forum_id` (`forum_id`,`create_date`),
  KEY `creator_user_id` (`creator_user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `title_start` (`title`(10)),
  KEY `latest_post_date` (`latest_post_date`),
  KEY `threads_by_latest_posts` (`forum_id`,`is_pinned`,`latest_post_date`,`privacy`,`is_active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `forum_user_alerts` (
  `forum_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `alert_type` varchar(255) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `last_digested` int unsigned NOT NULL DEFAULT '0',
  `alert_type_id` tinyint unsigned NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`forum_id`,`user_id`,`alert_type_id`),
  KEY `alert_type` (`alert_type`(15)),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `forum_id_last_digested` (`forum_id`,`last_digested`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='table used to fetch all users receiving an alert for a given';

CREATE TABLE `fund_on_etsy_interest` (
  `user_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `canceled_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `status` (`user_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `funding_payment_events` (
  `funding_payment_event_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `event_type` smallint unsigned NOT NULL,
  `event_data_json` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`funding_payment_event_id`),
  KEY `receipt_id_idx` (`receipt_id`,`funding_payment_event_id`),
  KEY `buyer_user_id_idx` (`buyer_user_id`,`funding_payment_event_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `fundraise_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `fundraise_event_id` bigint unsigned NOT NULL DEFAULT '0',
  `nonprofit_id` bigint unsigned NOT NULL,
  `nonprofit_name` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `nonprofit_taxid` varchar(9) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ledger_id` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_adjustment_id` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_entry_id` bigint unsigned NOT NULL DEFAULT '0',
  `percentage_int` tinyint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int_usd` bigint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `nonprofit_idx` (`nonprofit_id`),
  KEY `receipt_idx` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gen_ai_chat_chat` (
  `chat_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'This will be the shardifier key',
  `title` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `system_template_version` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The system prompt template version',
  `user_template_version` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `toolbox_version` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `llm_client_version` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `origin` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Helpful to distinguish online requests from tests or offline evaluation',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Enables soft deletes',
  PRIMARY KEY (`user_id`,`chat_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='powers the gen ai chat';

CREATE TABLE `gen_ai_chat_message` (
  `message_id` bigint unsigned NOT NULL,
  `chat_id` bigint unsigned NOT NULL,
  `parent_id` bigint unsigned DEFAULT NULL COMMENT 'A message_id of a parent message this message is replying to',
  `user_id` bigint unsigned NOT NULL COMMENT 'This will be the shardifier key',
  `llm_role` enum('assistant','system','user') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'TODO: this should not just be a text field',
  `llm_raw_response` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'The response returned by the LLM',
  `hidden_from_llm` tinyint NOT NULL DEFAULT '0' COMMENT 'Whether to pass this message to the LLM when generating responses',
  `moderated_reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason the message was moderated by the LLM (null means it was not moderated)',
  `blocklisted_reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason the message was blocklisted (null means it was not blocklisted)',
  `meta` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'JSON encoded map of metadata',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Enables soft deletes',
  PRIMARY KEY (`user_id`,`chat_id`,`message_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='powers the gen ai chat';

CREATE TABLE `gen_ai_chat_user` (
  `user_id` bigint unsigned NOT NULL COMMENT 'This will be the shardifier key',
  `can_access` tinyint NOT NULL DEFAULT '0' COMMENT 'Whether the user is eligible for the chat experience',
  `disabled_reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The reason why the user will not receive the chat experience (null means they will receive it)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Enables soft deletes',
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='powers the gen ai chat';

CREATE TABLE `gift_help_request` (
  `buyer_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `recipient_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_help_request_id` bigint unsigned NOT NULL DEFAULT '0',
  `conversation_id` bigint unsigned NOT NULL DEFAULT '0',
  `message_to_seller` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`gift_help_request_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_help_request_attribute` (
  `buyer_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_help_request_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_help_request_attribute_id` bigint unsigned NOT NULL DEFAULT '0',
  `attribute_type` varchar(55) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `attribute_value` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`gift_help_request_id`,`gift_help_request_attribute_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_mode_click_log` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'id of shop for the listing',
  `listing_id` bigint unsigned NOT NULL COMMENT 'id of listing that was clicked',
  `browser_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'id of the browser that made the click',
  `click_date` int unsigned NOT NULL COMMENT 'timestamp when click occurred',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'date this specific db record was most recently updated at',
  `user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'user who initiated the click',
  `listing_price_usd` int unsigned NOT NULL DEFAULT '0' COMMENT 'cost of the listing excluding discounts at time of click in cents',
  `discounted_listing_price_usd` int unsigned NOT NULL DEFAULT '0' COMMENT 'cost of the listing at time of click in cents',
  `persona_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'id of the persona the listing was listed within',
  `gift_idea_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'id of the gift idea the listing was listed within',
  `gift_idea_title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'title of the gift mode module the listing was listed within',
  `module_placement_index` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'where on the page, vertically, the module was placed',
  `position` int unsigned NOT NULL DEFAULT '0' COMMENT 'position of the listing inside its module',
  `platform` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'none' COMMENT 'The platform where the click occurred (e.g. desktop)',
  `gm_key` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'gift mode unique identifier for mapping attribution events',
  PRIMARY KEY (`shop_id`,`listing_id`,`browser_id`,`click_date`),
  KEY `idx_click_date` (`click_date`),
  KEY `idx_user_id` (`shop_id`,`user_id`,`click_date`),
  KEY `idx_shop_click_date` (`shop_id`,`click_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='log of all gift mode clicks';

CREATE TABLE `gift_profile` (
  `gift_profile_id` bigint unsigned NOT NULL COMMENT 'The unique identifier of a gift profile',
  `creator_user_id` bigint unsigned NOT NULL COMMENT 'The ID of the user that originally created the gift profile',
  `collection_id` bigint unsigned DEFAULT NULL COMMENT 'The ID of the associated collection.  Were storing this on this table given a collection will be created upon creation of a Gift Profile.',
  `should_send_occasion_reminders` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Default: 0 = do not notify',
  `offset_from_utc_in_seconds` int DEFAULT NULL COMMENT 'The creators timezone offset from UTC in seconds.  Typically calculated on the client.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`creator_user_id`,`gift_profile_id`),
  KEY `creator_user_id_collection_id` (`creator_user_id`,`collection_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_profile_occasion` (
  `gift_profile_id` bigint unsigned NOT NULL COMMENT 'The ID of the gift_profile this occasion belongs to',
  `creator_user_id` bigint unsigned NOT NULL COMMENT 'The ID of the user that originally created the gift_profile',
  `occasion_id` bigint unsigned NOT NULL COMMENT 'The ID of the Occasion to associate with this record',
  `occasion_day` int unsigned DEFAULT NULL COMMENT 'The day of the Occasion - if null then this probably is not a custom-date Occasion',
  `occasion_month` int unsigned DEFAULT NULL COMMENT 'The month of the Occasion - if null then this probably is not a "custom-date" Occasion',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`creator_user_id`,`gift_profile_id`,`occasion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_profile_occasion_reminder` (
  `gift_profile_occasion_reminder_id` bigint unsigned NOT NULL,
  `gift_profile_id` bigint unsigned DEFAULT NULL COMMENT 'The ID of the gift profile this occasion belongs to.',
  `creator_user_id` bigint unsigned NOT NULL COMMENT 'The ID of the user that originally created the gift profile',
  `occasion_id` bigint unsigned NOT NULL COMMENT 'The ID of the Occasion to associate with this record',
  `reminder_timestamp` int unsigned NOT NULL COMMENT 'The UTC timestamp on which the trigger should be sent to Braze.  This should have already taken the users timezone into account.',
  `sent_at` int unsigned DEFAULT NULL COMMENT 'The timestamp at which the trigger was sent to Braze',
  `day_offset` int unsigned DEFAULT NULL COMMENT 'Day offset to identify 20-day, 30-day, etc, reminders.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`creator_user_id`,`gift_profile_occasion_reminder_id`),
  KEY `reminder_timestamp` (`reminder_timestamp`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_receipt_media` (
  `gift_receipt_options_id` bigint unsigned NOT NULL COMMENT 'unique id of a gift receipt record',
  `shop_id` bigint unsigned NOT NULL COMMENT 'id of the shop for this record, Shardifier',
  `media_id` bigint unsigned NOT NULL COMMENT 'id of media - video_id or audio_id',
  `media_type` bigint unsigned NOT NULL COMMENT 'enum specifying media type',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'User or GuestUser id of uploader',
  `is_guest_user` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'boolean specifying etsyuser or guestuser',
  `access_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'UUID token for authorization',
  `state` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enum specifying state of media',
  PRIMARY KEY (`gift_receipt_options_id`,`shop_id`,`media_id`,`media_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `gift_receipt_options` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'id of the shop for this record, Shardifier',
  `cart_id` bigint unsigned NOT NULL COMMENT 'cart_id or multi_shop_cart_id associated with this record',
  `gift_receipt_options_id` bigint unsigned NOT NULL COMMENT 'unique id of this gift receipt record',
  `receipt_id` bigint unsigned DEFAULT NULL COMMENT 'id of the receipt for this record',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `delete_date` int unsigned DEFAULT NULL,
  `buyer_first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'first name alias for the buyer',
  `recipient_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'email to send gift receipt to',
  `email_send_schedule_option` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enum specifying when to send email',
  `email_sent_date` int unsigned DEFAULT NULL COMMENT 'timestamp of when email was sent',
  `email_scheduled_send_date` int unsigned DEFAULT NULL COMMENT 'timestamp of when email is scheduled to be sent',
  `show_gift_item` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'buyer preference to reveal gift item on gift receipt',
  `show_tracking_info` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'buyer preference to reveal tracking information on gift receipt',
  `gifting_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'gifting token for gift receipt url',
  `gifting_token_expiration_date` int unsigned DEFAULT NULL,
  `create_page_source` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'page buyer used to create shareable gift options record',
  `recipient_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'name entered by the recipient sending a thank you note to the original buyer',
  `thank_you_note` varchar(4095) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'thank you note from the gift recipient to the buyer sent as an email',
  `claim_status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'status of receipt claim by the gift recipient',
  `claim_date` int unsigned DEFAULT NULL COMMENT 'timestamp of when the receipt was claimed by the gift recipient',
  `gift_recipient_user_id` bigint unsigned DEFAULT NULL COMMENT 'user_id of the gift recipient that claimed the receipt',
  `theme_slug` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'slug for theme associated with gift receipt',
  `gifting_flow_status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Gifting flow state across: unknown, preview, draft, created, shared',
  `postpurchase_workflow_status` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'Gift Teaser Postpurchase workflow status',
  PRIMARY KEY (`shop_id`,`cart_id`),
  UNIQUE KEY `gift_receipt_options_id` (`gift_receipt_options_id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  UNIQUE KEY `gifting_token` (`gifting_token`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `receipt_idx` (`shop_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_account_stats_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `hourly_timestamp` int NOT NULL DEFAULT '0',
  `adwords_account_id` bigint unsigned NOT NULL,
  `clicks` int DEFAULT '0',
  `impressions` int DEFAULT '0',
  `avg_cpc` double DEFAULT '0',
  `spend` int DEFAULT '0',
  `create_date` int DEFAULT NULL,
  `update_date` int DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`hourly_timestamp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_attribution_30_days` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `type` tinyint(1) NOT NULL COMMENT 'etsy-funded = 0, seller-paid = 1',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '2 letter country code, ie. US or GB',
  `click_date` int unsigned NOT NULL DEFAULT '0',
  `purchase_date` int unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL,
  `revenue` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `revenue_subtotal` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gclid` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Google appends a unique gclid to every visit',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `platform` tinyint unsigned NOT NULL DEFAULT '4' COMMENT 'device type: desktop=0, mw-handset=1, mw-tablet=2, other=3, unknown=4',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `idx_shop_click_gclid` (`shop_id`,`click_date`,`gclid`),
  KEY `idx_listing` (`shop_id`,`listing_id`,`purchase_date`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_click_platform` (`click_date`,`platform`),
  KEY `idx_shop_market_purchase_date` (`shop_id`,`market`,`purchase_date`),
  KEY `idx_shop_purchase_date` (`shop_id`,`purchase_date`),
  KEY `idx_purchase_date` (`purchase_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to hold orders attribution to GPLA clicks for updated attribution model';

CREATE TABLE `googleads_bid` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `current_bid` int unsigned NOT NULL COMMENT 'USD in microdollars. The bid we want to syndicate.',
  `target_bid` int unsigned NOT NULL COMMENT 'USD in microdollars. The optimal bid useful for recalculating current_bid. Not sent to Google.',
  `google_bid` int unsigned DEFAULT NULL COMMENT 'USD in microdollars. The bid we think Google currently has.',
  `autobid_update_date` int NOT NULL COMMENT 'The last time the autobidder ran on this listing.',
  `syndicator_update_date` int DEFAULT NULL COMMENT 'The last time the syndicator ran on this listing.',
  `mobile_multiplier` int NOT NULL COMMENT 'percentage',
  `is_paused` tinyint(1) NOT NULL DEFAULT '1',
  `adwords_adgroup_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_adgroupad_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_product_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_bid` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in microdollars. The last current bid  in the seller paid campaign',
  `etsy_bid` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in microdollars.  The last current bid in the Etsy paid campaign',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `tablet_multiplier` int NOT NULL DEFAULT '0' COMMENT 'percentage',
  `troas_value` double DEFAULT '0',
  `update_reason` tinyint NOT NULL DEFAULT '0',
  `manual_update_date` int unsigned NOT NULL DEFAULT '0',
  `max_bid` int unsigned DEFAULT NULL COMMENT 'Max Bid in microdollars',
  PRIMARY KEY (`shop_id`,`listing_id`,`market`),
  KEY `update_date` (`update_date`),
  KEY `idx_is_paused` (`is_paused`),
  KEY `idx_is_syndicated` (`current_bid`,`google_bid`),
  KEY `idx_adwords_adgroup_id` (`adwords_adgroup_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='A row is written here when a bid is calculated and when we attempt to sync a bid with Google. ';

CREATE TABLE `googleads_bid_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `current_bid` int unsigned NOT NULL COMMENT 'USD in microdollars. The bid we want to syndicate.',
  `target_bid` int unsigned NOT NULL COMMENT 'USD in microdollars. The optimal bid useful for recalculating current_bid. Not sent to Google.',
  `google_bid` int unsigned DEFAULT NULL COMMENT 'USD in microdollars. The bid we think Google currently has.',
  `autobid_update_date` int NOT NULL COMMENT 'The last time the autobidder ran on this listing.',
  `syndicator_update_date` int DEFAULT NULL COMMENT 'The last time the syndicator ran on this listing.',
  `mobile_multiplier` int NOT NULL COMMENT 'percentage',
  `is_paused` tinyint(1) NOT NULL DEFAULT '1',
  `adwords_adgroup_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_adgroupad_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_product_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_bid` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in microdollars. The last current bid  in the seller paid campaign',
  `etsy_bid` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in microdollars.  The last current bid in the Etsy paid campaign',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `tablet_multiplier` int DEFAULT '0',
  `troas_value` double DEFAULT '0',
  `update_reason` tinyint NOT NULL DEFAULT '0',
  `manual_update_date` int unsigned NOT NULL DEFAULT '0',
  `max_bid` int unsigned DEFAULT NULL COMMENT 'Max Bid in microdollars',
  PRIMARY KEY (`shop_id`,`create_date`,`listing_id`,`market`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `google_status` int NOT NULL DEFAULT '0',
  `etsy_status` int NOT NULL DEFAULT '0',
  `adwords_mcc_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_account_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_budget_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_campaign_id` bigint unsigned NOT NULL DEFAULT '0',
  `daily_budget` int unsigned NOT NULL DEFAULT '0' COMMENT 'daily budget in cents',
  `adwords_campaign_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `merchant_center_subaccount_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_root_adgroup_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `last_start_date` int NOT NULL DEFAULT '0',
  `last_end_date` int NOT NULL DEFAULT '0',
  `adwords_bidding_strategy_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_country_account_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_budget_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `auto_promote_new_listings` tinyint(1) NOT NULL DEFAULT '1',
  `is_auto_paused` tinyint(1) NOT NULL DEFAULT '0',
  `strategy_type` int DEFAULT '1',
  `coinvestment_budget` int unsigned NOT NULL DEFAULT '0',
  `is_primary` tinyint(1) NOT NULL DEFAULT '1',
  `conversion_tracker_id` bigint unsigned DEFAULT NULL,
  `conversion_id` bigint unsigned DEFAULT NULL,
  `conversion_label` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`market`),
  KEY `ix_status` (`google_status`),
  KEY `ix_update_date` (`update_date`),
  KEY `ix_last_end_date` (`last_end_date`),
  KEY `ix_last_start_date` (`last_start_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_criterion` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_user_list_id` bigint unsigned NOT NULL DEFAULT '0',
  `bid_modifier` float NOT NULL DEFAULT '1',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `criterion_type` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`criterion_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_criterion_historical` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_user_list_id` bigint unsigned NOT NULL DEFAULT '0',
  `bid_modifier` float NOT NULL DEFAULT '1',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `criterion_type` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`adwords_user_list_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code like US, CA, GB',
  `google_status` int NOT NULL,
  `etsy_status` int NOT NULL,
  `adwords_mcc_id` bigint unsigned NOT NULL,
  `adwords_account_id` bigint unsigned NOT NULL,
  `adwords_budget_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_campaign_id` bigint unsigned NOT NULL DEFAULT '0',
  `daily_budget` int unsigned NOT NULL,
  `adwords_campaign_criterion_id` bigint unsigned NOT NULL,
  `merchant_center_subaccount_id` bigint unsigned NOT NULL,
  `adwords_root_adgroup_criterion_id` bigint unsigned NOT NULL,
  `last_start_date` int NOT NULL,
  `last_end_date` int NOT NULL,
  `update_date` int NOT NULL,
  `adwords_bidding_strategy_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_country_account_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_budget_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `auto_promote_new_listings` tinyint(1) NOT NULL DEFAULT '1',
  `is_auto_paused` tinyint(1) NOT NULL DEFAULT '0',
  `strategy_type` int DEFAULT '1',
  `coinvestment_budget` int unsigned NOT NULL DEFAULT '0',
  `is_primary` tinyint(1) NOT NULL DEFAULT '1',
  `conversion_tracker_id` bigint unsigned DEFAULT NULL,
  `conversion_id` bigint unsigned DEFAULT NULL,
  `conversion_label` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`create_date`,`market`),
  KEY `ix_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_performance_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `adwords_account_id` bigint unsigned NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `campaign_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `clicks` int NOT NULL,
  `impressions` int NOT NULL,
  `cost` int NOT NULL,
  `amount` int NOT NULL,
  `conversions` int NOT NULL,
  `conversion_value` double NOT NULL DEFAULT '0',
  `all_conversions` int NOT NULL,
  `all_conversion_value` double NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `run_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`market`,`run_date`),
  KEY `googleads_campaign_performance_daily_create_date` (`create_date`),
  KEY `googleads_campaign_performance_daily_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_treatments` (
  `shop_id` bigint unsigned NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `bidding_strategy` tinyint(1) NOT NULL DEFAULT '0',
  `crm_lists` tinyint(1) NOT NULL DEFAULT '0',
  `product_groups` tinyint(1) NOT NULL DEFAULT '0',
  `optimizer` tinyint(1) NOT NULL DEFAULT '0',
  `coinvestment` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_campaign_treatments_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `bidding_strategy` tinyint(1) NOT NULL DEFAULT '0',
  `crm_lists` tinyint(1) NOT NULL DEFAULT '0',
  `product_groups` tinyint(1) NOT NULL DEFAULT '0',
  `optimizer` tinyint(1) NOT NULL DEFAULT '0',
  `coinvestment` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_etsy_bid` (
  `adwords_adgroup_id` bigint unsigned NOT NULL,
  `adwords_campaign_id` bigint unsigned NOT NULL,
  `adwords_adgroup_criterion_id` bigint unsigned NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '2 letter country code, ie. US or GB',
  `current_bid` int unsigned NOT NULL COMMENT 'USD in microdollars. The bid we want to syndicate.',
  `google_bid` int unsigned DEFAULT NULL COMMENT 'USD in microdollars. The bid we think Google currently has.',
  `mobile_multiplier` int NOT NULL COMMENT 'percentage',
  `autobid_update_date` int NOT NULL,
  `syndicator_update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`adwords_campaign_id`,`adwords_adgroup_id`),
  KEY `idx_current_bid` (`current_bid`),
  KEY `idx_google_bid` (`google_bid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_etsy_campaign_historical` (
  `adwords_campaign_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `adwords_mcc_id` bigint unsigned NOT NULL,
  `adwords_account_id` bigint unsigned NOT NULL,
  `adwords_budget_id` bigint unsigned NOT NULL,
  `budget` int unsigned NOT NULL DEFAULT '100' COMMENT 'USD in pennies',
  PRIMARY KEY (`adwords_campaign_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_listing_adgroup` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `adwords_adgroup_id` bigint unsigned NOT NULL,
  `adwords_product_criterion_id` bigint unsigned NOT NULL,
  `status` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`adwords_adgroup_id`),
  KEY `ix_adwords_adgroup_id` (`adwords_adgroup_id`),
  KEY `ix_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_listing_stats_by_platform` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '2 letter country code, ie. US or GB',
  `platform` tinyint unsigned NOT NULL COMMENT 'device type: desktop=0, mw-handset=1, mw-tablet=2, other=3',
  `start_date` int unsigned NOT NULL COMMENT 'The start time of the rolled up timeframe',
  `impressions` int unsigned NOT NULL DEFAULT '0',
  `google_clicks` int unsigned NOT NULL DEFAULT '0',
  `spend` int unsigned NOT NULL DEFAULT '0' COMMENT 'spend in USD microdollars',
  `gms` bigint unsigned DEFAULT NULL,
  `budget` int unsigned NOT NULL DEFAULT '100' COMMENT 'max live budget this day in USD pennies',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`market`,`platform`,`start_date`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='seller-funded campaign stats by listing, market, platform, and day';

CREATE TABLE `googleads_listing_update` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `drift_update_time` int NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `ix_drift_update_time` (`drift_update_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_mca_account_issues` (
  `shop_id` bigint unsigned NOT NULL,
  `market` char(2) NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `issue_category` varchar(100) NOT NULL,
  `severity` varchar(50) NOT NULL DEFAULT '',
  `title` varchar(200) NOT NULL DEFAULT '',
  `is_resolved` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market`,`issue_category`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_product_groups` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `adwords_adgroup_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` tinyint unsigned NOT NULL DEFAULT '0',
  `bid_modifier` float NOT NULL DEFAULT '1',
  `google_bid` int unsigned DEFAULT NULL COMMENT 'USD in microdollars. The bid we think Google currently has for this product group.',
  `is_paused` tinyint(1) NOT NULL DEFAULT '0',
  `syndicator_update_date` int DEFAULT NULL COMMENT 'The last time the syndicator ran on this listing.',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`adwords_adgroup_id`,`adwords_criterion_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_market_idx` (`shop_id`,`market`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_product_groups_historical` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO country code e.g. US, CA, GB, AU, FR, DE',
  `adwords_adgroup_id` bigint unsigned NOT NULL DEFAULT '0',
  `adwords_criterion_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` tinyint unsigned NOT NULL DEFAULT '0',
  `bid_modifier` float NOT NULL DEFAULT '1',
  `google_bid` int unsigned DEFAULT NULL COMMENT 'USD in microdollars. The bid we think Google currently has for this product group.',
  `is_paused` tinyint(1) NOT NULL DEFAULT '0',
  `syndicator_update_date` int DEFAULT NULL COMMENT 'The last time the syndicator ran on this listing.',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_seller_billing_ledger` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL COMMENT 'when this ledger line was created',
  `charge_date` int NOT NULL COMMENT 'the date the charge was incurred',
  `googleads_seller_billing_ledger_id` bigint NOT NULL,
  `type` varchar(16) CHARACTER SET utf8 NOT NULL,
  `total_amount` int NOT NULL COMMENT 'USD pennies of total charge (if positive) or credit (if negative)',
  `seller_amount` int NOT NULL COMMENT 'USD pennies of seller portion of the charge (if positive) or credit (if negative)',
  `seller_balance` int NOT NULL COMMENT 'Outstanding balance of the seller in USD pennies including the amount on this line',
  `update_date` int unsigned NOT NULL,
  `sequence_number` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`create_date`,`googleads_seller_billing_ledger_id`),
  KEY `shop_id` (`shop_id`,`charge_date`,`googleads_seller_billing_ledger_id`),
  KEY `update_date` (`update_date`),
  KEY `ledger_id_idx` (`shop_id`,`googleads_seller_billing_ledger_id`),
  KEY `ordered_idx` (`shop_id`,`create_date`,`sequence_number`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `googleads_stats_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `type` tinyint(1) NOT NULL COMMENT 'etsy-funded = 0, seller-paid = 1',
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '2 letter country code, ie. US or GB',
  `start_date` int NOT NULL COMMENT 'The start time of the rolled up timeframe',
  `impressions` int NOT NULL DEFAULT '0',
  `spend` int NOT NULL DEFAULT '0' COMMENT 'spend in USD microdollars',
  `budget` int unsigned NOT NULL DEFAULT '100' COMMENT 'max live budget this day in USD pennies',
  `gms` bigint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `google_clicks` int DEFAULT NULL,
  `etsy_visits` int DEFAULT NULL,
  `coinvestment_budget` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`market`,`start_date`,`type`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Daily stats rollup';

CREATE TABLE `googleads_stats_etsy_daily` (
  `adwords_adgroup_id` bigint unsigned NOT NULL,
  `adwords_campaign_id` bigint unsigned NOT NULL,
  `start_date` int NOT NULL COMMENT 'The start time of the rolled up timeframe',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `market` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '2 letter country code, ie. US or GB',
  `impressions` int NOT NULL DEFAULT '0',
  `spend` int unsigned NOT NULL DEFAULT '0' COMMENT 'spend in USD microdollars',
  `budget` int unsigned NOT NULL DEFAULT '0' COMMENT 'max live budget this day in USD pennies',
  `google_clicks` int NOT NULL DEFAULT '0',
  `etsy_visits` int DEFAULT NULL,
  `gms` int DEFAULT NULL COMMENT 'attributed GMS in microdollars',
  PRIMARY KEY (`adwords_campaign_id`,`adwords_adgroup_id`,`start_date`),
  KEY `idx_start_date` (`start_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `groups_audit_trail` (
  `groups_audit_id` bigint unsigned NOT NULL COMMENT 'from the ticket server, primary key',
  `group_id` bigint unsigned NOT NULL,
  `old_status` varchar(255) NOT NULL COMMENT 'status prior to this action',
  `new_status` varchar(255) NOT NULL COMMENT 'status after this action',
  `old_role` varchar(255) NOT NULL COMMENT 'role prior to this action',
  `new_role` varchar(255) NOT NULL COMMENT 'role after this action',
  `actor_user_id` bigint unsigned NOT NULL COMMENT 'user who triggered this action',
  `target_user_id` bigint unsigned NOT NULL COMMENT 'this might need to be nullable when we allow inviting non-members',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `atlas_auth_username` varchar(255) NOT NULL,
  PRIMARY KEY (`groups_audit_id`),
  KEY `group_id` (`group_id`),
  KEY `actor_user_id` (`actor_user_id`),
  KEY `target_user_id` (`target_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `atlas_auth_username` (`atlas_auth_username`(15))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='audit trail for groups actions';

CREATE TABLE `groups_data` (
  `group_id` bigint unsigned NOT NULL DEFAULT '0',
  `long_description` text NOT NULL,
  `requirements` text NOT NULL,
  `related_links` text,
  `short_description` varchar(255) NOT NULL,
  `type` varchar(255) NOT NULL,
  `is_juried` tinyint(1) NOT NULL,
  `group_inauguration_date` int NOT NULL DEFAULT '0',
  `avatar_id` bigint unsigned NOT NULL DEFAULT '0',
  `banner_id` bigint unsigned NOT NULL DEFAULT '0',
  `location` varchar(255) DEFAULT NULL,
  `lat` int DEFAULT NULL,
  `lon` int DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `application_question` text,
  `application_essay_required` tinyint(1) NOT NULL DEFAULT '0',
  `google_map_zoom_level` tinyint NOT NULL DEFAULT '8',
  `announcement` text,
  PRIMARY KEY (`group_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `type` (`type`(10),`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `groups_tags` (
  `group_id` bigint unsigned NOT NULL DEFAULT '0',
  `text` varchar(255) NOT NULL,
  `status` varchar(255) NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`group_id`,`text`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `text` (`text`(15))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `groups_users` (
  `group_id` int NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `application_essay` mediumtext COLLATE utf8mb4_unicode_ci,
  `user_role` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `login_name` varchar(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `display_name` varchar(257) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `shop_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`group_id`,`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `user_status` (`user_status`(10),`group_id`),
  KEY `user_role` (`user_role`(10),`group_id`),
  KEY `user_role-login_name` (`user_role`(191),`login_name`),
  KEY `user_role-update_date` (`user_role`(191),`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_buyer_reported_transactions` (
  `reported_transaction_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_id` bigint unsigned NOT NULL DEFAULT '0',
  `buyer_id` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL DEFAULT '0',
  `update_date` bigint unsigned NOT NULL DEFAULT '0',
  `message` longtext COLLATE utf8mb4_unicode_ci,
  `is_closed` tinyint(1) NOT NULL DEFAULT '0',
  `resolution_date` int unsigned DEFAULT '0',
  `resolution_message` longtext COLLATE utf8mb4_unicode_ci,
  `admin_id` bigint unsigned DEFAULT '0',
  `reason` longtext COLLATE utf8mb4_unicode_ci,
  `convo_id` bigint unsigned DEFAULT '0',
  PRIMARY KEY (`buyer_id`,`reported_transaction_id`),
  KEY `shop_reported_transaction_transaction_id_index` (`transaction_id`),
  KEY `buyer_reported_transaction_create_date_index` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_buyer_targeted_offer` (
  `buyer_targeted_offer_id` bigint unsigned NOT NULL,
  `buyer_uaid_hash_bucket` bigint unsigned NOT NULL,
  `buyer_uaid` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `coupon_state` tinyint(1) NOT NULL DEFAULT '0',
  `shop_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `granted_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_uaid_hash_bucket`,`buyer_targeted_offer_id`),
  KEY `uaid_promotion_grant_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`promotion_id`,`grant_type`,`grant_origin_id`),
  KEY `uaid_grant_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`grant_type`,`grant_origin_id`),
  KEY `uaid_shop_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`shop_id`),
  KEY `uaid_state_status_expire_create_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`coupon_state`,`shop_status`,`expire_date`,`granted_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_buyer_targeted_offer_event` (
  `buyer_targeted_offer_event_id` bigint unsigned NOT NULL,
  `buyer_uaid_hash_bucket` bigint unsigned NOT NULL,
  `buyer_uaid` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `event_type` tinyint(1) NOT NULL,
  `event_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_uaid_hash_bucket`,`buyer_targeted_offer_event_id`),
  KEY `uaid_grant_promotion_event_type_event_date_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`grant_type`,`grant_origin_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `uaid_shop_event_type_event_date_idx` (`buyer_uaid_hash_bucket`,`buyer_uaid`,`shop_id`,`event_type`,`event_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_convo_users` (
  `conversation_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`conversation_id`,`guest_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_favoritelistings` (
  `hash_bucket` bigint unsigned NOT NULL,
  `uaid` varchar(28) COLLATE utf8mb4_unicode_ci NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `listing_state` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shop_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`hash_bucket`,`uaid`,`listing_id`,`create_date`),
  KEY `uaid` (`uaid`,`listing_state`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `uaid_listing_id_create_date` (`uaid`,`listing_id`,`create_date`),
  KEY `hash_bucket_uaid_listing_state_create_date` (`hash_bucket`,`uaid`,`listing_state`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_message_pending` (
  `confirm_id` bigint unsigned NOT NULL,
  `confirm_status` int unsigned NOT NULL DEFAULT '0',
  `recipient_id` bigint unsigned NOT NULL COMMENT 'user id of the seller who will receive this email',
  `context_type` smallint unsigned NOT NULL,
  `referring_id` bigint unsigned NOT NULL,
  `referring_type` smallint unsigned NOT NULL,
  `guest_email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `guest_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `convo_subject` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `convo_content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `confirm_date` int unsigned NOT NULL,
  PRIMARY KEY (`confirm_id`,`recipient_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_pass` (
  `user_id` bigint NOT NULL,
  `guestpass_hash` varchar(144) COLLATE utf8mb4_unicode_ci NOT NULL,
  `object_type` smallint NOT NULL,
  `object_id` bigint NOT NULL,
  `redirect_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int DEFAULT NULL,
  PRIMARY KEY (`user_id`,`guestpass_hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_pass_holder` (
  `user_id` bigint unsigned NOT NULL,
  `guestpass_hash` varchar(144) COLLATE utf8mb4_unicode_ci NOT NULL,
  `object_type` smallint NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`guestpass_hash`),
  KEY `user_id` (`user_id`,`object_type`,`object_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_action_audit` (
  `guest_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `audit_id` bigint unsigned NOT NULL,
  `action_id` int unsigned NOT NULL,
  `action` longblob COMMENT 'json representation of the action for this event',
  `target` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`guest_user_id`,`create_date`,`action_id`,`audit_id`),
  KEY `audit_id_idx` (`audit_id`),
  KEY `user_action_target_idx` (`guest_user_id`,`action_id`,`target`(50)),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_details` (
  `guest_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `first_name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `last_name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `transaction_buy_count` int NOT NULL DEFAULT '0',
  `is_email_incorrect` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`guest_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Details for Guest User';

CREATE TABLE `guest_user_klarna_auth_initiations` (
  `klarna_auth_initiation_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `payment_method` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` char(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPEN',
  `initiation_psp_reference` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen pspReference header from call to /payments endpoint',
  `initiation_http_status` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'HTTP status code from /payments call to Adyen',
  `initiation_error_message` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error message from /payments call',
  `initiation_error_type` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error type from /payments call',
  `initiation_error_code` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error code from /payments call',
  `completion_psp_reference` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen pspReference header from /payments/details call',
  `completion_http_status` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'HTTP status code from /payments/details call to Adyen',
  `completion_error_message` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error message from /payments/details call',
  `completion_error_type` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error type from /payments/details call',
  `completion_error_code` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error code from /payments/details call',
  `klarna_order_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The order id at Klarna',
  `payment_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'May not be repeated, but will be null until payment is actually created',
  `cc_txn_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'May not be repeated, but will be null until payment is actually created',
  `cart_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'ID of the cart sent to Klarna. May be repeated if buyer retries with same cart',
  `payment_data` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This is the gigantic token we need in order to fetch status updates on this attempt to pay. Basically, the whole reason this table exists',
  `redirect_result` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This is the token provided as a GET parameter when returning from Klarna. Storing this in case it may help with debugging',
  `initiation_response_body` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Raw response body from the /payments call to Adyen. For debugging. TBD whether we need this long term.',
  `completion_response_body` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Raw response body from the /payments/details call to Adyen. For debugging. TBD whether we need this long term.',
  `redirect_url` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This may not be necessary in the long run. We intend to return this value to Checkout immediately after the response comes back from Klarna',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`klarna_auth_initiation_id`),
  KEY `group_cart_id` (`cart_id`,`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `pk_and_user` (`klarna_auth_initiation_id`,`guest_user_id`,`create_date`),
  KEY `cc_txn_and_user` (`cc_txn_id`,`guest_user_id`,`create_date`),
  KEY `klarna_order_and_user` (`klarna_order_id`,`guest_user_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_klarna_details` (
  `klarna_details_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL DEFAULT '0',
  `billing_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `phone` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `birthday_month` int DEFAULT NULL,
  `birthday_day` int DEFAULT NULL,
  `birthday_year` int DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `gender` int unsigned NOT NULL,
  `first_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`user_id`,`klarna_details_id`),
  KEY `user_id_receipt_group_id` (`user_id`,`receipt_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_marketplace_fee` (
  `marketplace_fee_id` bigint unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `total` int unsigned NOT NULL,
  `tax` int unsigned NOT NULL DEFAULT '0',
  `rate` int unsigned NOT NULL,
  `adjusted_amount` int unsigned DEFAULT NULL,
  `adjusted_total` int unsigned DEFAULT NULL,
  `adjusted_tax` int unsigned DEFAULT NULL,
  `deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`marketplace_fee_id`),
  KEY `receipt_group_id_idx` (`receipt_group_id`),
  KEY `buyer_user_id_idx` (`buyer_user_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_messages` (
  `message_id` bigint unsigned NOT NULL COMMENT 'Message id',
  `receipt_id` bigint unsigned DEFAULT NULL COMMENT 'References the receipt',
  `guest_user_id` bigint unsigned NOT NULL COMMENT 'References the user',
  `message_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Message id related to external service (e.g twilio)',
  `service_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Service id related to external service (e.g twilio)',
  `account_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Account sid related to external service (e.g twilio)',
  `message_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message type (e.g order confirmation)',
  `message_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message status (e.g sent, delivered, queued)',
  `message_channel` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message channel (e.g sms, whatsapp, messenger, mms)',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Created date',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date',
  PRIMARY KEY (`message_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `message_sid` (`message_sid`),
  KEY `account_sid` (`account_sid`),
  KEY `service_sid` (`service_sid`),
  KEY `guest_user_id` (`guest_user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Sms messages for guest user';

CREATE TABLE `guest_user_paybybank_accounts` (
  `account_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `user_detail_id` bigint unsigned NOT NULL,
  `cart_id` bigint unsigned DEFAULT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_tail` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_logo_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_icon_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_institution_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_checking_or_savings` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_fingerprint` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `type` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`user_id`,`account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `detail_id` (`user_id`,`user_detail_id`),
  KEY `user_type_account_status_cart` (`user_id`,`account_id`,`type`,`status`,`cart_id`),
  KEY `processor_id` (`processor`(16),`processor_id`(128)),
  KEY `user_fingerprint` (`user_id`,`account_fingerprint`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_paybybank_details` (
  `detail_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`detail_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `processor_id` (`processor`(16),`processor_id`(128))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_paybybank_payment_initiations` (
  `payment_initiation_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `user_detail_id` bigint unsigned NOT NULL,
  `user_account_id` bigint unsigned DEFAULT NULL,
  `cart_id` bigint unsigned DEFAULT NULL,
  `amount` int NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_authorization_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `account_tail` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_logo_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_icon_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_institution_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_type` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_fingerprint` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `expiration_date` bigint unsigned DEFAULT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`payment_initiation_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `detail_account_id` (`user_id`,`user_detail_id`,`user_account_id`),
  KEY `user_status_cart` (`user_id`,`status`,`cart_id`),
  KEY `processor_id` (`processor`(16),`processor_id`(128)),
  KEY `user_cart_expiration` (`user_id`,`cart_id`,`expiration_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_preferences` (
  `guest_user_id` bigint unsigned NOT NULL,
  `preference_id` int unsigned NOT NULL,
  `preference_setting` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`guest_user_id`,`preference_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store guest user preferences';

CREATE TABLE `guest_user_privacy_details` (
  `guest_user_id` bigint unsigned NOT NULL,
  `third_party_integration_allowed` tinyint unsigned NOT NULL DEFAULT '0',
  `personalization_allowed` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_receipt_groups` (
  `receipt_group_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `multi_shop_cart_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_group_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `multi_shop_cart_id` (`multi_shop_cart_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `canceled_date` int unsigned NOT NULL,
  `shop_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `order_id` bigint unsigned DEFAULT NULL,
  `purchase_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipped` tinyint unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `shipping_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shardifier for shipping_address_id',
  `shipping_address_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'references a record in etsy_shard.users_addresses',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `dc_payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `in_person_payment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'NA',
  `in_person_receipt_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_secret` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message_from_payment` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `is_echeck` tinyint unsigned DEFAULT '0',
  `checkout_version` int unsigned DEFAULT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `payment_transaction_id` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `applied_transaction_fee_rate` int unsigned DEFAULT NULL COMMENT 'Transaction fee applied to transactions on a receipt, not the source of truth but used for display purposes on the ledger',
  `applied_vat_rate` int unsigned NOT NULL DEFAULT '0',
  `applied_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `seller_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `vat_invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipping_taxable` tinyint unsigned DEFAULT '0',
  `message_from_seller` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `message_from_buyer` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `google_wallet_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `dc_paypal_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_funding_campaign` tinyint(1) NOT NULL DEFAULT '0',
  `seller_user_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `structured_policies_id` bigint unsigned DEFAULT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `is_claimed` tinyint NOT NULL DEFAULT '0',
  `gift_message` varchar(4095) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gift_buyer_first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `btn_ref` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `requested_gift_wrap` tinyint unsigned NOT NULL DEFAULT '0',
  `is_gift_wrap_taxable` tinyint unsigned NOT NULL DEFAULT '0',
  `tax_transaction_code` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `flagged_for_manual_fraud_review` tinyint unsigned NOT NULL DEFAULT '0',
  `applied_shipping_tax_rate` int unsigned DEFAULT NULL,
  `applied_gift_wrap_tax_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `tax_client` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `tax_finalization_date` int unsigned NOT NULL DEFAULT '0',
  `tax_reversal_finalization_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'track when/if the taxes were reversed/voided and prevent application to void taxes more than once.',
  `seller_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_recipient_user_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  KEY `buyer_user_id_status_idx` (`shop_id`,`status`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `buyer_user_id_purchase_order_id` (`buyer_user_id`,`purchase_order_id`),
  KEY `receipt_group_id` (`buyer_user_id`,`receipt_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Receipts for GuestUser';

CREATE TABLE `guest_user_receipts_promotions` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`,`promotion_id`),
  KEY `shop_and_promotion_id` (`shop_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store sales & coupons in a guest user receipt';

CREATE TABLE `guest_user_receipts_totals` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `usd_total_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_total_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_total_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_total_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ros_total_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `usd_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_total_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `usd_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `eur_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `shop_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `buyer_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ros_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Receipt Totals for GuestUser';

CREATE TABLE `guest_user_stripe_messages` (
  `stripe_message_id` bigint unsigned NOT NULL,
  `stripe_event_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `reference_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `parent_reference_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `parent_reference_id` bigint unsigned DEFAULT NULL,
  `event_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '50 char is current longest on Stripe',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`stripe_message_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `update_date_index` (`update_date`),
  KEY `key_reference_id_type` (`reference_id`,`reference_type`(128)),
  KEY `key_parent_reference_id_type` (`parent_reference_id`,`parent_reference_type`(128))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `title` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL,
  `price_old` int unsigned DEFAULT NULL,
  `currency_code_old` varchar(6) COLLATE utf8mb4_unicode_ci DEFAULT 'USD',
  `quantity` int NOT NULL,
  `image_listing_id` bigint unsigned DEFAULT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shipping_cost_old` int unsigned DEFAULT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `seller_feedback_id` bigint unsigned DEFAULT NULL,
  `buyer_feedback_id` bigint unsigned DEFAULT NULL,
  `transaction_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT 'listing',
  `images_listing_id` longtext COLLATE utf8mb4_unicode_ci,
  `suppressed` tinyint(1) DEFAULT NULL,
  `buyer_price_old` int unsigned DEFAULT NULL,
  `buyer_currency_code_old` varchar(6) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `buyer_shipping_cost_old` int unsigned DEFAULT NULL,
  `buyer_tax_cost_old` int unsigned DEFAULT NULL,
  `usd_price_old` int unsigned DEFAULT NULL,
  `usd_shipping_cost_old` int unsigned DEFAULT NULL,
  `usd_tax_cost_old` int unsigned DEFAULT NULL,
  `tax_cost_old` int unsigned DEFAULT NULL,
  `coupon_discount_old` int unsigned DEFAULT NULL,
  `usd_coupon_discount_old` int unsigned DEFAULT NULL,
  `buyer_coupon_discount_old` int unsigned DEFAULT NULL,
  `shipping_discount_old` int unsigned DEFAULT NULL,
  `usd_shipping_discount_old` int unsigned DEFAULT NULL,
  `buyer_shipping_discount_old` int unsigned DEFAULT NULL,
  `subtotal_price_old` int unsigned DEFAULT NULL,
  `usd_subtotal_price_old` int unsigned DEFAULT NULL,
  `buyer_subtotal_price_old` int unsigned DEFAULT NULL,
  `coupon_id_old` bigint unsigned DEFAULT NULL,
  `tags_str` longtext COLLATE utf8mb4_unicode_ci,
  `materials_str` longtext COLLATE utf8mb4_unicode_ci,
  `listing_type` int DEFAULT NULL,
  `listing_inventory_id` bigint unsigned DEFAULT NULL,
  `variation_data_version` int DEFAULT NULL,
  `required_variation_details` longtext COLLATE utf8mb4_unicode_ci,
  `optional_variation_details` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `paid_date` int unsigned DEFAULT NULL,
  `shipped_date` int unsigned DEFAULT NULL,
  `status` tinyint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `csp_country_id` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listing_id_create_date_idx` (`listing_id`,`create_date`),
  KEY `receipt_id_idx` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Transactions for GuestUsers';

CREATE TABLE `guest_user_transactions_totals` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `ledger_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_pretty_price_added` int NOT NULL DEFAULT '0',
  `eur_pretty_price_added` int NOT NULL DEFAULT '0',
  `shop_pretty_price_added` int NOT NULL DEFAULT '0',
  `buyer_pretty_price_added` int NOT NULL DEFAULT '0',
  `ros_pretty_price_added` int NOT NULL DEFAULT '0',
  `ledger_pretty_price_added` int NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`),
  UNIQUE KEY `transaction_id` (`buyer_user_id`,`transaction_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Transaction Totals for GuestUser';

CREATE TABLE `guest_user_transactions_totals_personalization` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `personalization_object_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `eur_price` int unsigned NOT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_price` int unsigned NOT NULL,
  `buyer_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_price` int unsigned NOT NULL,
  `ledger_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`,`personalization_object_id`),
  UNIQUE KEY `personalization_object_id` (`buyer_user_id`,`transaction_id`,`personalization_object_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_user_vat_credit_notes` (
  `guest_vat_credit_note_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`,`guest_vat_credit_note_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_users_addresses` (
  `address_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `country_id` bigint unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `phone` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`guest_user_id`,`address_id`),
  KEY `user_id_and_create_date` (`guest_user_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Addresses for Guest Users';

CREATE TABLE `guest_users_cc_token` (
  `cc_token_id` bigint NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `token_provider` varchar(50) NOT NULL DEFAULT '',
  `token` varchar(1000) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `giftcard_id` bigint unsigned NOT NULL DEFAULT '0',
  `hashed_token` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`cc_token_id`),
  UNIQUE KEY `guest_user_id` (`guest_user_id`,`card_id`,`token_provider`,`hashed_token`,`giftcard_id`),
  KEY `key_card_id` (`card_id`),
  KEY `key_create_date` (`create_date`),
  KEY `key_update_date` (`update_date`),
  KEY `key_guest_user_giftcard_id` (`guest_user_id`,`giftcard_id`,`token_provider`,`create_date`),
  KEY `key_guest_user_provider_hashed_token` (`guest_user_id`,`token_provider`,`hashed_token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_users_credit_cards` (
  `card_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned DEFAULT NULL,
  `token` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_month` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_year` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `num_head` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `num_tail` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `auth_date` int unsigned DEFAULT NULL,
  `csc_response` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `csc_date` int unsigned DEFAULT NULL,
  `source_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'TYPE_STANDARD',
  `pci_token_id` bigint unsigned NOT NULL DEFAULT '0',
  `cryptogram` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `deleted_date` int unsigned DEFAULT NULL,
  `scheme_transaction_reference` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `threeds_auth_date` int unsigned DEFAULT NULL,
  `payment_account_reference` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  PRIMARY KEY (`guest_user_id`,`card_id`),
  UNIQUE KEY `card_id` (`card_id`),
  KEY `token` (`token`),
  KEY `guest_user_id_create_date` (`guest_user_id`,`create_date`),
  KEY `guest_user_id__deleted_create_date` (`guest_user_id`,`deleted`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `key_user_id_pci_token_id` (`guest_user_id`,`pci_token_id`),
  KEY `payment_account_reference` (`payment_account_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Credit Cards for Guest Users';

CREATE TABLE `guest_users_credit_cards_addresses` (
  `guest_user_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL COMMENT 'shipping address',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`,`card_id`,`address_id`),
  KEY `card_id_idx` (`card_id`),
  KEY `guest_users_credit_cards_addresses_update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `guest_users_credit_cards_log` (
  `guest_user_credit_card_log_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned DEFAULT NULL,
  `type` varchar(30) NOT NULL,
  `reference_id` bigint unsigned DEFAULT NULL,
  `amount` int unsigned DEFAULT NULL,
  `disposition` varchar(20) DEFAULT NULL,
  `post_to_wp` text,
  `response_from_wp` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `pttid` varchar(256) DEFAULT NULL,
  `processor` varchar(25) DEFAULT '',
  `processor_response_code` varchar(64) DEFAULT '',
  `processor_acquirer_reference` varchar(64) DEFAULT '',
  `processor_liability_shift` tinyint DEFAULT '0',
  `processor_cvc_response_code` varchar(64) DEFAULT '',
  `processor_mid` varchar(64) DEFAULT '',
  `currency` varchar(3) NOT NULL DEFAULT '',
  `cart_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`guest_user_credit_card_log_id`),
  UNIQUE KEY `user_id` (`guest_user_id`,`guest_user_credit_card_log_id`),
  KEY `card_id` (`card_id`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `reference_id` (`reference_id`,`type`,`create_date`),
  KEY `processor_idx` (`processor`,`processor_mid`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `help_with_order_feedback_loop_survey_responses` (
  `buyer_id` bigint unsigned NOT NULL,
  `survey_response_id` bigint unsigned NOT NULL,
  `order_help_request_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `seller_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `campaign_label` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `survey_question_id` tinyint unsigned NOT NULL,
  `survey_subquestion_id` tinyint NOT NULL DEFAULT '-1',
  `survey_response_int` tinyint unsigned NOT NULL,
  `survey_response_something_else` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `survey_response_anything_else` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`buyer_id`,`survey_response_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Survey responses collected from the Help With Order Feedback Loop experiment';

CREATE TABLE `human_tasks_data` (
  `human_task_id` bigint unsigned NOT NULL,
  `description` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL,
  `experiment_url` varchar(2048) COLLATE utf8mb4_unicode_ci NOT NULL,
  `max_buyer_count` int NOT NULL,
  `max_seller_count` int NOT NULL,
  `price_int` bigint unsigned NOT NULL DEFAULT '0',
  `time_expected_seconds` bigint unsigned NOT NULL,
  `time_allowed_seconds` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `currency` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  PRIMARY KEY (`human_task_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `human_tasks_state` (
  `human_task_state_id` bigint unsigned NOT NULL,
  `human_task_id` bigint unsigned NOT NULL,
  `state` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`human_task_state_id`),
  KEY `human_task_id` (`human_task_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `human_tasks_subjects` (
  `human_task_subject_id` bigint unsigned NOT NULL,
  `human_task_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `state` int NOT NULL,
  `seller_type` int NOT NULL,
  `buyer_type` int NOT NULL,
  `progress_count` int unsigned DEFAULT NULL,
  `progress_total` int unsigned DEFAULT NULL,
  `is_mock_run` int unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`human_task_subject_id`),
  KEY `human_task_id` (`human_task_id`),
  KEY `user_id` (`user_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `human_tasks_subjects_states` (
  `human_task_subject_state_id` bigint unsigned NOT NULL,
  `human_task_id` bigint unsigned NOT NULL,
  `human_task_subject_id` bigint unsigned NOT NULL,
  `state` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`human_task_subject_state_id`),
  KEY `human_task_id` (`human_task_id`),
  KEY `human_task_subject_id` (`human_task_subject_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `idology_log` (
  `idology_log_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `verification_service` varchar(16) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `idology_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `idology_check_result` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `etsy_check_decision` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `idology_prompt_result` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `etsy_prompt_decision` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `num_questions_presented` tinyint unsigned DEFAULT NULL,
  `num_answers_submitted` tinyint unsigned DEFAULT NULL,
  `num_incorrect_answers` tinyint unsigned DEFAULT NULL,
  `identify_request` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `identify_response_body` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `answer_response_body` mediumtext COLLATE utf8mb4_unicode_ci,
  `staff_id` bigint unsigned DEFAULT NULL,
  `staff_ldap` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `staff_decision_date` int DEFAULT NULL,
  `notes` mediumtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`idology_log_id`),
  KEY `shop_id` (`shop_id`),
  KEY `idology_id` (`idology_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `staff_id` (`staff_id`),
  KEY `staff_ldap` (`staff_ldap`(15)),
  KEY `staff_decision_date` (`staff_decision_date`),
  KEY `verification_service` (`verification_service`),
  KEY `etsy_check_decision` (`etsy_check_decision`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_quality` (
  `image_id` bigint unsigned NOT NULL,
  `type_id` smallint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  `hue_count` int NOT NULL,
  `edges` float NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_id`,`type_id`),
  KEY `owner_id_key` (`owner_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_audit` (
  `image_recognition_audit_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `object_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK: etsy_shard.listings.listing_id',
  `object_type_id` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'value from ObjectType',
  `model_type` tinyint unsigned NOT NULL DEFAULT '0',
  `has_label_annotations` tinyint unsigned NOT NULL DEFAULT '0',
  `has_logo_annotations` tinyint unsigned NOT NULL DEFAULT '0',
  `has_safe_search_annotations` tinyint unsigned NOT NULL DEFAULT '0',
  `has_text_annotations` tinyint unsigned NOT NULL DEFAULT '0',
  `has_web_detect_annotations` tinyint unsigned NOT NULL DEFAULT '0',
  `number_calls` smallint unsigned NOT NULL DEFAULT '1',
  `retries_since_last_success` smallint unsigned NOT NULL DEFAULT '0',
  `last_success_date` int unsigned NOT NULL,
  `is_pending` tinyint unsigned NOT NULL DEFAULT '0',
  `is_backfill` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Flag to determine what job worker to call when reprocessing a failure',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_audit_id`),
  UNIQUE KEY `image_model_type_idx` (`image_id`,`model_type`),
  KEY `last_success_date_idx` (`last_success_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `failed_idx` (`is_pending`,`retries_since_last_success`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_label_annotations` (
  `image_recognition_label_annotation_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `image_recognition_label_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_aux.image_recognition_labels.image_recognition_label_id',
  `score` decimal(20,19) unsigned NOT NULL COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `topicality` decimal(20,19) unsigned NOT NULL COMMENT 'relevancy of the label to the image [0-1]',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_label_annotation_id`),
  KEY `image_idx` (`image_id`),
  KEY `image_recognition_label_idx` (`image_recognition_label_id`),
  KEY `score_idx` (`score`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `image_recognition_audit_idx` (`image_recognition_audit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_logo_annotations` (
  `image_recognition_logo_annotation_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `image_recognition_logo_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_aux.image_recognition_logos.image_recognition_logo_id',
  `score` decimal(20,19) unsigned NOT NULL COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_logo_annotation_id`),
  KEY `image_idx` (`image_id`),
  KEY `image_recognition_logo_idx` (`image_recognition_logo_id`),
  KEY `score_idx` (`score`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `image_recognition_audit_id_idx` (`image_recognition_audit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_safe_search_annotations` (
  `image_recognition_safe_search_annotation_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `adult_likelihood` tinyint unsigned NOT NULL DEFAULT '0',
  `adult_score` decimal(20,19) unsigned NOT NULL DEFAULT '0.0000000000000000000' COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `spoof_likelihood` tinyint unsigned NOT NULL DEFAULT '0',
  `spoof_score` decimal(20,19) unsigned NOT NULL DEFAULT '0.0000000000000000000' COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `medical_likelihood` tinyint unsigned NOT NULL DEFAULT '0',
  `medical_score` decimal(20,19) unsigned NOT NULL DEFAULT '0.0000000000000000000' COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `violence_likelihood` tinyint unsigned NOT NULL DEFAULT '0',
  `violence_score` decimal(20,19) unsigned NOT NULL DEFAULT '0.0000000000000000000' COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `racy_likelihood` tinyint unsigned NOT NULL DEFAULT '0',
  `racy_score` decimal(20,19) unsigned NOT NULL DEFAULT '0.0000000000000000000' COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_safe_search_annotation_id`),
  KEY `image_idx` (`image_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `image_recognition_audit_id_idx` (`image_recognition_audit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_text_annotations` (
  `image_recognition_text_annotation_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `text_annotation` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `locale` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_text_annotation_id`),
  KEY `image_idx` (`image_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `image_recognition_audit_id_idx` (`image_recognition_audit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_web_detect_annotations` (
  `image_recognition_web_detect_annotation_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `image_recognition_domain_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK: etsy_aux.image_recognition_domains.image_recognition_domain_id',
  `page_with_matching_image_url` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Full url of page with matching image',
  `full_match` tinyint unsigned NOT NULL DEFAULT '0',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_web_detect_annotation_id`),
  KEY `image_idx` (`image_id`),
  KEY `image_recognition_domain_idx` (`image_recognition_domain_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `image_recognition_audit_id_idx` (`image_recognition_audit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `image_recognition_web_detect_image_urls` (
  `image_recognition_web_detect_image_url_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.images.image_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `image_recognition_audit_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.image_recognition_audit.image_recognition_audit_id',
  `image_recognition_domain_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK: etsy_aux.image_recognition_domains.image_recognition_domain_id',
  `matching_image_url` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Full matching image url',
  `match_type` tinyint unsigned NOT NULL DEFAULT '0',
  `position` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`image_recognition_web_detect_image_url_id`),
  KEY `image_idx` (`image_id`),
  KEY `image_recognition_domain_idx` (`image_recognition_domain_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `images` (
  `owner_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `type_id` smallint NOT NULL,
  `full_width` int unsigned DEFAULT NULL,
  `full_height` int unsigned DEFAULT NULL,
  `hex_code` varchar(6) DEFAULT NULL,
  `red` int DEFAULT NULL,
  `green` int DEFAULT NULL,
  `blue` int DEFAULT NULL,
  `hue` int DEFAULT NULL,
  `saturation` int DEFAULT NULL,
  `brightness` int DEFAULT NULL,
  `is_black_and_white` tinyint(1) DEFAULT NULL,
  `secret` varchar(20) DEFAULT NULL,
  `is_watermarked` tinyint unsigned NOT NULL DEFAULT '0',
  `phash` bigint NOT NULL DEFAULT '0',
  `version` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `marked_for_death` tinyint unsigned NOT NULL DEFAULT '0',
  `storage_volume` smallint DEFAULT NULL,
  `file_extension` varchar(8) NOT NULL,
  `selected_color` int DEFAULT NULL,
  `attributes` varchar(128) NOT NULL DEFAULT '',
  `crop_data` varchar(255) NOT NULL DEFAULT '',
  `blur_hash` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`owner_id`,`owner_type_id`,`image_id`,`type_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `images_by_type_creation` (`type_id`,`create_date`),
  KEY `image_type_idx` (`image_id`,`type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `imgly_photo_edit_filters` (
  `photo_edit_filter_id` bigint unsigned NOT NULL COMMENT 'To identify the saved edit filter',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop that is using the saved edit filter',
  `edit_filter_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Name of the saved photo edit filter. User inputted',
  `edit_filter_image_id` bigint unsigned NOT NULL COMMENT 'Image that is used as the saved edit filter image. This comes from the image edited when the saved edit filter was saved.',
  `imgly_version` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Version of imgly used to create the saved edit filter',
  `imgly_platform_version` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Version of the platform used to create the saved edit filter that is compatible with imgly',
  `platform_used` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Platform used to create the saved edit filter',
  `edit_values` varchar(10000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Object of edit values for the imgly saved edit filter',
  `create_date` int NOT NULL COMMENT 'When the saved edit filter was first created',
  `update_date` int NOT NULL COMMENT 'Last time the saved edit filter was edited',
  `last_used_date` int NOT NULL COMMENT 'Last time the saved edit filter was used on a photo edit that was saved.',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Enables soft deletes',
  PRIMARY KEY (`shop_id`,`photo_edit_filter_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to store saved photo edit filters';

CREATE TABLE `import_batches` (
  `import_batch_id` bigint unsigned NOT NULL,
  `user_id` bigint DEFAULT NULL COMMENT 'The user doing the importing',
  `service` int NOT NULL COMMENT 'The service they imported from',
  `user_agent_id` char(28) DEFAULT NULL COMMENT 'Unique guest account identifier (see tastetest-results)',
  `hash_bucket` int unsigned DEFAULT NULL COMMENT 'The hash bucket shard key, if the user_id is not known.',
  `creation_time` int unsigned NOT NULL,
  PRIMARY KEY (`import_batch_id`),
  KEY `import_batches_by_user` (`user_id`),
  KEY `creation_time` (`creation_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='A successful import using the friend finder';

CREATE TABLE `imported_dawanda_products` (
  `imported_product_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned DEFAULT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `batch_id` bigint unsigned NOT NULL,
  `api_json` longtext COLLATE utf8mb4_unicode_ci,
  `error_codes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `info_codes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`imported_product_id`),
  KEY `imported_product_id` (`imported_product_id`),
  KEY `batch_id_idx` (`batch_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listing_id_idx` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `imported_email` (
  `email_hash` char(28) NOT NULL COMMENT 'A base64 encoded sha1 hash of the recipient email address',
  `hash_bucket` int unsigned NOT NULL COMMENT 'An arbitrary key hash of the email_hash',
  `user_id` bigint unsigned NOT NULL COMMENT 'user id of the person who imported this email',
  `import_batch_id` bigint unsigned NOT NULL COMMENT 'which gearman batch this email was imported in',
  `email_domain` varchar(128) NOT NULL COMMENT 'a domain like gmail.com so this info is not lost in the hash',
  `creation_time` int unsigned NOT NULL,
  PRIMARY KEY (`hash_bucket`,`email_hash`,`user_id`),
  KEY `email_hash_user_id` (`email_hash`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to lookup all the users that imported an email';

CREATE TABLE `imported_shop_data` (
  `shop_id` bigint unsigned NOT NULL,
  `imported_shop_id` bigint unsigned NOT NULL,
  `imported_shop_name` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL,
  `imported_shop_languages` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL,
  `rating_count` int unsigned NOT NULL,
  `rating_average` float NOT NULL,
  `api_key` char(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `opt_in` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  UNIQUE KEY `api_key` (`api_key`),
  UNIQUE KEY `imported_shop_id` (`imported_shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `in_progress_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `in_progress_listing_id` bigint unsigned NOT NULL,
  `data` longblob,
  `keys_signature` varchar(32) COLLATE utf8mb4_general_ci NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `is_completed` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`in_progress_listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `incentivized_app_tracking` (
  `email_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `browser_id` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`email_address`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `inperson_credit_cards_log` (
  `inperson_credit_card_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `in_person_payment_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `name_on_card` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `reference_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL DEFAULT '0',
  `disposition` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `post_to_wp` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `response_from_wp` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `pttid` varchar(25) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`user_id`,`inperson_credit_card_log_id`),
  KEY `reference_id` (`reference_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `inperson_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `coupon_id` bigint unsigned NOT NULL DEFAULT '0',
  `applied_tax_rate` int unsigned NOT NULL DEFAULT '0',
  `in_person_payment_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'NA',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPEN',
  `buyer_id` bigint unsigned NOT NULL DEFAULT '0',
  `buyer_email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `finalize_key` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `client_sent_date` int unsigned NOT NULL DEFAULT '0',
  `confirmation_date` int unsigned NOT NULL DEFAULT '0',
  `cancel_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`shop_id`,`client_sent_date`),
  KEY `status` (`status`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `inperson_square_payments` (
  `shop_id` bigint unsigned NOT NULL,
  `payment_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `square_payment_id` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `square_location_id` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `square_create_date` bigint unsigned DEFAULT NULL,
  `payment_status` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`payment_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `inperson_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `quick_listing_unique_identifier` bigint unsigned NOT NULL DEFAULT '0',
  `amount` int unsigned NOT NULL,
  `quantity` int unsigned NOT NULL,
  `tax_amount` int unsigned NOT NULL,
  `currency_code` char(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `title` longtext COLLATE utf8mb4_unicode_ci,
  `description` longtext COLLATE utf8mb4_unicode_ci,
  `image_listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `variation_data_version` bigint NOT NULL DEFAULT '0',
  `required_variation_details` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `optional_variation_details` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `invites_recipients` (
  `recipient_user_id` bigint unsigned NOT NULL,
  `sender_user_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL,
  `type` smallint unsigned NOT NULL,
  `email_hash` char(28) NOT NULL,
  `email_type` smallint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `original_sender_user_id` bigint DEFAULT NULL,
  `currency` varchar(3) DEFAULT NULL,
  PRIMARY KEY (`recipient_user_id`,`sender_user_id`,`type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `invites_senders` (
  `sender_user_id` bigint unsigned NOT NULL,
  `recipient_user_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL,
  `type` smallint unsigned NOT NULL,
  `email_hash` char(28) NOT NULL,
  `email_type` smallint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `original_sender_user_id` bigint DEFAULT NULL,
  `currency` varchar(3) DEFAULT NULL,
  PRIMARY KEY (`sender_user_id`,`recipient_user_id`,`type`),
  KEY `sender_and_status` (`sender_user_id`,`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `kafka_restproxy_offset` (
  `consumer_name` varchar(64) COLLATE utf8mb4_general_ci NOT NULL,
  `topic` varchar(128) COLLATE utf8mb4_general_ci NOT NULL,
  `partition` bigint unsigned NOT NULL,
  `offset` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`consumer_name`,`topic`,`partition`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `kb_article_revision` (
  `kb_article_group_id` bigint unsigned NOT NULL,
  `kb_article_id` bigint unsigned NOT NULL,
  `kb_article_revision_id` bigint unsigned NOT NULL,
  `kb_site` varchar(32) NOT NULL DEFAULT '',
  `status` varchar(32) NOT NULL DEFAULT 'draft',
  `create_staff_id` bigint unsigned NOT NULL,
  `update_staff_id` bigint unsigned NOT NULL,
  `article` longtext NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`kb_article_group_id`,`kb_article_id`,`kb_article_revision_id`),
  KEY `article_idx` (`kb_article_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `create_staff_idx` (`create_staff_id`),
  KEY `site_idx` (`kb_site`),
  KEY `update_date_site_staff_status_idx` (`update_date`,`kb_site`,`update_staff_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `kb_tag_by_article` (
  `kb_tag_id` bigint unsigned NOT NULL,
  `kb_article_group_id` bigint unsigned NOT NULL,
  `kb_article_id` bigint unsigned NOT NULL,
  `create_staff_id` bigint unsigned NOT NULL,
  `update_staff_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `status` varchar(32) NOT NULL,
  PRIMARY KEY (`kb_article_group_id`,`kb_article_id`,`kb_tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `keyword_price` (
  `keyword` varchar(64) NOT NULL,
  `price` int unsigned NOT NULL COMMENT 'cost per imp, USD * 1e6',
  `effective_date` int unsigned NOT NULL,
  `note` varchar(64) NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_new` tinyint unsigned NOT NULL DEFAULT '0',
  `expired_date` int unsigned NOT NULL DEFAULT '0',
  `price_per_click` int unsigned NOT NULL DEFAULT '0' COMMENT 'cost per click, USD * 1e6',
  PRIMARY KEY (`keyword`,`effective_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Rescheduler';

CREATE TABLE `klarna_auth_initiations` (
  `klarna_auth_initiation_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `payment_method` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` char(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPEN',
  `initiation_psp_reference` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen pspReference header from call to /payments endpoint',
  `initiation_http_status` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'HTTP status code from /payments call to Adyen',
  `initiation_error_message` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error message from /payments call',
  `initiation_error_type` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error type from /payments call',
  `initiation_error_code` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error code from /payments call',
  `completion_psp_reference` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen pspReference header from /payments/details call',
  `completion_http_status` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'HTTP status code from /payments/details call to Adyen',
  `completion_error_message` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error message from /payments/details call',
  `completion_error_type` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error type from /payments/details call',
  `completion_error_code` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Adyen error code from /payments/details call',
  `klarna_order_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The order id at Klarna',
  `payment_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'May not be repeated, but will be null until payment is actually created',
  `cc_txn_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'May not be repeated, but will be null until payment is actually created',
  `cart_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'ID of the cart sent to Klarna. May be repeated if buyer retries with same cart',
  `payment_data` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This is the gigantic token we need in order to fetch status updates on this attempt to pay. Basically, the whole reason this table exists',
  `redirect_result` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This is the token provided as a GET parameter when returning from Klarna. Storing this in case it may help with debugging',
  `initiation_response_body` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Raw response body from the /payments call to Adyen. For debugging. TBD whether we need this long term.',
  `completion_response_body` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Raw response body from the /payments/details call to Adyen. For debugging. TBD whether we need this long term.',
  `redirect_url` longtext COLLATE utf8mb4_unicode_ci COMMENT 'This may not be necessary in the long run. We intend to return this value to Checkout immediately after the response comes back from Klarna',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`klarna_auth_initiation_id`),
  KEY `group_cart_id` (`cart_id`,`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `pk_and_user` (`klarna_auth_initiation_id`,`user_id`,`create_date`),
  KEY `cc_txn_and_user` (`cc_txn_id`,`user_id`,`create_date`),
  KEY `klarna_order_and_user` (`klarna_order_id`,`user_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `legacy_variations_migration_change_audits` (
  `audit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `listing_variation_id` bigint unsigned NOT NULL,
  `original_property_id` int unsigned NOT NULL,
  `updated_property_id` int unsigned NOT NULL,
  `original_property_option_input_id` bigint unsigned NOT NULL,
  `updated_property_option_input_id` bigint unsigned NOT NULL,
  `state` int unsigned NOT NULL,
  `update_source` int unsigned NOT NULL,
  `metadata` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded metadata for additional context',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`,`shop_id`,`listing_id`),
  KEY `shop_listing` (`shop_id`,`listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `list_signup_requests` (
  `request_id` bigint NOT NULL,
  `email_id` bigint NOT NULL,
  `page_url` varchar(1024) DEFAULT NULL,
  `ip_address` varchar(256) DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`request_id`),
  KEY `email_id` (`email_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `list_signups_by_email` (
  `signup_id` bigint NOT NULL,
  `email_id` bigint NOT NULL,
  `list_identifier` varchar(32) NOT NULL,
  `state` varchar(32) NOT NULL,
  `request_id` bigint NOT NULL DEFAULT '0',
  `subscribe_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`signup_id`),
  KEY `email_id` (`email_id`,`list_identifier`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `list_signups_by_list` (
  `signup_id` bigint NOT NULL,
  `list_identifier` varchar(32) NOT NULL,
  `email_id` bigint NOT NULL,
  `state` varchar(32) NOT NULL,
  `request_id` bigint NOT NULL DEFAULT '0',
  `subscribe_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`signup_id`),
  KEY `list_identifier` (`list_identifier`,`email_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_api_logs` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `log_id` bigint unsigned NOT NULL,
  `input_gzipped` longblob NOT NULL,
  `api_method` varchar(75) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `request_uuid` varchar(75) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `api_key` varchar(75) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`log_id`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `shop_id_listing_id_create_date_idx` (`shop_id`,`listing_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_attribute_promotions` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `attribute_id` bigint unsigned NOT NULL,
  `attribute_value_id` bigint unsigned DEFAULT NULL,
  `attribute_value_qualifier` bigint unsigned DEFAULT NULL,
  `property_id` bigint unsigned DEFAULT NULL,
  `value` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`attribute_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_attributes` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `property_id` bigint unsigned NOT NULL,
  `value_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `state` int NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`listing_id`,`property_id`,`value_id`),
  KEY `created_idx` (`create_date`),
  KEY `modified_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_blocked_auto_renewals` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL COMMENT 'This is shipping_profile_id of etsy_shard.listing_shipping_profile, not source_shipping_profile_id',
  `is_renewed` tinyint unsigned NOT NULL DEFAULT '0',
  `is_renewed_update_date` int unsigned DEFAULT NULL COMMENT 'This represents date when the "is_renewed" field got updated',
  `renewal_blocked_context` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'This is an enum that tells in which context renewal is blocked.',
  `is_pattern` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'This shows listing is pattern listing or standard',
  `missing_edd_input_fields` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded missing edd input fields',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`shipping_profile_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_bulk_edit_listing` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_bulk_edit_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `status` int NOT NULL,
  `message` longblob NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_bulk_edit_id`,`listing_id`),
  KEY `listing_idx` (`shop_id`,`listing_id`),
  KEY `status_idx` (`status`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_bulk_edit_worker_errors` (
  `worker_error_id` bigint unsigned NOT NULL,
  `listing_bulk_edit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `message` longblob NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`worker_error_id`,`shop_id`),
  KEY `listing_bulk_edit_id` (`listing_bulk_edit_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_bulk_edits` (
  `listing_bulk_edit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `status` int NOT NULL,
  `data` longblob NOT NULL,
  `total_listings` int NOT NULL DEFAULT '0',
  `total_success` int NOT NULL DEFAULT '0',
  `total_error` int NOT NULL DEFAULT '0',
  `total_skipped` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_bulk_edit_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_classification_logs` (
  `listing_classification_log_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a log',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing log is for',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop that created the listing',
  `classifier` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of classifier that generated this log.',
  `classifier_version` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Version of the classifier that made this log',
  `classification` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Resulting classification from the classifier.',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`listing_classification_log_id`),
  UNIQUE KEY `listing-classifier-version` (`listing_id`,`classifier`,`classifier_version`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_clone_audit_log` (
  `to_shop_id` bigint unsigned NOT NULL COMMENT 'ID of test shop that listing was cloned into',
  `to_listing_id` bigint unsigned NOT NULL COMMENT 'ID of new cloned listing',
  `from_shop_id` bigint unsigned NOT NULL COMMENT 'ID of shop that owns the original listing',
  `from_listing_id` bigint unsigned NOT NULL COMMENT 'ID of original listing that was cloned',
  `created_for` varchar(255) DEFAULT NULL COMMENT 'Marks the reason for this clone',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  PRIMARY KEY (`to_shop_id`,`to_listing_id`),
  KEY `idx_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Log for cloning listings';

CREATE TABLE `listing_collection` (
  `listing_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `state` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`collection_id`,`collection_creator_id`),
  KEY `status` (`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `listing_idx` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_compliance_data` (
  `listing_id` bigint unsigned NOT NULL COMMENT 'ID of the listing owning this compliance data',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop ID of the listing owning this compliance data',
  `gpsr_manufacturer_contact` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Name, address, contact of product manufacturer, as text for display',
  `gpsr_safety_warnings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Any safety warnings disclosed for GPSR',
  `language` tinyint unsigned DEFAULT NULL COMMENT 'Language ID for this record',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='stores rows containing regulation compliance data for a given listing - eg GPSR, etc';

CREATE TABLE `listing_compliance_data_translations` (
  `listing_id` bigint unsigned NOT NULL COMMENT 'ID of the listing owning this compliance data',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop ID of the listing owning this compliance data',
  `language` tinyint unsigned NOT NULL COMMENT 'Language ID for this translation',
  `gpsr_safety_warnings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Any safety warnings disclosed for GPSR',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`language`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='stores rows containing regulation compliance data for a given listing - eg GPSR, etc';

CREATE TABLE `listing_credits_usage` (
  `listing_credits_usage_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `credits_remaining` int unsigned NOT NULL,
  `quantity` int unsigned NOT NULL,
  `billable_quantity` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `action` varchar(50) NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `action_id` bigint unsigned NOT NULL DEFAULT '0',
  `credits_added` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_credits_usage_id`),
  KEY `user_and_promotion_id` (`user_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores listing credits promotion usage';

CREATE TABLE `listing_details` (
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `favorites_count` int NOT NULL DEFAULT '-1',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_dimensions` (
  `listing_dimensions_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `variation_id` bigint DEFAULT NULL,
  `shop_id` bigint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `height` smallint NOT NULL DEFAULT '0',
  `width` smallint NOT NULL DEFAULT '0',
  `depth` smallint DEFAULT NULL,
  PRIMARY KEY (`listing_dimensions_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `listing_id_shop_id_create_date_idx` (`listing_id`,`shop_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_file_attachments` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_files_id` bigint unsigned NOT NULL DEFAULT '0',
  `rank` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`shop_files_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_funding_campaign` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `state` int unsigned NOT NULL,
  `funding_start_time` int unsigned NOT NULL DEFAULT '0',
  `funding_end_time` int unsigned NOT NULL DEFAULT '0',
  `funding_window_days` int unsigned NOT NULL DEFAULT '0',
  `goal` int unsigned NOT NULL DEFAULT '0',
  `amount_funded` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `mission` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `item_details` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `production_plan` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `risks` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_gps_updates` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `active` tinyint unsigned NOT NULL DEFAULT '1',
  `uk` tinyint unsigned NOT NULL DEFAULT '0',
  `en_ca` tinyint unsigned NOT NULL DEFAULT '0',
  `en_au` tinyint unsigned NOT NULL DEFAULT '0',
  `de_de` tinyint unsigned NOT NULL DEFAULT '0',
  `fr_fr` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `gpla_banned` tinyint unsigned NOT NULL DEFAULT '0',
  `gpla_banned_reason` char(50) DEFAULT NULL,
  `drift_update_time` int unsigned DEFAULT '0',
  `gpla_merchant_id` char(10) DEFAULT NULL,
  `en_us` tinyint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_drift_update_time` (`drift_update_time`),
  KEY `idx_gpla_merchant_id` (`gpla_merchant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_how_its_made_classification` (
  `listing_how_its_made_classification_id` bigint unsigned NOT NULL COMMENT 'Arbitrary number acting as the primary key for this table',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Foreign key to EtsyModel_Shop_Shop model',
  `listing_id` bigint unsigned NOT NULL COMMENT 'ID of listing that the label applies to',
  `l1_classification_type` bigint unsigned NOT NULL COMMENT 'Integer that maps to a HIM L1 classification',
  `l2_classification_type` bigint unsigned NOT NULL COMMENT 'Integer that maps to a HIM L2 classification',
  `classification_data` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'JSON encoded inputs resulting in this HIM classification',
  `algorithm_type` bigint unsigned NOT NULL COMMENT 'Integer that maps to a HIM classification algorithm',
  `overridden_by` varchar(255) DEFAULT NULL COMMENT 'LDAP of admin who overrode this classification (null if not overriden)',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to mark a label as deleted (for soft deletes)',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`shop_id`,`listing_how_its_made_classification_id`),
  KEY `idx_listing_algorithm_deleted` (`shop_id`,`listing_id`,`algorithm_type`,`is_deleted`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Listing-level classification for How It''s made';

CREATE TABLE `listing_images` (
  `listing_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `image_id` bigint NOT NULL,
  `rank` smallint NOT NULL,
  `alt_text` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Alternative Text',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`image_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `listing_id` (`listing_id`,`rank`),
  KEY `shop_id` (`shop_id`,`listing_id`,`rank`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_inferables` (
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing associated with the inferable',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop that owns the listing',
  `inferable_id` int unsigned NOT NULL COMMENT 'Id (enum value) of the inferable. Existence implies this property applies to the listing.',
  `modified_by` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The last person or system to modify this entry',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Soft delete flag where 0 is not deleted and 1 is deleted',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`shop_id`,`listing_id`,`inferable_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_inventories` (
  `shop_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `listing_inventory_id` bigint NOT NULL,
  `inventory_data_version` smallint NOT NULL,
  `inventory_data_signature` varchar(32) NOT NULL,
  `inventory_data` longblob,
  `state` int NOT NULL,
  `quantity` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listing_inventory_id`),
  UNIQUE KEY `inventory_sig_idx` (`listing_id`,`inventory_data_signature`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_inventory_channel_summary` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `channel` bigint unsigned NOT NULL DEFAULT '1',
  `is_backwards_compatible` tinyint(1) NOT NULL,
  `products_count` bigint unsigned NOT NULL DEFAULT '0',
  `quantity_linking_type` int unsigned NOT NULL DEFAULT '0' COMMENT 'Shop_Inventory_ProductOffering_LinkingType::NONE',
  `quantity_linking_id` bigint unsigned NOT NULL DEFAULT '0',
  `price_linking_type` int unsigned NOT NULL DEFAULT '0' COMMENT 'Shop_Inventory_ProductOffering_LinkingType::NONE',
  `price_linking_id` bigint unsigned NOT NULL DEFAULT '0',
  `readiness_state_linking_type` int unsigned NOT NULL DEFAULT '1' COMMENT 'Shop_Inventory_ProductOffering_LinkingType::LISTING',
  `readiness_state_linking_id` bigint unsigned NOT NULL DEFAULT '0',
  `min_price` bigint unsigned NOT NULL DEFAULT '0',
  `max_price` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `min_processing_days` int unsigned DEFAULT NULL,
  `max_processing_days` int unsigned DEFAULT NULL,
  `state` int NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `sku_linking_type` int unsigned NOT NULL DEFAULT '0' COMMENT 'Shop_Inventory_ProductOffering_LinkingType::NONE',
  `sku_linking_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_inventory_summary_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_inventory_summary_id`),
  UNIQUE KEY `shop_id_listing_id_channel` (`shop_id`,`listing_id`,`channel`),
  KEY `update_date_idx` (`update_date`),
  KEY `quantity_linking_idx` (`quantity_linking_type`,`quantity_linking_id`),
  KEY `price_linking_idx` (`price_linking_type`,`price_linking_id`),
  KEY `sku_linking_idx` (`sku_linking_type`,`sku_linking_id`),
  KEY `readiness_state_linking_idx` (`readiness_state_linking_type`,`readiness_state_linking_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_inventory_channel_summary_prices` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `channel` bigint unsigned NOT NULL DEFAULT '1',
  `country_id` int unsigned NOT NULL DEFAULT '0',
  `min_price` bigint unsigned NOT NULL DEFAULT '0',
  `max_price` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `state` int NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`listing_id`,`country_id`,`channel`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_labels` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `label_id` bigint unsigned NOT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='keep the listing->label relation';

CREATE TABLE `listing_offering_promotions` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `listing_variation_id` bigint unsigned NOT NULL,
  `attribute_id` bigint unsigned NOT NULL,
  `attribute_value_id` bigint unsigned DEFAULT NULL,
  `attribute_value_qualifier` bigint unsigned DEFAULT NULL,
  `property_id` bigint unsigned DEFAULT NULL,
  `value` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listing_variation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_offers` (
  `listing_offer_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `offer_int` bigint unsigned NOT NULL,
  `status` tinyint NOT NULL,
  `note` longtext COLLATE utf8mb4_unicode_ci,
  `created_at` int NOT NULL,
  `updated_at` int DEFAULT '0',
  `currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  PRIMARY KEY (`shop_id`,`listing_offer_id`),
  KEY `shop_id_listing_id` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Offers that buyers have made on listings';

CREATE TABLE `listing_offsiteads_market_account` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `market_account_id` bigint unsigned NOT NULL,
  `product_id` bigint unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL,
  `marketplace_id` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `last_syndication_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`market_account_id`),
  KEY `state_update_idx` (`state`,`update_date`,`marketplace_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store offsite ads record per listing per marketplace and account id';

CREATE TABLE `listing_page_collection` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL COMMENT 'this is a page_id',
  `contributor_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`collection_id`,`collection_creator_id`),
  KEY `status` (`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_current_revisions` (
  `listing_personalization_revision_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_field_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `instructions` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `listing_personalization_field_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_personalization_field_id`,`language`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_listing_personalization_revision_id_idx` (`shop_id`,`listing_personalization_revision_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_fields` (
  `listing_personalization_field_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `is_required` tinyint unsigned NOT NULL DEFAULT '0',
  `max_character_count` smallint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_personalization_revision_id`,`listing_personalization_field_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_option` (
  `option_id` bigint unsigned NOT NULL COMMENT 'Pk autogenerated and managed by EtsyModel_Tickets',
  `question_id` bigint unsigned NOT NULL COMMENT 'Fk to PersonalizationQuestion',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop',
  `label` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Text for each question label',
  `language` tinyint unsigned NOT NULL,
  `sort_order` tinyint unsigned NOT NULL COMMENT 'Integer to sort options of a question',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Soft delete column',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `delete_date` int unsigned DEFAULT NULL COMMENT 'Deleted date in epoch time',
  PRIMARY KEY (`shop_id`,`question_id`,`option_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_option_translation` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop (shardifier)',
  `option_id` bigint unsigned NOT NULL COMMENT 'Fk to PersonalizationOption',
  `language` tinyint unsigned NOT NULL,
  `label` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Translated text for each option label',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`shop_id`,`option_id`,`language`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_prices` (
  `listing_personalization_price_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `price_diff` int unsigned NOT NULL,
  `type` smallint unsigned NOT NULL,
  `personalization_object_id` bigint unsigned NOT NULL,
  `currency_code` varchar(6) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_personalization_revision_id`,`personalization_object_id`,`listing_personalization_price_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_profile` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop',
  `profile_id` bigint unsigned NOT NULL COMMENT 'Pk autogenerated and managed by EtsyModel_Tickets',
  `is_required` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Flag for personalization requirement',
  `transition_phase` tinyint unsigned NOT NULL COMMENT 'integer to identify the transition phase',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Soft delete column',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `delete_date` int unsigned DEFAULT NULL COMMENT 'Deleted date in epoch time',
  PRIMARY KEY (`shop_id`,`profile_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_profile_map` (
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing ID',
  `profile_id` bigint unsigned NOT NULL COMMENT 'Personalization profile id',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Soft delete column',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `delete_date` int unsigned DEFAULT NULL COMMENT 'Deleted date in epoch time',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `shop_id_profile_id` (`shop_id`,`profile_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_question` (
  `question_id` bigint unsigned NOT NULL COMMENT 'Pk autogenerated and managed by EtsyModel_Tickets',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop',
  `profile_id` bigint unsigned NOT NULL COMMENT 'Fk to PersonalizationProfile',
  `question_text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Personalization question text',
  `instructions` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Text to specify instructions for each question',
  `language` tinyint unsigned NOT NULL,
  `question_type` tinyint unsigned NOT NULL COMMENT 'integer to differentiate questions',
  `sort_order` tinyint unsigned NOT NULL COMMENT 'Integer to sort questions in a personaliztion profile',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Soft delete column',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `delete_date` int unsigned DEFAULT NULL COMMENT 'Deleted date in epoch time',
  PRIMARY KEY (`shop_id`,`profile_id`,`question_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_question_translation` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop (shardifier)',
  `question_id` bigint unsigned NOT NULL COMMENT 'Fk to PersonalizationQuestion',
  `language` tinyint unsigned NOT NULL,
  `question_text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Translated personalization question text',
  `instructions` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Translated text to specify instructions for each question',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`shop_id`,`question_id`,`language`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_revisions` (
  `listing_personalization_revision_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listing_personalization_revision_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_personalization_validation` (
  `validation_id` bigint unsigned NOT NULL COMMENT 'Pk autogenerated and managed by EtsyModel_Tickets',
  `question_id` bigint unsigned NOT NULL COMMENT 'Fk to PersonalizationQuestion',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Fk to EtsyModel_Shop_Shop',
  `validation_type` tinyint unsigned NOT NULL COMMENT 'integer to differentiate validations',
  `validation_value` smallint DEFAULT NULL COMMENT 'integer to store the value of the validation',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Soft delete column',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `delete_date` int unsigned DEFAULT NULL COMMENT 'Deleted date in epoch time',
  PRIMARY KEY (`shop_id`,`question_id`,`validation_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_processing` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `is_transaction_copy` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_processing_id` bigint unsigned NOT NULL,
  `min_processing_days` int unsigned NOT NULL,
  `max_processing_days` int unsigned NOT NULL,
  `min_expedited_processing_days` int unsigned NOT NULL,
  `max_expedited_processing_days` int unsigned NOT NULL,
  `is_expedited_processing_offered` tinyint unsigned NOT NULL DEFAULT '0',
  `expedited_processing_cost` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`is_transaction_copy`,`listing_processing_id`),
  UNIQUE KEY `listing_processing_id_idx` (`listing_processing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_production_costs` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `production_cost` bigint unsigned DEFAULT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_products` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `product_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`listing_id`,`product_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_product_id_idx` (`shop_id`,`product_id`),
  KEY `listing_products_idx_shop_id_listing_product_state` (`shop_id`,`listing_id`,`product_id`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_property_migration_log` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `migration_id` bigint unsigned NOT NULL,
  `created` int unsigned NOT NULL,
  `viewed_by_user_flag` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_id`,`shop_id`),
  KEY `shop_id_viewed_by_user_flag` (`shop_id`,`viewed_by_user_flag`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_readiness_survey` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `next_step` tinyint unsigned NOT NULL,
  `requires_customization` tinyint(1) NOT NULL DEFAULT '0',
  `variations_not_ready_to_ship` tinyint(1) NOT NULL DEFAULT '0',
  `stock_not_ready_to_ship` tinyint(1) NOT NULL DEFAULT '0',
  `works_with_production_partner` tinyint(1) NOT NULL DEFAULT '0',
  `is_something_else` tinyint(1) NOT NULL DEFAULT '0',
  `something_else_text` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_registry` (
  `listing_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL,
  `listing_customization_id` bigint unsigned NOT NULL DEFAULT '0',
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `taxonomy_id` smallint unsigned NOT NULL DEFAULT '0',
  `price` float NOT NULL DEFAULT '0' COMMENT 'price of the listing, denorm from listing',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'currency, denorm from listing',
  `listing_state` varchar(10) NOT NULL COMMENT 'Denormialized from Listing->state',
  `quantity_desired` smallint DEFAULT '1',
  `quantity_purchased` smallint DEFAULT '0',
  `note` text,
  `state` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`listing_id`,`collection_id`,`listing_customization_id`),
  KEY `shop_id` (`shop_id`),
  KEY `status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_review` (
  `listing_review_id` bigint unsigned NOT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `rating` tinyint NOT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_anonymous` tinyint NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `sales_channel` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`listing_review_id`),
  KEY `shop_id_create_date` (`shop_id`,`create_date`),
  KEY `listing_id_create_date` (`listing_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_review_aggregate` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `count_1` bigint unsigned NOT NULL,
  `count_2` bigint unsigned NOT NULL,
  `count_3` bigint unsigned NOT NULL,
  `count_4` bigint unsigned NOT NULL,
  `count_5` bigint unsigned NOT NULL,
  `total_count` bigint unsigned NOT NULL,
  `avg_rating` smallint unsigned NOT NULL,
  `sales_channel` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`sales_channel`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_shipping_customs_settings` (
  `shop_id` bigint NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `tariff_code` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tariff_code_source` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'label',
  `suggested_tariff_code` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `suggested_tariff_code_accepted` tinyint unsigned NOT NULL DEFAULT '0',
  `suggested_tariff_code_confidence` tinyint unsigned NOT NULL DEFAULT '0',
  `suggested_tariff_code_date` int unsigned NOT NULL DEFAULT '0',
  `suggested_tariff_code_description` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `origin_country_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='This contains settings for a listing related to shipping customs forms';

CREATE TABLE `listing_shipping_details` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_shipping_details_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shipping_details_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `min_shipping_processing_days` int unsigned NOT NULL,
  `max_shipping_processing_days` int unsigned NOT NULL,
  `expedited_offered` tinyint unsigned NOT NULL,
  `expedited_cost` int unsigned NOT NULL,
  `min_expedited_processing_days` int unsigned NOT NULL,
  `max_expedited_processing_days` int unsigned NOT NULL,
  `measurement_units` char(1) NOT NULL DEFAULT 'i' COMMENT 'i = imperial, m = metric',
  `pkg_weight` int unsigned NOT NULL,
  `pkg_width` int unsigned NOT NULL,
  `pkg_height` int unsigned NOT NULL,
  `pkg_depth` int unsigned NOT NULL,
  `deleted` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_shipping_details_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='This represents a shipping profile as applied to a listing';

CREATE TABLE `listing_shipping_profile` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `source_shipping_profile_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `shop_id_shipping_profile_id_idx` (`shop_id`,`shipping_profile_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_source_shipping_profile_id` (`shop_id`,`source_shipping_profile_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_translations` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `title` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `is_translatable` tinyint(1) NOT NULL DEFAULT '1',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`listing_id`,`shop_id`,`language`),
  KEY `shop_id` (`shop_id`),
  KEY `createdate` (`create_date`),
  KEY `updatedate` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_treasury` (
  `listing_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the listing',
  `treasury_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the treasury',
  `listing_owner_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the treasury',
  `create_date` int unsigned NOT NULL COMMENT 'timex when the listing was added to the treasury',
  `treasury_owner_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`listing_id`,`treasury_id`,`listing_owner_id`),
  KEY `listing_owner_id_idx` (`listing_owner_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='links listings to treasuries they are featured in';

CREATE TABLE `listing_update_images` (
  `listing_update_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint NOT NULL,
  `rank` smallint NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_update_id`,`image_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_update_subscribers_shop` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `is_subscribed` tinyint(1) NOT NULL DEFAULT '1',
  `last_read_update` bigint NOT NULL DEFAULT '0',
  `listing_state` int NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_update_subscribers_user` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `is_subscribed` tinyint(1) NOT NULL DEFAULT '1',
  `last_read_update` bigint NOT NULL DEFAULT '0',
  `listing_state` int NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_updates` (
  `listing_update_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `update_text` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `media_type` int NOT NULL DEFAULT '0' COMMENT 'Whether to search for video, photos, or no media',
  `state` int NOT NULL DEFAULT '0' COMMENT 'Whether the listing is published, deleted, invisible, or draft',
  `favorites_count` int NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listing_update_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_variation_properties` (
  `listing_variation_property_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `property_id` bigint unsigned NOT NULL,
  `property_name_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listing_variation_property_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_variations` (
  `listing_variation_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `property_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `value_id` bigint unsigned NOT NULL,
  `has_inventory` tinyint(1) DEFAULT '0',
  `order` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) DEFAULT '0',
  `is_available` tinyint(1) NOT NULL DEFAULT '1',
  `price_diff` bigint NOT NULL DEFAULT '0',
  `price_wholesale_diff` bigint NOT NULL DEFAULT '0',
  `currency_code` varchar(6) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT 'USD',
  PRIMARY KEY (`shop_id`,`listing_variation_id`),
  UNIQUE KEY `value_id_idx` (`listing_id`,`property_id`,`value_id`),
  KEY `created_idx` (`create_date`),
  KEY `modified_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_video` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_id`,`shop_id`,`video_id`),
  KEY `video_id` (`video_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_videos` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL,
  `youtube_key` char(11) NOT NULL,
  `is_processed` tinyint(1) NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`video_id`,`listing_id`),
  KEY `listing_id` (`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listing_wholesale_decorators` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `position` int NOT NULL DEFAULT '1073741824' COMMENT 'in-code default for unpositioned items',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `state` int NOT NULL DEFAULT '0',
  `seller_flags` bigint unsigned NOT NULL DEFAULT '0',
  `admin_flags` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint(1) NOT NULL DEFAULT '0',
  `is_displayable` tinyint(1) NOT NULL DEFAULT '0',
  `is_searchable` tinyint(1) NOT NULL DEFAULT '0',
  `title` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `price` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(6) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'USD',
  `quantity` int NOT NULL DEFAULT '1',
  `section_id` bigint unsigned NOT NULL DEFAULT '0',
  `featured_rank` int NOT NULL DEFAULT '-1',
  `custom_rank` int unsigned NOT NULL DEFAULT '0',
  `favorites_count` int NOT NULL DEFAULT '-1',
  `non_taxable` tinyint unsigned NOT NULL DEFAULT '0',
  `image_key` varchar(127) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `state_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `ending_date` int unsigned NOT NULL,
  `original_create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_type` tinyint unsigned NOT NULL DEFAULT '0',
  `shipping_profile_id` bigint unsigned DEFAULT NULL,
  `rearrange_rank` double NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `listings_listing_id_idx` (`listing_id`),
  KEY `listings_user_create_date_state_idx` (`user_id`,`create_date`,`state`),
  KEY `listings_shop_create_date_state_idx` (`shop_id`,`create_date`,`state`),
  KEY `listings_currency_code_idx` (`currency_code`),
  KEY `listings_section_id_state_idx` (`section_id`,`state`),
  KEY `listings_shop_featured_rank_idx` (`shop_id`,`featured_rank`),
  KEY `listings_create_date_state_idx` (`create_date`,`state`),
  KEY `listings_ending_date_state_idx` (`ending_date`,`state`),
  KEY `listings_update_date_state_idx` (`update_date`,`state`),
  KEY `listings_original_create_date_state_idx` (`original_create_date`,`state`),
  KEY `shop_flags_state` (`shop_id`,`seller_flags`,`state`),
  KEY `shop_available_displayable_sellerflags` (`shop_id`,`is_available`,`is_displayable`,`seller_flags`),
  KEY `shop_section_available_displayable_create_listing` (`shop_id`,`section_id`,`is_available`,`is_displayable`,`create_date`,`listing_id`),
  KEY `IX__listings_shop_update_state_display` (`shop_id`,`update_date`,`state`,`is_displayable`),
  KEY `listings_shop_section_state_displayable_flags_idx` (`shop_id`,`section_id`,`state`,`is_displayable`,`seller_flags`),
  KEY `shop_flags_avail_display_idx` (`shop_id`,`seller_flags`,`is_available`,`is_displayable`),
  KEY `shop_state_avail_display_create_listing_idx` (`shop_id`,`state`,`is_available`,`is_displayable`,`create_date` DESC,`listing_id` DESC)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_auto_renew` (
  `listing_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `count` int NOT NULL,
  `is_enabled` tinyint(1) NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_compliance_summary` (
  `listing_id` bigint unsigned NOT NULL,
  `language_id` tinyint NOT NULL DEFAULT '0',
  `compliance_summary` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`language_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_cost_item` (
  `listings_cost_item_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `cost_type` tinyint unsigned NOT NULL,
  `quantity` int unsigned NOT NULL,
  `cost` float unsigned NOT NULL,
  `computed_cost` float unsigned NOT NULL,
  `currency_code` char(3) NOT NULL DEFAULT 'USD',
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listings_cost_item_id`),
  KEY `listings_cost_item_update_date` (`update_date`),
  KEY `listings_cost_item_listing_id` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_cost_item_v2` (
  `shop_id` bigint unsigned NOT NULL,
  `listings_cost_item_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `cost_type` tinyint unsigned NOT NULL,
  `quantity` int unsigned NOT NULL DEFAULT '0',
  `cost` int NOT NULL DEFAULT '0',
  `computed_cost` int NOT NULL DEFAULT '0',
  `currency_code` char(3) NOT NULL DEFAULT 'USD',
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listings_cost_item_id`),
  KEY `listings_cost_item_update_date` (`update_date`),
  KEY `listings_cost_item_listing_id` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_donation` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `nonprofit_id` bigint unsigned NOT NULL,
  `fundraise_event_id` bigint unsigned NOT NULL DEFAULT '0',
  `percentage_int` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_price_int` bigint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int` bigint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int_usd` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `status` tinyint unsigned NOT NULL DEFAULT '1',
  `donation_type` tinyint unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`nonprofit_id`,`listing_id`),
  UNIQUE KEY `nonprofit_id` (`nonprofit_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_materials` (
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `language_id` tinyint unsigned NOT NULL,
  `material_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `sequence` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`listing_id`,`language_id`,`material_id`),
  KEY `listing_material_shop_index` (`shop_id`),
  KEY `listing_material_update_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_properties_values` (
  `listings_property_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `property_id` int unsigned NOT NULL,
  `value` varchar(4096) DEFAULT NULL,
  `created` int unsigned NOT NULL,
  `modified` int unsigned NOT NULL,
  PRIMARY KEY (`listings_property_id`),
  KEY `modified_idx` (`modified`),
  KEY `shop_listing_property_idx` (`shop_id`,`listing_id`,`property_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listings_tags` (
  `listings_tag_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `tag` varchar(45) NOT NULL,
  `sequence` tinyint unsigned NOT NULL DEFAULT '0',
  `created` int unsigned NOT NULL,
  `modified` int unsigned NOT NULL,
  `language` tinyint DEFAULT '0',
  PRIMARY KEY (`listing_id`,`listings_tag_id`),
  KEY `shop_id_idx` (`shop_id`),
  KEY `modified_idx` (`modified`),
  KEY `listings_tag_id_idx` (`listings_tag_id`),
  KEY `IX__listing_lang_seq_modified` (`listing_id`,`language`,`sequence`,`modified`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `listingset_listing_customization` (
  `collection_id` bigint NOT NULL,
  `listingset_listing_customization_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `listing_inventory_id` bigint NOT NULL,
  `required_variations_signature` varchar(32) NOT NULL,
  `optional_variations_signature` varchar(32) NOT NULL,
  `required_variation_details` blob,
  `optional_variation_details` blob,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `variation_data_version` smallint NOT NULL,
  `creator_id` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`collection_id`,`listingset_listing_customization_id`),
  UNIQUE KEY `variation_idx` (`collection_id`,`listing_id`,`listing_inventory_id`,`required_variations_signature`,`optional_variations_signature`),
  KEY `creator_id_key` (`creator_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `livestream_session_moderators` (
  `livestream_session_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `status` varchar(32) NOT NULL DEFAULT 'scheduled',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`livestream_session_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `livestream_session_questions` (
  `question_id` bigint NOT NULL,
  `livestream_session_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `status` varchar(32) NOT NULL DEFAULT 'scheduled',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `question` text NOT NULL,
  PRIMARY KEY (`livestream_session_id`,`question_id`),
  KEY `livestream_session_id` (`livestream_session_id`,`create_date`),
  KEY `livestream_session_id_2` (`livestream_session_id`,`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `local_market_data` (
  `local_market_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL,
  `external_url` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `encoded_schedule` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_first_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `address_second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `timezone` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `venue_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`local_market_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `localmarket_local_market_attendance` (
  `local_market_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `attendance_status` tinyint unsigned NOT NULL DEFAULT '0',
  `comment` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `schedule` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`local_market_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `localmarket_local_market_user_attendance` (
  `local_market_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `attendance_status` int unsigned NOT NULL DEFAULT '0',
  `comment` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `schedule` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`local_market_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `login_session_attribute` (
  `login_session_attribute_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `login_session_token` char(80) NOT NULL,
  `athena_session_id` bigint unsigned DEFAULT NULL,
  `attribute` varchar(32) NOT NULL,
  `value` varchar(2048) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`login_session_attribute_id`),
  UNIQUE KEY `user_login_attribute_idx` (`user_id`,`login_session_token`,`attribute`),
  UNIQUE KEY `user_athena_attribute_idx` (`user_id`,`athena_session_id`,`attribute`),
  KEY `user_attribute_idx` (`user_id`,`attribute`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `loyalty_benefit_redemption` (
  `loyalty_benefit_redemption_id` bigint unsigned NOT NULL COMMENT 'Generated id for this record',
  `user_id` bigint unsigned NOT NULL COMMENT 'User id of user who redeemed a benefit',
  `product_key` varchar(35) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The loyalty product key the user had at the time of benefit redemption',
  `benefit_key` varchar(35) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Benefit key that represents the redeemed benefit',
  `benefit_variation` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specific kind of benefit redeemed (SKU number, drop campaign, etc)',
  `association_id` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The id of the association (listing_id, receipt_id, etc) this redemption tracks with, indicated by association_type',
  `association_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The type of association this redemption tracks with',
  `redemption_action` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Part of redemption life cycle for benefit (i.e. tote bag was claimed, then tote bag was processed)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to mark a record as soft-deleted',
  PRIMARY KEY (`user_id`,`loyalty_benefit_redemption_id`),
  UNIQUE KEY `loyalty_benefit_redemption_id` (`loyalty_benefit_redemption_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `idx_user_association` (`user_id`,`association_type`,`association_id`) COMMENT 'For querying all redemptions for a user by association'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `loyalty_memberships` (
  `user_id` bigint unsigned NOT NULL,
  `membership_id` bigint unsigned NOT NULL,
  `membership_status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `product_key` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`membership_id`),
  UNIQUE KEY `user_id` (`user_id`),
  KEY `membership_status` (`membership_status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `product_key` (`product_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `machine_translation_memory` (
  `hash_bucket` int NOT NULL DEFAULT '0',
  `source_content_md5` binary(32) NOT NULL,
  `source_content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `source_language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `translated_content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `translated_language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `translation_system_id` smallint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`source_content_md5`,`source_language`,`translated_language`,`translation_system_id`,`create_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mail_schedule_email_data` (
  `mail_schedule_data_id` bigint unsigned NOT NULL,
  `email_id` bigint unsigned NOT NULL,
  `mail_schedule_id` bigint unsigned NOT NULL,
  `field` varchar(64) DEFAULT NULL,
  `value` varchar(255) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`mail_schedule_data_id`),
  KEY `mail_schedule_email` (`mail_schedule_id`,`email_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `email_id` (`email_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mason_rendered` (
  `mason_rendered_id` bigint unsigned NOT NULL,
  `mason_campaign_id` bigint unsigned NOT NULL,
  `mason_experience_id` bigint unsigned NOT NULL,
  `mason_path_id` bigint unsigned NOT NULL,
  `mason_locale_id` bigint unsigned NOT NULL,
  `is_active` tinyint unsigned NOT NULL DEFAULT '0',
  `body_json` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`mason_rendered_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `mason_campaign_id_idx` (`mason_campaign_id`),
  KEY `mason_experience_id_idx` (`mason_experience_id`),
  KEY `rendered_lookup_idx` (`mason_locale_id`,`is_active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mc_business` (
  `mc_business_id` bigint unsigned NOT NULL,
  `data` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`mc_business_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mc_channel_order` (
  `mc_order_id` bigint unsigned NOT NULL,
  `mc_business_id` bigint unsigned NOT NULL,
  `channel_id` bigint unsigned NOT NULL,
  `channel_key` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`mc_business_id`,`mc_order_id`),
  KEY `channel_idx` (`mc_business_id`,`channel_id`,`channel_key`(32)),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mc_order` (
  `mc_order_id` bigint unsigned NOT NULL,
  `mc_business_id` bigint unsigned NOT NULL,
  `data` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`mc_business_id`,`mc_order_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `member_story` (
  `user_id` bigint unsigned NOT NULL,
  `story_id` bigint unsigned NOT NULL,
  `story` text,
  `source_url` text,
  `created_by_staff_id` bigint unsigned NOT NULL,
  `story_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`story_id`),
  KEY `story_date` (`story_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Member stories';

CREATE TABLE `member_story_attachment` (
  `user_id` bigint unsigned NOT NULL,
  `story_id` bigint unsigned NOT NULL,
  `attachment_id` bigint unsigned NOT NULL,
  `aws_url` varchar(256) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `title` varchar(128) NOT NULL,
  `filetype` varchar(128) NOT NULL,
  PRIMARY KEY (`user_id`,`attachment_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `member_story_tag` (
  `user_id` bigint unsigned NOT NULL,
  `story_id` bigint unsigned NOT NULL,
  `tag_id` bigint unsigned NOT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`,`story_id`,`tag_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Tags for member stories';

CREATE TABLE `merch_collection_listings` (
  `merch_collection_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `section_id` bigint unsigned DEFAULT NULL,
  `ordering` smallint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`merch_collection_id`,`shop_id`,`listing_id`),
  KEY `update_date_index` (`update_date`),
  KEY `ordering_listings` (`merch_collection_id`,`section_id`,`ordering`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `merch_collection_sections` (
  `merch_collection_id` bigint unsigned NOT NULL,
  `section_id` bigint unsigned NOT NULL,
  `name` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`merch_collection_id`,`section_id`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `merch_listing_collections` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `merch_collection_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `section_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`merch_collection_id`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `merch_listing_tags` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `tag_id` bigint unsigned NOT NULL,
  `creator_staff_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`tag_id`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `merch_listings` (
  `listing_id` bigint unsigned NOT NULL,
  `creator_staff_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `status` tinyint NOT NULL DEFAULT '0',
  `approver_staff_id` bigint DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`creator_staff_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `merchai_rejected_listings` (
  `merchai_rejected_listings_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `rejector_staff_id` bigint unsigned DEFAULT NULL COMMENT 'Staff id of admin who rejected listing from MerchAI page',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Created date',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date',
  `is_reconsidered` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'If rejected listing has been reconsidered for being on MerchAI page',
  PRIMARY KEY (`merchai_rejected_listings_id`,`listing_id`,`shop_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Merch Stash MerchAI reject listings';

CREATE TABLE `messenger_conversation_messages` (
  `messenger_conversation_creator_user_id` bigint NOT NULL,
  `messenger_conversation_id` bigint NOT NULL,
  `messenger_conversation_message_id` bigint NOT NULL,
  `legacy_conversation_id` bigint unsigned DEFAULT NULL,
  `legacy_message_id` bigint unsigned DEFAULT NULL,
  `sender_user_id` bigint NOT NULL,
  `message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `message_order` smallint unsigned DEFAULT '0',
  `message_type` tinyint unsigned NOT NULL DEFAULT '1',
  `message_source` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `system_message_type` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `has_images` tinyint(1) DEFAULT '0',
  `has_additional_content` tinyint(1) DEFAULT '0',
  `message_language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `sort_key_send_date_ms` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_backfill` tinyint(1) DEFAULT '0',
  `last_backfill_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`messenger_conversation_creator_user_id`,`messenger_conversation_id`,`messenger_conversation_message_id`),
  UNIQUE KEY `legacy_message_idx` (`legacy_message_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `messenger_conversations` (
  `user_id` bigint unsigned NOT NULL,
  `other_user_id` bigint unsigned NOT NULL,
  `creator_user_id` bigint unsigned NOT NULL,
  `messenger_conversation_id` bigint unsigned NOT NULL,
  `is_read` tinyint DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `last_message_excerpt` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `last_message_date` int unsigned NOT NULL,
  `last_message_type` tinyint unsigned NOT NULL DEFAULT '1',
  `last_system_message_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `last_message_attachment_count` tinyint unsigned NOT NULL DEFAULT '0',
  `last_sender_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_muted` tinyint(1) DEFAULT '0',
  `is_archived` tinyint(1) DEFAULT '0',
  `is_backfill` tinyint(1) DEFAULT '0',
  `last_backfill_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`,`other_user_id`,`messenger_conversation_id`),
  UNIQUE KEY `user_other_user_idx` (`user_id`,`other_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `messenger_images` (
  `conversation_creator_user_id` bigint unsigned NOT NULL,
  `message_id` bigint unsigned NOT NULL,
  `image_order` tinyint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `marked_for_death` tinyint(1) DEFAULT '0',
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `is_backfill` tinyint(1) DEFAULT '0',
  `last_backfill_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`conversation_creator_user_id`,`message_id`,`image_order`),
  UNIQUE KEY `messenger_images_image_id` (`image_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `messenger_message_content` (
  `message_content_id` bigint unsigned NOT NULL,
  `conversation_creator_user_id` bigint unsigned NOT NULL,
  `message_id` bigint unsigned NOT NULL,
  `content_order` tinyint unsigned NOT NULL,
  `content_id` bigint unsigned NOT NULL DEFAULT '0',
  `content_type` tinyint unsigned DEFAULT NULL,
  `content_shardifier_id` bigint unsigned DEFAULT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `is_backfill` tinyint(1) DEFAULT '0',
  `last_backfill_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`conversation_creator_user_id`,`message_id`,`content_order`),
  UNIQUE KEY `messenger_message_content_id` (`message_content_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `mission_control_denormalized_orders` (
  `shop_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `destination` varchar(512) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_international` tinyint unsigned NOT NULL DEFAULT '0',
  `is_digital` tinyint unsigned NOT NULL DEFAULT '0',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `is_cancelled` tinyint unsigned NOT NULL DEFAULT '0',
  `channel` int unsigned NOT NULL DEFAULT '0',
  `expected_ship_date` int unsigned NOT NULL DEFAULT '0',
  `completed_date` int unsigned NOT NULL DEFAULT '0',
  `tracking_state_code` int unsigned NOT NULL DEFAULT '0',
  `update_epoch_s` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `buyer_country_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_shipping_label_eligible` tinyint unsigned NOT NULL DEFAULT '0',
  `shipping_label_eligibility_end_date` int unsigned NOT NULL DEFAULT '0',
  `has_labels_available_to_print` tinyint unsigned NOT NULL DEFAULT '0',
  `has_refunded_label` tinyint unsigned NOT NULL DEFAULT '0',
  `label_image_expire_date` int unsigned NOT NULL DEFAULT '0',
  `label_purchase_date` int unsigned NOT NULL DEFAULT '0',
  `is_marked_as_gift` tinyint unsigned NOT NULL DEFAULT '0',
  `has_buyer_notes` tinyint unsigned NOT NULL DEFAULT '0',
  `is_personalized` tinyint unsigned NOT NULL DEFAULT '0',
  `has_shipping_upgrade` tinyint unsigned NOT NULL DEFAULT '0',
  `order_state_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`order_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`),
  KEY `update_epoch_s_index` (`update_epoch_s`),
  KEY `shop_id_create_completed_idx` (`shop_id`,`create_date`,`completed_date`),
  KEY `order_id_index` (`order_id`),
  KEY `shop_id_order_id_is_paid_completed_idx` (`shop_id`,`completed_date`,`is_paid`,`order_id`),
  KEY `order_state_id_index` (`order_state_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `monthly_statement_request` (
  `monthly_statement_request_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `gearman_job_key` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `month_requested` int unsigned NOT NULL,
  `year_requested` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `completion_date` int unsigned DEFAULT NULL,
  `url_expiration_date` int unsigned DEFAULT NULL,
  `signed_url` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `admin_user_id` bigint unsigned DEFAULT NULL,
  `encryption_key` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`monthly_statement_request_id`),
  KEY `user_year_month_created_admin_idx` (`user_id`,`year_requested`,`month_requested`,`create_date`,`admin_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ndibari_listing_comparison_listings` (
  `listing_comparison_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`listing_comparison_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `new_buyer_offers` (
  `hashed_browser_id` bigint unsigned NOT NULL,
  `browser_id` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `hashed_coupon_code` bigint unsigned NOT NULL,
  `coupon_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`hashed_browser_id`,`hashed_coupon_code`,`create_date`),
  KEY `purchase_check` (`hashed_browser_id`,`receipt_group_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `new_shops_followup` (
  `shop_id` bigint NOT NULL,
  `last_checked` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `news_feed_stats` (
  `owner_id` bigint unsigned NOT NULL,
  `owner_type_id` smallint unsigned NOT NULL,
  `feed_type` varchar(20) NOT NULL,
  `time_last_viewed` int unsigned NOT NULL,
  `coupons_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::COUPONS',
  `favorites_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::FAVORITE_NON_DEALS',
  `sales_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::SALES',
  `abandoned_cart_offer_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::ABANDONED_CART',
  `recently_favorited_coupons_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::RECENTLY_FAVORITED_COUPONS',
  `thank_you_coupon_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::THANK_YOU_COUPONS',
  `abandoned_saved_for_later_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::ABANDONED_SAVED_FOR_LATER',
  `new_from_your_favorite_shop_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::NEW_FROM_YOUR_FAVORITE_SHOP',
  `favorite_listing_in_stock_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::FAVORITE_LISTING_IN_STOCK',
  `collection_recommendations_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::COLLECTION_RECOMMENDATIONS',
  `one_favorite_left_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::ONE_FAVORITE_LEFT',
  `favorite_listing_on_sale_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::FAVORITE_LISTING_ON_SALE',
  `favorite_shop_having_sale_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::FAVORITE_SHOP_HAVING_SALE',
  `cart_listings_on_sale_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::CART_LISTINGS_ON_SALE',
  `saved_for_later_on_sale_time_last_viewed` int unsigned NOT NULL DEFAULT '0' COMMENT 'time_last_viewed property for NotificationSet::SAVED_FOR_LATER_ON_SALE',
  `creation_time` int unsigned NOT NULL,
  `update_time` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`owner_id`,`owner_type_id`,`feed_type`),
  KEY `creation_time` (`creation_time`),
  KEY `update_time` (`update_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `nonprofit_data` (
  `nonprofit_id` bigint unsigned NOT NULL,
  `legal_name` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `image_ids` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `naics` varchar(12) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ntee_code` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ntee_classification` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `irs_classification` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `extended_mission` text COLLATE utf8mb4_unicode_ci,
  `email_address` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `website_link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `facebook_link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `twitter_link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `blog_link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `city` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`nonprofit_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `nonprofit_listings_donation_mirror` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `nonprofit_id` bigint unsigned NOT NULL,
  `fundraise_event_id` bigint unsigned NOT NULL DEFAULT '0',
  `percentage_int` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_price_int` bigint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int` bigint unsigned NOT NULL DEFAULT '0',
  `donation_amount_int_usd` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `status` tinyint unsigned NOT NULL DEFAULT '1',
  `donation_type` tinyint unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`nonprofit_id`,`shop_id`,`listing_id`),
  UNIQUE KEY `nonprofit_id` (`nonprofit_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `notification_setting` (
  `device_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `notification_type` varchar(32) NOT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `banner_enabled` tinyint NOT NULL DEFAULT '1',
  PRIMARY KEY (`device_id`,`notification_type`),
  KEY `user_id` (`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `nrti_entity_classification` (
  `entity_classification_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of an entity classification',
  `service` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Service name',
  `model` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Optional model name and version',
  `user_id` bigint unsigned NOT NULL COMMENT 'Associated user id (used for sharding)',
  `target_type` varchar(127) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Target type (e.g. listing)',
  `target_id` bigint unsigned NOT NULL COMMENT 'Target identifier (e.g. listing_id)',
  `category` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Top level label parent category',
  `label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Label',
  `score` decimal(10,8) NOT NULL COMMENT '0-1 score',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`entity_classification_id`),
  UNIQUE KEY `service_user_id_target_type_target_id_category_label_idx` (`service`,`user_id`,`target_type`,`target_id`,`category`,`label`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `oauth_access_tokens` (
  `access_token_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL,
  `resource_owner_id` bigint unsigned NOT NULL,
  `access_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `athena_session_id` bigint unsigned DEFAULT NULL,
  `scope` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `revoke_date` int unsigned DEFAULT NULL,
  `revoked_by_user_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`access_token_id`),
  KEY `apikey_accesstoken` (`api_key_id`,`access_token`),
  KEY `apikey_resourceowner_accesstoken` (`api_key_id`,`resource_owner_id`,`access_token`),
  KEY `accesstoken_expiredate_revokedate` (`access_token`,`expire_date`,`revoke_date`),
  KEY `apikey_expiredate` (`api_key_id`,`expire_date`),
  KEY `resource_owner_expire_idx` (`resource_owner_id`,`expire_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `oauth_authorization_codes` (
  `authorization_code_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL,
  `resource_owner_id` bigint unsigned NOT NULL,
  `code` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `redirect_uri` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `scope` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `code_challenge_method` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `authorized_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `authenticator` varchar(32) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `expire_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `code_challenge` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`authorization_code_id`),
  KEY `apikey_code` (`api_key_id`,`code`),
  KEY `apikey_expiredate` (`api_key_id`,`expire_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `oauth_refresh_tokens` (
  `refresh_token_id` bigint unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL,
  `resource_owner_id` bigint unsigned NOT NULL,
  `refresh_token` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `scope` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `access_token_id` bigint unsigned DEFAULT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `revoke_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`refresh_token_id`),
  KEY `resourceowner_refreshtoken` (`resource_owner_id`,`refresh_token`),
  KEY `resourceowner_expiredate_revokedate` (`resource_owner_id`,`expire_date`,`revoke_date`),
  KEY `apikey_expiredate_revokedate` (`api_key_id`,`expire_date`,`revoke_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `oauth_user_consent` (
  `oauth_user_consent_id` bigint unsigned NOT NULL DEFAULT '0',
  `api_key_id` bigint unsigned NOT NULL DEFAULT '0',
  `resource_owner_id` bigint unsigned NOT NULL DEFAULT '0',
  `application_id` bigint unsigned NOT NULL,
  `scopes` varchar(4096) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `is_granted` tinyint(1) DEFAULT '1',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`oauth_user_consent_id`),
  KEY `key_owner` (`api_key_id`,`resource_owner_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  FULLTEXT KEY `scopes_index` (`scopes`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `off_etsy_ads_opt_out` (
  `shop_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `status` int NOT NULL,
  `reason_code` int NOT NULL,
  `staff_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`update_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offering_quantity` (
  `shop_id` bigint unsigned NOT NULL,
  `quantity_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned DEFAULT NULL,
  `quantity` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`quantity_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_listing_state_idx` (`shop_id`,`listing_id`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offering_wholesale_decorator` (
  `shop_id` bigint unsigned NOT NULL,
  `product_offering_id` bigint unsigned NOT NULL,
  `minimum_quantity` int NOT NULL DEFAULT '1',
  `retail_price` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`product_offering_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_ads_affiliate_widget_listings` (
  `hash_bucket` int NOT NULL COMMENT 'For sharding via ArbitraryKeyHash',
  `user_id` bigint unsigned NOT NULL,
  `widget_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `layout_index` tinyint NOT NULL COMMENT 'Location in the layout where this listing is displayed',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`hash_bucket`,`widget_id`,`layout_index`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `listing_id` (`listing_id`),
  KEY `widget_id_layout_index` (`widget_id`,`layout_index`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_ads_affiliate_widget_user` (
  `user_id` bigint unsigned NOT NULL,
  `widget_id` bigint unsigned NOT NULL,
  `awin_publisher_id` bigint unsigned NOT NULL COMMENT 'AWIN ID for the creator of this widget',
  `advertiser_program_id` bigint unsigned NOT NULL COMMENT 'Etsy affiliate program this widget is associated to',
  `external_title` varchar(512) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `layout_template` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_dynamic` tinyint unsigned NOT NULL DEFAULT '0',
  `merch_collection_id` bigint unsigned NOT NULL DEFAULT '0',
  `hide_listing_titles` tinyint unsigned NOT NULL DEFAULT '0',
  `hide_shadow` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`widget_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_ads_affiliate_widget_widget` (
  `hash_bucket` int NOT NULL COMMENT 'For sharding via ArbitraryKeyHash',
  `widget_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `awin_publisher_id` bigint unsigned NOT NULL COMMENT 'AWIN ID for the creator of this widget',
  `advertiser_program_id` bigint unsigned NOT NULL COMMENT 'Etsy affiliate program this widget is associated to',
  `external_title` varchar(512) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `layout_template` varchar(80) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_dynamic` tinyint unsigned NOT NULL DEFAULT '0',
  `merch_collection_id` bigint unsigned NOT NULL DEFAULT '0',
  `hide_listing_titles` tinyint unsigned NOT NULL DEFAULT '0',
  `hide_shadow` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`hash_bucket`,`widget_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `widget_id` (`widget_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_google_order` (
  `offsite_checkout_order_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `partner_merchant_id` varchar(256) NOT NULL,
  `google_order_id` varchar(256) NOT NULL,
  `request_id` varchar(256) NOT NULL,
  `request_body` longblob NOT NULL,
  `response_body` longblob,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`offsite_checkout_order_id`),
  UNIQUE KEY `guest_user_id_request_id` (`guest_user_id`,`request_id`),
  KEY `guest_user_id_google_order_id` (`guest_user_id`,`google_order_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_google_request_to_guest_user` (
  `request_id` varchar(256) NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`request_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_google_webhook` (
  `webhook_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `offer_id` varchar(256) NOT NULL,
  `quantity` int unsigned NOT NULL,
  `emitted_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`webhook_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `guest_user_offer` (`guest_user_id`,`offer_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_order` (
  `offsite_checkout_order_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `provider` varchar(256) NOT NULL,
  `guest_user_agent_id` varchar(256) DEFAULT NULL,
  `multi_shop_cart_id` bigint unsigned DEFAULT NULL,
  `guest_user_address_id` bigint unsigned DEFAULT NULL,
  `shipping_guest_user_address_id` bigint unsigned DEFAULT NULL,
  `billing_guest_user_address_id` bigint unsigned DEFAULT NULL,
  `guest_user_credit_card_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `group_payment_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`offsite_checkout_order_id`),
  UNIQUE KEY `guest_user_id_offsite_checkout_order_id` (`guest_user_id`,`offsite_checkout_order_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `guest_user_id_receipt_group_id` (`guest_user_id`,`receipt_group_id`),
  KEY `provider_create_date` (`provider`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_order_to_cart` (
  `offsite_checkout_order_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `cart_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`offsite_checkout_order_id`,`guest_user_id`,`cart_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `guest_user_order_id` (`guest_user_id`,`offsite_checkout_order_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_order_to_receipt` (
  `offsite_checkout_order_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`offsite_checkout_order_id`,`guest_user_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `guest_user_receipt` (`guest_user_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_shop_api_request_log` (
  `offsite_checkout_log_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `provider` varchar(256) NOT NULL,
  `log_type` varchar(256) NOT NULL,
  `request_body` longblob NOT NULL,
  `response_body` longblob NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`offsite_checkout_log_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_provider_log_type` (`shop_id`,`provider`,`log_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_checkout_shop_metadata` (
  `shop_id` bigint unsigned NOT NULL,
  `provider` varchar(256) NOT NULL,
  `account_id` bigint unsigned DEFAULT NULL,
  `is_eligible` tinyint NOT NULL DEFAULT '0',
  `is_active` tinyint DEFAULT '0',
  `end_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`provider`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `offsite_listing_feeds_bans` (
  `ban_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id_regex` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `vendor_regex` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_regex` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `language_regex` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `enabled` tinyint unsigned NOT NULL DEFAULT '1',
  `staff_id` bigint unsigned NOT NULL,
  `note` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`ban_id`),
  UNIQUE KEY `ban_id` (`ban_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `olf_experiment_bucketing` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `listing_id` bigint unsigned NOT NULL,
  `experiment_id` bigint unsigned NOT NULL,
  `variant` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_incremental` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `classification` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`experiment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `olf_experiment_bucketing_audit` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `experiment_id` bigint unsigned NOT NULL,
  `change_action` int unsigned NOT NULL,
  `change_timestamp` int unsigned NOT NULL COMMENT 'timestamp representing midnight in GMT of the date the action took place',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`experiment_id`,`change_timestamp`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `olf_image_disapproval` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `listing_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL COMMENT 'Tracks the Images.image_id that was disapproved',
  `version` int unsigned NOT NULL COMMENT 'Tracks the Images.version that was disapproved',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`image_id`,`version`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `olf_seller_experiment_consent_audit` (
  `consent_audit_id` bigint unsigned NOT NULL COMMENT 'Automatic ticket generated',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `consent_type` tinyint unsigned NOT NULL,
  `event_type` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`consent_audit_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `olf_tide_output` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `listing_id` bigint unsigned NOT NULL,
  `language_id` int unsigned NOT NULL DEFAULT '0',
  `model_version` int unsigned NOT NULL DEFAULT '1',
  `generated_title` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `metadata_json` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Serialized JSON blob of metadata associated with this TiDe generation',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`language_id`,`model_version`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_help_request` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_help_request_id` bigint unsigned NOT NULL DEFAULT '0',
  `conversation_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_case_id` bigint unsigned NOT NULL DEFAULT '0',
  `message_to_seller` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_issue_resolved` tinyint(1) DEFAULT NULL,
  `is_etsy_app` tinyint unsigned DEFAULT NULL,
  `is_mobile_device` tinyint unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`,`receipt_id`,`order_help_request_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_help_request_attribute` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_help_request_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_help_request_attribute_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` varchar(55) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`receipt_id`,`order_help_request_id`,`order_help_request_attribute_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_issue` (
  `buyer_id` bigint unsigned NOT NULL DEFAULT '0',
  `seller_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_issue_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_help_request_id` bigint unsigned DEFAULT NULL,
  `case_id` bigint unsigned DEFAULT NULL,
  `task_id` bigint unsigned DEFAULT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `resolution_type` tinyint unsigned DEFAULT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_id`,`order_issue_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `receipt_id_idx` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_issue_action_log` (
  `order_issue_action_log_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_issue_id` bigint unsigned NOT NULL DEFAULT '0',
  `action_type` tinyint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `previous_state` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'OPEN = 1; SYSTEM_REVIEW = 2; ESCALATED = 3; RESOLVED = 4;',
  `updated_state` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'OPEN = 1; SYSTEM_REVIEW = 2; ESCALATED = 3; RESOLVED = 4;',
  `transition_note` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `experiment_flags` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`order_issue_action_log_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_processing_schedule` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_working_monday` tinyint(1) NOT NULL,
  `is_working_tuesday` tinyint(1) NOT NULL,
  `is_working_wednesday` tinyint(1) NOT NULL,
  `is_working_thursday` tinyint(1) NOT NULL,
  `is_working_friday` tinyint(1) NOT NULL,
  `is_working_saturday` tinyint(1) NOT NULL,
  `is_working_sunday` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_processing_schedule_holiday_preferences` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `preferences` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded value',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_required_tracking_exclusion_reason` (
  `exclusion_reason_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned DEFAULT NULL,
  `reason` tinyint unsigned NOT NULL DEFAULT '0',
  `other_reason_desc` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`exclusion_reason_id`,`shop_id`,`order_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_state_change` (
  `shop_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `order_state_id` bigint unsigned NOT NULL,
  `state_type` tinyint unsigned NOT NULL,
  `order_state_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `entered_state_date` int unsigned NOT NULL DEFAULT '0',
  `exited_state_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`order_id`,`order_state_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_tax_details` (
  `order_tax_details_id` bigint unsigned NOT NULL COMMENT 'Order tax details ID',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `receipt_id` bigint unsigned NOT NULL COMMENT 'References the receipt these tax details apply to',
  `listing_id` bigint unsigned DEFAULT NULL COMMENT 'References the listing these tax details apply to',
  `transaction_id` bigint unsigned DEFAULT NULL COMMENT 'References the transaction these tax details are associated with',
  `item_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'listing' COMMENT 'The type of item the tax details apply to, be it listing, shipping or giftwrap',
  `listing_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The type of item listing (e.g. physical , digital , digital_dl_later)',
  `tax_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The tax result code (e.g. TAXABLE, NONTAXABLE)',
  `imposition` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The imposition (e.g. GST/HST)',
  `imposition_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The imposition type (e.g. Goods and Services Tax)',
  `jurisdiction_level` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The jurisdiction level (e.g. COUNTRY)',
  `jurisdiction` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The jurisdiction (e.g. CANADA)',
  `taxable` int unsigned DEFAULT NULL COMMENT 'How much of the item is taxable in the currencies base amount',
  `calculated_tax` int DEFAULT NULL COMMENT 'The tax for this imposition type in the currencies base amount',
  `effective_rate` float unsigned DEFAULT NULL COMMENT 'The tax rate for this imposition type in percentage',
  `tax_id_types` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'The tax id types the seller has that apply to this imposition type',
  `currency` varchar(6) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The currency of this tax',
  `rule_applied` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'vertex rule name(e.g. lessthan150EUR)',
  `drop_ship` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'drop ship (e.g. EUUKDROPSHIP)',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`order_tax_details_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `receipt_id` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_vertex_tax_area` (
  `order_vertex_tax_area_id` bigint unsigned NOT NULL COMMENT 'Order Vertex TaxareaID mapping table ID',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `receipt_id` bigint unsigned NOT NULL COMMENT 'References the receipt these tax details apply to',
  `vertex_tax_area_id` bigint unsigned DEFAULT NULL COMMENT 'References the destination tax area id we get from vertex',
  `situs_country_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Country from vertex',
  `situs_main_division` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'State from vertex',
  `situs_sub_division` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'County from vertex',
  `situs_city_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'City from vertex',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`order_vertex_tax_area_id`),
  KEY `shop_id` (`shop_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `order_waiting_reasons` (
  `waiting_reason_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `convo_id` bigint unsigned DEFAULT NULL,
  `reason_type` tinyint unsigned NOT NULL DEFAULT '0',
  `other_reason_desc` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `start_time` int unsigned NOT NULL,
  `stop_time` int unsigned NOT NULL DEFAULT '0',
  `closing_type` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`order_id`,`waiting_reason_id`),
  KEY `stop_time_idx` (`stop_time`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `orders_applied_order_state` (
  `shop_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `order_state_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`order_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `order_idx` (`order_id`),
  KEY `order_state_idx` (`order_state_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `orders_order_progress_step` (
  `shop_id` bigint unsigned NOT NULL,
  `order_progress_step_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `progress_step_id` bigint unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`order_progress_step_id`),
  KEY `shop_id_receipt_id_idx` (`shop_id`,`receipt_id`,`is_deleted`),
  KEY `update_date_idx` (`update_date`),
  KEY `receipt_id_progress_step_id_idx` (`receipt_id`,`progress_step_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `orders_order_state` (
  `shop_id` bigint unsigned NOT NULL,
  `order_state_id` bigint unsigned NOT NULL,
  `position` int unsigned NOT NULL DEFAULT '0',
  `type` int unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`order_state_id`),
  KEY `shop_id_is_deleted_idx` (`shop_id`,`is_deleted`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `orders_progress_step` (
  `shop_id` bigint unsigned NOT NULL,
  `progress_step_id` bigint unsigned NOT NULL,
  `position` int unsigned NOT NULL DEFAULT '0',
  `type` int unsigned NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`progress_step_id`),
  KEY `shop_id_is_deleted_idx` (`shop_id`,`is_deleted`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `osa_attribution_views` (
  `shop_id` bigint unsigned NOT NULL,
  `click_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned DEFAULT NULL,
  `browser_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `click_channel` int unsigned NOT NULL,
  `click_date` int unsigned NOT NULL,
  `external_click_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `click_status` tinyint unsigned NOT NULL DEFAULT '1',
  `click_event_guid` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `widget_id` bigint unsigned DEFAULT '0' COMMENT 'Not every click came from a widget; non-null defaults preferred',
  `utm_medium` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_source` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_campaign` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_term` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `utm_content` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `affil` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`click_id`),
  UNIQUE KEY `unique_click_channel_external_click_id` (`click_channel`,`external_click_id`),
  KEY `shop_user_browser_idx` (`shop_id`,`user_id`,`browser_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `click_event_guid` (`click_event_guid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `page_collection` (
  `creator_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `slug` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `privacy_level` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Default: 0 = unlisted',
  `origin_user_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `link` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`creator_id`,`collection_id`),
  KEY `creator_id-status` (`creator_id`,`status`),
  KEY `creator_id_slug` (`creator_id`,`slug`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `page_collection_listing` (
  `collection_creator_id` bigint unsigned NOT NULL COMMENT 'this is a page_id',
  `collection_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `contributor_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`collection_creator_id`,`collection_id`,`listing_id`,`shop_id`),
  KEY `collection_creator_id-status-listing_id` (`collection_creator_id`,`status`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `page_images` (
  `page_id` bigint unsigned NOT NULL,
  `image_id` bigint NOT NULL,
  `status` varchar(32) NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`page_id`,`image_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `pages_data` (
  `page_id` bigint unsigned NOT NULL,
  `byline` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` tinyint(1) NOT NULL,
  `verification_status` tinyint NOT NULL DEFAULT '0',
  `affiliate_status` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`page_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `pages_users` (
  `page_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `role` tinyint NOT NULL,
  `status` tinyint(1) NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`page_id`,`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `parsed_identity_verification_events` (
  `parsed_identity_verification_event_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a parsed identity verification event',
  `identity_verification_event_id` bigint unsigned NOT NULL COMMENT 'Identifier of identity verification event, foreign key',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the identity verification event belongs to, foreign key',
  `event_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Event type from getType method',
  `reference_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reference ID from getReferenceType method',
  `attribute_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Approval status of the event from getApprovalStatus method',
  `first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'First name from getFirstName method',
  `last_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Last name from getLastName method',
  `address` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Address from getAddress method',
  `phone_number` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Phone number from getPhoneNumber method',
  `email_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Email address from getEmailAddress method',
  `birthdate` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Birth date from getBirthdate method',
  `current_government_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Current government id from getCurrentGovID method',
  `current_selfie` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Current selfie photo id from getCurrentSelfie method',
  `identification_number` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Identification number from getIdentificationNumber method',
  `latest_ip_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Latest IP address from getLatestIpAddress method',
  `latest_device_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Latest device ID from getLatestDeviceId method',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`parsed_identity_verification_event_id`),
  UNIQUE KEY `shop_id_identity_verification_event_id` (`shop_id`,`identity_verification_event_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores parsed Identity Verification Events with getter methods applied from the Identity_VerificationEvent model';

CREATE TABLE `parsed_identity_verification_events_inquiry_tags` (
  `parsed_identity_verification_event_inquiry_tag_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a parsed identity verification event inquiry tag',
  `identity_verification_event_id` bigint unsigned NOT NULL COMMENT 'Identifier of identity verification event, foreign key',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the identity verification event belongs to, foreign key',
  `inquiry_tag` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Inquiry tag value from getInquiryTags method',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`parsed_identity_verification_event_inquiry_tag_id`),
  UNIQUE KEY `shop_id_identity_verification_event_id_inquiry_tag` (`shop_id`,`identity_verification_event_id`,`inquiry_tag`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores inquiry tags of parsed Identity Verification Events from the getInquiryTags method';

CREATE TABLE `payment_adjustments_to_order_tax_details` (
  `payment_adjustment_id` bigint unsigned NOT NULL COMMENT 'Payment Adjustments ID',
  `order_tax_details_id` bigint unsigned NOT NULL COMMENT 'Order tax details ID',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`payment_adjustment_id`,`order_tax_details_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `payment_method_audit_trail` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'shop the change happened for',
  `payment_method_audit_id` bigint unsigned NOT NULL COMMENT 'from the ticket server, primary key',
  `payment_method` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'payment method that changed',
  `new_status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'status after this action',
  `actor_user_id` bigint unsigned NOT NULL COMMENT 'user who triggered this action',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`payment_method_audit_id`),
  KEY `actor_user_id` (`actor_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='table used to store an audit trail for payment method changes';

CREATE TABLE `payment_templates` (
  `payment_template_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `allow_bt` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_check` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_mo` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_other` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_paypal` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_gbuy` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_cc` tinyint unsigned NOT NULL DEFAULT '0',
  `allow_gc` tinyint unsigned NOT NULL DEFAULT '0',
  `is_paypal_blocked` tinyint unsigned NOT NULL DEFAULT '0',
  `paypal_email` varchar(255) DEFAULT NULL,
  `paypal_premier` tinyint unsigned NOT NULL DEFAULT '0',
  `paypal_basic` tinyint unsigned NOT NULL DEFAULT '0',
  `gbuy_email` varchar(255) DEFAULT NULL,
  `address_id` bigint unsigned DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `first_line` varchar(255) DEFAULT NULL,
  `second_line` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `zip` varchar(255) DEFAULT NULL,
  `country_id` int unsigned DEFAULT NULL,
  `bt_full_name` varchar(255) DEFAULT NULL,
  `bt_bank_name` varchar(255) DEFAULT NULL,
  `bt_account_number` varchar(255) DEFAULT NULL,
  `bt_routing_number` varchar(255) DEFAULT NULL,
  `bt_swift_id` varchar(255) DEFAULT NULL,
  `bt_iban_number` varchar(255) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `paypal_email` (`paypal_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_bill_txns` (
  `paypal_bill_txn_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `token` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `transaction_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `transaction_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payment_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `amount` int NOT NULL DEFAULT '0',
  `currency_code` char(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payment_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `pending_reason_code` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payment_secret` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payer_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payer_email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payer_id` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `etsy_billing_country` char(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`paypal_bill_txn_id`),
  KEY `user_id` (`user_id`),
  KEY `transaction_id` (`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `paypal_disputes` (
  `paypal_dispute_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`paypal_dispute_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `receipt_id` (`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `personalization_tracking` (
  `viewing_user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `creation_date` int unsigned NOT NULL DEFAULT '0',
  `first_selected_date` int unsigned NOT NULL DEFAULT '0',
  `recent_selected_date` int unsigned NOT NULL DEFAULT '0',
  `first_click_date` int unsigned NOT NULL DEFAULT '0',
  `recent_click_date` int unsigned NOT NULL DEFAULT '0',
  `selected_count` int unsigned NOT NULL DEFAULT '0',
  `viewed_count` int unsigned NOT NULL DEFAULT '0',
  `clicked_count` int unsigned NOT NULL DEFAULT '0',
  `x_out` tinyint(1) NOT NULL DEFAULT '0',
  `is_favorited` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`viewing_user_id`,`listing_id`),
  KEY `shop_id` (`shop_id`),
  KEY `recent_selected_date_index` (`recent_selected_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `personalization_xout_tracking` (
  `viewing_user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `creation_date` int unsigned NOT NULL DEFAULT '0',
  `x_out` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`viewing_user_id`,`listing_id`,`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `phone_number` (
  `user_id` bigint unsigned NOT NULL COMMENT 'user_id',
  `phone_number_id` bigint unsigned NOT NULL COMMENT 'phone number id',
  `phone_number` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'phone number',
  `country_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '3 letter country iso code for phone number',
  `is_primary` varchar(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'flag representing if this is a primary phone number',
  `fallback_channel` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'string representing fallback channel',
  `preferred_channel` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'string representing fallback channel',
  `phone_number_confirmed` tinyint(1) DEFAULT NULL COMMENT 'phone number confirmed',
  `phone_number_confirmed_date` int unsigned NOT NULL COMMENT 'phone number confirmed date',
  `is_deleted` tinyint unsigned NOT NULL COMMENT 'soft delete flag',
  `create_date` int unsigned NOT NULL COMMENT 'created date',
  `update_date` int unsigned NOT NULL COMMENT 'updated date',
  PRIMARY KEY (`user_id`,`phone_number_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `phone_number_confirmed_date_idx` (`phone_number_confirmed_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='phone number table ucsed for sending user comms. Example security messages';

CREATE TABLE `plaid_session_audit` (
  `plaid_session_audit_id` bigint unsigned NOT NULL COMMENT 'Plaid user audit ID',
  `plaid_session_id` bigint unsigned NOT NULL COMMENT 'References the Plaid session',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `plaid_request_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Plaid Request remote identifier',
  `event_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Event type identifier',
  `data` text COLLATE utf8mb4_unicode_ci COMMENT 'Data of interest',
  `link_event_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Name of the Plaid Link event',
  `link_view_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Name of the Plaid Link UI Screen',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`plaid_session_audit_id`),
  KEY `plaid_session_id` (`plaid_session_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `plaid_sessions` (
  `plaid_session_id` bigint unsigned NOT NULL COMMENT 'Plaid user session ID',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `bank_account_id` bigint unsigned DEFAULT NULL COMMENT 'References Etsy bank account',
  `flow_state` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'created' COMMENT 'Plaid user session current state',
  `verification_status` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Bank verification status identifier',
  `flow_type` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The Plaid flow used',
  `reminder_state` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'States used by the reminder cron (PENDING, FIRST_WARN, SECOND_WARN, SHOP_SUSPENDED, DONE)',
  `failed_reason` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Detailed failed reason',
  `admin_user_id` bigint unsigned DEFAULT NULL COMMENT 'Etsy admin user ID',
  `access_token` varchar(256) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Encrypted Plaid access token',
  `plaid_item_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Plaid Item ID associated with the access token',
  `link_token_response` text COLLATE utf8mb4_unicode_ci COMMENT 'JSON Plaid Link token object stored to be used with flows that require re-initialization',
  `plaid_account_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Plaid Account ID associated with the account selected by the user during the Plaid Link flow',
  `plaid_link_session_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Plaid Link unique identifier associated with a user actions and events through the Link flow',
  `plaid_link_institution_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Bank institution name returned by Plaid Link component onSuccess callback metadata',
  `plaid_identity_data` text COLLATE utf8mb4_unicode_ci COMMENT 'Array with the bank account owners names stored as JSON string',
  `plaid_error_object` text COLLATE utf8mb4_unicode_ci COMMENT 'JSON Plaid Error json object',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  `flow_start_date` int unsigned DEFAULT NULL COMMENT 'Timestamp when the flow started',
  `flow_end_date` int unsigned DEFAULT NULL COMMENT 'Timestamp when the flow ended',
  PRIMARY KEY (`plaid_session_id`),
  KEY `shop_id` (`shop_id`),
  KEY `update_date` (`update_date`),
  KEY `flow_state` (`flow_state`),
  KEY `reminder_cron_idx` (`create_date`,`flow_type`,`flow_state`,`reminder_state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `plaid_shop_attempt_log` (
  `plaid_shop_attempt_log_id` bigint unsigned NOT NULL COMMENT 'Primary key',
  `shop_id` bigint unsigned NOT NULL COMMENT 'References the Etsy shop',
  `failures_count` int unsigned NOT NULL DEFAULT '0' COMMENT 'Failures counter',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`plaid_shop_attempt_log_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `privacy_transcend_anonymous_consent_prefs` (
  `uaid` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `advertising` tinyint(1) DEFAULT '0',
  `advertising_is_confirmed` tinyint(1) DEFAULT '0',
  `advertising_expiration_date` int unsigned DEFAULT NULL,
  `functional` tinyint(1) DEFAULT '0',
  `functional_is_confirmed` tinyint(1) DEFAULT '0',
  `functional_expiration_date` int unsigned DEFAULT NULL,
  `regional_experiences` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`uaid`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `privacy_transcend_user_consent_prefs` (
  `user_id` bigint unsigned NOT NULL,
  `advertising` tinyint(1) DEFAULT '0',
  `advertising_is_confirmed` tinyint(1) DEFAULT '0',
  `advertising_expiration_date` int unsigned DEFAULT NULL,
  `functional` tinyint(1) DEFAULT '0',
  `functional_is_confirmed` tinyint(1) DEFAULT '0',
  `functional_expiration_date` int unsigned DEFAULT NULL,
  `regional_experiences` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `privacy_transcend_user_consent_prefs_audit` (
  `audit_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `advertising` tinyint(1) DEFAULT '0',
  `advertising_is_confirmed` tinyint(1) DEFAULT '0',
  `advertising_expiration_date` int unsigned DEFAULT NULL,
  `functional` tinyint(1) DEFAULT '0',
  `functional_is_confirmed` tinyint(1) DEFAULT '0',
  `functional_expiration_date` int unsigned DEFAULT NULL,
  `regional_experiences` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `user_privacy_raw_consent_values_idx` (`user_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `processing_schedule_migration_exclusions` (
  `shop_id` bigint unsigned NOT NULL,
  `exclusion_reason` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `processing_start_times_calculations` (
  `shop_id` bigint unsigned NOT NULL,
  `calculation_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned DEFAULT NULL,
  `estimated_delivery_id` bigint unsigned DEFAULT NULL,
  `listing_id` bigint unsigned DEFAULT NULL,
  `base_date` int unsigned NOT NULL,
  `orig_ship_by_date_min` int unsigned NOT NULL,
  `orig_ship_by_date_max` int unsigned NOT NULL,
  `orig_estimated_delivery_date_min` int unsigned NOT NULL,
  `orig_estimated_delivery_date_max` int unsigned NOT NULL,
  `orig_holiday_days_min` int unsigned NOT NULL DEFAULT '0',
  `orig_holiday_days_max` int unsigned NOT NULL DEFAULT '0',
  `orig_timezone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_timezone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `new_ship_by_date_min` int unsigned NOT NULL,
  `new_ship_by_date_max` int unsigned NOT NULL,
  `new_estimated_delivery_date_min` int unsigned NOT NULL,
  `new_estimated_delivery_date_max` int unsigned NOT NULL,
  `new_holiday_days_min` int unsigned NOT NULL DEFAULT '0',
  `new_holiday_days_max` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`calculation_id`),
  KEY `estimated_delivery_id_idx` (`estimated_delivery_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `product_feeds_shops` (
  `shop_id` bigint unsigned NOT NULL,
  `vendor_id` tinyint unsigned NOT NULL,
  `country_id` int unsigned NOT NULL DEFAULT '209',
  `language_id` tinyint unsigned NOT NULL DEFAULT '0',
  `sub_account_id` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ban_reason` tinyint unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `banned_by_staff_id` bigint DEFAULT NULL,
  `banned_date` int DEFAULT NULL,
  `is_banned` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`vendor_id`,`country_id`,`language_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Metadata about the syndication of a shop''s listings to third party markets';

CREATE TABLE `product_offerings` (
  `product_offering_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `product_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned DEFAULT NULL,
  `channel` bigint unsigned NOT NULL DEFAULT '1',
  `price` bigint unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '1',
  `quantity_id` bigint unsigned NOT NULL,
  `production_cost_int` bigint unsigned DEFAULT NULL,
  `readiness_state_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`product_offering_id`),
  UNIQUE KEY `shop_id_product_id_channel` (`shop_id`,`product_id`,`channel`),
  KEY `update_date_idx` (`update_date`),
  KEY `product_offerings_idx_product_id_shop_id_state` (`product_id`,`shop_id`,`state`),
  KEY `shop_idx_quantity_idx` (`shop_id`,`quantity_id`),
  KEY `readiness_state_id_idx` (`shop_id`,`readiness_state_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `product_offerings_prices` (
  `shop_id` bigint unsigned NOT NULL,
  `product_offering_id` bigint unsigned NOT NULL,
  `country_id` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned DEFAULT NULL,
  `price_int` int unsigned NOT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` int NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`product_offering_id`,`country_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_listing_idx` (`shop_id`,`listing_id`),
  KEY `product_offerings_idx_product_id_shop_id_state` (`shop_id`,`product_offering_id`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `product_variations` (
  `shop_id` bigint unsigned NOT NULL,
  `product_id` bigint unsigned NOT NULL,
  `listing_variation_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '1',
  `listing_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`product_id`,`listing_variation_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_listing_variation_id_idx` (`shop_id`,`listing_variation_id`),
  KEY `listing_idx` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_address` (
  `address_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `country_id` int unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `zip` varchar(255) DEFAULT NULL,
  `verification_state` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `replacement_address_id` bigint unsigned DEFAULT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `phone` varchar(25) NOT NULL DEFAULT '',
  `dependent_locality` varchar(255) NOT NULL DEFAULT '',
  `sorting_code` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`address_id`),
  KEY `create_date` (`create_date`),
  KEY `user_id` (`user_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application` (
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned DEFAULT NULL COMMENT 'Shop ID is not required due to the fact that this application can be filled out by an etsy user who may not have a shop',
  `production_partner_id` bigint unsigned DEFAULT NULL COMMENT 'This links back to our etsy_shard.shop_production_partner table, not all applications will be directly linked, but we have the option to associate to a production partner',
  `business_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Business name of the production partner the seller is using',
  `website_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Production partner website url for RSG to review',
  `mailing_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Link back to user address table for their main address',
  `has_second_mailing_address` tinyint NOT NULL DEFAULT '0' COMMENT 'Y/N if the production partner has a second address',
  `second_mailing_address_id` bigint unsigned DEFAULT NULL COMMENT 'Link back to user address table for their secondary address',
  `partners_role` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Links to enum MFG_Enums_ProductionPartner_PartnersRole',
  `why_working_with_partner` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Links to enum MFG_Enums_ProductionPartner_WhyWorkingWithPartner',
  `why_working_with_partner_other` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Text block to fill in if the seller selected Other option for why working with the production partner.',
  `how_long_working_with_partner` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Link to enum MFG_Enums_ProductionPartner_HowLongWorkingWithPartner',
  `how_many_people_work_on_your_product` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Link to enum MFG_Enums_ProductionPartner_HowManyPeopleWorkOnProduct',
  `how_do_you_connect_with_production_partner_other` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Description for When a seller selects other for how they connect with production partner.',
  `what_equipment_used` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Simple textarea for describing the equipment used to make the finished item',
  `any_steps_outsourced` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Yes / No / No Sure radio options for this one, will link back to MFG_Enums_ProductionPartner_AnyStepsOutsourced',
  `what_is_outsourced` longtext COLLATE utf8mb4_unicode_ci COMMENT 'If yes is selected for any steps outsourced, this is a follow up textarea to fill in.',
  `steps_taken_to_verify` longtext COLLATE utf8mb4_unicode_ci COMMENT 'Textarea to store details about what steps they took to verify their production partner',
  `role_in_design_process` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Links to MFG_Enums_ProductionPartner_RoleInDesignProcess',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `task_id` bigint unsigned DEFAULT NULL COMMENT 'Links back to the task id associated to this application. However this field can still be null as folks without a shop can fill out this application.',
  `approval_status` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'unreviewed' COMMENT 'Status of the current production partner application. We default it to unreviewed, the value will link back to MFG_Enums_ProductionPartnerApprovalStates',
  PRIMARY KEY (`production_partner_application_id`),
  KEY `idx_production_partner_application_user` (`user_id`,`production_partner_id`) COMMENT 'For pulling production partner applications by user and production partner',
  KEY `idx_production_partner_application_shop` (`shop_id`,`production_partner_id`) COMMENT 'For pulling production partner application by shop and production partner',
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `idx_production_partner_application_task` (`user_id`,`task_id`) COMMENT 'Used in apollo land for looking up an application by user_id and task_id'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application_connection` (
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `connection` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'links to enum MFG_Enums_ProductionPartner_ConnectWithPartner',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`production_partner_application_id`,`connection`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application_design_image` (
  `image_id` bigint unsigned NOT NULL,
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `image_type_id` bigint DEFAULT NULL COMMENT 'Nature of the relationship of this image to the production partner application. What does it represent? Will most likely remain EtsyModel_ImageData::IMAGE_TYPE_MFG_PP_APPLICATION_DESIGN. See EtsyModel_ImageData for meaning of these constants.',
  `rank` bigint DEFAULT NULL COMMENT 'Lower-rank images are shown first. Rank is in the range [1,5]',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`image_id`,`production_partner_application_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application_ethics` (
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `ethical_expectation` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'links to enum MFG_Enums_ProductionPartner_EthicalExpectations',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`production_partner_application_id`,`ethical_expectation`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application_image` (
  `image_id` bigint unsigned NOT NULL,
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `image_type_id` bigint DEFAULT NULL COMMENT 'Nature of the relationship of this image to the production partner application. What does it represent? Will most likely remain EtsyModel_ImageData::IMAGE_TYPE_MFG_PP_APPLICATION. See EtsyModel_ImageData for meaning of these constants.',
  `rank` bigint DEFAULT NULL COMMENT 'Lower-rank images are shown first. Rank is in the range [1,5]',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`image_id`,`production_partner_application_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `production_partner_application_stage` (
  `production_partner_application_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `stage` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'links to enum MFG_Enums_ProductionPartner_StagesOfDesign',
  `details` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`production_partner_application_id`,`stage`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `products` (
  `product_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` int NOT NULL DEFAULT '1',
  `product_identifier` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Used as a SKU-like number.',
  PRIMARY KEY (`shop_id`,`product_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `product_offerings_idx_product_id_shop_id_state` (`shop_id`,`product_id`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_attribution_30_days` (
  `shop_id` bigint unsigned NOT NULL,
  `click_date` int unsigned NOT NULL DEFAULT '0',
  `purchase_date` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `revenue` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `revenue_subtotal` int NOT NULL DEFAULT '0' COMMENT 'USD pennies or the equivalent',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `nonce` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `page_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the page where the ad was impressed {search, category, market}',
  `click_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Type of click {standard, add to card}',
  `marketplace` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'marketplace: ETSY = 1, CRAFT = 2',
  `auction_variant` tinyint unsigned NOT NULL DEFAULT '0',
  `plkey` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_ignored` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Defines if attribution row should be ignored. 1=yes, 0=no',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `idx_shop_click_nonce` (`shop_id`,`click_date`,`nonce`),
  KEY `idx_click_date` (`purchase_date`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_marketplace_purchase` (`shop_id`,`purchase_date`,`marketplace`),
  KEY `idx_listing_marketplace_purchase` (`shop_id`,`listing_id`,`purchase_date`,`marketplace`),
  KEY `idx_marketplace_clickdate` (`shop_id`,`click_date`,`marketplace`),
  KEY `idx_listing_marketplace_clickdate` (`shop_id`,`listing_id`,`click_date`,`marketplace`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_bill_charge` (
  `shop_id` bigint unsigned NOT NULL,
  `prolist_bill_charge_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `bill_period_start` int unsigned NOT NULL,
  `bill_period_end` int unsigned NOT NULL,
  `amount` int unsigned NOT NULL DEFAULT '0' COMMENT 'amount billed in USD pennies',
  `written_to_ledger` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`shop_id`,`prolist_bill_charge_id`),
  UNIQUE KEY `idx_shop_bill_start` (`shop_id`,`bill_period_start`),
  UNIQUE KEY `idx_shop_bill_end` (`shop_id`,`bill_period_end`),
  KEY `idx_period` (`bill_period_start`,`bill_period_end`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_bulkedit` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `action` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `listing_ids` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON',
  `filters` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON',
  `options` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON',
  `results` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON',
  `status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`shop_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `last_start_date` int NOT NULL DEFAULT '0',
  `budget` int unsigned NOT NULL COMMENT 'USD in cents',
  `max_bid` int unsigned DEFAULT NULL COMMENT 'USD in cents',
  `use_optimizer` tinyint(1) NOT NULL DEFAULT '1',
  `last_optimizer_start_date` int NOT NULL DEFAULT '0',
  `auto_promote_new_listings` tinyint(1) NOT NULL DEFAULT '1',
  `status` tinyint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign_goals` (
  `shop_id` bigint unsigned NOT NULL,
  `visibility_selected` tinyint NOT NULL DEFAULT '0',
  `temp_boost_selected` tinyint NOT NULL DEFAULT '0',
  `specific_items_selected` tinyint NOT NULL DEFAULT '0',
  `reinvest_selected` tinyint NOT NULL DEFAULT '0',
  `competitive_selected` tinyint NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign_goals_data` (
  `shop_id` bigint unsigned NOT NULL,
  `goal_a` tinyint NOT NULL DEFAULT '0' COMMENT 'Increase visibility and awareness',
  `goal_b` tinyint NOT NULL DEFAULT '0' COMMENT 'Drive orders short-term',
  `goal_c` tinyint NOT NULL DEFAULT '0' COMMENT 'Promote specific items',
  `goal_d` tinyint NOT NULL DEFAULT '0' COMMENT 'Take my sales up a notch',
  `goal_e` tinyint NOT NULL DEFAULT '0' COMMENT 'Maximize my exposure to help compete against similar shops',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign_goals_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `visibility_selected` tinyint NOT NULL DEFAULT '0',
  `temp_boost_selected` tinyint NOT NULL DEFAULT '0',
  `specific_items_selected` tinyint NOT NULL DEFAULT '0',
  `reinvest_selected` tinyint NOT NULL DEFAULT '0',
  `competitive_selected` tinyint NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign_goals_historical_data` (
  `shop_id` bigint unsigned NOT NULL,
  `goal_a` tinyint NOT NULL DEFAULT '0' COMMENT 'Increase visibility and awareness',
  `goal_b` tinyint NOT NULL DEFAULT '0' COMMENT 'Drive orders short-term',
  `goal_c` tinyint NOT NULL DEFAULT '0' COMMENT 'Promote specific items',
  `goal_d` tinyint NOT NULL DEFAULT '0' COMMENT 'Take my sales up a notch',
  `goal_e` tinyint NOT NULL DEFAULT '0' COMMENT 'Maximize my exposure to help compete against similar shops',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_campaign_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `last_start_date` int NOT NULL DEFAULT '0',
  `budget` int unsigned NOT NULL COMMENT 'USD in cents',
  `max_bid` int unsigned DEFAULT NULL COMMENT 'USD in cents',
  `use_optimizer` tinyint(1) NOT NULL DEFAULT '1',
  `last_optimizer_start_date` int NOT NULL DEFAULT '0',
  `auto_promote_new_listings` tinyint(1) NOT NULL DEFAULT '1',
  `status` tinyint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_click_log` (
  `shop_id` bigint unsigned NOT NULL,
  `click_date` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL,
  `query` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `stemmed_query` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `uaid` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `location` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `nonce` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'cost of this click in USD pennies',
  `device_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `customer_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'May have been backfilled after click_date',
  `bid` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in pennies',
  `budget` int unsigned NOT NULL DEFAULT '0' COMMENT 'USD in pennies',
  `update_date` int NOT NULL DEFAULT '0',
  `page_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the page where the ad was impressed {search, category, market}',
  `click_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Type of click {standard, add to card}',
  `percent_discount` int NOT NULL DEFAULT '0' COMMENT 'cost column is after we deduct this percent',
  `marketplace` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'marketplace: ETSY = 1, CRAFT = 2',
  `auction_variant` tinyint unsigned NOT NULL DEFAULT '0',
  `plkey` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `original_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'original cost of this click in USD pennies',
  `placement` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'idk' COMMENT 'The ad placement where the click occurred (e.g. wsg)',
  `platform` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'none' COMMENT 'The platform where the click occurred (e.g. desktop)',
  `split_budget_variant` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Which split of the budget this click used, if any',
  PRIMARY KEY (`shop_id`,`click_date`,`nonce`),
  KEY `idx_click_date` (`click_date`,`location`),
  KEY `idx_uaid` (`shop_id`,`uaid`,`click_date`),
  KEY `idx_device` (`shop_id`,`device_id`,`click_date`),
  KEY `idx_user_id` (`shop_id`,`user_id`,`click_date`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_marketplace_clickdate` (`shop_id`,`click_date`,`marketplace`),
  KEY `idx_listing_marketplace_clickdate` (`shop_id`,`listing_id`,`click_date`,`marketplace`),
  KEY `idx_shop_customer_clickdate` (`shop_id`,`customer_id`,`click_date`),
  KEY `idx_shop_cost_clickdate` (`shop_id`,`cost`,`click_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='log of all prolist clicks';

CREATE TABLE `prolist_credit_limit_budget_risk_seller` (
  `risk_seller_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `current_ads_credit_limit` int unsigned NOT NULL DEFAULT '0' COMMENT 'Current ads credit limit for the seller in USD pennies',
  `current_budget` int unsigned NOT NULL DEFAULT '0' COMMENT 'Current campaign budget for the seller',
  `sbrm_score` float unsigned NOT NULL DEFAULT '0' COMMENT 'Seller Business Risk Model score',
  `module` tinyint unsigned NOT NULL DEFAULT '1' COMMENT '1 for ads_credit_limit_handle_high_risk_seller experiment',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Created date',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date',
  PRIMARY KEY (`shop_id`,`risk_seller_id`),
  KEY `shop_id_index` (`shop_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Maintains Ads credit limit and Budget for risk and high risk seller';

CREATE TABLE `prolist_listing` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `is_paused` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `is_paused_idx` (`is_paused`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_listing_historical` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `status` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_listing_query` (
  `shop_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `query_hash` char(40) COLLATE utf8mb4_unicode_ci NOT NULL,
  `query` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_relevant` tinyint(1) DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `is_generated` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'When is_generated is true, the row was added by the SADX team rather than the seller',
  PRIMARY KEY (`shop_id`,`listing_id`,`query_hash`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_listing_tag_generated` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `tag_hash` char(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `tag` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `rank_val` int NOT NULL COMMENT 'Tags are ranked by relevancy. Rank 0 is the most relevant tag.',
  `is_active` tinyint(1) DEFAULT NULL COMMENT 'Whether the tag should be used to influence prolist results.',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`tag_hash`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_listing_tags` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `operation` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `listings_tag` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`listings_tag`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_optimizer_decisions` (
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` bigint unsigned NOT NULL,
  `previous_bid` int NOT NULL,
  `quality_score` float NOT NULL,
  `expected_impressions` int NOT NULL,
  `expected_ctr` float NOT NULL,
  `expected_cpc` int NOT NULL,
  `expected_spend` int NOT NULL,
  `expected_rpc` int NOT NULL,
  `new_bid` int NOT NULL,
  `is_test` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `multiplier` float DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`reference_timestamp`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_promotions` (
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `promotion_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'unique promotion identifier',
  `promotion_status` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'created' COMMENT 'state of the promo, e.g. created, declined, or accepted',
  `promotion_value` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'arbitrary data about the promotion, e.g. the new budget a shop set',
  PRIMARY KEY (`shop_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `prolist_query_cpc_dist` (
  `query` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `num_impressions` int NOT NULL,
  `mean` float NOT NULL,
  `std` float NOT NULL,
  `hash_bucket` int NOT NULL,
  PRIMARY KEY (`query`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `promo_user_giftcard` (
  `user_id` bigint unsigned NOT NULL,
  `giftcard_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_promo_campaign_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`giftcard_id`),
  UNIQUE KEY `giftcard_id_idx` (`giftcard_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `user_id_receipt_group_idx` (`user_id`,`receipt_group_id`),
  KEY `user_id_promo_campaign_idx` (`user_id`,`user_promo_campaign_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Link giftcards to users in promo campaigns';

CREATE TABLE `purchase_data` (
  `purchase_data_id` bigint unsigned NOT NULL,
  `shop_payment_id` bigint unsigned NOT NULL,
  `txn_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL,
  `buyer_is_guest` tinyint unsigned NOT NULL,
  `is_multishop` tinyint unsigned NOT NULL,
  `txn_type` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `payment_method` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `json_data` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`purchase_data_id`),
  UNIQUE KEY `shop_payment_idx` (`shop_payment_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_customers` (
  `user_id` bigint unsigned NOT NULL,
  `customer_id` bigint unsigned NOT NULL,
  `razorpay_customer_id` varchar(19) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The id Razorpay returns',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'for different mids',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`customer_id`),
  UNIQUE KEY `razorpay_customer_ref_idx` (`razorpay_customer_id`,`reference_type`),
  UNIQUE KEY `user_id_ref_idx` (`user_id`,`reference_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_data` (
  `razorpay_data_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `data_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `data_value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`razorpay_data_id`),
  UNIQUE KEY `shop_id_name` (`shop_id`,`data_name`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_guestcustomers` (
  `guest_user_id` bigint unsigned NOT NULL,
  `customer_id` bigint unsigned NOT NULL,
  `razorpay_customer_id` varchar(19) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The id Razorpay returns',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'for different mids',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`,`customer_id`),
  UNIQUE KEY `razorpay_customer_ref_idx` (`razorpay_customer_id`,`reference_type`),
  UNIQUE KEY `guest_user_id_ref_idx` (`guest_user_id`,`reference_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_guestorders` (
  `guest_user_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `razorpay_order_id` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The id Razorpay returns for the order',
  `reference_id` bigint NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `razorpay_payment_id` varchar(18) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The id Razorpay returns for the payment',
  `amount` bigint NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `customer_id` bigint unsigned NOT NULL,
  `cc_txn_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_data` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `order_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`,`order_id`),
  UNIQUE KEY `razorpay_order_ref_idx` (`razorpay_order_id`,`reference_type`),
  UNIQUE KEY `razorpay_payment_ref_idx` (`razorpay_payment_id`,`reference_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `reference_idx` (`reference_id`,`reference_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_linked_accounts` (
  `linked_account_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `bank_account_id` bigint unsigned NOT NULL,
  `linked_account_status` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Current status of this linked account',
  `razorpay_linked_account_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The id Razorpay returns for this linked account',
  `razorpay_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `razorpay_stakeholder_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The Stakeholder ID Razorpay returned',
  `razorpay_product_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The Product ID Razorpay returned',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`linked_account_id`),
  UNIQUE KEY `shop_bank_rp_id` (`shop_id`,`bank_account_id`,`razorpay_linked_account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `razorpay_orders` (
  `user_id` bigint unsigned NOT NULL,
  `order_id` bigint unsigned NOT NULL,
  `razorpay_order_id` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The id Razorpay returns for the order',
  `reference_id` bigint NOT NULL,
  `reference_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `razorpay_payment_id` varchar(18) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The id Razorpay returns for the payment',
  `amount` bigint NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `customer_id` bigint unsigned NOT NULL,
  `cc_txn_id` bigint unsigned NOT NULL DEFAULT '0',
  `order_data` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `order_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`order_id`),
  UNIQUE KEY `razorpay_order_ref_idx` (`razorpay_order_id`,`reference_type`),
  UNIQUE KEY `razorpay_payment_ref_idx` (`razorpay_payment_id`,`reference_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `reference_idx` (`reference_id`,`reference_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `reader_backorder_requests` (
  `request_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `contacted` tinyint(1) NOT NULL DEFAULT '0',
  `contact_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`request_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `readiness_state_definition` (
  `shop_id` bigint unsigned NOT NULL,
  `readiness_state_id` bigint unsigned NOT NULL,
  `readiness_state` int unsigned DEFAULT NULL,
  `min_processing_days` int unsigned DEFAULT NULL,
  `max_processing_days` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`readiness_state_id`),
  UNIQUE KEY `unique_rs_definition` (`shop_id`,`readiness_state`,`min_processing_days`,`max_processing_days`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `receipt_country_eligibility` (
  `receipt_eligibility_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`receipt_eligibility_id`,`shop_id`),
  KEY `seller_user_id_idx` (`seller_user_id`),
  KEY `receipt_id_idx` (`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `receiver_conversation_reason` (
  `conversation_id` bigint unsigned NOT NULL,
  `sender_user_id` bigint unsigned NOT NULL,
  `receiver_user_id` bigint unsigned NOT NULL,
  `reason_id` tinyint DEFAULT NULL,
  PRIMARY KEY (`receiver_user_id`,`conversation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `registry` (
  `collection_id` bigint unsigned NOT NULL,
  `creator_id` bigint unsigned NOT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `privacy_level` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Default: 0 = private',
  `event_id` bigint unsigned DEFAULT '0',
  `primary_shipping_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `secondary_shipping_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `avatar_id` int unsigned DEFAULT NULL,
  `referral_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,
  `referral_name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,
  `registry_type` smallint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`collection_id`),
  KEY `creator_id-status` (`creator_id`,`status`),
  KEY `event_id` (`event_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `registry_listing` (
  `collection_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_customization_id` bigint unsigned NOT NULL DEFAULT '0',
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `taxonomy_id` smallint unsigned NOT NULL DEFAULT '0',
  `price` float NOT NULL DEFAULT '0' COMMENT 'price of the listing, denorm from listing',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'currency, denorm from listing',
  `listing_state` varchar(10) NOT NULL COMMENT 'Denormialized from Listing->state',
  `quantity_desired` smallint DEFAULT '1',
  `quantity_purchased` smallint DEFAULT '0',
  `note` text,
  `state` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`collection_id`,`listing_id`,`listing_customization_id`),
  KEY `collection_creator_id` (`collection_creator_id`),
  KEY `status` (`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `registry_notifications` (
  `notification_id` bigint unsigned NOT NULL,
  `creator_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `status` int NOT NULL,
  `type` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`notification_id`),
  KEY `create_date-status` (`create_date`,`status`),
  KEY `creator_id` (`creator_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `registry_transaction` (
  `transaction_id` bigint unsigned NOT NULL,
  `collection_creator_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `collection_id` bigint unsigned NOT NULL,
  `listing_customization_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`transaction_id`),
  KEY `listing_id` (`listing_id`),
  KEY `collection_creator_id` (`collection_creator_id`),
  KEY `collection_id` (`collection_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `regulatory_data_request` (
  `shop_id` bigint unsigned NOT NULL,
  `regulatory_data_request_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `request_status` tinyint unsigned NOT NULL DEFAULT '0',
  `enforcement_start_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`regulatory_data_request_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `regulatory_data_request_action_log` (
  `shop_id` bigint unsigned NOT NULL,
  `regulatory_data_request_action_log_id` bigint unsigned NOT NULL,
  `regulatory_data_request_id` bigint unsigned NOT NULL,
  `action_log_type` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`regulatory_data_request_action_log_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `regulatory_data_request_answer` (
  `shop_id` bigint unsigned NOT NULL,
  `regulatory_data_request_answer_id` bigint unsigned NOT NULL,
  `regulatory_data_request_id` bigint unsigned NOT NULL,
  `question` tinyint unsigned NOT NULL DEFAULT '0',
  `answer` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`regulatory_data_request_answer_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `regulatory_data_request_source` (
  `shop_id` bigint unsigned NOT NULL,
  `regulatory_data_request_source_id` bigint unsigned NOT NULL,
  `regulatory_data_request_id` bigint unsigned NOT NULL,
  `request_source` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`regulatory_data_request_source_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `reviews_helpful_votes` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `origin` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`user_id`,`listing_id`,`shop_id`,`transaction_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_transaction_id_is_deleted_idx` (`shop_id`,`transaction_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `risk_data_daily_guest_user_aggs` (
  `guest_user_aggregate_id` bigint unsigned NOT NULL,
  `guest_user_id` bigint unsigned NOT NULL COMMENT 'PK of guest user. For logged-in users see risk_data_daily_user_aggs.',
  `attribute_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `attribute_value` int NOT NULL,
  `aggregate_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `window_start_date` int unsigned NOT NULL,
  `window_end_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`guest_user_id`,`guest_user_aggregate_id`),
  UNIQUE KEY `guest_user_id_attribute_type_aggregate_type_start_date_end_date` (`guest_user_id`,`attribute_type`,`aggregate_type`,`window_start_date`,`window_end_date`),
  KEY `start_date` (`window_start_date`),
  KEY `end_date` (`window_end_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `risk_data_daily_user_aggs` (
  `user_aggregate_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'PK of logged-in user. For guests see risk_data_daily_guest_user_aggs.',
  `attribute_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `attribute_value` int NOT NULL,
  `aggregate_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `window_start_date` int unsigned NOT NULL,
  `window_end_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`user_aggregate_id`),
  UNIQUE KEY `user_id_attribute_type_aggregate_type_start_date_end_date` (`user_id`,`attribute_type`,`aggregate_type`,`window_start_date`,`window_end_date`),
  KEY `start_date` (`window_start_date`),
  KEY `end_date` (`window_end_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `risk_data_service_clients` (
  `service_client_id` bigint unsigned NOT NULL,
  `service_client_name` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `hash_service_client_secret` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `owner_email` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`service_client_id`),
  UNIQUE KEY `service_client_name` (`service_client_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `risk_ml_checkout_preauth` (
  `risk_ml_checkout_preauth_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `is_buyer_guest` tinyint unsigned NOT NULL,
  `ml_model_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `ml_model_version` decimal(5,2) NOT NULL,
  `ml_model_schema_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `group_payment_id` bigint unsigned NOT NULL,
  `shop_payment_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `payload` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The JSON instance that was posted to the model',
  `inference` decimal(5,4) NOT NULL COMMENT 'The inference returned from the model, in the range [-1,1]',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`risk_ml_checkout_preauth_id`),
  KEY `shop_payment_id` (`shop_payment_id`),
  KEY `group_payment_id` (`group_payment_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores payloads for and inferences by ML models that evaluate payments before authorization';

CREATE TABLE `rtt_star_seller_badge_removals` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `security_rule_id` bigint unsigned NOT NULL COMMENT 'FK: ID of the security rule associated with the rtt control that caused this removal',
  `rtt_control_id` bigint unsigned NOT NULL COMMENT 'FK: ID of the rtt control that caused this removal - etsy_atlas.rtt_controls',
  `reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Used in batch data processing. Maps to a column name in etsy-data-warehouse-prod.star_seller.badge_removal',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL COMMENT 'After this date, the row is considered inactive',
  PRIMARY KEY (`shop_id`,`security_rule_id`),
  KEY `shop_deleted_idx` (`shop_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `saved_replies_categories` (
  `saved_replies_category_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `title` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_template` tinyint NOT NULL DEFAULT '0',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`saved_replies_category_id`),
  UNIQUE KEY `user_id` (`user_id`,`title`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `saved_search_results` (
  `user_id` bigint unsigned NOT NULL,
  `saved_search_id` bigint unsigned NOT NULL,
  `user_run_date` int unsigned NOT NULL,
  `seen_results` longtext COLLATE utf8mb4_general_ci,
  `unseen_results` longtext COLLATE utf8mb4_general_ci,
  `device_identifier` varchar(100) COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `total_num_search_results` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`saved_search_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `saved_searches` (
  `saved_search_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `search_terms` varchar(150) COLLATE utf8mb4_unicode_ci NOT NULL,
  `label` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL,
  `label_slug` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL,
  `query_parameters` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `results_update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `label_is_user_provided` tinyint unsigned NOT NULL DEFAULT '0',
  `unseen_results_count` int unsigned NOT NULL DEFAULT '0',
  `user_last_executed_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`saved_search_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `label` (`user_id`,`label`(150)),
  KEY `label_slug` (`user_id`,`label_slug`(150)),
  KEY `user_id-is_deleted-update_date` (`user_id`,`is_deleted`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `schemanator_dummy_test` (
  `testid` bigint unsigned NOT NULL,
  `column1` varchar(127) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `mayhem` bigint DEFAULT NULL,
  `column2` bigint NOT NULL DEFAULT '0',
  `column3` bigint DEFAULT '0',
  PRIMARY KEY (`testid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `schemanator_dummy_test2` (
  `testid` bigint unsigned NOT NULL,
  `column1` varchar(127) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `column2` varchar(127) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `mayhem` bigint DEFAULT NULL,
  PRIMARY KEY (`testid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `schemanator_shop_data` (
  `shop_id` bigint unsigned NOT NULL,
  `status` varchar(255) NOT NULL,
  `status_date` int NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL,
  `billing_user_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL DEFAULT '0',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_label_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `phone_number` varchar(25) DEFAULT NULL,
  `banner_id` int NOT NULL,
  `lat` int NOT NULL DEFAULT '0',
  `lon` int NOT NULL DEFAULT '0',
  `city` varchar(255) NOT NULL,
  `region` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `headline` varchar(255) NOT NULL,
  `message` text,
  `alchemy_message` text,
  `message_to_buyers` text,
  `active_listing_count` int NOT NULL DEFAULT '0',
  `favorites_count` int NOT NULL DEFAULT '-1',
  `is_frozen` tinyint(1) NOT NULL,
  `is_vacation` tinyint(1) NOT NULL DEFAULT '0',
  `is_overdue` tinyint(1) NOT NULL,
  `billing_grace_period` int NOT NULL DEFAULT '0',
  `last_sale_date` int DEFAULT NULL,
  `open_date` int DEFAULT NULL,
  `is_name_set` tinyint(1) NOT NULL DEFAULT '1',
  `is_nipsa` tinyint(1) NOT NULL DEFAULT '0',
  `is_shipping_label_blocked` tinyint(1) NOT NULL,
  `shipping_score` int DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `blah` int DEFAULT NULL,
  `test1` int DEFAULT NULL,
  `test2` int DEFAULT NULL,
  `test3` int DEFAULT NULL,
  PRIMARY KEY (`shop_id`),
  UNIQUE KEY `shop_name_unique` (`name`),
  KEY `update_date` (`update_date`),
  KEY `status` (`status`),
  KEY `shipping_score` (`shipping_score`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `schemanator_test_3` (
  `column1` varchar(25) NOT NULL DEFAULT '',
  `column2` int DEFAULT NULL,
  PRIMARY KEY (`column1`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `scl_listing_comparison_listings` (
  `listing_comparison_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`listing_comparison_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `scl_listing_comparisons` (
  `listing_comparison_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `notes` varchar(10000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`listing_comparison_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `sct_test` (
  `update_date` int unsigned NOT NULL,
  `col1` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_annotations_action_logs` (
  `search_annotations_action_log_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of an action log',
  `search_annotations_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to search_annotations_queries',
  `user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to users',
  `admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `linked_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to search_annotations_queries',
  `search_annotations_listing_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to search_annotations_listings',
  `reason` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Reason for the action',
  `action_taken` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Action taken on the query',
  `annotation` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Annotation of the listing',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`search_annotations_action_log_id`),
  KEY `search_annotations_query_id` (`search_annotations_query_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_annotations_linked_queries` (
  `search_annotations_linked_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Generated primary key of a query',
  `search_annotations_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to search_annotations_queries',
  `linked_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key of a query linked to the search_annotations_query_id',
  `admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `last_update_admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `is_enabled` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the linked query pair is enabled',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`search_annotations_linked_query_id`),
  UNIQUE KEY `query_pair_idx` (`search_annotations_query_id`,`linked_query_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_annotations_listing_annotations` (
  `search_annotations_listing_annotation_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a listing annotation',
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `query_string` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The query string',
  `annotation` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Annotation of the listing',
  `is_enabled` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the listing annotation is enabled',
  `is_approved` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the listing annotation is approved',
  `approval_state` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Approval state for the annotation',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`search_annotations_listing_annotation_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `listing_id_idx` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_annotations_listings` (
  `search_annotations_listing_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Generated primary key of a listing annotation',
  `search_annotations_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to search_annotations_queries',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to shops',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to listings',
  `admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `last_update_admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `annotation` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Annotation of the listing',
  `reason` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Reason for the annotation',
  `is_enabled` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the listing annotation is enabled',
  `is_approved` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the listing annotation is approved',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`search_annotations_listing_id`),
  KEY `listing_id_idx` (`listing_id`,`search_annotations_query_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `query_id_annotation_is_approved_is_enabled_idx` (`search_annotations_query_id`,`annotation`,`is_approved`,`is_enabled`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_annotations_queries` (
  `search_annotations_query_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Generated primary key of a query',
  `query_string` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The query string',
  `admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `last_update_admin_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to admin',
  `is_enabled` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to indicate if the query is enabled',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`search_annotations_query_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `search_precision_subject_ratings` (
  `human_task_id` bigint unsigned NOT NULL,
  `human_task_subject_id` bigint unsigned NOT NULL,
  `search_precision_query_id` bigint unsigned NOT NULL,
  `irrelevant_listing_ids_csv` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `precision_ratio` float NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`human_task_id`,`human_task_subject_id`,`search_precision_query_id`),
  KEY `human_task_id_subject_id` (`human_task_id`,`search_precision_query_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `segment_audiences` (
  `email_id` bigint unsigned NOT NULL,
  `audience_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `external_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`email_id`,`audience_name`,`external_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_app_curriculum_shop` (
  `shop_id` bigint unsigned NOT NULL,
  `curriculum_id` bigint unsigned NOT NULL,
  `active_task_ids` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `next_task_id` bigint unsigned DEFAULT NULL,
  `next_task_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`curriculum_id`),
  KEY `next_task_date_idx` (`next_task_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_credit_offer_tokens` (
  `seller_credit_offer_tokens_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `expiration_date` int unsigned NOT NULL,
  `redemption_date` int unsigned DEFAULT NULL,
  `token` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `amount` int unsigned NOT NULL,
  `type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `source` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `credit_expiration_days` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`seller_credit_offer_tokens_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `token_idx` (`user_id`,`token`(10))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_credits` (
  `seller_credits_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `expiration_date` int unsigned DEFAULT '0',
  `type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `source` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `initial_amount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`seller_credits_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `expiration_date_idx` (`expiration_date`),
  KEY `user_id_type` (`user_id`,`type`(20)),
  KEY `user_id_amount` (`user_id`,`amount`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_epr` (
  `seller_epr_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category` tinyint unsigned NOT NULL,
  `is_active` tinyint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`seller_epr_id`),
  UNIQUE KEY `shop_id_country_code_category_is_active_idx` (`shop_id`,`country_code`,`category`,`is_active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_epr_number` (
  `seller_epr_number_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category` tinyint unsigned NOT NULL,
  `is_active` tinyint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`seller_epr_number_id`),
  UNIQUE KEY `shop_id_country_code_category_is_active_idx` (`shop_id`,`country_code`,`category`,`is_active`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promoted_offer` (
  `shop_id` bigint unsigned NOT NULL,
  `promoted_offer_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `audience_type` int unsigned NOT NULL,
  `budget` int unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '0',
  `monthly_budget` int unsigned DEFAULT '0',
  PRIMARY KEY (`shop_id`,`promoted_offer_id`),
  KEY `ix_shop_id_update_date` (`shop_id`,`update_date`),
  KEY `ix_promotion_id` (`promotion_id`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promoted_offer_attribution` (
  `shop_id` bigint unsigned NOT NULL,
  `promoted_offer_attribution_id` bigint unsigned NOT NULL,
  `promoted_offer_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `email_send_date` int DEFAULT NULL,
  `notification_send_date` int DEFAULT NULL,
  `visit_count` int NOT NULL DEFAULT '0',
  `last_visited_date` int DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `send_cost` int NOT NULL DEFAULT '10' COMMENT 'USD in cents',
  PRIMARY KEY (`shop_id`,`promoted_offer_attribution_id`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_promoted_offer_id` (`promoted_offer_id`),
  KEY `idx_shop_id_buyer_user_id_create_date_email_send_date` (`shop_id`,`buyer_user_id`,`create_date`,`email_send_date`),
  KEY `idx_shop_id_promoted_offer_id_create_date` (`shop_id`,`promoted_offer_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promoted_offer_bill_charge` (
  `shop_id` bigint unsigned NOT NULL,
  `promoted_offer_charge_id` bigint unsigned NOT NULL,
  `total_sends` int NOT NULL,
  `amount` int NOT NULL COMMENT 'amount billed in USD pennies',
  `written` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `bill_period_start` int NOT NULL DEFAULT '0',
  `bill_period_end` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`promoted_offer_charge_id`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promotion` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `promotion_type` int unsigned NOT NULL,
  `venue_id` int unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned DEFAULT NULL,
  `coupon_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `coupon_max_redemptions_per_buyer` int unsigned NOT NULL DEFAULT '0',
  `condition_min_total_order_price` int unsigned NOT NULL DEFAULT '0',
  `condition_min_num_order_items` int unsigned NOT NULL DEFAULT '0',
  `condition_min_num_items_from_set` int unsigned NOT NULL DEFAULT '0',
  `reward_percent_discount_on_shipping` tinyint unsigned NOT NULL DEFAULT '0',
  `reward_percent_discount_on_order` tinyint unsigned NOT NULL DEFAULT '0',
  `reward_percent_discount_on_items_in_set` tinyint unsigned NOT NULL DEFAULT '0',
  `reward_fixed_discount_on_order` int unsigned NOT NULL DEFAULT '0',
  `reward_fixed_discount_on_items_in_set` int unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `seller_description` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `language` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `promotion_name` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `discoverability_type` tinyint unsigned DEFAULT NULL,
  `promotion_subtype` tinyint unsigned NOT NULL DEFAULT '0',
  `is_thank_you` tinyint(1) NOT NULL DEFAULT '0',
  `legacy_coupon_id` bigint unsigned DEFAULT NULL,
  `eligible_region_id` int DEFAULT NULL,
  `buyer_initiated_offer_id` bigint unsigned DEFAULT NULL,
  `grants_buyer_targeted_offers` tinyint unsigned NOT NULL DEFAULT '0',
  `is_buyer_targeted_offer_campaign_stopped` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`promotion_id`),
  KEY `ix_update_date` (`update_date`),
  KEY `ix_shop_id_start_date_end_date` (`shop_id`,`start_date`,`end_date`),
  KEY `ix_shop_id_coupon_code` (`shop_id`,`coupon_code`,`start_date`,`end_date`),
  KEY `ix_promotion_id` (`promotion_id`),
  KEY `ix_denorm` (`discoverability_type`,`end_date`,`promotion_type`,`shop_id`),
  KEY `idx_shop_id_promotion_name` (`shop_id`,`promotion_name`),
  KEY `IX__shop_end_date__promo_type` (`shop_id`,`end_date`,`promotion_type`),
  KEY `ix_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promotion_audit` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_audit_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `action` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`promotion_audit_id`),
  KEY `promotion_id_idx` (`promotion_id`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promotion_description` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `seller_description` varchar(10000) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`promotion_id`,`language`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store translations of seller-written descriptions of sales';

CREATE TABLE `seller_marketing_promotion_listing` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `is_condition_set_item` tinyint(1) NOT NULL,
  `is_reward_set_item` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`promotion_id`),
  KEY `idx_update_date` (`update_date`),
  KEY `idx_create_date` (`create_date`),
  KEY `ix_promotion_id` (`promotion_id`),
  KEY `ix_shop_promotion_listing` (`shop_id`,`promotion_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to hold records of listings with a promotion';

CREATE TABLE `seller_marketing_promotion_listing_audit` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_audit_id` bigint unsigned NOT NULL,
  `promotion_listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`promotion_audit_id`,`promotion_listing_id`),
  KEY `create_date_idx` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_marketing_promotion_revenue_attribution` (
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `purchase_date` int unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL,
  `revenue` int NOT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'value of 0 represents shop level promotion',
  `items_sold` int DEFAULT '0',
  `is_promoted_offer` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`receipt_id`,`promotion_id`),
  KEY `idx_shop_purchase_date` (`shop_id`,`purchase_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to hold order attribution for Sales and Coupons';

CREATE TABLE `seller_segment` (
  `user_id` bigint unsigned NOT NULL,
  `seller_segment` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `seller_star_seller_status` (
  `shop_id` bigint unsigned NOT NULL,
  `is_star_seller` tinyint NOT NULL DEFAULT '0' COMMENT 'bool for is star seller',
  `is_badge_removed` tinyint NOT NULL DEFAULT '0' COMMENT 'bool for should badge be removed',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `sender_conversation_reason` (
  `conversation_id` bigint unsigned NOT NULL,
  `sender_user_id` bigint unsigned NOT NULL,
  `receiver_user_id` bigint unsigned NOT NULL,
  `reason_id` tinyint DEFAULT NULL,
  PRIMARY KEY (`sender_user_id`,`conversation_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shared_stash_listings` (
  `user_id` bigint unsigned NOT NULL,
  `shared_stash_listing_id` bigint unsigned NOT NULL,
  `shared_stash_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `offset` int unsigned NOT NULL,
  `create_date` bigint NOT NULL,
  PRIMARY KEY (`user_id`,`shared_stash_id`,`shared_stash_listing_id`),
  UNIQUE KEY `shared_stash_id` (`shared_stash_id`,`offset`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shared_stashes` (
  `user_id` bigint unsigned NOT NULL,
  `shared_stash_id` bigint unsigned NOT NULL,
  `create_date` bigint NOT NULL,
  PRIMARY KEY (`user_id`,`shared_stash_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipment_shipping_label_optout_reason` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The FK to the receipt if an Etsy order, otherwise 0',
  `optout_reason_id` smallint unsigned NOT NULL,
  `optout_reason` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_2018holidaymarketing_segment` (
  `shipping_2018holidaymarketing_segment_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `is_all_free` tinyint(1) NOT NULL DEFAULT '0',
  `is_all_fair` tinyint(1) NOT NULL DEFAULT '0',
  `is_all_fair_and_has_free_shipping_promo` tinyint(1) NOT NULL DEFAULT '0',
  `is_one_or_more_unfair` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_2018holidaymarketing_segment_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_details` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_details_id` bigint unsigned NOT NULL,
  `name` varchar(64) NOT NULL,
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `origin_country_id` bigint NOT NULL,
  `origin_postal_code` varchar(9) DEFAULT NULL,
  `pickup_allowed` tinyint unsigned NOT NULL,
  `delivery_allowed` tinyint unsigned NOT NULL,
  `delivery_cost` int unsigned NOT NULL,
  `delivery_range` int unsigned NOT NULL,
  `delivery_measurement_units` char(1) NOT NULL DEFAULT 'i' COMMENT 'i = imperial, m = metric',
  `auto_ship_method_id` bigint unsigned NOT NULL,
  `deleted` tinyint unsigned NOT NULL,
  `editable` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_details_id`),
  KEY `name` (`name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='This replaces the old shipping profile structures';

CREATE TABLE `shipping_details_methods` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_details_method_id` bigint unsigned NOT NULL,
  `shipping_details_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `region_id` bigint unsigned NOT NULL,
  `country_id` bigint unsigned NOT NULL,
  `shipping_method_id` bigint unsigned NOT NULL,
  `cost` int unsigned NOT NULL,
  `secondary_cost` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_details_method_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='This represents a shipping option for a given destination in';

CREATE TABLE `shipping_geo_coordinates` (
  `shipping_geo_coordinate_id` bigint unsigned NOT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_name` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `latitude` decimal(10,8) DEFAULT NULL,
  `longitude` decimal(11,8) DEFAULT NULL,
  `relevance` float(7,6) DEFAULT NULL,
  `place_name` varchar(2000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `place_type` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `hash_bucket` bigint unsigned NOT NULL,
  PRIMARY KEY (`shipping_geo_coordinate_id`),
  KEY `city_idx` (`city`),
  KEY `state_idx` (`state`),
  KEY `zip_idx` (`zip`),
  KEY `country_id_idx` (`country_id`),
  KEY `hash_bucket` (`hash_bucket`),
  KEY `country_state_city_zip_idx` (`country_name`,`state`,`city`,`zip`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_info` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shipping_info_id` bigint unsigned NOT NULL,
  `origin_country_id` int unsigned NOT NULL,
  `destination_country_id` int unsigned NOT NULL DEFAULT '0',
  `destination_region_id` int unsigned NOT NULL DEFAULT '0',
  `primary_cost` bigint unsigned NOT NULL COMMENT 'price_as_float * pow(10, num_currency_decimals)',
  `secondary_cost` bigint unsigned NOT NULL COMMENT 'price_as_float * pow(10, num_currency_decimals)',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`shipping_info_id`),
  UNIQUE KEY `shipping_info_id_idx` (`shipping_info_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `name` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_visible_in_editor` tinyint unsigned NOT NULL DEFAULT '0',
  `is_transaction_copy` tinyint unsigned NOT NULL DEFAULT '0',
  `origin_country_id` bigint unsigned NOT NULL,
  `origin_postal_code` varchar(10) DEFAULT NULL,
  `is_free_domestic_shipping` tinyint unsigned DEFAULT '0',
  `is_free_international_shipping` tinyint unsigned DEFAULT '0',
  `allow_local_delivery` tinyint unsigned NOT NULL DEFAULT '0',
  `min_processing_days` int unsigned DEFAULT NULL,
  `max_processing_days` int unsigned DEFAULT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The currency code for this shipping profile',
  `processing_fee` int unsigned NOT NULL DEFAULT '0' COMMENT 'The amount the seller is charging for shipping processing',
  `raw_handling_fee` int unsigned NOT NULL DEFAULT '0',
  `has_international_handling_fee` tinyint unsigned NOT NULL DEFAULT '0',
  `raw_international_handling_fee` int unsigned NOT NULL DEFAULT '0',
  `profile_type` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'The type of shipping profile (manual / calculated)',
  `ships_everywhere` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'DEPRECATED – PENDING REMOVAL',
  `source_shipping_template_id` bigint unsigned DEFAULT NULL COMMENT 'DEPRECATED – PENDING REMOVAL',
  `source_shipping_profile_id` bigint unsigned DEFAULT NULL COMMENT 'DEPRECATED – PENDING REMOVAL',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `last_update_source` smallint unsigned NOT NULL DEFAULT '0',
  `last_update_application_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`shipping_profile_id`),
  UNIQUE KEY `shop_id_name_uniq` (`shop_id`,`name`),
  KEY `shop_id_shipping_template_id_idx` (`shop_id`,`source_shipping_template_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_profile_type_deleted_transaction_copy_update_source` (`shop_id`,`profile_type`,`is_deleted`,`is_transaction_copy`,`last_update_source`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile_automated_change_audits` (
  `audit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `source` int unsigned NOT NULL,
  `state` int unsigned NOT NULL,
  `metadata` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded inference metadata',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`,`shop_id`,`shipping_profile_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_shipping_profile` (`shop_id`,`shipping_profile_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile_destination_method` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `destination_country_id` bigint unsigned NOT NULL,
  `destination_region_id` bigint unsigned NOT NULL,
  `shipping_method_id` bigint unsigned NOT NULL,
  `shipping_profile_entry_id` bigint unsigned NOT NULL DEFAULT '0',
  `primary_cost` int unsigned NOT NULL DEFAULT '0',
  `secondary_cost` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `origin_country_id` bigint unsigned NOT NULL DEFAULT '0',
  `profile_type` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'The type of shipping profile (manual / calculated)',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `min_delivery_time` int DEFAULT NULL,
  `max_delivery_time` int DEFAULT NULL,
  `mail_carrier_id` int DEFAULT NULL,
  `mail_class_id` varchar(100) DEFAULT NULL,
  `name` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipping_profile_id`,`destination_country_id`,`destination_region_id`,`shipping_method_id`),
  UNIQUE KEY `shop_id_shipping_profile_entry_id_idx` (`shop_id`,`shipping_profile_entry_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `IX__shop__country_region` (`shop_id`,`destination_country_id`,`destination_region_id`,`origin_country_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile_shipping_service_requirement_exemptions` (
  `exemption_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `business_reason` int unsigned NOT NULL,
  `created_by_application_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`exemption_id`),
  KEY `shop_shipping_profile` (`shop_id`,`shipping_profile_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile_upgrades` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `value_id` bigint unsigned NOT NULL,
  `type` tinyint unsigned NOT NULL,
  `order` int unsigned NOT NULL,
  `price` bigint NOT NULL,
  `currency_code` varchar(6) NOT NULL DEFAULT '',
  `mail_class` mediumtext,
  `is_deleted` tinyint unsigned DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `secondary_price` bigint DEFAULT NULL,
  `mail_carrier_id` int DEFAULT NULL,
  `mail_class_id` varchar(100) DEFAULT NULL,
  `min_delivery_time` int DEFAULT NULL,
  `max_delivery_time` int DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`shipping_profile_id`,`value_id`,`type`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_profile_validation_status` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_profile_id` bigint unsigned NOT NULL,
  `is_valid` tinyint NOT NULL DEFAULT '0',
  `invalid_fields` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'JSON-encoded value',
  `is_edd_info_missing` tinyint NOT NULL DEFAULT '0',
  `postal_code_error_key` varchar(128) DEFAULT NULL COMMENT 'Error keys: https://github.etsycorp.com/Engineering/Etsyweb/blob/main/phplib/Shipping/Profile/Validation/ErrorKey.php',
  `processing_time_error_key` varchar(128) DEFAULT NULL,
  `mail_class_error_key` varchar(128) DEFAULT NULL,
  `delivery_time_error_key` varchar(128) DEFAULT NULL,
  `origin_country_error_key` varchar(128) DEFAULT NULL,
  `carrier_error_key` varchar(128) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_profile_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_repricer_update_listings` (
  `shipping_repricer_id` bigint unsigned NOT NULL COMMENT 'Foreign key: etsy_shard/shipping_repricer_updates.sql',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifying PK: Shop_Shop - etsy_index/shops_index.sql',
  `shipping_profile_id` bigint unsigned NOT NULL COMMENT 'Foreign key: etsy_shard/shipping_profile.sql',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Foreign key: etsy_shard/listings.sql',
  `listing_price_before` int unsigned NOT NULL COMMENT 'The minimum price BEFORE the change - variations aware',
  `listing_price_after` int unsigned NOT NULL COMMENT 'The minimum price AFTER the change - variations aware',
  `max_listing_price_before` int unsigned NOT NULL DEFAULT '0' COMMENT 'The maximum price BEFORE the change - variations aware',
  `max_listing_price_after` int unsigned NOT NULL DEFAULT '0' COMMENT 'The maximum price AFTER the change - variations aware',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shipping_repricer_id`,`listing_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_repricer_updates` (
  `shipping_repricer_id` bigint unsigned NOT NULL COMMENT 'Unique generated id',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifying PK: Shop_Shop - etsy_index/shops_index.sql',
  `shipping_profile_id` bigint unsigned NOT NULL COMMENT 'Foreign key: etsy_shard/shipping_profile.sql',
  `original_shipping_price` int unsigned NOT NULL,
  `new_shipping_price` int unsigned NOT NULL,
  `adjust_listing_price_by` int unsigned NOT NULL COMMENT 'The integer Money representation of the amount to change the associated listing prices',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_custom_profile` tinyint unsigned NOT NULL,
  `submission_source` varchar(7) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'web' COMMENT 'The source of the update - web, webview, esa',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shipping_repricer_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_template` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_template_id` bigint unsigned NOT NULL,
  `title` varchar(128) NOT NULL,
  `min_processing_days` int unsigned DEFAULT NULL,
  `max_processing_days` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_template_id`),
  UNIQUE KEY `shipping_template_id_idx` (`shipping_template_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shipping_template_entry` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_template_id` bigint unsigned NOT NULL,
  `shipping_template_entry_id` bigint unsigned NOT NULL,
  `origin_country_id` int unsigned NOT NULL,
  `destination_country_id` int unsigned NOT NULL DEFAULT '0',
  `destination_region_id` int unsigned NOT NULL DEFAULT '0',
  `primary_cost` bigint unsigned NOT NULL COMMENT 'price_as_float * pow(10, num_currency_decimals)',
  `secondary_cost` bigint unsigned NOT NULL COMMENT 'price_as_float * pow(10, num_currency_decimals)',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_template_id`,`shipping_template_entry_id`),
  UNIQUE KEY `shipping_template_entry_id_idx` (`shipping_template_entry_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about` (
  `shop_id` bigint unsigned NOT NULL,
  `story` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `story_headline` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `story_leading_paragraph` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `pull_quote` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8 NOT NULL,
  `related_links` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_images` (
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `caption` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `rank` int unsigned NOT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`image_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_images_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `caption` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned DEFAULT '0',
  `update_date` int unsigned DEFAULT '0',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`image_id`,`language`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_members` (
  `shop_about_member_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `role` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `bio` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `is_owner` tinyint(1) NOT NULL DEFAULT '0',
  `rank` int unsigned NOT NULL,
  `status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_about_member_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id` (`shop_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_members_translations` (
  `shop_about_member_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `role` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `bio` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `is_owner` tinyint(1) NOT NULL DEFAULT '0',
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `rank` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_about_member_id`,`language`),
  KEY `shop_id` (`shop_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_oembed` (
  `shop_id` bigint unsigned NOT NULL,
  `type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `width` int DEFAULT NULL,
  `height` int DEFAULT NULL,
  `url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `html` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `story` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `story_headline` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `story_leading_paragraph` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `pull_quote` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `related_links` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`language`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_about_videos` (
  `shop_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci,
  `rank` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `state` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`video_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_appreciation_images` (
  `transaction_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_seller_approved` tinyint NOT NULL DEFAULT '1',
  `is_item_in_context` tinyint DEFAULT NULL COMMENT 'is this a photo of the item in context, optional user provided info',
  `status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_source` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'undefined',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`,`image_id`),
  KEY `shop_id_create_date` (`shop_id`,`create_date`),
  KEY `shop_id_receipt_id_image_id` (`shop_id`,`receipt_id`,`image_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_listing_idx` (`shop_id`,`listing_id`),
  KEY `txn_id_status_approved` (`transaction_id`,`status`,`is_seller_approved`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_appreciation_videos` (
  `transaction_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_seller_approved` tinyint NOT NULL DEFAULT '1',
  `status` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'States defined in EtsyModel_AppreciationPhotos_ImageStatus',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_source` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'undefined' COMMENT 'States defined in EtsyModel_AppreciationPhotos_CreationSources',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`,`video_id`),
  KEY `shop_id_create_date` (`shop_id`,`create_date`),
  KEY `shop_id_receipt_id_video_id` (`shop_id`,`receipt_id`,`video_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_listing_idx` (`shop_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_availability_settings_auto_reply` (
  `shop_id` bigint unsigned NOT NULL,
  `is_enabled` tinyint unsigned NOT NULL DEFAULT '0',
  `message` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_bank_account_pending_creation` (
  `shop_bank_account_pending_creation_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a bank account requirement',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that the this requirement belongs to',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Bank account creating status (PENDING, FIRST_WARN, SECOND_WARN, SHOP_SUSPENDED, DONE)',
  `required_from_date` int unsigned NOT NULL COMMENT 'Date which the bank account became required',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'Flag to mark a requirement as deleted',
  `create_date` int unsigned NOT NULL COMMENT 'Created date',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date',
  PRIMARY KEY (`shop_bank_account_pending_creation_id`),
  KEY `shop_id` (`shop_id`),
  KEY `status` (`status`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_banners` (
  `id` int NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `marked_for_death` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `image_id` int NOT NULL,
  PRIMARY KEY (`id`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_billing` (
  `shop_id` bigint unsigned NOT NULL,
  `autobilling_status` varchar(50) NOT NULL,
  `autobilling_last_enroll_date` int unsigned NOT NULL DEFAULT '0',
  `autobilling_fee_threshold` int unsigned NOT NULL DEFAULT '0',
  `deferment_end_date` int unsigned NOT NULL DEFAULT '0',
  `bill_overdue_date` int unsigned NOT NULL DEFAULT '0',
  `bill_overdue_data` varchar(255) NOT NULL DEFAULT '',
  `scheduled_freeze_date` int unsigned NOT NULL DEFAULT '0',
  `bill_overdue_frozen_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `autobilling_monthly_failure_count` int unsigned NOT NULL DEFAULT '0',
  `autobilling_monthly_last_failure_date` int unsigned NOT NULL DEFAULT '0',
  `autobilling_threshold_failure_count` int unsigned NOT NULL DEFAULT '0',
  `autobilling_threshold_last_failure_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `autobilling_status` (`autobilling_status`),
  KEY `bill_overdue_date` (`bill_overdue_date`),
  KEY `scheduled_freeze_date` (`scheduled_freeze_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_billing_log` (
  `shop_billing_log_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `event_type` varchar(50) NOT NULL DEFAULT '',
  `amount` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `currency` char(3) NOT NULL DEFAULT 'USD',
  PRIMARY KEY (`shop_billing_log_id`),
  KEY `shop_id` (`shop_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id_event_type` (`shop_id`,`event_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_blog_post` (
  `post_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `title` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `content_raw` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `content_html` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `excerpt` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `tags` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `comments_enabled` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating if guests can comment on blog posts',
  `state` tinyint(1) NOT NULL DEFAULT '1',
  `channel` tinyint(1) NOT NULL DEFAULT '0',
  `publish_date` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `hash` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`post_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `publish_date` (`publish_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_brand_element` (
  `shop_id` bigint unsigned NOT NULL,
  `brand_element_id` bigint unsigned NOT NULL,
  `option_type` tinyint unsigned NOT NULL DEFAULT '0',
  `image_id` bigint unsigned NOT NULL DEFAULT '0',
  `crop_data` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `caption` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_type` tinyint unsigned NOT NULL DEFAULT '0',
  `link_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `sort_order` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`brand_element_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_brand_element_translations` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `brand_element_id` bigint unsigned NOT NULL DEFAULT '0',
  `language_id` tinyint unsigned NOT NULL,
  `caption` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`brand_element_id`,`language_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_buyer_coupon` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `coupon_state` tinyint(1) NOT NULL DEFAULT '0',
  `shop_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `granted_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`promotion_id`,`receipt_id`),
  UNIQUE KEY `receipt_id_idx` (`receipt_id`),
  KEY `shop_id_coupon_state_idx` (`shop_id`,`coupon_state`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_buyer_coupon_event` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `event_type` tinyint(1) NOT NULL,
  `event_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `buyer_user_id_promotion_id_idx` (`shop_id`,`promotion_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_buyer_targeted_offer` (
  `buyer_targeted_offer_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned DEFAULT NULL,
  `buyer_uaid_hash_bucket` bigint unsigned DEFAULT NULL,
  `buyer_uaid` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `coupon_state` tinyint(1) NOT NULL DEFAULT '0',
  `shop_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `granted_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`buyer_targeted_offer_id`),
  KEY `shop_promotion_grant_idx` (`shop_id`,`promotion_id`,`grant_type`,`grant_origin_id`),
  KEY `shop_grant_idx` (`shop_id`,`grant_type`,`grant_origin_id`),
  KEY `shop_coupon_state_idx` (`shop_id`,`coupon_state`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_buyer_targeted_offer_event` (
  `buyer_targeted_offer_event_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned DEFAULT NULL,
  `buyer_uaid_hash_bucket` bigint unsigned DEFAULT NULL,
  `buyer_uaid` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `event_type` tinyint(1) NOT NULL,
  `event_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`buyer_targeted_offer_event_id`),
  KEY `shop_grant_promotion_event_type_event_date_idx` (`shop_id`,`grant_type`,`grant_origin_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `shop_buyer_event_type_event_date_idx` (`shop_id`,`buyer_user_id`,`event_type`,`event_date`),
  KEY `shop_uaid_event_type_event_date_idx` (`shop_id`,`buyer_uaid`,`event_type`,`event_date`),
  KEY `shop_promotion_event_type_event_date_idx` (`shop_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_buyers` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `order_count` int unsigned NOT NULL DEFAULT '0' COMMENT 'The number of orders this buyer has purchased from the shop',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`buyer_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_card_on_file_log` (
  `shop_card_on_file_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned NOT NULL,
  `token` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` char(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_month` char(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_year` char(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `num_head` char(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `num_tail` char(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `address_id` bigint unsigned NOT NULL,
  `country_id` int unsigned NOT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `city` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_card_on_file_log_id`),
  KEY `create_date` (`create_date`),
  KEY `user_id_idx` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_cdd_disbursement_holds` (
  `shop_cdd_disbursement_hold_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a cdd disbursement hold',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that this disbursement hold belongs to.',
  `etsy_payment_lock_id` bigint unsigned DEFAULT NULL COMMENT 'Payment lock that this hold belongs to.',
  `task_id` bigint unsigned DEFAULT NULL COMMENT 'Task id of the Apollo Task where the hold initiated from.',
  `status` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'status (PENDING, FIRST_WARN, SECOND_WARN, SHOP_SUSPENDED, DONE).',
  `hold_start_date` int unsigned DEFAULT NULL COMMENT 'Date at which the disbursement hold becomes effective.',
  `hold_end_date` int unsigned DEFAULT NULL COMMENT 'Date when the disbursement hold was released.',
  `verification_program` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Name of verification program (kyc, kyb)',
  `verification_due_date` int unsigned DEFAULT NULL COMMENT 'Original date by which the seller needs to be verified by.',
  `verification_overdue_frozen_date` int unsigned DEFAULT NULL COMMENT 'Date by which the seller must be verified to avoid account suspension. Should be greater than or equal to the due_date.',
  `refund_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'refund status (processable, completed, failed, pending, cancelled).',
  `refund_processed_date` int unsigned DEFAULT NULL COMMENT 'date when the refund was processed.',
  `shop_closed_date` int unsigned DEFAULT NULL COMMENT 'date when the shop was closed.',
  `enforcement_processed_date` int unsigned DEFAULT NULL COMMENT 'date when enforcement was processed.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_cdd_disbursement_hold_id`),
  KEY `shop_id` (`shop_id`),
  KEY `verification_overdue_frozen_date_idx` (`verification_overdue_frozen_date`,`create_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `status_idx` (`status`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_cdd_refunds` (
  `shop_cdd_refund_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a cdd refund',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier that this refund belongs to.',
  `shop_cdd_disbursement_hold_id` bigint unsigned NOT NULL COMMENT 'cdd disbursement hold identifier that this refund belongs to.',
  `receipt_id` bigint unsigned NOT NULL COMMENT 'receipt identifier from Shop_Receipts2',
  `process_date` int unsigned DEFAULT NULL COMMENT 'date when the refund wasa proccesed.',
  `refund_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'refund status',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_cdd_refund_id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  KEY `shop_id` (`shop_id`),
  KEY `shop_cdd_disbursement_hold_id` (`shop_cdd_disbursement_hold_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_channel_metrics_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `time_bucket` int NOT NULL,
  `channel` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `add_to_carts` int NOT NULL,
  `visit_count` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`time_bucket`,`channel`),
  KEY `update_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_collaborators` (
  `collaborator_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned DEFAULT NULL,
  `name` varchar(257) DEFAULT NULL,
  `bio` text NOT NULL,
  `role` varchar(64) NOT NULL,
  `avatar_id` int unsigned DEFAULT NULL,
  `active` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`collaborator_id`),
  KEY `user_id` (`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_content_review` (
  `shop_content_review_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `response` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `content_hash` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `evaluation_time` bigint unsigned DEFAULT NULL,
  `request_sent_time` bigint unsigned DEFAULT NULL,
  `webhook_received_time` bigint unsigned DEFAULT NULL,
  `processor_reference_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `vendor_evaluation_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor` tinyint unsigned NOT NULL COMMENT 'Vendor that will process shop data',
  `type` tinyint unsigned NOT NULL,
  `decision_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_content_review_id`),
  KEY `content_hash_idx` (`content_hash`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `compound_idx` (`shop_id`,`listing_id`,`content_hash`,`status`,`process_status`,`environment`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_content_seen_tracking` (
  `tracking_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'The shop related to this content',
  `module_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `module_instance` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`module_name`,`tracking_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_currency_conversion` (
  `shop_currency_conversion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `source_currency_code` varchar(3) NOT NULL COMMENT 'original currency code on shop',
  `target_currency_code` varchar(3) NOT NULL COMMENT 'target currency code on shop',
  `round` tinyint(1) NOT NULL DEFAULT '1' COMMENT 'round objects on conversion?',
  `conversion_rate` float DEFAULT NULL COMMENT 'conversion rate',
  `state` smallint NOT NULL DEFAULT '1' COMMENT 'state of conversion',
  `reversion_enabled` tinyint(1) DEFAULT NULL COMMENT 'whether or not this can be converted',
  `reversion_id` bigint DEFAULT NULL COMMENT 'currency reversion FK to record reverting',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_currency_conversion_id`),
  UNIQUE KEY `shop_currency_conversion_id_idx` (`shop_currency_conversion_id`),
  KEY `state` (`state`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_currency_conversion_values` (
  `shop_currency_conversion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `object_type_id` smallint NOT NULL COMMENT 'object type id',
  `object_values` text NOT NULL COMMENT 'json representation of field => price value pairs for object',
  `currency_code` varchar(3) NOT NULL COMMENT 'currency code of object',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_currency_conversion_id`,`object_id`,`object_type_id`),
  KEY `shop_currency_conversion_id` (`shop_currency_conversion_id`),
  KEY `object_id_type_idx` (`object_id`,`object_type_id`),
  KEY `create_date` (`create_date`),
  KEY `currency_code` (`currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_custom_order` (
  `shop_id` bigint NOT NULL,
  `conversation_id` bigint NOT NULL,
  `custom_listing_id` bigint DEFAULT NULL,
  `buyer_user_id` bigint NOT NULL,
  `reserved_listing_id` bigint DEFAULT NULL,
  `status` smallint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = open',
  `transaction_id` bigint DEFAULT NULL,
  `origin_type_id` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = listing',
  `visibility` tinyint unsigned NOT NULL DEFAULT '0',
  `final_image_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `desired_delivery_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`conversation_id`),
  KEY `custom_listing_id_idx` (`shop_id`,`custom_listing_id`),
  KEY `reserved_listing_id_idx` (`shop_id`,`reserved_listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_customer_due_diligence` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'shop identifier of the shop this record belongs to',
  `kyc_apollo_task_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'status of apollo task used for kyc manual review',
  `kyc_apollo_task_id` bigint unsigned DEFAULT NULL COMMENT 'task id for apollo task used for kyc manual review',
  `bank_account_apollo_task_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'status of apollo task used for bank_account manual review',
  `bank_account_apollo_task_id` bigint unsigned DEFAULT NULL COMMENT 'task id for apollo task used for bank_account manual review',
  `bank_account_reupload_memo` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'memo value provided when requesting reupload after manual review',
  `ogm_enrollment_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'enrollment id for trulioo ogm service',
  `ogm_primary_owner_enrollment_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'enrollment id for trulioo ogm service for primary owner identity',
  `name_change_apollo_task_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'status of apollo task used for name_change manual review',
  `name_change_apollo_task_id` bigint unsigned DEFAULT NULL COMMENT 'task id for apollo task used for name_change manual review',
  `sanction_resident_apollo_task_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'status of apollo task used for sanction_resident manual review',
  `sanction_resident_apollo_task_id` bigint unsigned DEFAULT NULL COMMENT 'task id for apollo task used for sanction_resident manual review',
  `persona_account_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'account id for the persona enhanced identity verification service',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'record creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'date record last updated in epoch time',
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_data` (
  `shop_id` bigint unsigned NOT NULL,
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `status_date` int NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL DEFAULT '0',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `phone_number` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `banner_id` bigint unsigned NOT NULL,
  `lat` int NOT NULL DEFAULT '0',
  `lon` int NOT NULL DEFAULT '0',
  `city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `region` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `headline` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `message_to_buyers` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `active_listing_count` int NOT NULL DEFAULT '0',
  `favorites_count` int NOT NULL DEFAULT '-1',
  `is_frozen` tinyint(1) NOT NULL,
  `is_vacation` tinyint(1) NOT NULL DEFAULT '0',
  `community_discount_start_date` int unsigned NOT NULL DEFAULT '0',
  `community_discount_end_date` int unsigned NOT NULL DEFAULT '0',
  `first_sale_date` int DEFAULT NULL,
  `last_sale_date` int DEFAULT NULL,
  `open_date` int DEFAULT NULL,
  `is_name_set` tinyint(1) NOT NULL DEFAULT '1',
  `is_nipsa` tinyint(1) NOT NULL DEFAULT '0',
  `shipping_score` int DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `digital_message_to_buyers` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `geonameid` bigint unsigned NOT NULL DEFAULT '0',
  `geonameid_update_date` int NOT NULL DEFAULT '0',
  `geonameid_hierarchy` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `logo_image_id` bigint unsigned DEFAULT NULL,
  `large_banner_image_id` bigint unsigned DEFAULT NULL,
  `branding_option` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '0 NONE, 1 SMALL_BANNER, 2 LARGE_BANNER',
  `featured_products_layout` int unsigned NOT NULL DEFAULT '0',
  `featured_rank_sale_section` int NOT NULL DEFAULT '-1',
  `featured_display_type_sale_section` int NOT NULL DEFAULT '0',
  `featured_image_id_sale_section` int DEFAULT '0',
  `all_items_section_cover_image_id` bigint unsigned DEFAULT NULL,
  `message_update_date` int unsigned NOT NULL DEFAULT '0',
  `structured_policies_id` bigint unsigned DEFAULT NULL,
  `is_suspended_payments_mandate` tinyint(1) NOT NULL DEFAULT '0',
  `craft_status` tinyint DEFAULT '3',
  `craft_status_update_date` int DEFAULT '0',
  `from_alm` tinyint NOT NULL DEFAULT '0',
  `tier` tinyint unsigned NOT NULL DEFAULT '1',
  `next_tier_subscription_charge_date` int unsigned NOT NULL DEFAULT '0',
  `is_locked_vacation` tinyint(1) NOT NULL DEFAULT '0',
  `vacation_type` int unsigned NOT NULL DEFAULT '0',
  `facebook_verification_key` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `trader_distinction` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  UNIQUE KEY `shop_name_unique` (`name`),
  KEY `update_date` (`update_date`),
  KEY `status` (`status`),
  KEY `shipping_score` (`shipping_score`),
  KEY `first_sale_date` (`first_sale_date`),
  KEY `next_tier_subscription_charge_date_idx` (`next_tier_subscription_charge_date`),
  KEY `tier_idx` (`tier`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_data_translations` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` tinyint unsigned NOT NULL,
  `headline` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `message_to_buyers` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned DEFAULT '0',
  `update_date` int unsigned DEFAULT '0',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `digital_message_to_buyers` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`shop_id`,`language`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_dc_paypal_decisions` (
  `shop_id` bigint unsigned NOT NULL,
  `dc_paypal_decision_id` bigint unsigned NOT NULL,
  `decision` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `feedback` longtext COLLATE utf8mb4_unicode_ci,
  `is_current` tinyint unsigned NOT NULL DEFAULT '1',
  `is_auto_decision` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`dc_paypal_decision_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_economic_operator` (
  `economic_operator_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL,
  `operator_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`economic_operator_id`),
  KEY `shop_id` (`shop_id`,`is_deleted`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_edd` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_edd_id` bigint unsigned NOT NULL,
  `task_id` bigint unsigned NOT NULL DEFAULT '0',
  `source_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_edd_source` tinyint(1) NOT NULL DEFAULT '0',
  `shop_edd_status` tinyint(1) NOT NULL DEFAULT '0',
  `shop_tier` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `primary_listing_category` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `listing_category_alignment` tinyint(1) NOT NULL DEFAULT '0',
  `listing_category_alignment_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `shop_address` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `shop_bank_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `logins_corresponding_with_address` tinyint(1) NOT NULL DEFAULT '0',
  `logins_corresponding_with_address_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `geo_inconsistencies` tinyint(1) NOT NULL DEFAULT '0',
  `geo_inconsistencies_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `kyb_status` tinyint(1) NOT NULL DEFAULT '0',
  `kyb_status_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `ubo_status` tinyint(1) NOT NULL DEFAULT '0',
  `ubo_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `business_document_status` tinyint(1) NOT NULL DEFAULT '0',
  `business_document_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `business_document_request` tinyint(1) NOT NULL DEFAULT '0',
  `kyb_red_flags` tinyint(1) NOT NULL DEFAULT '0',
  `kyb_red_flags_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `kyc_status` tinyint(1) NOT NULL DEFAULT '0',
  `kyc_status_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `gov_id_status` tinyint(1) NOT NULL DEFAULT '0',
  `gov_id_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `gov_id_request` tinyint(1) NOT NULL DEFAULT '0',
  `bank_statement_status` tinyint(1) NOT NULL DEFAULT '0',
  `bank_statement_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `bank_statement_request` tinyint(1) NOT NULL DEFAULT '0',
  `pep_hits` tinyint(1) NOT NULL DEFAULT '0',
  `pep_hits_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `kyc_red_flags` tinyint(1) NOT NULL DEFAULT '0',
  `kyc_red_flags_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `adverse_media_status` tinyint(1) NOT NULL DEFAULT '0',
  `adverse_media_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `other_red_flags` tinyint(1) NOT NULL DEFAULT '0',
  `other_red_flags_explain` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_edd_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_edd_documentation` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_edd_document_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_edd_id` bigint unsigned NOT NULL,
  `document_type` tinyint(1) NOT NULL DEFAULT '0',
  `document_identifier` bigint unsigned NOT NULL DEFAULT '0',
  `inclusion_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_edd_document_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_email_marketing` (
  `email_marketing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `email_id` bigint unsigned NOT NULL,
  `email_campaign_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `state` tinyint NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`email_marketing_id`),
  KEY `email_campaign_id` (`email_campaign_id`),
  KEY `state` (`state`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_epr_registration` (
  `shop_epr_registration_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `registration_number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `category` tinyint unsigned NOT NULL,
  `is_active` tinyint unsigned DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_epr_registration_id`),
  UNIQUE KEY `shop_id_country_code_category_is_active_idx` (`shop_id`,`country_code`,`category`,`is_active`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_etsy_payment_locks` (
  `etsy_payment_lock_id` bigint unsigned NOT NULL COMMENT 'Generated primary key for the lock',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Id of shop this lock belongs to',
  `lock_type` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'ep_nipsa' COMMENT 'Type of the applied lock',
  `locked_by` varchar(255) COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Who (or what) created the lock',
  `unlocked_by` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Who (or what) unlocked the lock',
  `lock_reason` varchar(255) COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Why this lock was created for the shop',
  `lock_date` int unsigned NOT NULL COMMENT 'When lock was set',
  `unlock_date` int unsigned DEFAULT NULL COMMENT 'When lock was unlocked',
  `lock_notes` text COLLATE utf8mb4_general_ci NOT NULL COMMENT 'Notes provided by Etsy admin when locking',
  `unlock_notes` text COLLATE utf8mb4_general_ci COMMENT 'Notes provided by Etsy admin when unlocking',
  `create_date` int NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`etsy_payment_lock_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_events` (
  `id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `shop_status` varchar(225) NOT NULL,
  `event_id` int NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `event_id_idx` (`event_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_2` (`shop_id`,`event_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_exit_survey` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_exit_survey_id` bigint unsigned NOT NULL,
  `general_reason` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL,
  `specific_reason` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL,
  `comments` longtext COLLATE utf8mb4_unicode_ci,
  `allow_followup` tinyint unsigned NOT NULL,
  `snapshop_shop_open_date` int unsigned NOT NULL,
  `snapshot_active_listing_count` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_exit_survey_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_explore_milestones` (
  `milestone_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'The shop related to this metric',
  `post_id` bigint unsigned DEFAULT NULL COMMENT 'The post related to this metric',
  `milestone_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'The Milestone type could be purchases (1), post_favorites (2) or views (3)',
  `milestone_value` int unsigned DEFAULT NULL COMMENT 'Used to quantify the milestone (for example, number of favorites or number of views)',
  `has_been_seen` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`milestone_id`,`shop_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_files` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_files_id` bigint unsigned NOT NULL DEFAULT '0',
  `filename` varchar(255) DEFAULT NULL,
  `mime_type` varchar(128) DEFAULT NULL,
  `size_bytes` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `storage_volume` smallint NOT NULL DEFAULT '0',
  `version` int NOT NULL DEFAULT '0',
  `secret` varchar(20) NOT NULL DEFAULT '',
  `file_extension` varchar(8) DEFAULT NULL,
  `md5_checksum` varchar(40) NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shop_files_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_frequently_asked_questions` (
  `shop_id` bigint unsigned NOT NULL,
  `faq_id` bigint unsigned NOT NULL,
  `question` longtext COLLATE utf8mb4_bin NOT NULL,
  `answer` longtext COLLATE utf8mb4_bin NOT NULL,
  `state` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `rank` int unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`faq_id`),
  KEY `state` (`state`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_frequently_asked_questions_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `faq_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `question` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `answer` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`faq_id`,`language`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_gpla_merchant_center` (
  `shop_id` bigint unsigned NOT NULL,
  `merchant_center_account_id` bigint unsigned NOT NULL,
  `merchant_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`merchant_center_account_id`),
  KEY `shop_and_merchant_idx` (`shop_id`,`merchant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store gpla merchant_center_account_id with corresponding product_id and shop_id';

CREATE TABLE `shop_growth_goals` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `goal_type` tinyint unsigned NOT NULL,
  `is_active` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`id`),
  UNIQUE KEY `shop_id_goal_type` (`shop_id`,`goal_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_growth_tasks` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `task_type_id` bigint unsigned NOT NULL COMMENT 'PK from shop_task_types.sql',
  `is_complete` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`id`),
  UNIQUE KEY `shop_id_task_type` (`shop_id`,`task_type_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_history` (
  `shop_history_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `field_name` varchar(255) CHARACTER SET utf8 NOT NULL,
  `original_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `new_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_history_id`),
  UNIQUE KEY `history_id_idx` (`shop_history_id`),
  KEY `idx_field_name` (`field_name`),
  KEY `idx_original_value` (`original_value`(14))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_hover_connection` (
  `shop_id` bigint unsigned NOT NULL,
  `voucher_id` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `redemption_url` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `voucher_expiration_date` int unsigned NOT NULL,
  `domain` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `domain_expiration_date` int unsigned DEFAULT '0',
  `redeemed_date` int unsigned DEFAULT '0',
  `is_connected` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_identities` (
  `shop_identity_id` bigint unsigned NOT NULL COMMENT 'Shop identity identifier',
  `shop_id` bigint unsigned NOT NULL COMMENT 'shop identifier of the shop this identity belongs to',
  `user_identity_id` bigint unsigned NOT NULL COMMENT 'user identity identifying key',
  `status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'shop identity status as active, draft, rejected, or other',
  `first_used_date` int DEFAULT NULL COMMENT 'date this identity was first marked active in epoch time',
  `last_used_date` int DEFAULT NULL COMMENT 'date this identity was marked inactive in epoch time',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'record creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'date record last updated in epoch time',
  PRIMARY KEY (`shop_identity_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_idx` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_inferred_origin_postal_codes` (
  `shop_id` bigint unsigned NOT NULL,
  `inferred_origin_postal_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `calculate_date` int unsigned NOT NULL,
  `metadata` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded inference metadata',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_insights_stats_daily` (
  `shop_id` bigint NOT NULL,
  `rollup_run_time` int NOT NULL COMMENT 'The start time of the rolled up timeframe',
  `total_orders_from_repeat_buyers` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`rollup_run_time`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_labels` (
  `shop_id` bigint unsigned NOT NULL,
  `label_id` bigint unsigned NOT NULL,
  `name` varchar(255) NOT NULL,
  `color` varchar(20) NOT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `label_counts_map` varchar(256) DEFAULT NULL,
  `version_num` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store for shop label data';

CREATE TABLE `shop_listing_audit` (
  `shop_listing_audit_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `action` int NOT NULL,
  `quantity_change` int NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_listing_audit_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listingid_action_idx` (`listing_id`,`action`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_listing_quality_component_issue` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `component_name` varchar(255) NOT NULL,
  `has_issue` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `is_safelisted` tinyint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`component_name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_listings_optimizations` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `optimization_id` bigint unsigned NOT NULL,
  `listing_price_int` int unsigned NOT NULL,
  `listing_price_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `median_price_int` int unsigned NOT NULL,
  `median_price_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `confidence` int NOT NULL,
  `bucket_info` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `archive_date` int unsigned DEFAULT NULL,
  `archive_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `version` int unsigned DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`optimization_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `optimization_confidence_idx` (`shop_id`,`confidence`),
  KEY `shop_id_version` (`shop_id`,`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_listings_optimizations_similar_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `optimization_id` bigint unsigned NOT NULL,
  `similar_listing_shop_id` bigint unsigned NOT NULL,
  `similar_listing_id` bigint unsigned NOT NULL,
  `similar_listing_thumbnail_url` varchar(511) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `similar_listing_price_int` int unsigned NOT NULL,
  `similar_listing_price_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `similar_listing_last_sale_date` int unsigned DEFAULT NULL,
  `confidence` float NOT NULL COMMENT 'Currently the recs similarity score for this similar listing',
  `bucket` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `is_price_from_sale_data` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`optimization_id`,`similar_listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_optimization_id_idx` (`shop_id`,`optimization_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_listings_order` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_order` longtext,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_listings_order_cache` (
  `id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `position` int NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `shop_listing_update_date_idx` (`shop_id`,`listing_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_local_market_attendance` (
  `local_market_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `attendance_status` tinyint unsigned NOT NULL DEFAULT '0',
  `comment` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `schedule` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`local_market_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_location_cache` (
  `shop_id` bigint unsigned NOT NULL,
  `country_id` smallint unsigned NOT NULL COMMENT 'Etsy country ID',
  `iso_country_code` char(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Allows the table to perform joins with other tables that only have the ISO code',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Provides a way to soft delete entries',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`country_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `is_deleted` (`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Compiles shop location data calculated using the ''Waterfall method'' which determines a shop''s location by attempting to extract data from the following sources: seller data -> shipping profiles -> shop data (in that order)';

CREATE TABLE `shop_mailchimp_connection` (
  `shop_id` bigint unsigned NOT NULL,
  `encrypted_access_token` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `data_center` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `connected_list_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_make_an_offer_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `is_enabled` tinyint unsigned NOT NULL DEFAULT '0',
  `percent_offer_floor` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_whole_shop_enrolled` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_make_an_offer_settings_listings` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `is_enabled` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_manufacturer` (
  `manufacturer_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `rank` int NOT NULL DEFAULT '1',
  `geoname_id` int unsigned NOT NULL DEFAULT '0',
  `description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `production_partner_id` int DEFAULT NULL COMMENT 'Used for migration to link which production partner was created from this data. We will run migration multiple times and I can check if data has changed.',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`manufacturer_id`),
  UNIQUE KEY `manufacturer_id_idx` (`manufacturer_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_idx` (`shop_id`,`is_deleted`,`rank`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_manufacturing_applications` (
  `shop_id` bigint unsigned NOT NULL,
  `json_blob` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_messages` (
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 NOT NULL,
  `value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='store for longer shop messages that dont belong in shop_sett';

CREATE TABLE `shop_monthly_shop_payment_rollups` (
  `monthly_shop_payment_rollup_id` bigint unsigned NOT NULL COMMENT 'Primary key for this table',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Foreign key of shop this rollup is for',
  `total_gross` bigint unsigned NOT NULL COMMENT 'Payments total for this month and shop',
  `payment_count` int unsigned NOT NULL DEFAULT '0' COMMENT 'Total number of payments for this month and shop',
  `last_payment_date` int unsigned NOT NULL COMMENT 'Date for the last payment used in this rollup',
  `month` int unsigned NOT NULL COMMENT 'The rolled up month',
  `year` int unsigned NOT NULL COMMENT 'Year for the rolled up month',
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Currency for the rolled up shop payments',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`monthly_shop_payment_rollup_id`),
  UNIQUE KEY `shop_monthly_rollup` (`shop_id`,`year`,`month`,`currency`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_offsiteads_market_account` (
  `shop_id` bigint unsigned NOT NULL,
  `market_account_id` bigint unsigned NOT NULL,
  `product_id` bigint unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL,
  `marketplace_id` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market_account_id`),
  KEY `shop_and_product_idx` (`shop_id`,`product_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store offsite ads record per shop and market account id';

CREATE TABLE `shop_package_preferences` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `package_preference_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_carrier_id` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'The shipping carrier that this package should be used for',
  `display_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The name for this package preference (either seller-entered or specified by Etsy)',
  `package_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier-specific package type (eg "parcel") that this package preference corresponds to',
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `dimensions_units` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The unit for the dimensions of this package preference (eg "in")',
  `is_irregular` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Whether this package preference represents an irregularly shaped package',
  `materials_fee` int unsigned NOT NULL DEFAULT '0' COMMENT 'The seller-specified materials fee for this package',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The materials fee currency code for this package (eg "USD")',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`package_preference_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_packing_slip_downloads` (
  `shop_id` bigint unsigned NOT NULL,
  `packing_slip_download_id` bigint unsigned NOT NULL,
  `receipt_ids` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded array of receipt ids to print',
  `packing_slip_settings` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded packing slips display settings',
  `order_receipt_settings` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'JSON-encoded order receipt display settings',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`packing_slip_download_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_payments_adjustments_items_tax_breakdowns` (
  `payment_adjustment_item_tax_breakdown_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier',
  `payment_adjustment_item_id` bigint unsigned NOT NULL COMMENT 'TAX Payment Adjustment Item Id',
  `payment_adjustment_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned DEFAULT NULL,
  `type` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Line Item Type',
  `shop_currency` varchar(3) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shop_amount` bigint DEFAULT NULL COMMENT 'Amount in Shop Currency',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`payment_adjustment_item_tax_breakdown_id`),
  KEY `pk_and_shop` (`payment_adjustment_item_tax_breakdown_id`,`shop_id`,`create_date`),
  KEY `payment_adjustment_item_id` (`payment_adjustment_item_id`),
  KEY `payment_adjustment_id` (`payment_adjustment_id`),
  KEY `receipt_type_txn` (`receipt_id`,`type`,`transaction_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_paypal_mam_accounts` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_paypal_mam_accounts_id` bigint unsigned NOT NULL,
  `payer_email` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payer_id` varchar(13) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '0',
  `status` varchar(15) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `creation_method` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_paypal_mam_accounts_id`),
  UNIQUE KEY `currency_idx` (`shop_id`,`currency`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `status_date_currency_idx` (`status`,`update_date`,`currency`),
  KEY `payer_idx` (`payer_id`),
  KEY `status_currency_creationmethod_updatedate_idx` (`status`,`currency`,`creation_method`,`update_date`),
  KEY `status_creationmethod_updatedate_idx` (`status`,`creation_method`,`update_date`),
  KEY `creationmethod_next_process_date_idx` (`creation_method`,`next_process_date`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_paypal_mam_api_error_log` (
  `shop_paypal_mam_api_error_log_id` bigint unsigned NOT NULL,
  `shop_id` bigint NOT NULL,
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `payer_id` varchar(13) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `partner_merchant_external_id` varchar(13) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `name` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `message` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `debug_id` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `details` longtext COLLATE utf8mb4_unicode_ci,
  `raw_response` longtext COLLATE utf8mb4_unicode_ci,
  `patched` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shop_paypal_mam_api_error_log_id`),
  KEY `shop_id` (`shop_id`,`create_date`),
  KEY `currency` (`currency`,`create_date`),
  KEY `payer_id` (`payer_id`,`create_date`),
  KEY `partner_merchant_external_id` (`partner_merchant_external_id`,`create_date`),
  KEY `debug_id` (`debug_id`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_paypal_mam_api_webhook_log` (
  `shop_paypal_mam_api_webhook_log_id` bigint unsigned NOT NULL,
  `response_id` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `payer_id` varchar(13) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_type` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `summary` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `raw_event_body` longtext COLLATE utf8mb4_unicode_ci,
  `paypal_event_create_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_paypal_mam_api_webhook_log_id`),
  KEY `shop_id` (`shop_id`,`create_date`),
  KEY `currency` (`currency`,`create_date`),
  KEY `payer_id` (`payer_id`,`create_date`),
  KEY `event_type` (`event_type`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shopid_ppcreatedate_idx` (`shop_id`,`paypal_event_create_date`),
  KEY `shopid_currency_ppcreatedate_idx` (`shop_id`,`currency`,`paypal_event_create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_per_shipment_event` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `event_type` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipment_id`,`event_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Shipment Id & Event type, B2B-99 - CRM Shipment Triggers';

CREATE TABLE `shop_policies` (
  `shop_id` bigint unsigned NOT NULL,
  `welcome` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `payment` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `shipping` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `refunds` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `additional` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `imprint` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `private` longtext COLLATE utf8mb4_general_ci,
  PRIMARY KEY (`shop_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_policies_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `welcome` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `payment` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `shipping` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `refunds` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `additional` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned DEFAULT '0',
  `update_date` int unsigned DEFAULT '0',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `imprint` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `private` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
  PRIMARY KEY (`shop_id`,`language`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post` (
  `shop_id` bigint unsigned NOT NULL,
  `post_id` bigint unsigned NOT NULL,
  `text` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `admin_flags` bigint unsigned NOT NULL DEFAULT '0',
  `favorites_count` int NOT NULL DEFAULT '0',
  `video_type` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `comments_enabled` tinyint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`post_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `video_type` (`video_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_audio_music_metadata` (
  `audio_music_metadata_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shop_post_id` bigint unsigned NOT NULL,
  `song_library_id` bigint unsigned NOT NULL,
  `song_mapping_id` bigint unsigned NOT NULL,
  `start_time` int unsigned NOT NULL,
  `end_time` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`audio_music_metadata_id`),
  KEY `shop_post_idx` (`shop_post_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_external_connection` (
  `connection_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shard by Shop',
  `shop_post_id` bigint unsigned NOT NULL,
  `external_post_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'External ids may not be numbers',
  `external_account_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `external_account_type` tinyint unsigned NOT NULL COMMENT 'Denormalized field to reduce joins/queries',
  `upload_status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Upload is done asynchronously, track status with this field',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`connection_id`),
  UNIQUE KEY `shop_id` (`shop_id`,`connection_id`,`shop_post_id`,`external_post_id`),
  KEY `shop_post_id_idx` (`shop_post_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_hashtag` (
  `post_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `hashtag` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`post_id`,`shop_id`,`hashtag`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_imgly_metadata` (
  `shop_id` bigint unsigned NOT NULL,
  `post_id` bigint unsigned NOT NULL,
  `transformation_type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'base',
  `transformations_json` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`post_id`,`transformation_type`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_listing` (
  `shop_id` bigint unsigned NOT NULL,
  `post_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`post_id`,`listing_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_media` (
  `shop_id` bigint unsigned NOT NULL,
  `post_id` bigint unsigned NOT NULL,
  `media_id` bigint unsigned NOT NULL COMMENT 'Id of media in its respective table. For video, the video_id from etsy_shard.video',
  `media_type` tinyint unsigned NOT NULL COMMENT 'Type of media, such as video or image',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `image_owner_id` bigint unsigned DEFAULT NULL COMMENT 'The owner_id needed for etsy_shard.images when media_type is image. See EtsyModel_ImageData.',
  `image_type` smallint unsigned DEFAULT NULL COMMENT 'The image_type needed for etsy_shard.images when media_type is image. See EtsyModel_ImageData.',
  PRIMARY KEY (`shop_id`,`post_id`,`media_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_view_attributed_receipts` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'The id of the post and purchased listing owner',
  `post_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'The id of the user who saw the post and purchased the listing',
  `view_timestamp` int unsigned NOT NULL DEFAULT '0',
  `purchase_timestamp` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `revenue_usd_cents` int NOT NULL DEFAULT '0' COMMENT 'USD pennies',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`post_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_post_view_log` (
  `id` bigint unsigned NOT NULL,
  `post_id` bigint unsigned NOT NULL COMMENT 'Id of the shop post',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Id of the shop that created the post. Shardifier',
  `post_listing_ids` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'A comma separated list of the listing ids associated with the post when the user viewed the post',
  `dwell_time` int unsigned DEFAULT NULL COMMENT 'Time in seconds that the user dwelled on the post',
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that saw the post',
  `view_timestamp` int unsigned NOT NULL DEFAULT '0' COMMENT 'When user saw post, unix timestamp in ms',
  `module_placement` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'Used to identify the context in which the module was seen',
  `dataset` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The dataset that the post came from, if any',
  `beacon_guid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The guid of the beacon that contained the view data',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`id`,`shop_id`,`post_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_post_view_user_idx` (`shop_id`,`post_id`,`view_timestamp`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_processing_schedule` (
  `shop_id` bigint unsigned NOT NULL,
  `is_working_monday` tinyint(1) NOT NULL,
  `is_working_tuesday` tinyint(1) NOT NULL,
  `is_working_wednesday` tinyint(1) NOT NULL,
  `is_working_thursday` tinyint(1) NOT NULL,
  `is_working_friday` tinyint(1) NOT NULL,
  `is_working_saturday` tinyint(1) NOT NULL,
  `is_working_sunday` tinyint(1) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_processing_schedule_audit` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_processing_schedule_audit_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `old_values` text NOT NULL,
  `new_values` text NOT NULL,
  `update_source` smallint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_processing_schedule_audit_id`),
  KEY `update_date` (`update_date`),
  KEY `update_source` (`update_source`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_processing_schedule_holiday_preferences` (
  `shop_id` bigint unsigned NOT NULL,
  `country_id` smallint unsigned NOT NULL,
  `holiday_id` smallint unsigned NOT NULL,
  `is_working` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`country_id`,`holiday_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_production_partner` (
  `production_partner_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `manufacturer_id` bigint unsigned DEFAULT NULL COMMENT 'Link to Etsy Manufacturer, however not all production partners will be associated',
  `business_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `show_business_name` int unsigned NOT NULL DEFAULT '1' COMMENT 'Boolean field which simply sets if they should publicly show the business name or not',
  `descriptive_title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'This field is used as a public title to show in place of business name when they select to hide the business name',
  `location_id` bigint unsigned NOT NULL COMMENT 'Tied to geonames id for their location',
  `about_production_partner` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `why_working_with_partner` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Uses php defined Enum for drop down options',
  `why_working_with_partner_other` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'This field stores the user-provided value for why_working_with_partner if the value was OTHER',
  `role_in_design_process` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Uses php defined Enum for drop down options',
  `partners_role` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Uses php defined Enum for drop down options',
  `approval_status` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'unreviewed' COMMENT 'Whether this production partner has been ''approved'' by Responsible Seller Growth, is ''pending'' approval through Apollo, or has been ''rejected''. May also be ''closed'' if sent to Apollo by mistake. Defaults to ''unreviewed'', meaning nobody has chkd yet',
  `outside_manufacturing_migrated` tinyint NOT NULL DEFAULT '0' COMMENT 'Boolean: 1 if this production partner was added via migration from the old Outside Manufacturing system which Dovetail replaced. Defaults to 0.',
  `outside_manufacturing_added_post_approval` tinyint NOT NULL DEFAULT '0' COMMENT 'Boolean: 1 if this production partner was added under the old Outside Manufacturing system after initial O.M. approval. Defaults to 0, meaning that it was approved specifically by RSG.',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `original_business_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'saves the initial state of the business name so RSG can compare later',
  `business_name_change_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'updates each time the user changes the business name, aiming to alert RSG if the user changes the name after partner approval',
  `approval_status_change_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'the date that an admin took action to change the status of the partner',
  PRIMARY KEY (`production_partner_id`),
  KEY `shop_id` (`shop_id`,`is_deleted`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_production_partner_listing_association` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `production_partner_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`production_partner_id`),
  KEY `listing_id` (`listing_id`,`shop_id`),
  KEY `production_partner_id` (`production_partner_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_production_partner_manufacturer_lookup` (
  `production_partner_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `manufacturer_id` bigint unsigned NOT NULL COMMENT 'Link to Etsy Manufacturer',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`production_partner_id`),
  KEY `shop_id` (`shop_id`),
  KEY `manufacturer_id` (`manufacturer_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_quality_component_issue` (
  `shop_id` bigint unsigned NOT NULL,
  `component_name` varchar(255) NOT NULL,
  `has_issue` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`component_name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_audit` (
  `shop_receipt_audit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `checkout_on_mobile_device` tinyint unsigned DEFAULT NULL,
  `checkout_ip` int unsigned DEFAULT NULL,
  `checkout_network_latency` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_receipt_audit_id`),
  KEY `idx_shop_receipt_audit_receipt_id` (`receipt_id`),
  KEY `shop_id_idx` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_estimated_delivery` (
  `shop_id` bigint unsigned NOT NULL,
  `estimated_delivery_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `calculator_type` tinyint unsigned NOT NULL,
  `base_date` int unsigned DEFAULT NULL,
  `base_date_origin` tinyint unsigned NOT NULL,
  `processing_days_min` int unsigned DEFAULT NULL,
  `processing_days_max` int unsigned DEFAULT NULL,
  `shipping_days_min` int unsigned DEFAULT NULL,
  `shipping_days_max` int unsigned DEFAULT NULL,
  `shipping_days_origin` tinyint unsigned NOT NULL DEFAULT '1',
  `does_ship_on_saturdays` tinyint NOT NULL DEFAULT '0',
  `does_include_covid_extension` tinyint NOT NULL DEFAULT '0',
  `holiday_days_min` int unsigned NOT NULL DEFAULT '0',
  `holiday_days_max` int unsigned NOT NULL DEFAULT '0',
  `seller_timezone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ship_by_date_min` int unsigned NOT NULL DEFAULT '0',
  `ship_by_date_max` int unsigned NOT NULL DEFAULT '0',
  `ship_by_date_origin` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'seller_provided',
  `estimated_delivery_date_min` int unsigned NOT NULL,
  `estimated_delivery_date_max` int unsigned NOT NULL,
  `calculation_reason` tinyint unsigned NOT NULL,
  `date_representation` tinyint unsigned NOT NULL,
  `shipping_offset_days` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`estimated_delivery_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_geo_coordinates` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shipping_geo_coordinate_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `shipping_geo_coordinate_id_idx` (`shipping_geo_coordinate_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_processing_times` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `processing_calendar_days_min` smallint unsigned NOT NULL,
  `processing_calendar_days_max` smallint unsigned NOT NULL,
  `processing_calendar_days_max_alt_for_analytics` smallint unsigned NOT NULL,
  `ship_by_date_min` int unsigned NOT NULL DEFAULT '0',
  `ship_by_date_max` int unsigned NOT NULL DEFAULT '0',
  `experiment_variant` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `dataset_metadata` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `source_metadata` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_review` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `is_deleted` (`shop_id`,`receipt_id`,`is_deleted`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_review_history` (
  `receipt_review_history_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`receipt_review_history_id`),
  KEY `is_deleted` (`shop_id`,`receipt_id`,`is_deleted`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_review_union` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `has_receipt_review` tinyint NOT NULL,
  `has_transaction_review` tinyint NOT NULL,
  `has_non_anonymous_transaction_review` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`name`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_shipping_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tracking_state` smallint unsigned DEFAULT '0',
  `tracking_location` varchar(255) COLLATE utf8mb4_general_ci DEFAULT '',
  `tracking_state_date` int unsigned DEFAULT '0',
  `shipping_provider` smallint NOT NULL DEFAULT '0',
  `shipping_provider_name` varchar(120) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `tracking_code` varchar(120) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `destination_country_id` smallint unsigned DEFAULT NULL,
  `origin_country_id` smallint unsigned DEFAULT NULL,
  `shipped_date` int unsigned DEFAULT '0',
  `delivery_date` int unsigned DEFAULT '0',
  `provider_query_state` smallint unsigned NOT NULL DEFAULT '0',
  `provider_last_access_date` int unsigned DEFAULT '0',
  `shipping_label_id` bigint unsigned DEFAULT '0',
  `shipping_notification_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `can_track` tinyint(1) NOT NULL DEFAULT '1',
  `queue` int unsigned NOT NULL DEFAULT '0',
  `queue_added_date` int unsigned DEFAULT NULL,
  `carrier_name` varchar(120) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`receipt_shipping_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `tracking_provider` (`tracking_state`,`shipping_provider`),
  KEY `provider` (`shipping_provider`,`create_date`,`receipt_shipping_id`),
  KEY `shipping_notification_id` (`shipping_notification_id`),
  KEY `queue` (`queue`),
  KEY `provider_last_access_date` (`provider_last_access_date`),
  KEY `carrier_id` (`carrier_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_audit` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_receipt_shipping_audit_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shipping_option_type` tinyint unsigned NOT NULL COMMENT 'See Shipping_Profile_OptionType for possible values: https://github.etsycorp.com/Engineering/Etsyweb/blob/main/phplib/Shipping/Profile/OptionType.php',
  `shipping_profile_id` bigint unsigned NOT NULL DEFAULT '0',
  `source_shipping_profile_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Applies to listings with Shared Shipping Profiles. Taken from `etsy_shard.listing_shipping_profile.source_shipping_profile_id`',
  `shipping_profile_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'See Shipping_Profile_Type for possible values: https://github.etsycorp.com/Engineering/Etsyweb/blob/main/phplib/Shipping/Profile/Type.php',
  `carrier_id` int unsigned NOT NULL DEFAULT '0' COMMENT 'See Shipping_Config_Carriers for possible values: https://github.etsycorp.com/Engineering/Etsyweb/blob/main/phplib/Shipping/Config/Carriers.php',
  `carrier_name` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Carrier name associated with carrier_id, as defined in Shipping_Config_Carriers::$CARRIER_INFO: https://github.etsycorp.com/Engineering/Etsyweb/blob/main/phplib/Shipping/Config/Carriers.php',
  `mail_class` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The mail class of the particular shipping option selected by the buyer at the time of purchase',
  `origin_postal_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `origin_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Derived programmatically from origin_postal_code using data from `etsy_aux.usps_city_state_data`.',
  `origin_country_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Taken from the selected shipping option, but if that is null then from the receipt',
  `destination_postal_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `destination_country_id` bigint unsigned NOT NULL DEFAULT '0',
  `primary_cost` int unsigned NOT NULL DEFAULT '0',
  `secondary_cost` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `estimated_delivery_date_min` int unsigned NOT NULL DEFAULT '0',
  `estimated_delivery_date_max` int unsigned NOT NULL DEFAULT '0',
  `shipping_offset_days` int NOT NULL DEFAULT '0',
  `length` decimal(10,4) DEFAULT '0.0000',
  `width` decimal(10,4) DEFAULT '0.0000',
  `height` decimal(10,4) DEFAULT '0.0000',
  `dimensions_unit` varchar(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `weight` decimal(10,4) DEFAULT '0.0000',
  `weight_units` varchar(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `order_processing_days_min` int unsigned NOT NULL DEFAULT '0',
  `order_processing_days_max` int unsigned NOT NULL DEFAULT '0',
  `listing_processing_days_min` int unsigned NOT NULL DEFAULT '0',
  `listing_processing_days_max` int unsigned NOT NULL DEFAULT '0',
  `order_shipping_days_min` int unsigned NOT NULL DEFAULT '0',
  `order_shipping_days_max` int unsigned NOT NULL DEFAULT '0',
  `profile_shipping_days_min` int unsigned NOT NULL DEFAULT '0' COMMENT 'If a value is provided by the user explicitly, as in the case of a Manual Shipping Profile with Other selected as the carrier, then that value is used. Otherwise if we have a carrier and mail class then we derive this value programmatically from static data via Shipping_Label_MailClass::getDayRangeForCarrierAndMailClass().',
  `profile_shipping_days_max` int unsigned NOT NULL DEFAULT '0',
  `was_upgrade_used` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'This column is shorthand for (shipping_option_type == 3)',
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`shop_receipt_shipping_audit_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_local_delivery_details` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `delivery_details_id` bigint unsigned NOT NULL,
  `market` int unsigned DEFAULT '0' COMMENT 'The delivery market this data applies to',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `delivery_window_start_date` int NOT NULL DEFAULT '0',
  `delivery_window_end_date` int NOT NULL DEFAULT '0',
  `delivery_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`receipt_id`,`delivery_details_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_notification` (
  `shipping_notification_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `note_to_buyer` text COLLATE utf8mb4_general_ci,
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `notification_bcc` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `notification_scheduled_date` int unsigned NOT NULL DEFAULT '0',
  `notification_sent_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`shipping_notification_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `notification_sent_date` (`notification_sent_date`),
  KEY `notif_sched_idx` (`notification_scheduled_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_package_transactions` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_receipt_package_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_receipt_package_transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `quantity` int DEFAULT '0',
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `dimension_units` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `weight` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `weight_units` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`shop_receipt_package_id`,`shop_receipt_package_transaction_id`),
  KEY `receipt_transaction` (`shop_id`,`receipt_id`,`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_packages` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_receipt_package_id` bigint unsigned NOT NULL DEFAULT '0',
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `dimension_units` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `weight` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `weight_units` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `shipping_carrier_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The shipping carrier',
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier-specific mail class (eg "first_class")',
  `package_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier-specific package type (eg "parcel")',
  `package_preference_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The seller package preference used',
  `total_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'The total cost in cents',
  `shipping_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'The shipping cost in cents',
  `handling_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'The handling cost in cents',
  `materials_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'The materials cost in cents',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `profile_type` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'The type of shipping profile (manual / calculated)',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `min_delivery_time` int DEFAULT NULL,
  `max_delivery_time` int DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`shop_receipt_package_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_shipping_tracking_events` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `receipt_shipping_id` bigint unsigned NOT NULL,
  `tracking_event_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `event_sequence` tinyint unsigned NOT NULL DEFAULT '0',
  `event_type` varchar(255) COLLATE utf8mb4_general_ci DEFAULT '',
  `event_details` varchar(255) COLLATE utf8mb4_general_ci DEFAULT '',
  `event_location` varchar(255) COLLATE utf8mb4_general_ci DEFAULT '',
  `event_date` varchar(8) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `event_time` varchar(6) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `carrier_name` varchar(120) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  `event_location_city` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `event_location_state` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `event_location_zip` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `event_location_country` varchar(255) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`receipt_id`,`receipt_shipping_id`,`tracking_event_id`,`create_date`),
  KEY `sequence` (`shop_id`,`receipt_id`,`receipt_shipping_id`,`event_sequence`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_suggested_address` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL,
  `verification_state` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `delivery_point` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `carrier_route_code` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`address_id`),
  KEY `receipt_id` (`shop_id`,`receipt_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipt_transit_times` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shipping_days_min` smallint unsigned NOT NULL,
  `shipping_days_max` smallint unsigned NOT NULL,
  `dataset_metadata` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `source_metadata` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `canceled_date` int unsigned NOT NULL,
  `shop_name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `order_id` bigint unsigned DEFAULT NULL,
  `purchase_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipped` tinyint unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `state` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `shipping_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shardifier for shipping_address_id',
  `shipping_address_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'references a record in etsy_shard.users_addresses',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `payment_method` varchar(16) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `dc_payment_method` varchar(16) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `in_person_payment_type` varchar(20) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'NA',
  `in_person_receipt_email` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `payment_email` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `payment_secret` varchar(24) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `message_from_payment` text COLLATE utf8mb4_general_ci,
  `is_echeck` tinyint unsigned DEFAULT '0',
  `checkout_version` int unsigned DEFAULT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `payment_transaction_id` varchar(24) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `applied_vat_rate` int unsigned NOT NULL DEFAULT '0',
  `applied_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `seller_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `vat_invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipping_taxable` tinyint unsigned DEFAULT '0',
  `message_from_seller` longtext COLLATE utf8mb4_general_ci,
  `message_from_buyer` longtext COLLATE utf8mb4_general_ci,
  `google_wallet_data` varchar(2000) COLLATE utf8mb4_general_ci DEFAULT '',
  `dc_paypal_data` varchar(2000) COLLATE utf8mb4_general_ci DEFAULT '',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_funding_campaign` tinyint(1) NOT NULL DEFAULT '0',
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `shop_id_status_idx` (`shop_id`,`create_date`,`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id_purchase_order_id` (`shop_id`,`purchase_order_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts2` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `customer_id` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `canceled_date` int unsigned NOT NULL,
  `shop_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `order_id` bigint unsigned DEFAULT NULL COMMENT 'Do not use. Refer to receipt_group_id to find receipts within the same order.',
  `purchase_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipped` tinyint unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `shipping_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shardifier for shipping_address_id',
  `shipping_address_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'references a record in etsy_shard.users_addresses',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `dc_payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `in_person_payment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'NA',
  `in_person_receipt_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_secret` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message_from_payment` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `is_echeck` tinyint unsigned DEFAULT '0',
  `checkout_version` int unsigned DEFAULT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `payment_transaction_id` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `applied_transaction_fee_rate` int unsigned DEFAULT NULL COMMENT 'Transaction fee applied to transactions on a receipt, not the source of truth but used for display purposes on the ledger',
  `applied_vat_rate` int unsigned NOT NULL DEFAULT '0',
  `applied_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `seller_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `vat_invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipping_taxable` tinyint unsigned DEFAULT '0',
  `message_from_seller` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `message_from_buyer` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `google_wallet_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `dc_paypal_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_funding_campaign` tinyint(1) NOT NULL DEFAULT '0',
  `seller_user_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `structured_policies_id` bigint unsigned DEFAULT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `is_claimed` tinyint NOT NULL DEFAULT '0',
  `gift_message` varchar(4095) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gift_buyer_first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `btn_ref` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `requested_gift_wrap` tinyint unsigned NOT NULL DEFAULT '0',
  `is_gift_wrap_taxable` tinyint unsigned NOT NULL DEFAULT '0',
  `tax_transaction_code` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `flagged_for_manual_fraud_review` tinyint unsigned NOT NULL DEFAULT '0',
  `applied_shipping_tax_rate` int unsigned DEFAULT NULL,
  `applied_gift_wrap_tax_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `tax_client` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `tax_finalization_date` int unsigned NOT NULL DEFAULT '0',
  `tax_reversal_finalization_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'track when/if the taxes were reversed/voided and prevent application to void taxes more than once.',
  `seller_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_recipient_user_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `shop_id_status_idx` (`shop_id`,`create_date`,`status`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id_purchase_order_id` (`shop_id`,`purchase_order_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `order_id_idx` (`order_id`),
  KEY `buyer_seller_user_status_idx` (`buyer_user_id`,`seller_user_id`,`status`),
  KEY `seller_user_id_createdatestatus_idx` (`seller_user_id`,`create_date`,`status`),
  KEY `shop_customer_create_status_idx` (`shop_id`,`customer_id`,`create_date`,`status`),
  KEY `shop_id_receipt_id_purchase_order_id_update_date_idx` (`shop_id`,`receipt_id`,`purchase_order_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts_feedback` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `overall_experience_rating` tinyint DEFAULT NULL,
  `overall_experience_conversation_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts_feedback_history` (
  `receipt_feedback_history_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `overall_experience_rating` tinyint DEFAULT NULL,
  `overall_experience_conversation_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`receipt_feedback_history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts_location` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `lat` float(10,8) NOT NULL DEFAULT '0.00000000',
  `lon` float(11,8) NOT NULL DEFAULT '0.00000000',
  `geonameid` bigint unsigned DEFAULT NULL,
  `location_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `timezone` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_receipts_promotions` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`transaction_id`,`promotion_id`),
  KEY `shop_and_promotion_id` (`shop_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store sales & coupons in a shop receipt';

CREATE TABLE `shop_receipts_totals` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `usd_total_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_total_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_total_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `buyer_total_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `ros_total_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `usd_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_total_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `usd_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `eur_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `shop_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `buyer_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ros_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shop_id_shop_currency_id_idx` (`shop_id`,`shop_currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_region_history` (
  `shop_region_history_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `region_code` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `determination_method` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_region_history_id`),
  KEY `shop_id` (`shop_id`,`create_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_reported_transactions` (
  `reported_transaction_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `seller_id` bigint unsigned NOT NULL DEFAULT '0',
  `buyer_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `message` text COLLATE utf8mb4_unicode_ci,
  `is_closed` tinyint(1) NOT NULL DEFAULT '0',
  `resolution_date` int unsigned DEFAULT '0',
  `resolution_message` text COLLATE utf8mb4_unicode_ci,
  `admin_id` bigint unsigned DEFAULT '0',
  `reason` text COLLATE utf8mb4_unicode_ci,
  `convo_id` bigint unsigned DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reported_transaction_id`),
  KEY `shop_reported_transaction_transaction_id_index` (`transaction_id`),
  KEY `shop_reported_transaction_create_date_index` (`create_date`),
  KEY `shop_reported_transactions_is_closed_index` (`is_closed`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_return_acceptance_rate` (
  `return_acceptance_rate_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `payment_adjustment_id` bigint unsigned DEFAULT NULL,
  `was_return_performed` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`return_acceptance_rate_id`),
  KEY `receipt_idx` (`shop_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_return_policy` (
  `shop_id` bigint unsigned NOT NULL,
  `return_policy_id` bigint unsigned NOT NULL,
  `accepts_returns` tinyint NOT NULL,
  `accepts_exchanges` tinyint NOT NULL,
  `return_deadline` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`return_policy_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `return_policy_idx` (`return_policy_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_return_policy_listing` (
  `shop_id` bigint unsigned NOT NULL,
  `return_policy_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `policy_idx` (`return_policy_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_review_aggregate` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `count_1` bigint unsigned NOT NULL,
  `count_2` bigint unsigned NOT NULL,
  `count_3` bigint unsigned NOT NULL,
  `count_4` bigint unsigned NOT NULL,
  `count_5` bigint unsigned NOT NULL,
  `total_count` bigint unsigned NOT NULL,
  `avg_rating` smallint unsigned NOT NULL,
  `sales_channel` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`sales_channel`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_review_attribute_map` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `attribute_id` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`,`attribute_id`),
  KEY `shop_id_listing_id_attribute_id` (`shop_id`,`listing_id`,`attribute_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_review_recommendations` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `is_recommended` tinyint DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `shop_id_listing_id` (`shop_id`,`listing_id`),
  KEY `shop_id_listing_id_is_recommended` (`shop_id`,`listing_id`,`is_recommended`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_reviews_subratings` (
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `item_quality` int unsigned DEFAULT '0',
  `shipping` int unsigned DEFAULT '0',
  `seller_customer_service` int unsigned DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `shop_id_listing_id_idx` (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listing_id_update_date_idx` (`listing_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_screener_info` (
  `shop_id` bigint unsigned NOT NULL,
  `question` varchar(80) COLLATE utf8mb4_general_ci NOT NULL,
  `response_id` bigint unsigned NOT NULL,
  `response` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`response_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_secondary_taxpayer_id` (
  `shop_id` bigint unsigned NOT NULL,
  `tax_year` smallint unsigned NOT NULL,
  `taxpayer_id_type` varchar(12) COLLATE utf8mb4_unicode_ci NOT NULL,
  `taxpayer_id_token` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`taxpayer_id_type`,`tax_year`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_sections` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `rank` int NOT NULL,
  `active_listing_count` int NOT NULL DEFAULT '0',
  `featured_rank` int NOT NULL DEFAULT '-1',
  `featured_display_type` int NOT NULL DEFAULT '0',
  `square_category_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `featured_image_id` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`id`),
  UNIQUE KEY `id_idx` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_sections_translations` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned DEFAULT '0',
  `update_date` int unsigned DEFAULT '0',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`id`,`language`),
  UNIQUE KEY `id_language_idx` (`id`,`language`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_seller_personal_details` (
  `shop_id` bigint unsigned NOT NULL,
  `details_id` bigint unsigned NOT NULL,
  `first_name` varchar(255) DEFAULT NULL,
  `last_name` varchar(255) DEFAULT NULL,
  `address_line1` varchar(255) DEFAULT NULL,
  `address_line2` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(64) DEFAULT NULL,
  `postal_code` varchar(32) DEFAULT NULL,
  `country` varchar(64) DEFAULT NULL,
  `vat_number` varchar(255) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `email_address` varchar(255) DEFAULT NULL,
  `phone_number` varchar(25) DEFAULT NULL,
  `additional_details` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`details_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_settings` (
  `id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `name` varchar(80) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `value` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_name` (`shop_id`,`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_settings_change_audit` (
  `audit_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `setting_name` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `setting_value` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `setting_name_idx` (`shop_id`,`setting_name`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_share_annotations` (
  `shop_id` bigint unsigned NOT NULL,
  `share_id` bigint unsigned NOT NULL,
  `media_id` bigint unsigned NOT NULL,
  `media_type` smallint NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `object_type` smallint NOT NULL,
  `coord_x` int DEFAULT NULL,
  `coord_y` int DEFAULT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`share_id`,`media_id`,`media_type`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_share_items` (
  `shop_id` bigint unsigned NOT NULL,
  `share_id` bigint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `object_type` smallint NOT NULL,
  `text` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_suppressed` tinyint(1) NOT NULL DEFAULT '0',
  `topic_ids` text COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`shop_id`,`share_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_share_media` (
  `shop_id` bigint unsigned NOT NULL,
  `share_id` bigint unsigned NOT NULL,
  `media_id` bigint unsigned NOT NULL,
  `media_type` smallint NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `media_owner_id` bigint unsigned NOT NULL DEFAULT '0',
  `media_image_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`share_id`,`media_id`,`media_type`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The FK to the receipt if an Etsy order, otherwise 0',
  `buyer_user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The FK to the buyer if an Etsy order, otherwise 0',
  `tracking_state` smallint unsigned DEFAULT '0',
  `tracking_status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_state_detail` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_status_details` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `tracking_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_location_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `tracking_state_date` int unsigned DEFAULT '0',
  `shipping_provider_id` smallint NOT NULL DEFAULT '0',
  `tracking_code` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `weight` decimal(10,4) NOT NULL DEFAULT '0.0000',
  `weight_units` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `destination_country_id` smallint unsigned DEFAULT NULL,
  `destination_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `origin_country_id` smallint unsigned DEFAULT NULL,
  `origin_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `delivery_date` int unsigned DEFAULT '0',
  `delivery_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `delivery_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `delivery_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `delivery_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `delivery_location_country_id` smallint NOT NULL DEFAULT '0',
  `provider_query_state` smallint unsigned NOT NULL DEFAULT '0',
  `provider_last_access_date` int unsigned DEFAULT '0',
  `provider_next_fetch_date` int unsigned NOT NULL DEFAULT '0',
  `shipping_label_id` bigint unsigned DEFAULT '0',
  `shipment_notification_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipment_notification_date` int unsigned DEFAULT '0' COMMENT 'The date the notification is (to be) sent. If a shipping label may not correspond to the label mailing date in the case of CP labels',
  `is_visible` tinyint NOT NULL DEFAULT '1',
  `can_track` tinyint NOT NULL DEFAULT '1',
  `queue` int unsigned NOT NULL DEFAULT '0',
  `queue_added_date` int unsigned DEFAULT NULL,
  `carrier_name` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `api_key_id` bigint unsigned NOT NULL DEFAULT '0',
  `provider_submission_date` int unsigned NOT NULL DEFAULT '0',
  `expected_delivery_date` int unsigned NOT NULL DEFAULT '0',
  `ship_date` int unsigned NOT NULL DEFAULT '0',
  `ship_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ship_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ship_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ship_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `ship_location_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `parent_shipment_id` bigint unsigned NOT NULL DEFAULT '0',
  `tracking_service_state` smallint unsigned NOT NULL DEFAULT '0',
  `tracking_service_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipment_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `tracking_provider` (`tracking_state`,`shipping_provider_id`),
  KEY `provider` (`shipping_provider_id`,`create_date`),
  KEY `shipment_notification_id` (`shipment_notification_id`),
  KEY `queue` (`queue`),
  KEY `provider_last_access_date` (`provider_last_access_date`),
  KEY `carrier_id` (`carrier_id`),
  KEY `shop_id_provider_tracking_code` (`shop_id`,`provider_last_access_date`,`tracking_code`),
  KEY `parent_shipment_id` (`parent_shipment_id`),
  KEY `provider_next_fetch_date` (`provider_next_fetch_date`,`shipping_provider_id`),
  KEY `provider_submission_date` (`provider_submission_date`,`shipping_provider_id`),
  KEY `tracking_service_state` (`tracking_service_state`),
  KEY `shop_id_receipt_id_tracking_state_idx` (`shop_id`,`receipt_id`,`tracking_state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipment_archived_events` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `tracking_event_id` bigint unsigned NOT NULL,
  `event_sequence` tinyint unsigned NOT NULL DEFAULT '0',
  `event_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_details` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_date` varchar(8) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `event_time` varchar(6) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `carrier_name` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  `event_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_country` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `tracking_status_details` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipment_id`,`tracking_event_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipment_metadata` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `carrier_estimated_delivery_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The estimated delivery date generated by the carrier (format: DATE_ATOM)',
  `provider_estimated_delivery_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The estimated delivery date generated by the tracking provider (NOT the carrier) (format: DATE_ATOM)',
  `provider_estimated_delivery_date_min` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The earliest estimated delivery date generated by the tracking provider (NOT the carrier) (format: DATE_ATOM)',
  `provider_estimated_delivery_date_max` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest estimated delivery date generated by the tracking provider (NOT the carrier) (format: DATE_ATOM)',
  `origin_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) raw location',
  `origin_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) city',
  `origin_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) state/region/province',
  `origin_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) postal code',
  `origin_location_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) country ISO code',
  `origin_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan (acceptance or first in transit) date (format: DATE_ATOM)',
  `origin_event_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan carrier event code',
  `origin_tracking_status` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first origin scan tracking status constant',
  `origin_carrier` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier name (Aftership slug) responsible for the origin scan event',
  `delivery_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery raw location',
  `delivery_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery city',
  `delivery_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery state/region/province',
  `delivery_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery postal code',
  `delivery_location_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery country ISO code',
  `delivery_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery date (format: DATE_ATOM)',
  `delivery_event_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The delivery carrier event code',
  `delivery_carrier` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier name (Aftership slug) responsible for the delivery scan event',
  `first_delivery_attempt_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt raw location',
  `first_delivery_attempt_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt city',
  `first_delivery_attempt_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt state/region/province',
  `first_delivery_attempt_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt postal code,',
  `first_delivery_attempt_location_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt country ISO code',
  `first_delivery_attempt_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt date (format: DATE_ATOM)',
  `first_delivery_attempt_event_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The first delivery attempt carrier event code',
  `first_delivery_attempt_carrier` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier name (Aftership slug) responsible for the first delivery attempt scan event',
  `latest_delivery_attempt_location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt raw location',
  `latest_delivery_attempt_location_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt city',
  `latest_delivery_attempt_location_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt state/region/province',
  `latest_delivery_attempt_location_postal_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt postal code',
  `latest_delivery_attempt_location_country_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt country ISO code',
  `latest_delivery_attempt_date` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt date (format: DATE_ATOM)',
  `latest_delivery_attempt_event_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The latest delivery attempt carrier event code',
  `latest_delivery_attempt_carrier` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The carrier name (Aftership slug) responsible for the latest delivery attempt scan event',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipment_notification` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_notification_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The FK to the receipt if an Etsy order, otherwise 0',
  `buyer_user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The FK to the buyer if an Etsy order, otherwise 0',
  `note_to_buyer` longtext COLLATE utf8mb4_unicode_ci,
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `notification_bcc` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `notification_scheduled_date` int unsigned NOT NULL DEFAULT '0',
  `notification_sent_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipment_notification_id`),
  KEY `receipt` (`shop_id`,`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `notification_sent_date` (`notification_sent_date`),
  KEY `notif_sched_idx` (`notification_scheduled_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipment_tracking_events` (
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `tracking_event_id` bigint unsigned NOT NULL,
  `event_sequence` tinyint unsigned NOT NULL DEFAULT '0',
  `event_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_code` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_details` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_location` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `event_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `event_time` varchar(6) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `is_immutable` tinyint unsigned NOT NULL DEFAULT '0',
  `carrier_name` varchar(120) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  `event_location_city` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_zip` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_postal_code` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `event_location_country` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_state` smallint unsigned NOT NULL DEFAULT '0',
  `tracking_status` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_state_detail` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `tracking_status_details` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipment_id`,`tracking_event_id`,`create_date`),
  KEY `sequence` (`shop_id`,`shipment_id`,`event_sequence`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_shipment_is_deleted` (`shop_id`,`shipment_id`,`is_deleted`,`event_sequence`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_canada_post_merchant` (
  `shop_id` bigint unsigned NOT NULL,
  `merchant_id` bigint unsigned NOT NULL,
  `customer_number` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `tier` smallint unsigned NOT NULL DEFAULT '0',
  `tier_update_date` int unsigned NOT NULL DEFAULT '0',
  `tier_last_check_date` int unsigned NOT NULL DEFAULT '0',
  `api_credentials` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tier_change_acknowledge_date` int unsigned NOT NULL DEFAULT '0',
  `last_tier` smallint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`merchant_id`),
  KEY `shop_customer` (`shop_id`,`customer_number`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_addresses` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `address_type` tinyint NOT NULL DEFAULT '0',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` bigint unsigned NOT NULL,
  `delivery_point` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'USPS 11-point delivery zip',
  `phone_number` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `validation_state` smallint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`address_type`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_carrier_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `value` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`carrier_id`,`name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_carriers` (
  `shop_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `onboard_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `suspension_reason` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `suspension_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`carrier_id`),
  KEY `deleted` (`shop_id`,`is_deleted`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_claims` (
  `shipping_label_claim_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  `first_line` varchar(255) DEFAULT NULL,
  `second_line` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `zip` varchar(255) DEFAULT NULL,
  `phone_number` varchar(20) NOT NULL DEFAULT '',
  `email` varchar(255) NOT NULL DEFAULT '',
  `country_id` int unsigned NOT NULL,
  `claim_state` tinyint unsigned NOT NULL DEFAULT '0',
  `type` tinyint unsigned NOT NULL DEFAULT '0',
  `damage_repairable` tinyint unsigned NOT NULL,
  `damage_description` text,
  `claim_amount` int unsigned NOT NULL,
  `salvage_amount` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `item_description` text,
  `provider_claim_id` varchar(40) DEFAULT NULL,
  `insurance_provider_claim_id` varchar(40) DEFAULT NULL,
  `claim_state_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_claim_id`),
  KEY `shipping_label` (`shop_id`,`shipping_label_id`),
  KEY `claim_state_index` (`claim_state`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`),
  KEY `shipping_label_id_idx` (`shipping_label_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_credits` (
  `shop_id` bigint unsigned NOT NULL,
  `credit_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `mail_class` mediumtext COLLATE utf8mb4_unicode_ci,
  `label_destination_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `issue_type` tinyint unsigned NOT NULL DEFAULT '0',
  `issue_date` int unsigned NOT NULL,
  `usage_date` int unsigned NOT NULL DEFAULT '0',
  `expire_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_removed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`credit_id`),
  KEY `label` (`shop_id`,`shipping_label_id`),
  KEY `usage` (`shop_id`,`usage_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_issue_type` (`shop_id`,`issue_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_customs_items` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `customs_item_id` bigint unsigned NOT NULL,
  `description` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `weight` decimal(10,4) DEFAULT '0.0000',
  `weight_units` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `quantity` int unsigned NOT NULL DEFAULT '0',
  `value` int unsigned NOT NULL DEFAULT '0',
  `value_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `country_of_origin_id` smallint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tariff_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`customs_item_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_data` (
  `shop_id` bigint unsigned NOT NULL,
  `is_onboared` tinyint unsigned NOT NULL,
  `is_suspended` tinyint unsigned NOT NULL,
  `suspension_reason` varchar(200) DEFAULT NULL,
  `address_id` bigint unsigned NOT NULL,
  `phone_number` varchar(25) DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `onboard_date` int unsigned NOT NULL,
  `suspension_date` int unsigned NOT NULL,
  `origin_zipcode` varchar(10) DEFAULT NULL,
  `download_preference` varchar(20) NOT NULL DEFAULT 'single',
  `postal_office_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `risk_override_date` int unsigned DEFAULT '0',
  `onboard_country_id` smallint unsigned NOT NULL DEFAULT '209',
  `pricing_tier` smallint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `suspended_idx` (`is_suspended`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_globegistics_manifest` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shipping_label_manifest_id` bigint unsigned NOT NULL,
  `globegistics_manifest_id` bigint unsigned NOT NULL DEFAULT '0',
  `upload_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending' COMMENT 'If and how we manifested this label to Globegistics',
  `upload_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`shipping_label_manifest_id`),
  KEY `globegistics_manifest_id` (`globegistics_manifest_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `upload_status` (`upload_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_images` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shipping_label_image_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `image` mediumblob NOT NULL,
  `image_expire_date` int unsigned NOT NULL,
  `type` varchar(100) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `sort` smallint unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`shipping_label_image_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `image_expire_date` (`image_expire_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_manifests` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shipping_label_manifest_id` bigint unsigned NOT NULL,
  `record_type` smallint unsigned NOT NULL DEFAULT '0',
  `batch_number` smallint unsigned NOT NULL DEFAULT '0',
  `batch` varchar(14) DEFAULT '',
  `manifest_number` varchar(14) DEFAULT '',
  `site_id` varchar(5) DEFAULT '',
  `manifest_date` int unsigned DEFAULT '0',
  `upload_date` int unsigned DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`shipping_label_manifest_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `manifest_number` (`manifest_number`,`record_type`),
  KEY `upload` (`upload_date`,`batch`,`record_type`),
  KEY `batch` (`batch`,`record_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_metrics` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shipping_label_metric_id` bigint unsigned NOT NULL,
  `click_count` int unsigned NOT NULL COMMENT 'The number of clicks the seller performed when purchasing this label',
  `keypress_count` int unsigned NOT NULL COMMENT 'The number of keypresses the seller performed when purchasing this label',
  `elapsed_ms` int unsigned NOT NULL COMMENT 'The number of ms that elapsed while the seller was purchasing this label',
  `ui_version` smallint unsigned NOT NULL COMMENT 'The version of the UI that the seller used to purchase this label',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_metric_id`),
  KEY `shipping_label` (`shop_id`,`shipping_label_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_order_defaults` (
  `shop_id` bigint unsigned NOT NULL,
  `unique_order_identifier` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `label_destination_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'domestic',
  `parent_shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`unique_order_identifier`,`label_destination_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_presets` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_preset_id` bigint unsigned NOT NULL,
  `carrier_id` smallint unsigned NOT NULL,
  `display_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `weight` decimal(9,4) DEFAULT '0.0000',
  `weight_units` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `dimension_units` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `package_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_preset_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_provider_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `provider_id` int unsigned NOT NULL,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `value` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`provider_id`,`name`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_providers` (
  `shop_id` bigint unsigned NOT NULL,
  `provider_id` int unsigned NOT NULL,
  `onboard_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `suspension_reason` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `suspension_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`provider_id`),
  KEY `deleted` (`shop_id`,`is_deleted`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_purchase_failure` (
  `shop_id` bigint unsigned NOT NULL,
  `purchase_form_uuid` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'UUID of single purchase form for one label in session',
  `purchase_session_id` bigint unsigned NOT NULL COMMENT 'ID for a purchase session, shared by all purchase failures in it',
  `num_retries` tinyint unsigned NOT NULL DEFAULT '0',
  `carrier_id` smallint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `api_shipment_json` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'JSON of the initial API shipment request for recreating later',
  `error_message` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Top-level exception message from initial purchase attempt',
  `request_source` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'ie Mobile, Web',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`purchase_form_uuid`),
  KEY `receipt_shop_idx` (`receipt_id`,`shop_id`),
  KEY `purchase_session_id` (`purchase_session_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_risk_violation` (
  `shop_id` bigint unsigned NOT NULL,
  `violation_id` bigint unsigned NOT NULL,
  `rule_type` smallint unsigned NOT NULL DEFAULT '0',
  `violation_type` smallint unsigned NOT NULL DEFAULT '0',
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'optional shipping label ID associated with risk violation',
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'optional receipt ID associated with risk violation',
  `violation_data` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT 'json data for the violation',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`violation_id`),
  KEY `type_shop_id` (`rule_type`,`shop_id`,`create_date`),
  KEY `voliation_rule_type_shop_id` (`violation_type`,`rule_type`,`shop_id`,`create_date`),
  KEY `shipping_label_id` (`shipping_label_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_scanforms` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_scanform_id` bigint NOT NULL,
  `tracking_code` varchar(40) DEFAULT NULL,
  `package_count` int unsigned NOT NULL DEFAULT '0',
  `download_count` int unsigned NOT NULL DEFAULT '0',
  `mailing_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) DEFAULT NULL,
  `first_line` varchar(255) DEFAULT NULL,
  `second_line` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `zip` varchar(255) DEFAULT NULL,
  `country_id` int unsigned DEFAULT NULL,
  `contains_refunds` tinyint(1) NOT NULL DEFAULT '0',
  `image_url` varchar(2048) NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipping_label_scanform_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`transaction_id`),
  KEY `transaction` (`shop_id`,`transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_usps_adjustments` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `usps_transaction_adjustment_item_id` bigint unsigned NOT NULL,
  `transaction_date` int unsigned NOT NULL,
  `usps_transaction_adjustment_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL DEFAULT '0' COMMENT 'the recalculated seller postage cost (may not be the amount due)',
  `fees` int unsigned NOT NULL DEFAULT '0' COMMENT 'the recalculated fees (only for duplicates)',
  `total` int unsigned NOT NULL DEFAULT '0' COMMENT 'in most cases the difference between seller paid postage and recalculated based on adjustment details',
  `is_visible` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'is the adjustment visible to the seller?',
  `issued_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'the date we issued the adjustment to the seller',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`usps_transaction_adjustment_item_id`),
  KEY `shop_adjustment_item_id` (`shop_id`,`usps_transaction_adjustment_item_id`),
  KEY `shop_label` (`shop_id`,`shipping_label_id`,`is_visible`),
  KEY `visible_issued_date` (`is_visible`,`issued_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_usps_charges` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `transaction_date` int unsigned NOT NULL,
  `usps_transaction_charge_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`transaction_date`,`usps_transaction_charge_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_usps_extracts` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `usps_extract_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`usps_extract_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_usps_manifests` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shipping_label_manifest_id` bigint unsigned NOT NULL,
  `record_type` tinyint unsigned NOT NULL DEFAULT '0',
  `origin_zip` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `upload_on_date` int unsigned NOT NULL DEFAULT '0',
  `electronic_file_number` varchar(26) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_scan_form` tinyint NOT NULL DEFAULT '0',
  `usps_manifest_upload_id` bigint unsigned NOT NULL DEFAULT '0',
  `parent_shipping_label_manifest_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Populated for refund/corrections manifests and points to the original purchase manifest',
  `state` smallint unsigned NOT NULL DEFAULT '0',
  `data_feed_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The data feed containing the acknowledgement of the manifest, data feed type depends on record_type',
  `data_feed_item_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The data feed item containing the acknowledgement of the manifest',
  `state_ready_date` int unsigned NOT NULL DEFAULT '0',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_uploading_date` int unsigned NOT NULL DEFAULT '0',
  `state_uploaded_date` int unsigned NOT NULL DEFAULT '0',
  `state_cancelled_date` int unsigned NOT NULL DEFAULT '0',
  `state_charged_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`shipping_label_manifest_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `find_unmanifested_labels` (`state`,`record_type`,`upload_on_date`,`create_date`),
  KEY `usps_manifest_upload` (`usps_manifest_upload_id`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_label_usps_rate_checks` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shipping_label_idx` (`shipping_label_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `signature_confirmation_fee` int unsigned NOT NULL,
  `delivery_confirmation_fee` int unsigned NOT NULL,
  `insured_mail_fee` int unsigned NOT NULL,
  `image_expire_date` int unsigned NOT NULL,
  `mailing_date` int unsigned NOT NULL,
  `print_count` smallint unsigned NOT NULL,
  `first_print_date` int unsigned NOT NULL,
  `latest_print_date` int unsigned NOT NULL,
  `tracking_code` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `mail_class` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `package_type` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `package_preference_id` bigint unsigned NOT NULL DEFAULT '0',
  `state` smallint unsigned NOT NULL DEFAULT '0',
  `refund_state` smallint unsigned NOT NULL DEFAULT '0',
  `refund_reason` varchar(250) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `refund_submit_date` int unsigned DEFAULT NULL,
  `refund_state_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL,
  `etsy_insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `provider_id` smallint NOT NULL DEFAULT '0',
  `provider_account_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `spi_tracking_state_update_date` int unsigned NOT NULL,
  `spi_tracking_state` smallint unsigned NOT NULL,
  `spi_destination_country_id` int unsigned NOT NULL,
  `shipping_label_scanform_id` bigint unsigned NOT NULL DEFAULT '0',
  `signature_confirmation` tinyint(1) NOT NULL DEFAULT '0',
  `delivery_confirmation` tinyint(1) NOT NULL DEFAULT '0',
  `length` decimal(10,4) DEFAULT '0.0000',
  `width` decimal(10,4) DEFAULT '0.0000',
  `height` decimal(10,4) DEFAULT '0.0000',
  `dimension_units` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `weight` decimal(10,4) DEFAULT '0.0000',
  `weight_units` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `ship_from_address_id` bigint unsigned DEFAULT '0',
  `ship_to_country_id` smallint unsigned DEFAULT NULL,
  `ship_to_delivery_point` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_to_phone_number` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `receipt_shipping_id` bigint unsigned DEFAULT '0',
  `shipment_id` bigint unsigned NOT NULL DEFAULT '0',
  `insurance_value` int unsigned DEFAULT NULL,
  `is_confirmed_ship_to` tinyint unsigned DEFAULT NULL,
  `origin_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `subtotal_postage` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `usd_total` int unsigned NOT NULL DEFAULT '0',
  `usd_insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `usd_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `volumetric_weight` int unsigned NOT NULL DEFAULT '0',
  `etsy_total` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_total` int unsigned NOT NULL DEFAULT '0',
  `credit_id` bigint unsigned NOT NULL DEFAULT '0',
  `insurance_provider_id` smallint unsigned NOT NULL DEFAULT '0',
  `insurance_provider_submission_id` varchar(150) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `insurance_provider_submission_date` int unsigned NOT NULL DEFAULT '0',
  `insurance_provider_void_date` int unsigned NOT NULL DEFAULT '0',
  `irregular_surcharge` int unsigned NOT NULL DEFAULT '0' COMMENT 'USPS irregular surcharge for First Class Package Services',
  `carrier_id` bigint unsigned NOT NULL DEFAULT '0',
  `parent_shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `parent_shipment_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` smallint unsigned NOT NULL DEFAULT '0',
  `return_state` smallint unsigned NOT NULL DEFAULT '0',
  `return_state_date` int unsigned NOT NULL DEFAULT '0',
  `ship_from_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_phone_number` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `ship_from_country_id` int unsigned DEFAULT NULL,
  `pickup_state` tinyint unsigned NOT NULL DEFAULT '0',
  `customs_number` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `vat_code` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Covers VAT, IOSS, Singapore GST, and similar import codes',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `receipt` (`shop_id`,`receipt_id`),
  KEY `state` (`shop_id`,`state`),
  KEY `refund_state` (`shop_id`,`refund_state`),
  KEY `refunds` (`refund_state`,`refund_submit_date`),
  KEY `shop_scan_form` (`shop_id`,`shipping_label_scanform_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date_and_refund_state` (`create_date`,`refund_state`),
  KEY `shop_create_idx` (`shop_id`,`create_date`),
  KEY `insurance_submission_idx` (`insurance_provider_id`,`insurance_provider_submission_id`),
  KEY `insurance_void_idx` (`insurance_provider_id`,`refund_state`,`insurance_provider_void_date`),
  KEY `parent_shipping_label_idx` (`shop_id`,`parent_shipping_label_id`),
  KEY `shop_type_idx` (`shop_id`,`type`),
  KEY `shop_carrier_pickup_state_idx` (`shop_id`,`carrier_id`,`pickup_state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_australia_post` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL COMMENT 'the contract cost for Etsy',
  `fuel_surcharge` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `international_surcharge` int unsigned NOT NULL DEFAULT '0',
  `gst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'AUD',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in AUD',
  `destination_zone` int unsigned NOT NULL DEFAULT '0' COMMENT 'the destination zone (international only)',
  `rated_weight` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the weight (kg) used to determine the postage',
  `gst_rate` int unsigned NOT NULL DEFAULT '0' COMMENT 'the gst rate used',
  `version` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the rate version used',
  `transaction_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the provider transaction id',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_canada_post` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `postage` int unsigned NOT NULL DEFAULT '0',
  `automation_discount` int unsigned NOT NULL DEFAULT '0',
  `revenue_share_discount` int unsigned NOT NULL DEFAULT '0',
  `fuel_surcharge` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `oversized_fee` int unsigned NOT NULL DEFAULT '0',
  `mailing_tube_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `taxes_gst` int unsigned NOT NULL DEFAULT '0',
  `taxes_hst` int unsigned NOT NULL DEFAULT '0',
  `taxes_pst` int unsigned NOT NULL DEFAULT '0',
  `taxes_qst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_postage` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'CAD',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `insurance_value` int unsigned NOT NULL DEFAULT '0',
  `taxes_gst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_hst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_pst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_qst_rate` int unsigned NOT NULL DEFAULT '0',
  `network_surcharge` int unsigned NOT NULL DEFAULT '0',
  `net_total` int unsigned NOT NULL DEFAULT '0',
  `etsy_net_total` int unsigned NOT NULL DEFAULT '0',
  `etsy_total` int unsigned NOT NULL DEFAULT '0',
  `usd_net_total` int unsigned NOT NULL DEFAULT '0',
  `usd_total` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_net_total` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_total` int unsigned NOT NULL DEFAULT '0',
  `usd_revenue_share_discount` int unsigned NOT NULL DEFAULT '0',
  `rate_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `small_business_discount` int unsigned NOT NULL DEFAULT '0',
  `platform_discount` int unsigned NOT NULL DEFAULT '0',
  `api_shipment_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `refund_ticket_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `rate_tier` smallint unsigned NOT NULL DEFAULT '0',
  `due_amount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_canada_post_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `length` int unsigned NOT NULL DEFAULT '0',
  `width` int unsigned NOT NULL DEFAULT '0',
  `height` int unsigned NOT NULL DEFAULT '0',
  `dimension_units` varchar(4) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `weight` int unsigned NOT NULL DEFAULT '0',
  `weight_units` varchar(4) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `postage` int unsigned NOT NULL DEFAULT '0',
  `automation_discount` int unsigned NOT NULL DEFAULT '0',
  `revenue_share_discount` int unsigned NOT NULL DEFAULT '0',
  `fuel_surcharge` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `oversized_fee` int unsigned NOT NULL DEFAULT '0',
  `mailing_tube_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `taxes_gst` int unsigned NOT NULL DEFAULT '0',
  `taxes_hst` int unsigned NOT NULL DEFAULT '0',
  `taxes_pst` int unsigned NOT NULL DEFAULT '0',
  `taxes_qst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_postage` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL DEFAULT '0',
  `currency_code` varchar(3) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'CAD',
  `adjustment_total_usd` int unsigned NOT NULL DEFAULT '0',
  `adjustment_type` smallint unsigned NOT NULL DEFAULT '0',
  `adjustment_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `taxes_gst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_hst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_pst_rate` int unsigned NOT NULL DEFAULT '0',
  `taxes_qst_rate` int unsigned NOT NULL DEFAULT '0',
  `network_surcharge` int unsigned NOT NULL DEFAULT '0',
  `usd_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `provider_id` int unsigned NOT NULL DEFAULT '6',
  `invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `invoice_item_id` bigint unsigned NOT NULL DEFAULT '0',
  `issued_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `provider_issued_date_idx` (`provider_id`,`issued_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_canada_post_sfsb_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` varchar(20) COLLATE utf8mb4_general_ci NOT NULL,
  `type` varchar(20) COLLATE utf8mb4_general_ci NOT NULL,
  `postage_and_fees` int unsigned NOT NULL,
  `taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'CAD',
  `total_usd` int unsigned NOT NULL DEFAULT '0',
  `weight` int unsigned NOT NULL DEFAULT '0',
  `weight_units` varchar(2) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'g',
  `length` decimal(8,2) NOT NULL DEFAULT '0.00',
  `width` decimal(8,2) NOT NULL DEFAULT '0.00',
  `height` decimal(8,2) NOT NULL DEFAULT '0.00',
  `dimension_units` varchar(2) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'cm',
  `rate_code` varchar(2) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `origin_postal_code` varchar(10) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `rate_tier` smallint unsigned NOT NULL DEFAULT '0',
  `usd_fx_rate` int unsigned NOT NULL DEFAULT '0',
  `invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `invoice_item_id` bigint unsigned NOT NULL DEFAULT '0',
  `state_pending_date` int unsigned NOT NULL,
  `state_issued_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `state_issued_date` (`state_issued_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_dhl_global_asia` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL COMMENT 'the contract cost for Etsy',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `gst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in USD',
  `zone` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'destination zone',
  `rated_weight` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the weight used in the rating table',
  `gst_rate` int unsigned NOT NULL DEFAULT '0' COMMENT 'gst percentage',
  `version` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'rating version',
  `shipment_id` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the Yakit shipment identifier',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shipment_id` (`shipment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_evri_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `invoice_item_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the EVRi invoice item representing the charge',
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The state of the adjustment (pending, issued, etc)',
  `adjustment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The type of the adjustment (charge, credit)',
  `invoice_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The type of invoice (domestic, international)',
  `total` int unsigned NOT NULL COMMENT 'The total amount of the adjustment',
  `currency_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `invoice_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the EVRi invoice',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_issued_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`invoice_item_id`),
  KEY `state_issued_date` (`state_issued_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `invoice_id` (`invoice_id`,`invoice_item_id`),
  KEY `invoice_type` (`invoice_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_fedex` (
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `destination_property_type` varchar(15) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'whether destination is commercial or residential',
  `delivery_day_type` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT 'is it being delivered on a saturday or a weekday',
  `delivery_commitment_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'date and time FedEx guarantees delivery, 0 if no guarantee',
  `postage_cost` int unsigned NOT NULL DEFAULT '0',
  `etsy_postage_cost` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL DEFAULT '0',
  `etsy_total` int unsigned NOT NULL DEFAULT '0',
  `fuel_surcharge` int unsigned NOT NULL DEFAULT '0',
  `delivery_area_surcharge` int unsigned NOT NULL DEFAULT '0' COMMENT 'applies to certain zip codes and all of AL + HI, for both residential and commercial addresses',
  `additional_handling_surcharge` int unsigned NOT NULL DEFAULT '0' COMMENT 'for packages with larger dimensions / weights but still not oversize, not combined with oversize',
  `oversize_charge` int unsigned NOT NULL DEFAULT '0',
  `residential_address_fee` int unsigned NOT NULL DEFAULT '0',
  `saturday_delivery_fee` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0' COMMENT 'shipsurance fees for purchased insurance',
  `address_correction_fee` int unsigned NOT NULL DEFAULT '0',
  `miscellaneous_fees` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `signature_confirmation_type` int NOT NULL DEFAULT '0',
  `commercial_invoice_pdf` mediumblob,
  `num_commercial_invoices_to_print` int unsigned NOT NULL DEFAULT '0',
  `num_labels_to_print` int unsigned NOT NULL DEFAULT '1',
  `num_auxiliary_labels_to_print` int unsigned NOT NULL DEFAULT '0',
  `rate_zone` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `billing_weight` float(6,1) NOT NULL DEFAULT '0.0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_fedex_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `invoice_item_id` bigint unsigned NOT NULL,
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `adjustment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `total` int unsigned NOT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `invoice_file_id` bigint unsigned NOT NULL,
  `invoice_id` bigint unsigned NOT NULL,
  `state_pending_date` int unsigned NOT NULL,
  `state_issued_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`invoice_item_id`),
  KEY `invoice_file_id` (`invoice_file_id`,`invoice_id`,`invoice_item_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_fedex_adjustments` (
  `shop_id` bigint unsigned NOT NULL,
  `invoice_item_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `adjustment_total_usd` int unsigned NOT NULL DEFAULT '0',
  `adjustment_type` smallint unsigned NOT NULL DEFAULT '0',
  `adjustment_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`invoice_item_id`),
  KEY `shipping_label_id` (`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `adjustment_date` (`adjustment_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_fedex_claim` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `tracking_number` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shipped_date` int unsigned NOT NULL,
  `item_amount` int unsigned NOT NULL,
  `shipping_amount` int unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `currency_code` char(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `reason` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state_created_date` int unsigned NOT NULL,
  `state_submitted_date` int unsigned NOT NULL,
  `state_approved_date` int unsigned NOT NULL,
  `state_denied_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `state` (`state`),
  KEY `state_submitted_date` (`state_submitted_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_globegistics_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The state of the adjustment (pending, issued, etc)',
  `amount` int unsigned NOT NULL COMMENT 'The amount of the adjustment (postage)',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The adjusted mail class when weight exceeds 4 lbs (priority)',
  `weight` decimal(9,4) NOT NULL,
  `weight_units` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `invoice_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Globegistics invoice',
  `invoice_item_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Globegistics invoice item representing the Globe charge',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_issued_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `etsy_amount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `state_issued_date_idx` (`state_issued_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_hermes_deprecated` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL,
  `insured_mail_fee` int unsigned NOT NULL,
  `subtotal_postage` int unsigned NOT NULL,
  `subtotal_fees` int unsigned NOT NULL,
  `subtotal_taxes` int unsigned NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'GBP',
  `vat` int unsigned NOT NULL,
  `vat_rate` float NOT NULL,
  `rated_weight` float NOT NULL,
  `rated_weight_units` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `region` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `version` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `aggregator_id` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shop_shipping_labels_hermes_create_date` (`create_date`),
  KEY `shop_shipping_labels_hermes_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_marketing_email` (
  `shop_id` bigint unsigned NOT NULL,
  `marketing_email_id` bigint unsigned NOT NULL,
  `campaign_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `sent_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`marketing_email_id`),
  KEY `shop_campaign` (`shop_id`,`campaign_name`),
  KEY `shop_campaign_sent` (`campaign_name`,`sent_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_psp_costs` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `psp_postage_cost` int unsigned NOT NULL,
  `subtotal_fees` int unsigned NOT NULL,
  `psp_total` int unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `usps_zone` smallint unsigned NOT NULL DEFAULT '0',
  `psp_zone` smallint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_royal_mail` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `taxes_vat` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL,
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'GBP',
  `rated_weight` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The weight used to rate the label',
  `zone` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The zone used to rate the label',
  `package_size` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The size of the package type (Large Letter, Small Parcel, etc)',
  `version` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The version used to rate this label',
  `insurance_value` int unsigned NOT NULL DEFAULT '0',
  `indicia_string` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The indicia included on the label Etsy generates (returned by Royal Mail)',
  `oned_barcode` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '' COMMENT 'The 1DBarcode used for the QR Codes string generation (returned by Royal Mail)',
  `post_by_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'The post by date included on the label Etsy generates (returned by Royal Mail)',
  `profit` decimal(4,3) NOT NULL DEFAULT '0.000',
  `shipment_identifier` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Field in REST API purchase response. UUID',
  `shipment_reference` varchar(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Field in REST API purchase response. UUID',
  `qr_code_content` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Field in REST API purchase response. Text contents of QR Code',
  `collection_id` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Field in REST API for pick up id',
  `timeslot_reservation_id` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Field in REST API for pick up timeslot',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_shippo` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL,
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0' COMMENT 'shipsurance fees for purchased insurance',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `transaction_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `refund_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `rate_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `carrier_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `parcel_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `eta` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'As reported by Shippo in transaction response',
  `provider` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Shippo provider constant',
  `servicelevel_token` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Shippo service constant',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_shiprocket` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `freight_charge` int unsigned NOT NULL,
  `cod_charge` int unsigned NOT NULL DEFAULT '0',
  `coverage_charge` int unsigned NOT NULL DEFAULT '0',
  `entry_tax` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'INR',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in INR',
  `applied_weight` float(6,2) NOT NULL DEFAULT '0.00' COMMENT 'the weight used by Shiprocket when rating',
  `shiprocket_order_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'the Shiprocket order identifier',
  `shiprocket_shipment_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'the Shiprocket shipment identifier',
  `pickup_date` int unsigned NOT NULL DEFAULT '0',
  `pickup_token_number` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `routing_code` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shiprocket_shipment_id` (`shiprocket_shipment_id`),
  KEY `shiprocket_order_id` (`shiprocket_order_id`),
  KEY `carrier_id` (`carrier_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_shiprocket_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The state of the adjustment (pending, issued, etc)',
  `adjustment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The type of the adjustment (charge, credit)',
  `total` int unsigned NOT NULL COMMENT 'The total amount of the adjustment',
  `currency_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `invoice_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Shiprocket invoice',
  `invoice_item_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Shiprocket invoice item representing the charge',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_issued_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `state_issued_date` (`state_issued_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_ups_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `invoice_item_id` bigint unsigned NOT NULL,
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `adjustment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `total` int unsigned NOT NULL,
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `invoice_id` bigint unsigned NOT NULL,
  `state_pending_date` int unsigned NOT NULL,
  `state_issued_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`invoice_item_id`),
  KEY `invoice_id` (`invoice_id`,`invoice_item_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_usps` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL,
  `delivery_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `length_fee` int unsigned NOT NULL DEFAULT '0',
  `cube_fee` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL,
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL,
  `zone` smallint unsigned NOT NULL DEFAULT '0',
  `price_group` smallint unsigned NOT NULL DEFAULT '0',
  `rated_weight` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `dimensional_weight_pounds` decimal(8,2) NOT NULL DEFAULT '0.00',
  `rate_indicator_code` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `processing_category` smallint NOT NULL DEFAULT '0',
  `pricing_tier` smallint unsigned NOT NULL DEFAULT '0',
  `contract_subtype` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `cubic_feet` decimal(9,3) NOT NULL DEFAULT '0.000',
  `cubic_tier` smallint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `irregular_surcharge` int unsigned NOT NULL DEFAULT '0' COMMENT 'USPS irregular surcharge for First Class Package Services',
  `pb_shipment_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `carrier_route_code` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_rate_type` smallint unsigned NOT NULL DEFAULT '0',
  `refund_dispute_state` smallint unsigned NOT NULL DEFAULT '0',
  `refund_dispute_id` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shipping_label_create_date_idx` (`shipping_label_id`,`create_date`),
  KEY `refund_dispute_state` (`refund_dispute_state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_usps_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `usps_adjustment_id` bigint unsigned NOT NULL DEFAULT '0',
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The state of the adjustment (issued or not).',
  `type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The type of adjustment.',
  `amount` int unsigned NOT NULL COMMENT 'The amount of the adjustment.',
  `total` int unsigned NOT NULL DEFAULT '0' COMMENT 'The sum of the adjustment, including postage (amount) and all fees.',
  `etsy_amount` int unsigned NOT NULL COMMENT 'The amount the adjustment cost Etsy.',
  `etsy_total` int unsigned NOT NULL DEFAULT '0' COMMENT 'The amount the adjustment cost Etsy (our contract rate plus USPS fees)',
  `currency_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `mail_class` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The original or adjusted mail class.',
  `package_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The original or adjusted package type.',
  `weight` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'The original or adjusted weight.',
  `weight_units` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'oz',
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'The original or adjusted length.',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'The original or adjusted width.',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'The original or adjusted height.',
  `dimension_units` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'in',
  `zone` int unsigned NOT NULL DEFAULT '0' COMMENT 'The original or adjusted zone.',
  `price_group` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The original or adjusted price group (international).',
  `origin_zip` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The original or adjusted origin zip.',
  `adjustment_reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The reason for the adjustment, if available.',
  `provider_id` smallint unsigned NOT NULL DEFAULT '10' COMMENT 'Shipping Label Provider ID, defaults to Pitney Bowes',
  `pitney_bowes_export_id` bigint unsigned NOT NULL COMMENT 'FK to the pitney bowes export.',
  `pitney_bowes_transaction_id` bigint unsigned NOT NULL COMMENT 'FK to the pitney bowes transaction.',
  `usps_revenue_assurance_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'USPS ID to dispute adjustment, if available.',
  `data_feed_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK to the associated USPS data feed.',
  `data_feed_item_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK to the associated USPS data feed item.',
  `cube_fee` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'USPS fee for volume adjustment.',
  `length_fee` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'USPS fee for length adjustment(s).',
  `non_compliance_fee` decimal(9,4) NOT NULL DEFAULT '0.0000' COMMENT 'USPS fee for non-compliance.',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_issued_date` int unsigned NOT NULL DEFAULT '0',
  `state_dispute_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_dispute_approved_date` int unsigned NOT NULL DEFAULT '0',
  `state_dispute_denied_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`usps_adjustment_id`),
  KEY `export_state_issued_date_idx` (`pitney_bowes_export_id`,`state_issued_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_adjustment_id` (`shop_id`,`usps_adjustment_id`),
  KEY `pitney_bowes_transaction_idx` (`pitney_bowes_transaction_id`,`shop_id`),
  KEY `data_feed_item_idx` (`data_feed_item_id`,`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_yakit_adjustment` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The state of the adjustment (pending, issued, etc)',
  `type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The type of the adjustment (charge, credit)',
  `postage_and_fees` int unsigned NOT NULL COMMENT 'The postage and fees component of the adjustment',
  `taxes` int unsigned NOT NULL COMMENT 'The taxes component of the adjustment',
  `total` int unsigned NOT NULL COMMENT 'The total amount of the adjustment',
  `currency_code` char(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `weight` decimal(9,3) NOT NULL,
  `weight_units` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `invoice_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Yakit invoice',
  `invoice_item_id` bigint unsigned NOT NULL COMMENT 'Foreign key to the Yakit invoice item representing the charge',
  `state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `state_issued_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`,`invoice_item_id`),
  KEY `state_issued_date` (`state_issued_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_yakit_dhl_express` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL COMMENT 'the contract cost for Etsy',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `fuel_surcharge` int unsigned NOT NULL DEFAULT '0',
  `oversize_fee` int unsigned NOT NULL DEFAULT '0',
  `remote_area_charge` int unsigned NOT NULL DEFAULT '0',
  `gst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in USD',
  `zone` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'destination zone',
  `rated_weight` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the weight used in the rating table',
  `gst_rate` int unsigned NOT NULL DEFAULT '0' COMMENT 'gst percentage',
  `version` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'rating version',
  `shipment_id` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the Yakit shipment identifier',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_yakit_dtdc_asendia` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL COMMENT 'the contract cost for Etsy',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `gst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in USD',
  `rated_zone` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'destination zone',
  `rated_weight` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the weight used in the rating table',
  `gst_rate` int unsigned NOT NULL DEFAULT '0' COMMENT 'gst percentage',
  `version` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'rating version',
  `shipment_id` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the Yakit shipment identifier',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shipment_id` (`shipment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_labels_yakit_one_world` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `postage_cost` int unsigned NOT NULL,
  `etsy_postage_cost` int unsigned NOT NULL COMMENT 'the contract cost for Etsy',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `gst` int unsigned NOT NULL DEFAULT '0',
  `subtotal_fees` int unsigned NOT NULL DEFAULT '0',
  `subtotal_taxes` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL,
  `etsy_total` int unsigned NOT NULL COMMENT 'the total cost to Etsy (contract postage + fees)',
  `currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `insurance_value` int unsigned NOT NULL DEFAULT '0' COMMENT 'the insurance value in USD',
  `rated_zone` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'destination zone',
  `rated_weight` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the weight used in the rating table',
  `gst_rate` int unsigned NOT NULL DEFAULT '0' COMMENT 'gst percentage',
  `version` varchar(25) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'rating version',
  `shipment_id` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the Yakit shipment identifier',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shipment_id` (`shipment_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_local_delivery_data` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `market` int unsigned NOT NULL DEFAULT '0' COMMENT 'The delivery market this data applies to',
  `address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Foreign key to etsy_shard.users_addresses',
  `phone` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_enabled` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `pickup_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'User input field clarifying pickup information',
  PRIMARY KEY (`shop_id`,`market`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_local_delivery_schedule` (
  `shop_id` bigint unsigned NOT NULL,
  `market` int unsigned NOT NULL DEFAULT '0' COMMENT 'The delivery market this data applies to',
  `local_delivery_schedule_id` bigint unsigned NOT NULL,
  `weekday` tinyint NOT NULL DEFAULT '0' COMMENT 'Numeric representation of the day of the week, 0 (for Sunday) through 6 (for Saturday)',
  `start_hour` tinyint NOT NULL DEFAULT '0' COMMENT '24-hour format in markets timezone',
  `end_hour` tinyint NOT NULL DEFAULT '0' COMMENT '24-hour format in markets timezone',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`market`,`local_delivery_schedule_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_packaging_order` (
  `shop_id` bigint unsigned NOT NULL,
  `packaging_order_id` bigint unsigned NOT NULL,
  `provider_id` bigint unsigned NOT NULL,
  `order_state` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `second_line` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `city` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `zip` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `country_id` smallint unsigned NOT NULL,
  `sku_number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `quantity` smallint NOT NULL,
  `filename` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'provider sftp filename',
  `file_path` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'S3 file path',
  `file_size_bytes` int unsigned NOT NULL DEFAULT '0',
  `order_state_pending_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_uploading_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_uploaded_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_upload_failed_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_void_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_shipped_date` int unsigned NOT NULL DEFAULT '0',
  `order_state_completed_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`packaging_order_id`),
  KEY `order_state` (`provider_id`,`order_state`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_packaging_order_shipment` (
  `shop_id` bigint unsigned NOT NULL,
  `packaging_order_id` bigint unsigned NOT NULL,
  `packaging_order_shipment_id` bigint unsigned NOT NULL,
  `shipped_quantity` smallint unsigned NOT NULL,
  `shipped_date` int unsigned NOT NULL,
  `delivered_date` int unsigned NOT NULL DEFAULT '0',
  `tracking_code` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`packaging_order_id`,`packaging_order_shipment_id`),
  KEY `shop_id` (`shop_id`,`tracking_code`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_postmates_delivery` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `postmates_delivery_id` bigint unsigned NOT NULL,
  `receipt_shipping_id` bigint unsigned NOT NULL COMMENT 'id to the table shop_receipt_shipping',
  `external_postmates_key` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'String key sent to us by Postmates that they use to identify this delivery',
  `market` int unsigned NOT NULL DEFAULT '0' COMMENT 'The delivery market this delivery applies to',
  `is_test` tinyint unsigned NOT NULL DEFAULT '0',
  `delivery_status` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Delivery status string that we get from Postmates',
  `request_state` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Enum that tells us the state of the delivery request relative to the Postmates API',
  `delivery_fee` int unsigned NOT NULL COMMENT 'The amount Postmates charged us for this delivery, in the lowest denomination for the current currency',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The currency code for the Postmates delivery fee',
  `estimated_pickup_date` int unsigned NOT NULL DEFAULT '0',
  `estimated_dropoff_date` int unsigned NOT NULL DEFAULT '0',
  `dropoff_deadline_date` int unsigned NOT NULL DEFAULT '0',
  `pickup_address_id` bigint unsigned NOT NULL,
  `pickup_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `pickup_latitude` double DEFAULT NULL,
  `pickup_longitude` double DEFAULT NULL,
  `dropoff_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `dropoff_latitude` double DEFAULT NULL,
  `dropoff_longitude` double DEFAULT NULL,
  `courier_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_phone` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_vehicle` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_image_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_latitude` double DEFAULT NULL,
  `courier_longitude` double DEFAULT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`postmates_delivery_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_profile_calculated_options` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_profile_id` bigint unsigned NOT NULL DEFAULT '0',
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The mail class name associated with this option (eg "priority")',
  `shipping_carrier_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The shipping carrier associated with this option (eg USPS, CP)',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Denotes the option was deleted',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_profile_id`,`shipping_carrier_id`,`mail_class`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_profile_suggestions` (
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_profile_id` bigint unsigned NOT NULL DEFAULT '0',
  `inferred_mail_class` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `inferred_mail_class_method` tinyint unsigned DEFAULT NULL,
  `inferred_mail_class_save_date` int unsigned DEFAULT NULL COMMENT 'Timestamp of when shop saved inferred mail class',
  `inferred_mail_class_calculated_date` int unsigned DEFAULT NULL COMMENT 'Timestamp of when the inferred mail class was calculated by Etsy',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_profile_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_return_labels` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `state` smallint unsigned NOT NULL DEFAULT '0',
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `package_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `weight` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `weight_units` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'oz',
  `length` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `width` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `height` decimal(9,4) NOT NULL DEFAULT '0.0000',
  `dimension_units` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'in',
  `estimated_total` int unsigned NOT NULL DEFAULT '0',
  `estimated_etsy_total` int unsigned NOT NULL DEFAULT '0',
  `total` int unsigned NOT NULL DEFAULT '0',
  `etsy_total` int unsigned NOT NULL DEFAULT '0',
  `state_printed_date` int unsigned NOT NULL DEFAULT '0',
  `state_charged_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `state_shipped_date` int unsigned NOT NULL DEFAULT '0',
  `state_delivered_date` int unsigned NOT NULL DEFAULT '0',
  `postage_cost` int unsigned NOT NULL DEFAULT '0',
  `insured_mail_fee` int unsigned NOT NULL DEFAULT '0',
  `signature_confirmation_fee` int unsigned NOT NULL DEFAULT '0',
  `etsy_postage_cost` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `shop_id_state` (`shop_id`,`state`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `delivered_charged_idx` (`state_delivered_date`,`state_charged_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_saved_notifications` (
  `shop_id` bigint unsigned NOT NULL,
  `notification_id` bigint unsigned NOT NULL,
  `title` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `content` text COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `is_default` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`notification_id`),
  KEY `create_idx` (`create_date`),
  KEY `update_idx` (`update_date`),
  KEY `active_idx` (`shop_id`,`is_deleted`),
  KEY `default_idx` (`shop_id`,`is_default`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `is_label_onboarded` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Shop is onboarded for shipping labels',
  `is_label_suspended` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Shop is suspended from purchasing shipping labels',
  `label_download_format` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The download formatting option for shipping labels (e.g. one per page, two per page, etc)',
  `customs_signature_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The name automatically applied to international shipping labels',
  `customs_description_default` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The default customs description applied to international shipping labels',
  `ship_from_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'PK to user_addresses primary ship from address',
  `ship_from_zip` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Origin zip code or zip code used for calculating shipping costs',
  `label_onboard_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `address_id` bigint unsigned NOT NULL,
  `download_preference` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'single',
  `postal_office_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `risk_override_date` int unsigned DEFAULT '0',
  `phone_number` varchar(25) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `origin_zipcode` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `default_provider_id` smallint unsigned NOT NULL DEFAULT '0',
  `default_carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  `default_domestic_label_preset_id` bigint unsigned NOT NULL DEFAULT '0',
  `default_international_label_preset_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_settings_label_provider` (
  `shop_id` bigint unsigned NOT NULL,
  `provider_id` smallint NOT NULL,
  `is_enabled` tinyint(1) NOT NULL DEFAULT '1' COMMENT 'Represents whether or not the shop can use the provider',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`provider_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_shippo_account` (
  `shop_id` bigint unsigned NOT NULL,
  `account_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_shippo_tenant_carrier_account` (
  `shop_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `carrier_object_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_active` tinyint unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`carrier_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_shiprocket_manifest` (
  `shop_id` bigint unsigned NOT NULL,
  `manifest_id` bigint unsigned NOT NULL,
  `manifest_pdf_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`manifest_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_shiprocket_merchant` (
  `shop_id` bigint unsigned NOT NULL,
  `merchant_api_user_id` bigint unsigned NOT NULL,
  `merchant_role_id` bigint unsigned NOT NULL,
  `merchant_signup_user_id` bigint unsigned NOT NULL,
  `merchant_company_id` bigint unsigned NOT NULL,
  `merchant_email` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `merchant_password` varchar(35) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `shiprocket_pickup_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `registration_token` varchar(400) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `registration_date` int unsigned NOT NULL,
  `is_verified` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`),
  KEY `merchant_email` (`merchant_email`),
  KEY `shiprocket_pickup_address_id` (`shiprocket_pickup_address_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_shiprocket_pickup_shipping_label` (
  `shop_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `pickup_token_number` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'ID provided by API response to scheduling',
  `manifest_id` bigint DEFAULT NULL COMMENT 'unique ID we generate internally and assign to group shipments together IF multiple labels belong to the same manifest',
  `pickup_date` bigint unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL COMMENT 'see Shipping_Provider_Shiprocket_ShipmentStatus',
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`shipping_label_id`),
  KEY `pickup_date` (`pickup_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `manifest_id` (`shop_id`,`manifest_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_suggested_dimensions` (
  `taxonomy_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The common taxonomy id for seed listings',
  `cost_bucket` int NOT NULL DEFAULT '0' COMMENT 'The cost bucket, rounded to the nearest $5 in USD cents, for seed listings embodied in this record',
  `weight_bucket` decimal(10,0) unsigned NOT NULL DEFAULT '0' COMMENT 'The weight bucket, rounded to the nearest 80 ounces (5 lb), among seed listings for these categories',
  `length` decimal(10,0) unsigned NOT NULL DEFAULT '0' COMMENT 'The average height, in inches, among seed listings for these categories',
  `width` decimal(10,0) unsigned NOT NULL DEFAULT '0' COMMENT 'The average width, in inches, among seed listings for these categories',
  `height` decimal(10,0) unsigned NOT NULL DEFAULT '0' COMMENT 'The average height, in inches, among seed listings for these categories',
  `listing_count` int unsigned NOT NULL DEFAULT '0' COMMENT 'The total number of listings that have been seeded into these averages',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`taxonomy_id`,`cost_bucket`,`weight_bucket`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_usps_pickup` (
  `shop_id` bigint unsigned NOT NULL,
  `usps_pickup_id` bigint unsigned NOT NULL,
  `pickup_date` char(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `usps_confirmation_number` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '0',
  `address_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `address_first_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_second_line` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_city` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_state` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_zip` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `address_country_id` smallint unsigned NOT NULL,
  `address_phone_number` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `package_count` smallint unsigned NOT NULL,
  `weight` decimal(10,4) NOT NULL,
  `weight_units` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'oz',
  `usps_package_count` smallint unsigned NOT NULL,
  `usps_weight` decimal(10,4) NOT NULL,
  `has_letters_or_flats` tinyint unsigned NOT NULL DEFAULT '0',
  `package_location` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `special_instructions` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state_scheduled_date` int unsigned NOT NULL DEFAULT '0',
  `state_canceled_date` int unsigned NOT NULL DEFAULT '0',
  `state_received_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`usps_pickup_id`),
  KEY `shop_date_state_idx` (`shop_id`,`pickup_date`,`state`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_usps_pickup_shipping_label` (
  `shop_id` bigint unsigned NOT NULL,
  `usps_pickup_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`usps_pickup_id`,`shipping_label_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_yakit_mail_class` (
  `shop_id` bigint unsigned NOT NULL,
  `carrier_id` int unsigned NOT NULL,
  `mail_class` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `enabled` tinyint unsigned NOT NULL DEFAULT '0',
  `first_enabled_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`carrier_id`,`mail_class`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_yakit_merchant_documents` (
  `shop_id` bigint unsigned NOT NULL,
  `document_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'see Shipping_Label_Yakit_MerchantDocuments_Type enum',
  `document_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending' COMMENT 'see Shipping_Label_Yakit_MerchantDocuments_Status enum',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`document_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_yakit_pickup` (
  `shop_id` bigint unsigned NOT NULL,
  `yakit_pickup_id` bigint unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`yakit_pickup_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_pickup_state_idx` (`shop_id`,`yakit_pickup_id`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shipping_yakit_pickup_shipping_label` (
  `shop_id` bigint unsigned NOT NULL,
  `yakit_pickup_id` bigint unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `pickup_date` int unsigned NOT NULL,
  `confirmation_number` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Not available for all carriers',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`yakit_pickup_id`,`shipping_label_id`),
  KEY `pickup_date` (`pickup_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shoppost_comment_notifications` (
  `notification_id` bigint unsigned NOT NULL COMMENT 'Unique identifier',
  `shop_id` bigint unsigned NOT NULL COMMENT 'The id of the shop that created the post. Shardifier',
  `comment_id` bigint unsigned NOT NULL COMMENT 'The id of the comment that generated this notification',
  `post_id` bigint unsigned NOT NULL COMMENT 'The id of the post of the comment that generated this notification',
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that is getting notified about a comment',
  `read_date` int DEFAULT NULL COMMENT 'The timestamp the user saw the notification. Null until the user sees the notification',
  `reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The reason the user is getting notified about a comment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`notification_id`,`shop_id`),
  KEY `post_shop` (`post_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id__read_date` (`shop_id`,`read_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_shoppost_comments` (
  `comment_id` bigint unsigned NOT NULL COMMENT 'unique identifier',
  `shop_id` bigint unsigned NOT NULL COMMENT 'id of the shop that created the shop post. Shardifier',
  `shop_post_id` bigint unsigned NOT NULL COMMENT 'id of shop post in the shop_posts table',
  `user_id` bigint unsigned NOT NULL COMMENT 'id of the user that created the shop post comment',
  `comment_text` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'user created comment on shop post',
  `parent_comment_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'defined when this is a reply comment',
  `moderation_flags` int unsigned NOT NULL DEFAULT '0' COMMENT 'bit field of moderation actions taken on comment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`comment_id`,`shop_post_id`,`shop_id`),
  KEY `shop_post_shop` (`shop_post_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_square` (
  `shop_id` bigint unsigned NOT NULL,
  `access_token` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `access_token_expiration_date` int unsigned NOT NULL,
  `last_synced_date` int unsigned DEFAULT NULL,
  `square_location_id` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `square_shop_name` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `square_location_name` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`),
  KEY `access_token_expiration_date_idx` (`access_token_expiration_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_srr` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_srr_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `risk_rating` tinyint unsigned NOT NULL DEFAULT '0',
  `run_date` int unsigned NOT NULL DEFAULT '0',
  `is_eea` tinyint unsigned DEFAULT NULL,
  `is_business` tinyint unsigned DEFAULT NULL,
  `is_newly_onboarded` tinyint unsigned DEFAULT NULL,
  `is_first_sale` tinyint unsigned DEFAULT NULL,
  `seller_country_id` int unsigned DEFAULT NULL,
  `last_disbursement_date` int unsigned DEFAULT NULL,
  `reached_50k_in_gms` tinyint unsigned DEFAULT NULL,
  `shop_srr_source` tinyint unsigned NOT NULL DEFAULT '0',
  `admin_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_srr_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_srr_rules_tripped` (
  `shop_srr_rules_tripped_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shop_srr_id` bigint unsigned NOT NULL,
  `rule_tripped` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `rule_attribute` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `rule_value` varchar(1024) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_srr_rules_tripped_id`),
  KEY `shop_srr_id` (`shop_srr_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_country_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` bigint NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `country_code` varchar(2) NOT NULL,
  `hit_count` int DEFAULT '0',
  `sales` int DEFAULT '0',
  `quantity` int DEFAULT '0',
  `revenue` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`view_id`,`view_type`,`country_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_country_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` bigint NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `country_code` varchar(2) NOT NULL,
  `hit_count` int DEFAULT '0',
  `sales` int DEFAULT '0',
  `quantity` int DEFAULT '0',
  `revenue` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`view_id`,`view_type`,`country_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_country_monthly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` bigint NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `country_code` varchar(2) NOT NULL,
  `hit_count` int DEFAULT '0',
  `sales` int DEFAULT '0',
  `quantity` int DEFAULT '0',
  `revenue` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`view_id`,`view_type`,`country_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_domain_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `domain` varchar(255) NOT NULL,
  `domain_source` varchar(64) NOT NULL DEFAULT '',
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`domain`,`view_id`,`view_type`,`domain_source`),
  KEY `shop_stats_domain_daily_shop_id_view_id_idx` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_domain_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `domain` varchar(255) NOT NULL,
  `domain_source` varchar(64) NOT NULL DEFAULT '',
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`domain`,`view_id`,`view_type`,`domain_source`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_domain_monthly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `domain` varchar(255) NOT NULL,
  `domain_source` varchar(64) NOT NULL DEFAULT '',
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`domain`,`view_id`,`view_type`,`domain_source`),
  KEY `shop_stats_domain_monthly_shop_id_view_id_idx` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_downtime` (
  `shop_id` bigint unsigned NOT NULL,
  `downtime_start` int NOT NULL,
  `downtime_duration` int NOT NULL,
  `status` smallint NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`downtime_start`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_events` (
  `shop_stats_events_id` bigint unsigned NOT NULL COMMENT 'Ticket generated pkey.',
  `shop_id` bigint unsigned NOT NULL COMMENT 'The id of the shop this event pertains to. (Shard key.)',
  `user_id` bigint unsigned NOT NULL COMMENT 'The id of the user that caused this event.',
  `event_type_id` smallint unsigned NOT NULL COMMENT 'Indicates what kind of event this is.',
  `object_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'The id of the target of the event. 0 means N/A.',
  `object_type_id` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Indicates what object_id identifies. 0 means N/A.',
  `event_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Date at which the event occurred.',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_stats_events_id`),
  KEY `events_by_shop_date_type_idx` (`shop_id`,`event_date`,`event_type_id`),
  KEY `shop_objects_idx` (`shop_id`,`object_type_id`,`object_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores shop events caused by a user resulting in / targeting';

CREATE TABLE `shop_stats_listing_sales_update_marker` (
  `shop_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_listing_views` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `views` int unsigned NOT NULL DEFAULT '1',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`),
  KEY `listing_id` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_listing_views_monthly_snapshots` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `reference_timestamp` int NOT NULL,
  `views` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`reference_timestamp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_milestones` (
  `shop_id` bigint unsigned NOT NULL,
  `milestone_type` int unsigned NOT NULL,
  `milestone_subtype` int unsigned NOT NULL,
  `milestone_data` text,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`milestone_type`,`milestone_subtype`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_daily` (
  `id` bigint NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL,
  `total` float NOT NULL DEFAULT '0',
  `order_count` int NOT NULL DEFAULT '0',
  `sales_year` int NOT NULL DEFAULT '0',
  `sales_month` int NOT NULL DEFAULT '0',
  `sales_day` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `channel` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_daily_sales_idx` (`shop_id`,`sales_year`,`sales_month`,`sales_day`,`currency_code`,`channel`),
  KEY `monthly_stats` (`shop_id`,`sales_year`,`sales_month`,`currency_code`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_daily_v2` (
  `id` bigint NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL,
  `total` int NOT NULL DEFAULT '0',
  `order_count` int NOT NULL DEFAULT '0',
  `sales_year` int NOT NULL DEFAULT '0',
  `sales_month` int NOT NULL DEFAULT '0',
  `sales_day` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `total_cost` int NOT NULL DEFAULT '0',
  `precoupon_total` int NOT NULL DEFAULT '0',
  `shipping` int NOT NULL DEFAULT '0',
  `costs_complete` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`,`shop_id`,`currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_daily_v3` (
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` int unsigned NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `total` int NOT NULL DEFAULT '0',
  `item_discount` int NOT NULL DEFAULT '0',
  `shipping` int NOT NULL DEFAULT '0',
  `shipping_discount` int NOT NULL DEFAULT '0',
  `tax` int NOT NULL DEFAULT '0',
  `cost` int NOT NULL DEFAULT '0',
  `costs_complete` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `order_count` int NOT NULL DEFAULT '0',
  `item_count` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`currency_code`),
  KEY `shop_stats_sales_daily_v3_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_monthly` (
  `id` bigint NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL,
  `total` float NOT NULL DEFAULT '0',
  `order_count` int NOT NULL DEFAULT '0',
  `sales_year` int NOT NULL DEFAULT '0',
  `sales_month` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `channel` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `yearly_stats` (`shop_id`,`sales_year`,`currency_code`),
  KEY `monthly_stats` (`shop_id`,`sales_year`,`sales_month`,`currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_monthly_v2` (
  `id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `currency_code` varchar(3) NOT NULL,
  `total` int NOT NULL DEFAULT '0',
  `order_count` int NOT NULL DEFAULT '0',
  `sales_year` int NOT NULL DEFAULT '0',
  `sales_month` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `total_cost` int NOT NULL DEFAULT '0',
  `precoupon_total` int NOT NULL DEFAULT '0',
  `shipping` int NOT NULL DEFAULT '0',
  `costs_complete` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`,`shop_id`,`currency_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_sales_monthly_v3` (
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` int unsigned NOT NULL,
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'USD',
  `total` int NOT NULL DEFAULT '0',
  `item_discount` int NOT NULL DEFAULT '0',
  `shipping` int NOT NULL DEFAULT '0',
  `shipping_discount` int NOT NULL DEFAULT '0',
  `tax` int NOT NULL DEFAULT '0',
  `cost` int NOT NULL DEFAULT '0',
  `costs_complete` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `order_count` int NOT NULL DEFAULT '0',
  `item_count` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`currency_code`),
  KEY `shop_stats_sales_monthly_v3_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_search_query_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `search_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `create_date` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `update_date` int NOT NULL,
  `search_engine_domain` varchar(255) NOT NULL,
  `query_hash` varchar(32) NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`search_engine_domain`,`query_hash`,`view_id`,`search_type`),
  KEY `shop_id_view_id` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_search_query_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `search_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `search_engine_domain` varchar(255) NOT NULL,
  `query_hash` varchar(32) NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`search_engine_domain`,`query_hash`,`view_id`,`search_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_search_query_monthly` (
  `shop_id` bigint unsigned NOT NULL,
  `search_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `search_engine_domain` varchar(255) NOT NULL,
  `query_hash` varchar(32) NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`search_engine_domain`,`query_hash`,`view_id`,`search_type`),
  KEY `shop_id_view_id` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_searchads_attributions_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `campaign_id` int NOT NULL,
  `attribution_type_id` smallint unsigned NOT NULL COMMENT 'Type of attribution (sale, fav, circle, et c.)',
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `count` int NOT NULL DEFAULT '0' COMMENT 'Number of times this attribution occurred in this period',
  `revenue_total` int NOT NULL DEFAULT '0' COMMENT 'Total revenue generated from event (when attribution_type_id ~ sale)',
  `currency_code` varchar(3) NOT NULL DEFAULT '' COMMENT 'Currency code for revenue_total or empty string if N/A',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`attribution_type_id`,`currency_code`,`campaign_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd-attributed events - daily';

CREATE TABLE `shop_stats_searchads_attributions_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `campaign_id` int NOT NULL,
  `attribution_type_id` smallint unsigned NOT NULL COMMENT 'Type of attribution (sale, fav, circle, et c.)',
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `count` int NOT NULL DEFAULT '0' COMMENT 'Number of times this attribution occurred in this period',
  `revenue_total` int NOT NULL DEFAULT '0' COMMENT 'Total revenue generated from event (when attribution_type_id ~ sale)',
  `currency_code` varchar(3) NOT NULL DEFAULT '' COMMENT 'Currency code for revenue_total or empty string if N/A',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`attribution_type_id`,`currency_code`,`campaign_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd-attributed events - hourly';

CREATE TABLE `shop_stats_searchads_attributions_monthly` (
  `shop_id` bigint unsigned NOT NULL,
  `campaign_id` int NOT NULL,
  `attribution_type_id` smallint unsigned NOT NULL COMMENT 'Type of attribution (sale, fav, circle, et c.)',
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `count` int NOT NULL DEFAULT '0' COMMENT 'Number of times this attribution occurred in this period',
  `revenue_total` int NOT NULL DEFAULT '0' COMMENT 'Total revenue generated from event (when attribution_type_id ~ sale)',
  `currency_code` varchar(3) NOT NULL DEFAULT '' COMMENT 'Currency code for revenue_total or empty string if N/A',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`attribution_type_id`,`currency_code`,`campaign_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd-attributed events - monthly';

CREATE TABLE `shop_stats_searchads_snapshot_daily_v2` (
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `keyword` varchar(255) NOT NULL COMMENT 'De-stemmed keyword that triggered adview/adclick',
  `keyword_raw` varchar(255) NOT NULL COMMENT 'Raw keyword (with stem) that triggered adview/adclick',
  `listing_id` bigint unsigned NOT NULL,
  `campaign_id` bigint unsigned NOT NULL,
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'Currency code for spent_total',
  `view_count` int DEFAULT '0' COMMENT 'Number of ad impressions in this period',
  `click_count` int DEFAULT '0' COMMENT 'Number of ad clicks in this period',
  `spent_total` int DEFAULT '0' COMMENT 'Total spent on impressions in this period',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`keyword`,`listing_id`,`campaign_id`,`currency_code`,`keyword_raw`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd views and clicks - daily';

CREATE TABLE `shop_stats_searchads_snapshot_hourly_v2` (
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `keyword` varchar(255) NOT NULL COMMENT 'De-stemmed keyword that triggered adview/adclick',
  `keyword_raw` varchar(255) NOT NULL COMMENT 'Raw keyword (with stem) that triggered adview/adclick',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing that was shown/clicked',
  `campaign_id` int NOT NULL COMMENT 'Campaign foreign key',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'Currency code for spent_total',
  `view_count` int DEFAULT '0' COMMENT 'Number of ad impressions in this period',
  `click_count` int DEFAULT '0' COMMENT 'Number of ad clicks in this period',
  `spent_total` int DEFAULT '0' COMMENT 'Total spent on impressions in this period',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`keyword`,`listing_id`,`campaign_id`,`currency_code`,`keyword_raw`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd views and clicks - hourly';

CREATE TABLE `shop_stats_searchads_snapshot_monthly_v2` (
  `shop_id` bigint unsigned NOT NULL,
  `reference_timestamp` int NOT NULL COMMENT 'Start timestamp for this period',
  `keyword` varchar(255) NOT NULL COMMENT 'De-stemmed keyword that triggered adview/adclick',
  `keyword_raw` varchar(255) NOT NULL COMMENT 'Raw keyword (with stem) that triggered adview/adclick',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing that was shown/clicked',
  `campaign_id` int NOT NULL COMMENT 'Campaign foreign key',
  `currency_code` varchar(3) NOT NULL DEFAULT 'USD' COMMENT 'Currency code for spent_total',
  `view_count` int DEFAULT '0' COMMENT 'Number of ad impressions in this period',
  `click_count` int DEFAULT '0' COMMENT 'Number of ad clicks in this period',
  `spent_total` int DEFAULT '0' COMMENT 'Total spent on impressions in this period',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`keyword`,`listing_id`,`campaign_id`,`currency_code`,`keyword_raw`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='SearchAd views and clicks - monthly';

CREATE TABLE `shop_stats_sls_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `run_date` int unsigned NOT NULL,
  `start_date` int unsigned NOT NULL,
  `end_date` int unsigned NOT NULL,
  `order_defect_rate` decimal(20,6) NOT NULL,
  `violation` tinyint unsigned NOT NULL,
  `orders_count` int unsigned NOT NULL,
  `defects_count` int unsigned NOT NULL,
  `cases_count` int unsigned NOT NULL,
  `low_reviews_count` int unsigned NOT NULL,
  `defects_to_date_count` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`run_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_syndication_daily` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `syndication_source` varchar(255) NOT NULL,
  `syndication_source_type` smallint NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`syndication_source`,`view_id`,`view_type`,`syndication_source_type`),
  KEY `shop_id_view_id` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_syndication_hourly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `syndication_source` varchar(255) NOT NULL,
  `syndication_source_type` smallint NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`syndication_source`,`view_id`,`view_type`,`syndication_source_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_stats_syndication_monthly` (
  `shop_id` bigint unsigned NOT NULL,
  `view_type` smallint NOT NULL,
  `view_id` int NOT NULL,
  `reference_timestamp` int NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `syndication_source` varchar(255) NOT NULL,
  `syndication_source_type` smallint NOT NULL,
  `hit_count` int DEFAULT '0',
  PRIMARY KEY (`shop_id`,`reference_timestamp`,`syndication_source`,`view_id`,`view_type`,`syndication_source_type`),
  KEY `shop_id_view_id` (`shop_id`,`view_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_storefronts` (
  `shop_id` bigint unsigned NOT NULL,
  `venue_type` tinyint unsigned NOT NULL,
  `storefront_id` bigint unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`venue_type`,`storefront_id`),
  KEY `storefront_id` (`storefront_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_structured_policies` (
  `shop_id` bigint unsigned NOT NULL,
  `structured_policies_id` bigint unsigned NOT NULL,
  `privacy` longtext,
  `accepts_returns` tinyint(1) NOT NULL DEFAULT '0',
  `exchanges` tinyint(1) NOT NULL DEFAULT '0',
  `contact_seller_within_days` int unsigned DEFAULT NULL,
  `return_items_within_days` int unsigned DEFAULT NULL,
  `state` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `non_refundable_custom` tinyint unsigned NOT NULL DEFAULT '1',
  `non_refundable_perishable` tinyint unsigned NOT NULL DEFAULT '1',
  `non_refundable_digital` tinyint unsigned NOT NULL DEFAULT '1',
  `non_refundable_intimate` tinyint unsigned NOT NULL DEFAULT '1',
  `privacy_flag_communication` tinyint unsigned NOT NULL DEFAULT '0',
  `privacy_flag_fulfillment` tinyint unsigned NOT NULL DEFAULT '0',
  `privacy_flag_legal` tinyint unsigned NOT NULL DEFAULT '0',
  `privacy_flag_other` tinyint unsigned NOT NULL DEFAULT '0',
  `privacy_flag_other_text` longtext,
  `accepts_cancellations` tinyint(1) DEFAULT NULL,
  `cancel_within_hours` int unsigned DEFAULT NULL,
  `non_refundable_sales` tinyint unsigned NOT NULL DEFAULT '0',
  `is_published` tinyint unsigned DEFAULT NULL,
  `additional_terms_and_conditions` longtext,
  `cancellation_window_type` int NOT NULL DEFAULT '0',
  `buyer_responsible_for_returns` tinyint NOT NULL DEFAULT '1',
  `include_conditions_of_return_text` tinyint NOT NULL DEFAULT '1',
  PRIMARY KEY (`shop_id`,`structured_policies_id`),
  KEY `state` (`state`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_structured_policies_shipping_estimate` (
  `shop_id` bigint unsigned NOT NULL,
  `structured_policies_id` bigint unsigned NOT NULL,
  `region` int unsigned NOT NULL,
  `unit` varchar(20) NOT NULL,
  `min` int unsigned NOT NULL,
  `max` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `country_id` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`structured_policies_id`,`region`,`country_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_structured_policies_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `structured_policies_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `privacy_flag_other_text` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  `additional_terms_and_conditions` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`shop_id`,`structured_policies_id`,`language`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `strucpol_shopid_idx` (`structured_policies_id`,`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_subscription_onboarding_package` (
  `onboarding_package_id` bigint unsigned NOT NULL COMMENT 'Unique generated id',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifying PK: Shop_Shop - etsy_index/shops_index.sql',
  `next_assessment_date` int unsigned DEFAULT NULL COMMENT 'The next date the package terms and conditions will be assessed. NULL = never',
  `commitment_fulfillment_date` int unsigned DEFAULT NULL COMMENT 'The date the package can be assessed as fulfilled. NULL = never',
  `state` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enumerator',
  `package_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enumerator - maps to package terms and conditions logic',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Soft delete field. 0 = not soft deleted',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`onboarding_package_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_assessment_state_idx` (`shop_id`,`state`,`next_assessment_date`,`package_type`,`is_deleted`),
  KEY `package_state_idx` (`shop_id`,`state`,`package_type`,`is_deleted`),
  KEY `is_deleted` (`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_subscription_onboarding_package_change_audit` (
  `onboarding_package_audit_id` bigint unsigned NOT NULL COMMENT 'Unique generated id',
  `onboarding_package_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.shop_subscription_onboarding_package',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifying PK: Shop_Shop - etsy_index/shops_index.sql',
  `next_assessment_date` int unsigned DEFAULT NULL COMMENT 'The package next_assessment_date on store',
  `commitment_fulfillment_date` int unsigned DEFAULT NULL COMMENT 'The package commitment_fulfillment_date on store',
  `state` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enumerator - The package status on store',
  `package_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'enumerator - The package type on store',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Soft delete field. 0 = not soft deleted',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`onboarding_package_id`,`onboarding_package_audit_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `is_deleted` (`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_subscription_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `subscription_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`subscription_id`,`receipt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_subscriptions` (
  `shop_id` bigint unsigned NOT NULL,
  `subscription_id` bigint unsigned NOT NULL,
  `buyer_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `original_receipt_id` bigint unsigned NOT NULL,
  `frequency_in_weeks` int unsigned NOT NULL,
  `coupon_id` bigint unsigned NOT NULL DEFAULT '0',
  `variation_details` blob,
  `credit_card_id` bigint unsigned NOT NULL,
  `shipping_address_id` bigint unsigned NOT NULL,
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'ACTIVE',
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'OPEN',
  `next_payment_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `cancel_date` int unsigned NOT NULL DEFAULT '0',
  `expiry_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`subscription_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `listing_id` (`shop_id`,`listing_id`),
  KEY `buyer_id` (`shop_id`,`buyer_id`),
  KEY `status` (`shop_id`,`status`),
  KEY `next_date` (`next_payment_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_suggestions_shops` (
  `shop_id` bigint unsigned NOT NULL,
  `shop_suggestion_id` bigint unsigned NOT NULL,
  `action_status` tinyint unsigned NOT NULL DEFAULT '0',
  `feedback_status` tinyint unsigned NOT NULL DEFAULT '0',
  `view_status` tinyint unsigned NOT NULL DEFAULT '0',
  `notification_sent_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `start_date` int NOT NULL DEFAULT '0',
  `end_date` int NOT NULL DEFAULT '0',
  `occurrence` int NOT NULL DEFAULT '1',
  `last_click_date` int unsigned NOT NULL DEFAULT '0',
  `first_click_date` int unsigned NOT NULL DEFAULT '0',
  `first_view_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_suggestion_id`,`occurrence`),
  KEY `notification_sent_date_idx` (`notification_sent_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_suggestion_id_idx` (`shop_suggestion_id`),
  KEY `end_date_idx` (`end_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_tax_certificates` (
  `shop_id` bigint unsigned NOT NULL,
  `tax_certificate_id` bigint unsigned NOT NULL,
  `certificate_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `expiration_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`tax_certificate_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_tax_preferences` (
  `shop_id` bigint unsigned NOT NULL,
  `id` bigint unsigned NOT NULL,
  `state` smallint DEFAULT NULL,
  `province` smallint DEFAULT NULL,
  `zip` int DEFAULT NULL,
  `zip_end` int DEFAULT NULL,
  `country` smallint DEFAULT NULL,
  `match_type` int NOT NULL DEFAULT '0',
  `name` varchar(255) NOT NULL DEFAULT '',
  `percent` int NOT NULL DEFAULT '0',
  `apply_shipping` tinyint(1) NOT NULL DEFAULT '0',
  `in_person_default` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int DEFAULT NULL,
  `disabled` tinyint unsigned NOT NULL DEFAULT '0',
  `apply_gift_wrap` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`shop_id`,`in_person_default`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_tax_region` (
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier',
  `year` smallint unsigned NOT NULL COMMENT 'Tax year region was collected for',
  `region` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO 3166-1 alpha-2 region codes',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`year`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_taxpayer_address` (
  `shop_id` bigint unsigned NOT NULL,
  `tax_year` smallint unsigned NOT NULL,
  `user_address_id` bigint unsigned NOT NULL,
  `taxpayer_id_token` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`tax_year`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_taxpayerinfo_update_logs` (
  `update_log_id` bigint unsigned NOT NULL COMMENT 'Primary key for this table',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop identifier',
  `request_id` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'API request identifier',
  `step` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Step of the TaxpayerInformation_Update process',
  `status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Status of the step - pass/fail',
  `notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Additional information if step failed or was skipped',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`update_log_id`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_tin_verifications` (
  `shop_id` bigint unsigned NOT NULL,
  `tax_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `verification_status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `verification_last_checked_at` int unsigned DEFAULT NULL,
  `taxpayer_id_token` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `tin_verification_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`tin_verification_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `idx_tin_verifications_shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_readiness_state_definition` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `readiness_state` int unsigned DEFAULT NULL,
  `min_processing_days` int unsigned DEFAULT NULL,
  `max_processing_days` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_return_policy` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `accepts_returns` tinyint NOT NULL,
  `accepts_exchanges` tinyint NOT NULL,
  `paid_by` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `return_deadline` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_review` (
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `is_anonymous` tinyint NOT NULL DEFAULT '1',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_feedback` longtext COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `shop_id_buyer_user_id` (`shop_id`,`buyer_user_id`,`is_deleted`),
  KEY `shop_id_rating` (`shop_id`,`rating`,`is_deleted`),
  KEY `shop_id_receipt_id` (`shop_id`,`receipt_id`,`is_deleted`),
  KEY `update_date` (`update_date`),
  KEY `shop_id_deleted_date_rating` (`shop_id`,`is_deleted`,`create_date`,`rating`),
  KEY `idx_listing_id_create_date` (`listing_id`,`is_deleted`,`create_date`),
  KEY `shop_id_create_date_rating_deleted` (`shop_id`,`create_date`,`rating`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_review_history` (
  `transaction_review_history_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `is_anonymous` tinyint NOT NULL DEFAULT '1',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_feedback` longtext COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`shop_id`,`transaction_id`,`transaction_review_history_id`),
  KEY `is_deleted` (`shop_id`,`transaction_id`,`is_deleted`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_review_response` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `response` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_review_response_history` (
  `transaction_review_response_history_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `response` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`transaction_id`,`transaction_review_response_history_id`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transaction_review_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `review` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `is_translatable` tinyint(1) NOT NULL DEFAULT '1',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`,`language`),
  KEY `createdate` (`create_date`),
  KEY `updatedate` (`update_date`),
  KEY `transaction_id` (`transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `title` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL,
  `quantity` int NOT NULL,
  `image_listing_id` bigint unsigned DEFAULT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `seller_feedback_id` bigint unsigned DEFAULT NULL,
  `buyer_feedback_id` bigint unsigned DEFAULT NULL,
  `transaction_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT 'listing',
  `images_listing_id` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `suppressed` tinyint(1) DEFAULT NULL,
  `tags_str` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `materials_str` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `listing_type` int DEFAULT NULL,
  `listing_inventory_id` bigint unsigned DEFAULT NULL,
  `variation_data_version` int DEFAULT NULL,
  `required_variation_details` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `optional_variation_details` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `paid_date` int unsigned DEFAULT NULL,
  `shipped_date` int unsigned DEFAULT NULL,
  `status` tinyint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `csp_country_id` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listing_id_create_date_idx` (`listing_id`,`create_date`),
  KEY `receipt_id_idx` (`receipt_id`),
  KEY `shop_id_quantity_transaction_id_idx` (`shop_id`,`quantity`,`transaction_id`),
  KEY `seller_quantity_transaction_id_idx` (`seller_user_id`,`quantity`,`transaction_id`),
  KEY `seller_user_id_transaction_id_idx` (`seller_user_id`,`transaction_id`),
  KEY `shop_id_create_date_and_more` (`shop_id`,`create_date`,`status`,`listing_id`,`receipt_id`) COMMENT 'This very specific index allows for an index only scan when performing the query in EtsyModel_Shop_Transaction::getLiveTransactionsByShopSortTime. Thus, this index is only present in the shop variant of this table, and not the user variant.',
  KEY `shop_id_listing_id_status_idx` (`shop_id`,`listing_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transactions_feedback` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `item_review_rating` tinyint DEFAULT NULL,
  `item_review_text` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `shop_id_buyer_user_id` (`shop_id`,`buyer_user_id`),
  KEY `shop_id_item_review_rating` (`shop_id`,`item_review_rating`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transactions_feedback_history` (
  `transaction_feedback_history_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `item_review_rating` tinyint DEFAULT NULL,
  `item_review_text` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`transaction_id`,`transaction_feedback_history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transactions_totals` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `buyer_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `ledger_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_pretty_price_added` int NOT NULL DEFAULT '0',
  `eur_pretty_price_added` int NOT NULL DEFAULT '0',
  `shop_pretty_price_added` int NOT NULL DEFAULT '0',
  `buyer_pretty_price_added` int NOT NULL DEFAULT '0',
  `ros_pretty_price_added` int NOT NULL DEFAULT '0',
  `ledger_pretty_price_added` int NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`receipt_id`,`transaction_id`),
  UNIQUE KEY `transaction_id` (`shop_id`,`transaction_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_transactions_totals_personalization` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `personalization_object_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `eur_price` int unsigned NOT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_price` int unsigned NOT NULL,
  `buyer_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_price` int unsigned NOT NULL,
  `ledger_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`receipt_id`,`transaction_id`,`personalization_object_id`),
  UNIQUE KEY `personalization_object_id` (`shop_id`,`transaction_id`,`personalization_object_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_vacation_notifications` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_vacation_return_notifications` (
  `shop_vacation_return_notification_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `subscriber_user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`shop_vacation_return_notification_id`),
  KEY `shop_id` (`shop_id`,`subscriber_user_id`,`listing_id`,`is_deleted`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_vacations` (
  `shop_id` bigint unsigned NOT NULL,
  `message` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `autoreply` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `start_date` int DEFAULT NULL,
  `end_date` int DEFAULT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_vacations_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `message` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `autoreply` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `is_dirty` tinyint(1) NOT NULL DEFAULT '0',
  `translation_system_id` smallint unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`language`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `shop_vat_verification_attempts` (
  `vat_verification_attempt_id` bigint unsigned NOT NULL COMMENT 'Primary key for this table',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Foreign key for shop this attempt is for',
  `taxpayer_id_token_id` bigint unsigned NOT NULL COMMENT 'Foreign key for VAT ID this attempt was made for',
  `user_address_id` bigint unsigned NOT NULL COMMENT 'Foreign key for user address for this shops seller at time of this attempt',
  `is_valid` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating if VAT ID is real according to vendor',
  `etsy_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Our determination on the validity of this VAT id for this shop',
  `vat_country_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Country tied to VAT ID, according to vendor',
  `vat_company_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Company name tied to VAT ID, according to vendor',
  `vat_address` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Address tied to VAT ID, according to vendor',
  `request_identifier` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Unique ID from vendor for this attempt',
  `shop_company_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Shop business name at the time this attempt was made',
  `verification_last_checked_at` int unsigned NOT NULL COMMENT 'Timestamp for last time this attempt was made',
  `last_active_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Set when a shop makes a newer attempt for a different VAT id',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`vat_verification_attempt_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `shop_id` (`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;


CREATE TABLE `shop_weekly_availability_settings` (
  `shop_id` bigint unsigned NOT NULL,
  `day_of_week` tinyint unsigned NOT NULL COMMENT '0-6 correlated to days of the week 0=Sunday, 1=Monday, ... 6=Saturday',
  `start_time_hour` tinyint unsigned NOT NULL COMMENT 'hr of start time (0-24)',
  `start_time_min` tinyint unsigned NOT NULL COMMENT 'minute of start time (0-59)',
  `end_time_hour` tinyint unsigned NOT NULL COMMENT 'hr of start time (0-24)',
  `end_time_min` tinyint unsigned NOT NULL COMMENT 'minute of start time (0-59)',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `is_active` tinyint NOT NULL DEFAULT '0' COMMENT 'Is this day active',
  PRIMARY KEY (`shop_id`,`day_of_week`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `sls_violation_notices` (
  `shop_id` bigint unsigned NOT NULL,
  `sls_violation_notice_id` bigint unsigned NOT NULL,
  `reason` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `staff_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `expiration_date` int DEFAULT NULL,
  `legacy` tinyint(1) NOT NULL DEFAULT '0',
  `external_id` bigint unsigned DEFAULT NULL,
  `notice_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`sls_violation_notice_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `sniffd_heartbeats_shard` (
  `heartbeats_id` bigint unsigned NOT NULL,
  `machine_id` bigint unsigned NOT NULL,
  `heartbeats` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`heartbeats_id`,`machine_id`),
  UNIQUE KEY `machine_id_idx` (`machine_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `social_marketing_hero_banners_shops` (
  `shop_id` bigint unsigned NOT NULL,
  `hero_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`hero_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `soe_module_displays` (
  `module_displays_id` bigint unsigned NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `display_count` int NOT NULL DEFAULT '0',
  `unique_date_display_count` int NOT NULL DEFAULT '0',
  `module_name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `action_taken` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`module_displays_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `soe_post_purchase_convo_recommendations` (
  `post_purchase_convo_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `module_displays_id` bigint unsigned NOT NULL,
  `convo_id` bigint unsigned DEFAULT NULL,
  `buyer_id` bigint unsigned NOT NULL,
  `buyer_image_url` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `shop_listing_id` bigint unsigned NOT NULL,
  `shop_listing_image_url` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `transaction_date` int unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `receipts_id` bigint unsigned NOT NULL,
  `action_taken` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`post_purchase_convo_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `soe_shipping_cost_change_recommendations` (
  `soe_shipping_cost_change_recommendations_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `source_shipping_profile_id` bigint unsigned NOT NULL,
  `soe_module_displays` bigint unsigned NOT NULL,
  `display_count` bigint unsigned NOT NULL DEFAULT '0',
  `first_display_date` bigint unsigned NOT NULL,
  `currency_divisor` bigint unsigned NOT NULL DEFAULT '100',
  `recommended_min_shipping` bigint unsigned NOT NULL DEFAULT '0',
  `recommended_max_shipping` bigint unsigned NOT NULL DEFAULT '0',
  `recommended_min_listing` bigint unsigned NOT NULL DEFAULT '0',
  `recommended_max_listing` bigint unsigned NOT NULL DEFAULT '0',
  `increment_amount` bigint unsigned NOT NULL DEFAULT '50',
  `action_taken` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`shop_id`,`soe_shipping_cost_change_recommendations_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `spareserve_rollup` (
  `spareserve_rollup_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `ledger_balance` bigint NOT NULL DEFAULT '0',
  `currency` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `reserve_minimum` bigint NOT NULL DEFAULT '0',
  `reserve_balance` bigint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`spareserve_rollup_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `ssat_score` (
  `buyer_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `ssat_score` tinyint NOT NULL DEFAULT '-1' COMMENT 'boolean indicating SSAT Score',
  `seller_id` bigint unsigned NOT NULL,
  `response_date` int unsigned NOT NULL DEFAULT '0',
  `convo_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_id`,`receipt_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Keep track of SSAT scores from buyers';

CREATE TABLE `stash_listings` (
  `stash_listing_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `page` int unsigned NOT NULL,
  `offset` int unsigned NOT NULL,
  `create_date` bigint NOT NULL,
  PRIMARY KEY (`user_id`,`stash_listing_id`),
  UNIQUE KEY `user_id_2` (`user_id`,`page`,`offset`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `suggestion_confirmations` (
  `listing_id` bigint unsigned NOT NULL,
  `ott_attribute_id` int NOT NULL,
  `ott_value_id` int NOT NULL DEFAULT '0',
  `suggestion_confirmation_status` int NOT NULL,
  `update_date` int DEFAULT NULL,
  `create_date` int DEFAULT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_id`,`shop_id`,`ott_attribute_id`,`ott_value_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `suppression_listing_restrictions` (
  `listing_restriction_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a listing restriction',
  `listing_id` bigint unsigned NOT NULL COMMENT 'Listing being restricted',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop that created the listing',
  `restriction` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Listing restriction (e.g. a specific region like IN)',
  `actor` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'System that made the restriction determination',
  `is_restricted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Restriction determinator. If true a listing is restricted for the given restriction.',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Soft delete flag where 0 is not deleted and 1 is deleted',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`listing_restriction_id`),
  UNIQUE KEY `listing-restriction-actor` (`listing_id`,`restriction`,`actor`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `suppression_restriction_logs` (
  `suppression_restriction_log_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a restriction log',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shop that this content restriction applies to',
  `restriction_id` bigint unsigned NOT NULL COMMENT 'Record being restricted',
  `restriction_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Type of record being restricted',
  `is_restricted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'Decision of the action that generated this log',
  `actor_id` bigint unsigned NOT NULL COMMENT 'System or person that generated this log',
  `actor_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Type of actor who generated the log',
  `notes` text COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Notes provided by actor for this logged restriction change',
  `create_date` int NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int NOT NULL DEFAULT '0' COMMENT 'Update date in epoch time',
  PRIMARY KEY (`suppression_restriction_log_id`),
  KEY `restriction_id` (`restriction_id`,`restriction_type`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `target_feedback` (
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `creator_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `target_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `feedback_id` int unsigned DEFAULT NULL,
  `feedback_type` tinyint NOT NULL DEFAULT '0',
  `message` varchar(4000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `value` int DEFAULT NULL,
  `image_feedback_id` int DEFAULT NULL,
  `kiss_and_makeup_id` int DEFAULT NULL,
  `create_date` bigint unsigned NOT NULL DEFAULT '0',
  `update_date` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`target_user_id`,`transaction_id`),
  UNIQUE KEY `feedback_id_idx` (`feedback_id`),
  KEY `creator_id` (`creator_user_id`,`feedback_type`),
  KEY `target_id` (`target_user_id`,`feedback_type`),
  KEY `transaction_id` (`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='stores the rows for the target side of a feedback instance. ';

CREATE TABLE `tax_exemption_certificates` (
  `tax_certificate_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `certificate_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`tax_certificate_id`),
  KEY `user_id_index` (`user_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tax_finalization_retries` (
  `tax_finalization_retry_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL COMMENT 'Shardifier for this table.',
  `reference_id` bigint unsigned NOT NULL COMMENT 'Referent for either a receipt or a payment adjustment, depending on whether the tax finalization attempt was for a new order or for a blue monday, er, payment adjustment such as a refund, as noted in the reference_type field.',
  `reference_type` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'This indicates the type of the reference_id field, and also the reason we attempted to finalize taxes. We usually finalize tax for a receipt because a payment was made, but we also do so for a payment adjustment, such as a refund or cancelation. See also reference_id.',
  `environment` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Can be one of prod, princess, or, in dev, the LDAP username of the engineer on whose VM the tax_finalization_retry state machine runs.',
  `status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'For example: NEW, RETRIED, FINALIZED if successful, or ABANDONED if too many retries were attempted',
  `process_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `state_retry_count` int unsigned NOT NULL DEFAULT '0',
  `next_process_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `tax_finalization_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Aligned with the same field on receipts and payment adjustments, the presence of a nonzero value here indicates the terminal state for this retry as well as giving the time the taxes were finalized.',
  PRIMARY KEY (`shop_id`,`tax_finalization_retry_id`),
  KEY `referent` (`reference_type`,`reference_id`),
  KEY `finder_index` (`environment`,`status`,`process_status`,`next_process_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `tax_finalization_retry_id` (`tax_finalization_retry_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `taxonomy_suggestion_confirmations` (
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `taxonomy_id` bigint unsigned NOT NULL DEFAULT '0',
  `suggestion_confirmation_status` int NOT NULL,
  `update_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`listing_id`,`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `team_recommendation_feedback` (
  `team_recommendation_feedback_id` bigint unsigned NOT NULL COMMENT 'primary key',
  `group_id` bigint unsigned NOT NULL COMMENT 'fk.1',
  `user_id` bigint unsigned NOT NULL COMMENT 'fk.2',
  `algorithm` varchar(255) NOT NULL COMMENT 'pseudo-fk.3, it tells us which dataset to look in',
  `score` float NOT NULL COMMENT 'denormalized for convenience and since dataset tables are cleaned up',
  `feedback_user_id` bigint unsigned NOT NULL COMMENT 'the user_id of the person who gave us feedback',
  `recommendation_rejected` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Captain x-ed out the recommendation',
  `invitation_accepted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Bit set when member accepts invitation to team, if one was made',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`team_recommendation_feedback_id`),
  KEY `create_date_index` (`create_date`),
  KEY `update_date_index` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `test_users` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_test_account` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tier_downgrade_survey` (
  `tier_downgrade_survey_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `downgrade_survey_option_id` int unsigned NOT NULL,
  `downgrade_survey_text` longtext COLLATE utf8mb4_unicode_ci,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`tier_downgrade_survey_id`),
  KEY `shop_id` (`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tier_subscription_changes` (
  `tier_subscription_changes_id` bigint unsigned NOT NULL DEFAULT '0',
  `actor_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `old_tier` tinyint NOT NULL DEFAULT '0',
  `new_tier` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`tier_subscription_changes_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `shop_id_old_tier_idx` (`shop_id`,`old_tier`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transaction_file_attachments` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_files_id` bigint unsigned NOT NULL DEFAULT '0',
  `rank` int unsigned NOT NULL DEFAULT '0',
  `is_added_post_checkout` tinyint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `download_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `expiration_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`,`shop_files_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `transaction_shop_files_idx` (`transaction_id`,`shop_files_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transaction_property_values` (
  `transaction_property_value_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `instance_num` int unsigned NOT NULL,
  `property_id` bigint unsigned NOT NULL,
  `value_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `value` varchar(4096) DEFAULT '',
  PRIMARY KEY (`transaction_id`,`transaction_property_value_id`),
  UNIQUE KEY `property_id_idx` (`transaction_id`,`property_id`,`value_id`,`instance_num`),
  KEY `modified_idx` (`update_date`),
  KEY `shop_id` (`shop_id`,`transaction_property_value_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transaction_translations` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `language` tinyint unsigned NOT NULL,
  `title` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`,`language`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `transaction_language_idx` (`transaction_id`,`language`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transactions_cost_item` (
  `shop_id` bigint unsigned NOT NULL,
  `transactions_cost_item_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `cost_type` tinyint unsigned NOT NULL,
  `quantity` int unsigned NOT NULL DEFAULT '0',
  `cost` int NOT NULL DEFAULT '0',
  `computed_cost` int NOT NULL DEFAULT '0',
  `currency_code` char(3) NOT NULL DEFAULT 'USD',
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transactions_cost_item_id`),
  KEY `transactions_cost_item_update_date` (`update_date`),
  KEY `transactions_cost_item_listing_id` (`listing_id`),
  KEY `transactions_cost_item_transaction_id` (`transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transactions_data` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `listing_json` text NOT NULL,
  `decorator_type` smallint unsigned DEFAULT NULL,
  `decoration_id` bigint unsigned DEFAULT NULL,
  `decoration_shardifier_id` bigint unsigned DEFAULT NULL,
  `ship_to_third_party` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `update_date` (`update_date`),
  KEY `transaction_idx` (`transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `transactions_shipping` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `order_date` int unsigned NOT NULL,
  `shipped_date` int unsigned NOT NULL,
  `delivery_date` int unsigned NOT NULL,
  `delivery_date_source` varchar(10) NOT NULL DEFAULT '',
  `estimated_max_shipped_date` int unsigned NOT NULL,
  `estimated_max_shipped_date_timezone` varchar(255) NOT NULL DEFAULT '',
  `orig_max_shipped_date` int unsigned DEFAULT NULL,
  `orig_max_shipped_date_timezone` varchar(255) NOT NULL DEFAULT '',
  `estimated_shipped_date_changes` int unsigned DEFAULT NULL,
  `num_times_delayed` int NOT NULL,
  `delayed_max_shipped_date` int unsigned NOT NULL,
  `shipping_tracking_id` bigint unsigned NOT NULL,
  `shipping_method_id` bigint unsigned NOT NULL,
  `is_expedited` tinyint unsigned NOT NULL,
  `is_canceled` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shipping_profile_id` bigint NOT NULL,
  `listing_processing_id` bigint NOT NULL,
  `listing_group_num` smallint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `shipping_label_id` bigint unsigned NOT NULL,
  `shop_shipping_profile_id` bigint unsigned DEFAULT NULL COMMENT 'Equivalent to shipping_profile_id on listings and shop_shipping_profile',
  PRIMARY KEY (`shop_id`,`transaction_id`),
  KEY `update_date` (`shipped_date`),
  KEY `shop_shipped_date` (`shop_id`,`shipped_date`),
  KEY `overdue_shipments` (`estimated_max_shipped_date`,`shipped_date`,`num_times_delayed`),
  KEY `overdue_delayed_shipments` (`delayed_max_shipped_date`,`shipped_date`,`num_times_delayed`),
  KEY `shop_receipt` (`shop_id`,`receipt_id`),
  KEY `shop_paid_date` (`shop_id`,`paid_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date2` (`update_date`),
  KEY `transaction_idx` (`transaction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `treasury` (
  `treasury_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the treasury',
  `title` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the title of the treasury',
  `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'an optional description of the treasury',
  `owner_id` bigint unsigned NOT NULL COMMENT 'the user_id of the member that created the treasury',
  `hotness` float NOT NULL COMMENT 'hotness value',
  `mature` smallint NOT NULL COMMENT '1 if it is mature, 0 if it is safe',
  `private` smallint NOT NULL COMMENT '1 if it is private, 0 if it is public',
  `create_date` int unsigned NOT NULL COMMENT 'creation date',
  `update_date` int unsigned NOT NULL COMMENT 'time treasury was last edited',
  `became_public_date` int unsigned NOT NULL COMMENT 'time treasury first switched from private to public',
  `forum_id` bigint unsigned NOT NULL DEFAULT '0',
  `clicks` int NOT NULL DEFAULT '0' COMMENT 'number of clicks on included listings',
  `views` int NOT NULL DEFAULT '0' COMMENT 'number of times treasury has been viewed',
  `favorites_count` int NOT NULL DEFAULT '-1',
  `deleted` int NOT NULL DEFAULT '0' COMMENT 'is the treasury marked as deleted',
  PRIMARY KEY (`treasury_id`),
  KEY `private` (`private`),
  KEY `owner_id_treasury_id_idx` (`owner_id`,`treasury_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='stores treasuries';

CREATE TABLE `treasury_listing` (
  `treasury_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the treasury',
  `listing_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the listing',
  `treasury_owner_id` bigint unsigned NOT NULL COMMENT 'user_id of the treasury owner',
  `pos` int NOT NULL COMMENT 'position of the listing within the treasury [0,15]',
  `create_date` int unsigned NOT NULL COMMENT 'timex when the listing was added to the treasury',
  PRIMARY KEY (`treasury_id`,`listing_id`,`treasury_owner_id`),
  KEY `treasury_owner_idx` (`treasury_owner_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='links treasuries to their child listings';

CREATE TABLE `treasury_tag` (
  `treasury_id` bigint unsigned NOT NULL COMMENT 'uniquely identifies the treasury',
  `tag` varchar(63) NOT NULL COMMENT 'the tag text',
  `added_date` int unsigned NOT NULL COMMENT 'time when the tag was added to the treasury',
  `treasury_owner_id` bigint unsigned NOT NULL COMMENT 'user_id of the treasury owner',
  PRIMARY KEY (`treasury_id`,`tag`),
  KEY `treasury_owner_id_idx` (`treasury_owner_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='treasury tags';

CREATE TABLE `treasury_tag_count` (
  `count_date` int unsigned NOT NULL COMMENT 'date the tag data was recorded',
  `tag_count` int unsigned NOT NULL COMMENT 'how many times this tag was used on the given date',
  `tag_name` varchar(127) NOT NULL COMMENT 'the tag name',
  `facet` int NOT NULL COMMENT 'the facet the tag_name maps to',
  `hash_bucket` int unsigned NOT NULL,
  PRIMARY KEY (`count_date`,`tag_name`),
  KEY `hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='tracks treasury tag usage';

CREATE TABLE `trending_listings` (
  `model_id` bigint unsigned NOT NULL,
  `listing_index` int NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `hash_bucket` bigint NOT NULL,
  PRIMARY KEY (`model_id`,`listing_index`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `triggered_notification_data` (
  `triggered_notification_data_id` bigint unsigned NOT NULL,
  `triggered_notification_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `data_key` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `data_value` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `triggered_notification_scheduled_time` int unsigned NOT NULL COMMENT 'used to truncate old data when its parent row is truncated',
  PRIMARY KEY (`user_id`,`triggered_notification_data_id`,`triggered_notification_scheduled_time`),
  KEY `triggered_notification_id_user_id_data_key` (`triggered_notification_id`,`user_id`,`data_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='data used by triggered notifications';

CREATE TABLE `triggered_notifications` (
  `triggered_notification_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `notification_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `scheduled_time` int unsigned NOT NULL COMMENT 'The time at which this communication should be sent',
  `sent_at` int unsigned NOT NULL DEFAULT '0',
  `processed_at` int unsigned NOT NULL DEFAULT '0' COMMENT 'Indicates whether this communication row has been looked at by the sender cron, and at what time',
  `update_date` int unsigned DEFAULT NULL,
  `create_date` int unsigned DEFAULT NULL,
  `reason` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  PRIMARY KEY (`user_id`,`triggered_notification_id`,`scheduled_time`),
  KEY `user_notification_type` (`user_id`,`notification_type`),
  KEY `processed_scheduled_time` (`processed_at`,`scheduled_time`),
  KEY `sent_at_notification_type` (`sent_at`,`notification_type`),
  KEY `processed_schedule_type` (`scheduled_time`,`notification_type`,`processed_at`),
  KEY `triggered_notification_idx` (`triggered_notification_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `processed_update_date` (`processed_at`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Communications scheduled for users. Note that not every communication here will be sent';

CREATE TABLE `trusted_devices` (
  `trusted_device_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `token` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `agent` varchar(512) COLLATE utf8mb4_general_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_general_ci NOT NULL,
  `ip` varchar(45) COLLATE utf8mb4_general_ci NOT NULL,
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`trusted_device_id`),
  KEY `uid_create_idx` (`user_id`,`create_date`),
  KEY `token_idx` (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tt_chosen_listings` (
  `tt_completion_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `creation_time` int unsigned NOT NULL,
  PRIMARY KEY (`tt_completion_id`,`listing_id`),
  KEY `tt_chosen_listings_by_user` (`user_id`),
  KEY `tt_chosen_listings_by_hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Listings chosen in a particular taste test.';

CREATE TABLE `tt_completions` (
  `tt_completion_id` bigint unsigned NOT NULL COMMENT 'Ticketed PK.',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_agent_id` char(28) NOT NULL DEFAULT '' COMMENT 'owner, if not empty.',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0' COMMENT 'shard key, if nonzero.',
  `creation_time` int unsigned NOT NULL,
  `finished` tinyint unsigned NOT NULL DEFAULT '0',
  `sticky_homepage_offset` int NOT NULL DEFAULT '0',
  `last_recommended_time` int unsigned NOT NULL DEFAULT '0',
  `active_recommendation_batch_id` bigint unsigned NOT NULL DEFAULT '0',
  `giftee_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`tt_completion_id`),
  KEY `tt_completions_recommendable_by_user` (`user_id`,`finished`,`last_recommended_time`),
  KEY `tt_completions_recommendable_by_user_agent` (`user_agent_id`,`finished`,`last_recommended_time`),
  KEY `tt_completions_finished_by_user_and_time` (`user_id`,`finished`,`creation_time`),
  KEY `tt_completions_finished_by_user_agent_and_time` (`user_agent_id`,`finished`,`creation_time`),
  KEY `tt_completions_stale` (`finished`,`last_recommended_time`),
  KEY `tt_completions_by_hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Contains a record for every taste test.';

CREATE TABLE `tt_matched_users` (
  `tt_completion_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0',
  `matched_user_id` bigint unsigned NOT NULL,
  PRIMARY KEY (`tt_completion_id`,`matched_user_id`),
  KEY `tt_matched_users_by_user` (`user_id`),
  KEY `tt_matched_users_by_hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tt_recommendation_batch` (
  `tt_recommendation_batch_id` bigint unsigned NOT NULL,
  `tt_completion_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0',
  `creation_time` int unsigned NOT NULL,
  PRIMARY KEY (`tt_recommendation_batch_id`),
  KEY `tt_recommendation_batch_for_completion` (`tt_completion_id`,`creation_time`),
  KEY `tt_recommendation_batch_by_user` (`user_id`),
  KEY `tt_recommendation_batch_by_hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `tt_recommendations` (
  `tt_recommendation_batch_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `hash_bucket` int unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `score` float NOT NULL DEFAULT '0',
  PRIMARY KEY (`tt_recommendation_batch_id`,`listing_id`),
  KEY `tt_recommendations_by_score` (`tt_recommendation_batch_id`,`score`),
  KEY `tt_recommendations_by_listing` (`listing_id`),
  KEY `tt_recommendations_by_user` (`user_id`),
  KEY `tt_recommendations_by_hash_bucket` (`hash_bucket`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Listings recommended for a taste test completion.';

CREATE TABLE `twofactor_challenge` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `twofactor_challenge_id` bigint unsigned NOT NULL DEFAULT '0',
  `uaid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `request_uuid` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `athena_session_id` bigint unsigned NOT NULL DEFAULT '0',
  `login_session_id` bigint unsigned NOT NULL DEFAULT '0',
  `login_session_token` varchar(80) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `state` int unsigned NOT NULL DEFAULT '0',
  `tfa_type_id` int unsigned NOT NULL DEFAULT '0',
  `method` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `other_json` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`twofactor_challenge_id`),
  KEY `athena_session_id_index` (`user_id`,`athena_session_id`),
  KEY `update_date_index` (`update_date`),
  KEY `login_session_id_index` (`user_id`,`login_session_id`,`update_date`),
  KEY `uaid_login_session_id_index` (`user_id`,`uaid`,`login_session_id`),
  KEY `login_session_token_index` (`user_id`,`login_session_token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_action_audit` (
  `user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `audit_id` bigint unsigned NOT NULL,
  `action_id` int unsigned NOT NULL,
  `action` longblob COMMENT 'json representation of the action for this event',
  `target` varchar(255) DEFAULT NULL,
  `login_session_token` varchar(80) NOT NULL DEFAULT '',
  `athena_session_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`,`create_date`,`action_id`,`audit_id`),
  KEY `audit_id_idx` (`audit_id`),
  KEY `user_action_target_idx` (`user_id`,`action_id`,`target`),
  KEY `user_token_action_idx` (`user_id`,`login_session_token`,`action_id`),
  KEY `idx_create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_action_notice` (
  `user_action_notice_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `object_type` bigint unsigned NOT NULL COMMENT 'what entity was actioned: listing, shop etc.',
  `object_id` bigint unsigned NOT NULL COMMENT 'ID of the actioned entity',
  `violated_policy` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'strike subcategory if applicable',
  `action_type` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'what action was taken',
  `platform` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'what tool performed an action - RTT, takedown, Apollo',
  `platform_id` bigint unsigned NOT NULL COMMENT 'what flag ID or bulk takedown ID actioned the entity',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`user_action_notice_id`),
  KEY `user_object_type_action_idx` (`user_id`,`object_type`,`action_type`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_api_keys` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `api_key_id` bigint unsigned NOT NULL DEFAULT '0',
  `active` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`api_key_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_appreciation_images` (
  `transaction_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_seller_approved` tinyint NOT NULL DEFAULT '1',
  `is_item_in_context` tinyint DEFAULT NULL COMMENT 'is this a photo of the item in context, optional user provided info',
  `status` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_source` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'undefined',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`,`image_id`),
  KEY `buyer_user_id_create_date` (`buyer_user_id`,`create_date`),
  KEY `buyer_user_id_receipt_id_image_id` (`buyer_user_id`,`receipt_id`,`image_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_appreciation_videos` (
  `transaction_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `is_seller_approved` tinyint NOT NULL DEFAULT '1',
  `status` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'States defined in EtsyModel_AppreciationPhotos_ImageStatus',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_source` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'undefined' COMMENT 'States defined in EtsyModel_AppreciationPhotos_CreationSources',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`,`video_id`),
  KEY `buyer_user_id_create_date` (`buyer_user_id`,`create_date`),
  KEY `buyer_user_id_receipt_id_video_id` (`buyer_user_id`,`receipt_id`,`video_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_attributes` (
  `user_id` bigint unsigned NOT NULL,
  `attribute` char(100) NOT NULL,
  `value` text NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`attribute`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Arbitrary attributes for users, like user_went_through_onboarding, for use in analytics';

CREATE TABLE `user_blog_favorites` (
  `user_id` bigint unsigned NOT NULL,
  `article_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`article_id`),
  KEY `article_id` (`article_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Store favorited articles for users';

CREATE TABLE `user_boe_app_icon_badge_silent_push_variant` (
  `user_id` bigint unsigned NOT NULL,
  `variant` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `is_android` tinyint NOT NULL DEFAULT '0',
  `experiment_flag` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`is_android`,`experiment_flag`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_boe_app_tab_badging` (
  `user_id` bigint unsigned NOT NULL,
  `version` tinyint unsigned NOT NULL DEFAULT '0',
  `receipts` varchar(10000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `last_time_viewed` int NOT NULL DEFAULT '0',
  `last_time_updated` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Tab badging receipt_ids per user, BEAT-3502';

CREATE TABLE `user_bulk_takedown_nag` (
  `user_id` bigint unsigned NOT NULL,
  `takedown_id` bigint unsigned NOT NULL,
  `object_type` bigint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `policy` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`takedown_id`,`object_type`,`object_id`),
  KEY `user_type_idx` (`user_id`,`object_type`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_business_registration` (
  `user_business_registration_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of business registration',
  `user_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'User identifier',
  `registration_number` varchar(511) NOT NULL COMMENT 'Registration number encrypted at application layer',
  `registration_number_type` varchar(255) NOT NULL COMMENT 'Registration number type',
  `jurisdiction` varchar(255) DEFAULT NULL COMMENT 'Business jurisdiction',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`user_business_registration_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_buyer_targeted_offer` (
  `buyer_targeted_offer_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `expire_date` int unsigned DEFAULT NULL,
  `coupon_state` tinyint(1) NOT NULL DEFAULT '0',
  `shop_status` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `granted_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`buyer_targeted_offer_id`),
  KEY `buyer_promotion_grant_idx` (`buyer_user_id`,`promotion_id`,`grant_type`,`grant_origin_id`),
  KEY `buyer_grant_idx` (`buyer_user_id`,`grant_type`,`grant_origin_id`),
  KEY `buyer_shop_idx` (`buyer_user_id`,`shop_id`),
  KEY `buyer_state_status_expire_create_idx` (`buyer_user_id`,`coupon_state`,`shop_status`,`expire_date`,`granted_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_buyer_targeted_offer_event` (
  `buyer_targeted_offer_event_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `grant_type` smallint unsigned NOT NULL,
  `grant_origin_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `event_type` tinyint(1) NOT NULL,
  `event_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`buyer_targeted_offer_event_id`),
  KEY `buyer_grant_promotion_event_type_event_date_idx` (`buyer_user_id`,`grant_type`,`grant_origin_id`,`promotion_id`,`event_type`,`event_date`),
  KEY `buyer_shop_event_type_event_date_idx` (`buyer_user_id`,`shop_id`,`event_type`,`event_date`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_cart_snapshot` (
  `user_id` bigint unsigned NOT NULL,
  `snapshot_id` bigint unsigned NOT NULL,
  `uuid` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`snapshot_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store a snapshot of the cart for sharing';

CREATE TABLE `user_cart_snapshot_listing` (
  `user_id` bigint unsigned NOT NULL,
  `snapshot_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `cart_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`snapshot_id`,`listing_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store a snapshot of the cart for sharing';

CREATE TABLE `user_case_action_history` (
  `user_case_action_history_id` bigint NOT NULL DEFAULT '0',
  `user_case_id` bigint NOT NULL DEFAULT '0',
  `actor_id` bigint NOT NULL DEFAULT '0',
  `message` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `type` varchar(32) NOT NULL DEFAULT '',
  `is_admin` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `escalation_level` int unsigned NOT NULL DEFAULT '0',
  `resolution_state` int unsigned NOT NULL DEFAULT '0',
  `admin_reason` varchar(2047) NOT NULL DEFAULT '',
  `staff_id` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_case_action_history_id`),
  KEY `user_case_id` (`user_case_id`),
  KEY `actor_id` (`actor_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_case_content` (
  `user_case_content_id` bigint NOT NULL DEFAULT '0',
  `user_case_id` bigint NOT NULL DEFAULT '0',
  `user_case_content_template_id` bigint NOT NULL DEFAULT '0',
  `actor_id` bigint NOT NULL DEFAULT '0',
  `data` text NOT NULL,
  `type` varchar(16) NOT NULL DEFAULT '',
  `state` varchar(16) NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `actor_type` varchar(16) NOT NULL DEFAULT '',
  PRIMARY KEY (`user_case_content_id`),
  KEY `user_case_id` (`user_case_id`),
  KEY `actor_id` (`actor_id`),
  KEY `user_case_content_template_id` (`user_case_content_template_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_case_transactions` (
  `user_case_transaction_id` bigint NOT NULL DEFAULT '0',
  `user_case_id` bigint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `transaction_id` bigint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_case_transaction_id`),
  KEY `idx_user_case_id` (`user_case_id`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_collection_items` (
  `user_id` bigint NOT NULL,
  `user_collection_id` bigint NOT NULL,
  `listing_id` bigint NOT NULL,
  `previous_listing_id` bigint NOT NULL,
  `time_last_change_requested` int NOT NULL,
  `status` varchar(20) DEFAULT NULL,
  `type` varchar(20) DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`user_collection_id`,`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_collections` (
  `user_id` bigint NOT NULL,
  `user_collection_id` bigint NOT NULL,
  `name` varchar(50) NOT NULL,
  `status` varchar(20) DEFAULT NULL,
  `type` varchar(20) DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`user_collection_id`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_conversation_auto_reply` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `expiration_date` int unsigned NOT NULL DEFAULT '0',
  `message` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `expiration_date_idx` (`user_id`,`expiration_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_conversation_message_labels` (
  `label_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `message_id` bigint unsigned NOT NULL,
  `label` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `source_type` smallint unsigned NOT NULL,
  `source_id` bigint unsigned NOT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`label_id`),
  KEY `user_idx` (`user_id`),
  KEY `user_message_idx` (`message_id`),
  KEY `source_idx` (`source_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_conversation_message_spam_rule_results` (
  `user_conversation_message_spam_rule_results_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `conversation_message_id` bigint unsigned NOT NULL,
  `layer` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `decision` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `rule_results` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL,
  PRIMARY KEY (`user_conversation_message_spam_rule_results_id`),
  KEY `user_layer_idx` (`user_id`,`layer`),
  KEY `user_convo_idx` (`user_id`,`conversation_id`),
  KEY `user_convo_message_idx` (`user_id`,`conversation_message_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_conversation_messages` (
  `user_id` bigint unsigned NOT NULL,
  `conversation_id` bigint unsigned NOT NULL,
  `conversation_message_id` bigint unsigned NOT NULL,
  `sender_id` bigint unsigned NOT NULL,
  `message_order` bigint unsigned NOT NULL,
  `message` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `has_images` tinyint(1) DEFAULT '0',
  `sort_key_send_date_ms` bigint unsigned DEFAULT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  `message_flags` int NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`user_id`,`conversation_id`,`conversation_message_id`),
  UNIQUE KEY `future_pk` (`user_id`,`conversation_id`,`message_order`),
  KEY `conversation_lookup_idx` (`user_id`,`conversation_id`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `user_message_idx` (`user_id`,`conversation_message_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_conversation_tags` (
  `user_id` bigint unsigned NOT NULL,
  `tag_id` bigint unsigned NOT NULL,
  `tag` varchar(100) NOT NULL,
  `convo_count` int unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `unread_convo_count` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`tag_id`),
  KEY `tag_lookup_idx` (`user_id`,`tag`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_counters` (
  `user_id` bigint unsigned NOT NULL,
  `counter` smallint NOT NULL,
  `value` int unsigned NOT NULL,
  `update_date` int NOT NULL,
  `create_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`counter`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_details` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `login_name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `first_name` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `last_name` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gender` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'private',
  `birth_month` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `birth_day` varchar(2) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `birth_year` varchar(4) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0',
  `bio` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `tags` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `materials` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `how_they_heard` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `country_id` bigint unsigned NOT NULL DEFAULT '0',
  `region` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `city` varchar(255) CHARACTER SET utf8 NOT NULL DEFAULT '',
  `location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `geonameid` bigint unsigned NOT NULL DEFAULT '0',
  `transaction_buy_count` int NOT NULL DEFAULT '0',
  `transaction_sold_count` int NOT NULL DEFAULT '0',
  `favoritelistings_count` int NOT NULL DEFAULT '-1',
  `favoriteshops_count` int NOT NULL DEFAULT '-1',
  `favoritetreasuries_count` int NOT NULL DEFAULT '-1',
  `referred_user_count` tinyint NOT NULL DEFAULT '0',
  `was_featured_seller` tinyint NOT NULL DEFAULT '0',
  `state` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `change_email_code` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `referred_by_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_email_confirmed` tinyint(1) DEFAULT '0',
  `join_date` int NOT NULL DEFAULT '0',
  `name_modified_date` int NOT NULL DEFAULT '0',
  `geonameid_update_date` int NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `flags` bigint unsigned NOT NULL DEFAULT '0',
  `tfa_recency_keys` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `reputation` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'neutral',
  `is_wholesale_buyer` tinyint NOT NULL DEFAULT '0',
  `is_wholesale_vendor` tinyint NOT NULL DEFAULT '0',
  `was_wholesale_vendor` tinyint NOT NULL DEFAULT '0',
  `is_manufacturer` tinyint NOT NULL DEFAULT '0',
  `was_manufacturer` tinyint NOT NULL DEFAULT '0',
  `ever_contacted_manufacturer` tinyint NOT NULL DEFAULT '0',
  `is_test_account` tinyint(1) NOT NULL DEFAULT '0',
  `allowed_to_mfg_onboard` tinyint NOT NULL DEFAULT '0' COMMENT 'forces permission to create a manufacturer profile and offer production assistance to other sellers',
  `zendesk_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `secure_account_code` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `last_compliance_backfill_date` int NOT NULL DEFAULT '0',
  `a_score` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `login_name` (`login_name`),
  KEY `update_date` (`update_date`),
  KEY `birth_month-birth_day` (`birth_month`,`birth_day`),
  KEY `city` (`city`),
  KEY `name_modified_date` (`name_modified_date`),
  KEY `create_date` (`create_date`),
  KEY `geonameid_update_date` (`geonameid_update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_device_uaid` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `device_uaid` varbinary(128) NOT NULL DEFAULT '',
  PRIMARY KEY (`user_id`,`device_uaid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_doc_check_file_uploads` (
  `user_doc_check_file_upload_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `s3_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `file_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of file when we receive it',
  `file_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'MIME type max length is 254 if you can believe it',
  `file_size` int NOT NULL,
  `upload_status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Should be SUCCESS, FAILED, ARCHIVED, or DELETED',
  `user_comments` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Seller comments about document',
  `deleted_by_admin_id` bigint unsigned NOT NULL DEFAULT '0',
  `archived_by_admin_id` bigint unsigned NOT NULL DEFAULT '0',
  `archived_notes` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `archived_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_doc_check_file_upload_id`),
  KEY `user_id_index` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_email_imports` (
  `user_id` bigint unsigned NOT NULL COMMENT 'user id of the person who imported this email',
  `import_batch_id` bigint unsigned NOT NULL COMMENT 'which gearman batch this email was imported in',
  `email_hash` char(28) NOT NULL COMMENT 'A base64 encoded sha1 hash of the recipient email address',
  `email_domain` varchar(128) NOT NULL COMMENT 'a domain like gmail.com so this info is not lost in the hash',
  `recommended_count` int unsigned NOT NULL DEFAULT '0',
  `connected` tinyint unsigned NOT NULL DEFAULT '0',
  `creation_time` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`email_hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table to lookup all the emails a member has ever imported';

CREATE TABLE `user_external_contacts` (
  `user_id` bigint unsigned NOT NULL,
  `import_batch_id` bigint unsigned NOT NULL,
  `external_account_type` tinyint unsigned NOT NULL,
  `external_user_id` bigint unsigned NOT NULL,
  `external_username` varchar(255) NOT NULL,
  `external_name` varchar(255) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`import_batch_id`,`external_account_type`,`external_user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_facebook_action` (
  `user_id` bigint unsigned NOT NULL,
  `action_type_id` smallint unsigned NOT NULL,
  `object_type_id` smallint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `facebook_action_id` bigint unsigned NOT NULL,
  `facebook_user_id` bigint unsigned NOT NULL,
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`action_type_id`,`object_type_id`,`object_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_features` (
  `user_id` bigint unsigned NOT NULL,
  `feature_id` int unsigned NOT NULL,
  `value` varchar(32) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `updated_by` varchar(32) NOT NULL,
  PRIMARY KEY (`user_id`,`feature_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_feed_stats` (
  `user_id` bigint unsigned NOT NULL,
  `time_last_viewed` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_flagreport` (
  `user_id` bigint unsigned NOT NULL,
  `flagreport_id` bigint unsigned NOT NULL,
  `target_type` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_id` bigint unsigned NOT NULL,
  `flag_type_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`flagreport_id`),
  KEY `user_id_target_type_target_id` (`user_id`,`target_type`,`target_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_followup_action` (
  `user_id` bigint unsigned NOT NULL,
  `target_id` varchar(255) NOT NULL DEFAULT '',
  `sequence_id` int unsigned NOT NULL,
  `sequence_version` int unsigned NOT NULL,
  `sequence_position` int unsigned NOT NULL DEFAULT '0',
  `followup_date` int unsigned NOT NULL,
  `is_completed` tinyint unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`target_id`,`sequence_id`),
  KEY `user_followup_action_followup_date_idx` (`followup_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_forum_alerts` (
  `user_id` bigint unsigned NOT NULL,
  `forum_id` bigint unsigned NOT NULL,
  `alert_type` varchar(255) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `last_digested` int unsigned NOT NULL DEFAULT '0',
  `alert_type_id` tinyint unsigned NOT NULL DEFAULT '0',
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`forum_id`,`user_id`,`alert_type_id`),
  KEY `alert_type` (`alert_type`(15)),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='table used to fetch all forums that a user has alerts for';

CREATE TABLE `user_forum_thread_activity` (
  `user_id` bigint unsigned NOT NULL,
  `forum_thread_id` bigint unsigned NOT NULL,
  `last_page` int unsigned NOT NULL,
  `last_view_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`forum_thread_id`),
  KEY `user_date` (`user_id`,`last_view_date`),
  KEY `thread_activity_date_idx` (`last_view_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_forum_threads` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `forum_thread_id` bigint unsigned NOT NULL DEFAULT '0',
  `latest_user_post_date` int NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `subscription_type` int unsigned NOT NULL DEFAULT '0',
  `last_view_date` int unsigned NOT NULL DEFAULT '0',
  `unread_replies` int unsigned NOT NULL DEFAULT '0',
  `first_new_reply_post_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`forum_thread_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `thread_time` (`forum_thread_id`,`create_date`),
  KEY `user_view_date` (`user_id`,`last_view_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_gift_reminders` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `gift_reminder_id` bigint unsigned NOT NULL,
  `recipient_user_id` bigint unsigned NOT NULL,
  `gift_reminder_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `anniversary_date` varchar(5) COLLATE utf8mb4_unicode_ci NOT NULL,
  `anniversary_year` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`gift_reminder_id`),
  KEY `buyer_user_id_idx` (`buyer_user_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_hide_listings` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `reason` tinyint unsigned NOT NULL DEFAULT '0',
  `context_source` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '' COMMENT 'the page where the listing was displayed',
  `context_query` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL COMMENT 'the query made by the user that the listing was displayed for',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`listing_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='created when a user hides a listing';

CREATE TABLE `user_history` (
  `user_history_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `field_name` varchar(255) NOT NULL,
  `original_value` varchar(255) NOT NULL,
  `new_value` varchar(255) NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`user_history_id`),
  KEY `field_name` (`user_id`,`field_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_identities` (
  `user_identity_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a user identity',
  `user_id` bigint unsigned NOT NULL COMMENT 'User identifier that the identity belongs to',
  `user_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'User address associated to the identity',
  `user_business_registration_id` bigint DEFAULT NULL COMMENT 'Business registration information associated to the identity',
  `taxpayer_id_token` bigint unsigned DEFAULT NULL COMMENT 'Taxpayer token associated to the user identity',
  `primary_owner_identity_id` bigint DEFAULT NULL COMMENT 'Primary owner identity associated to the user identity',
  `birthday_year` smallint DEFAULT NULL COMMENT 'The four-digit year of birth of the user',
  `birthday_month` smallint DEFAULT NULL COMMENT 'The month of birth, between 1 and 12, of the user',
  `birthday_day` smallint DEFAULT NULL COMMENT 'The day of birth, between 1 and 31, of the user',
  `create_date` int unsigned NOT NULL COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL COMMENT 'Updated date in epoch time',
  `staff_ldap` varchar(128) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The LDAP of the staff member who created this record',
  `ownership_percentage` tinyint unsigned DEFAULT NULL COMMENT 'percentage of the business this beneficial owner owns, should have a max of 100',
  PRIMARY KEY (`user_identity_id`),
  KEY `user_id_index` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_identity_program_verifications` (
  `user_identity_program_verification_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a identity program verification',
  `user_identity_program_id` bigint unsigned NOT NULL COMMENT 'The identity program that this verification is tied to',
  `user_identity_id` bigint unsigned NOT NULL COMMENT 'User identity that this program verification belongs to',
  `user_id` bigint unsigned NOT NULL COMMENT 'User identifier that this program verification belongs to',
  `status` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Status of the transaction (pending, success, failure, skipped, etc.)',
  `check_method` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Method used to verify the identity program (info, documents, manual)',
  `scope` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'To store additional information about the type of check being performed ',
  `identity_verification_request_id` bigint unsigned DEFAULT NULL COMMENT 'identity verification request associated to this transaction',
  `reject_reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Reason the program verification was rejected',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date in epoch time',
  `staff_ldap` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Admin who last took action on this verification',
  `task_id` bigint unsigned DEFAULT NULL COMMENT 'The Apollo task associated to this verification',
  PRIMARY KEY (`user_identity_program_verification_id`),
  KEY `user_identity_program_id` (`user_identity_program_id`),
  KEY `user_identity_id` (`user_identity_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_identity_programs` (
  `user_identity_program_id` bigint unsigned NOT NULL COMMENT 'Generated primary key of a user identity program',
  `user_identity_id` bigint unsigned NOT NULL COMMENT 'The user identity that this identity program belongs to',
  `user_id` bigint unsigned NOT NULL COMMENT 'User identifier that the identity program belongs to',
  `program_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The type of program (kyc, kyb, watchlist)',
  `status` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Status of the program (pending, success, failure, skipped, etc.)',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Creation date in epoch time',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date in epoch time',
  PRIMARY KEY (`user_identity_program_id`),
  KEY `user_identity_id` (`user_identity_id`),
  KEY `program_status` (`program_type`,`status`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_image_detection_results` (
  `result_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'label requested for detection',
  `score` float NOT NULL COMMENT 'detection confidence score',
  `detected` tinyint(1) NOT NULL COMMENT 'boolean for whether the label was detected or not',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`result_id`),
  UNIQUE KEY `image_id` (`image_id`,`label`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_ip_infringement` (
  `user_id` bigint unsigned NOT NULL,
  `takedown_id` bigint unsigned NOT NULL,
  `object_type` bigint unsigned NOT NULL,
  `object_id` bigint unsigned NOT NULL,
  `owner_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`takedown_id`,`object_type`,`object_id`),
  KEY `user_type_idx` (`user_id`,`object_type`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_key_pairs` (
  `key_pair_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `deleted` tinyint(1) NOT NULL,
  `private_key` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `public_key` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`key_pair_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_klarna_details` (
  `klarna_details_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL DEFAULT '0',
  `billing_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `phone` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `birthday_month` int DEFAULT NULL,
  `birthday_day` int DEFAULT NULL,
  `birthday_year` int DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `gender` int unsigned NOT NULL,
  `first_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`user_id`,`klarna_details_id`),
  KEY `user_id_receipt_group_id` (`user_id`,`receipt_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_local_market_attendance` (
  `local_market_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `attendance_status` int unsigned NOT NULL DEFAULT '0',
  `comment` varchar(1024) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `schedule` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`user_id`,`local_market_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_login_code` (
  `user_id` bigint unsigned NOT NULL,
  `code` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'Default: 1 = active',
  `version` smallint unsigned NOT NULL,
  `redeem_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`code`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_marketplace_fee` (
  `marketplace_fee_id` bigint unsigned NOT NULL,
  `receipt_group_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `amount` int unsigned NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `total` int unsigned NOT NULL,
  `tax` int unsigned NOT NULL DEFAULT '0',
  `rate` int unsigned NOT NULL,
  `adjusted_amount` int unsigned DEFAULT NULL,
  `adjusted_total` int unsigned DEFAULT NULL,
  `adjusted_tax` int unsigned DEFAULT NULL,
  `deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`marketplace_fee_id`),
  KEY `receipt_group_id_idx` (`receipt_group_id`),
  KEY `buyer_user_id_idx` (`buyer_user_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_messages` (
  `message_id` bigint unsigned NOT NULL COMMENT 'Message id',
  `receipt_id` bigint unsigned DEFAULT NULL COMMENT 'References the receipt',
  `user_id` bigint unsigned NOT NULL COMMENT 'References the user',
  `message_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Message id related to external service (e.g twilio)',
  `service_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Service id related to external service (e.g twilio)',
  `account_sid` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Account sid related to external service (e.g twilio)',
  `message_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message type (e.g order confirmation)',
  `message_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message status (e.g sent, delivered, queued)',
  `message_channel` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Message channel (e.g sms, whatsapp, messenger, mms)',
  `create_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Created date',
  `update_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'Updated date',
  PRIMARY KEY (`message_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `message_sid` (`message_sid`),
  KEY `account_sid` (`account_sid`),
  KEY `service_sid` (`service_sid`),
  KEY `user_id` (`user_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Sms messages for user';

CREATE TABLE `user_notes` (
  `user_id` bigint unsigned NOT NULL,
  `user_note_id` bigint unsigned NOT NULL,
  `subject_type` varchar(32) COLLATE utf8mb4_bin NOT NULL,
  `subject_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `note` mediumtext COLLATE utf8mb4_bin,
  `deleted` tinyint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`user_note_id`),
  KEY `subject_type` (`subject_type`,`subject_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='user-generated notes about things';

CREATE TABLE `user_notices_dismissed` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `notice_key` varchar(128) NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL,
  `reinstate_date` int unsigned NOT NULL DEFAULT '0',
  `times_dismissed` int unsigned NOT NULL DEFAULT '0',
  `times_viewed` int unsigned NOT NULL DEFAULT '0',
  `view_date` int DEFAULT NULL,
  `last_view_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`notice_key`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_notifications` (
  `user_notification_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `notification_key` varchar(256) NOT NULL,
  `time_sent` int unsigned NOT NULL DEFAULT '0',
  `confirmed` tinyint(1) DEFAULT '0',
  `data` text,
  PRIMARY KEY (`user_notification_id`,`user_id`),
  KEY `user_key_time` (`user_id`,`notification_key`(255),`time_sent`),
  KEY `idx_time_sent` (`time_sent`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='tracking of emails and other notifications';

CREATE TABLE `user_notifications_app_download_cta` (
  `user_id` bigint unsigned NOT NULL,
  `dismiss_date` int DEFAULT NULL,
  `variant_displayed` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_notifications_favorite_shops_banner` (
  `user_id` bigint unsigned NOT NULL,
  `view_count` int DEFAULT '0',
  `first_view_date` int DEFAULT NULL,
  `last_view_date` int DEFAULT NULL,
  `dismiss_date` int DEFAULT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_paybybank_accounts` (
  `account_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `user_detail_id` bigint unsigned NOT NULL,
  `cart_id` bigint unsigned DEFAULT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_tail` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_logo_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_icon_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_institution_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_checking_or_savings` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_fingerprint` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `type` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`user_id`,`account_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `detail_id` (`user_id`,`user_detail_id`),
  KEY `user_type_account_status_cart` (`user_id`,`account_id`,`type`,`status`,`cart_id`),
  KEY `processor_id` (`processor`(16),`processor_id`(128)),
  KEY `user_fingerprint` (`user_id`,`account_fingerprint`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_paybybank_details` (
  `detail_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`detail_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `processor_id` (`processor`(16),`processor_id`(128))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_paybybank_payment_initiations` (
  `payment_initiation_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `user_detail_id` bigint unsigned NOT NULL,
  `user_account_id` bigint unsigned DEFAULT NULL,
  `cart_id` bigint unsigned DEFAULT NULL,
  `amount` int NOT NULL,
  `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_authorization_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `processor_account` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `processor_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `account_tail` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_logo_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_icon_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_institution_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_type` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `account_fingerprint` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `status` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `expiration_date` bigint unsigned DEFAULT NULL,
  `create_date` bigint unsigned NOT NULL,
  `update_date` bigint unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`payment_initiation_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `detail_account_id` (`user_id`,`user_detail_id`,`user_account_id`),
  KEY `user_status_cart` (`user_id`,`status`,`cart_id`),
  KEY `processor_id` (`processor`(16),`processor_id`(128)),
  KEY `user_cart_expiration` (`user_id`,`cart_id`,`expiration_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_persisted_ui_state` (
  `user_id` bigint unsigned NOT NULL,
  `state_key` varchar(255) NOT NULL,
  `state_value` varchar(255) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`state_key`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_preferences` (
  `user_id` bigint unsigned NOT NULL,
  `preference_id` int unsigned NOT NULL,
  `preference_setting` varchar(100) NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`preference_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `user_preferences_idx` (`preference_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store user_preferences';

CREATE TABLE `user_preferences_change_audit` (
  `audit_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `preference_id` bigint unsigned NOT NULL,
  `preference_setting` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `user_preference_idx` (`user_id`,`preference_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_privacy_details` (
  `user_id` bigint unsigned NOT NULL,
  `third_party_integration_allowed` tinyint unsigned DEFAULT NULL,
  `personalization_allowed` tinyint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_privacy_transcend_consent_prefs` (
  `user_id` bigint unsigned NOT NULL,
  `consent_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `consent_value` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_confirmed` tinyint(1) DEFAULT '0',
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`consent_key`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `user_privacy_raw_consent_values_idx` (`consent_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store raw consent values set by a user in privacy settings';

CREATE TABLE `user_privacy_transcend_consent_prefs_audit` (
  `audit_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `consent_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `consent_value` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_confirmed` tinyint(1) DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`audit_id`),
  KEY `user_privacy_raw_consent_values_idx` (`user_id`,`consent_key`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_promo_campaign` (
  `user_id` bigint unsigned NOT NULL,
  `user_promo_campaign_id` bigint unsigned NOT NULL,
  `campaign_name` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `giftcards_campaign_id` bigint unsigned NOT NULL,
  `state` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL,
  `promo_expire_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`user_promo_campaign_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `user_campaign_name_state_idx` (`user_id`,`campaign_name`,`state`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_promoted_coupons` (
  `user_id` bigint NOT NULL,
  `coupon_id` bigint NOT NULL,
  `shop_id` bigint NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`coupon_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_shop_idx` (`user_id`,`shop_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_groups` (
  `receipt_group_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `multi_shop_cart_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_group_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `multi_shop_cart_id` (`multi_shop_cart_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_review` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  KEY `is_deleted` (`buyer_user_id`,`receipt_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_review_union` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `has_receipt_review` tinyint NOT NULL,
  `has_transaction_review` tinyint NOT NULL,
  `has_non_anonymous_transaction_review` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_shipping` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_shipping_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `tracking_state` smallint unsigned DEFAULT '0',
  `tracking_location` varchar(255) COLLATE utf8mb4_general_ci DEFAULT '',
  `tracking_state_date` int unsigned DEFAULT '0',
  `shipping_provider` smallint NOT NULL DEFAULT '0',
  `shipping_provider_name` varchar(120) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `tracking_code` varchar(120) COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `destination_country_id` smallint unsigned DEFAULT NULL,
  `origin_country_id` smallint unsigned DEFAULT NULL,
  `shipped_date` int unsigned DEFAULT '0',
  `delivery_date` int unsigned DEFAULT '0',
  `provider_query_state` smallint unsigned NOT NULL DEFAULT '0',
  `provider_last_access_date` int unsigned DEFAULT '0',
  `shipping_label_id` bigint unsigned DEFAULT '0',
  `shipping_notification_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `can_track` tinyint(1) NOT NULL DEFAULT '1',
  `queue` int unsigned NOT NULL DEFAULT '0',
  `queue_added_date` int unsigned DEFAULT NULL,
  `carrier_name` varchar(120) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `carrier_id` smallint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`receipt_shipping_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `shipping_notification_id` (`shipping_notification_id`),
  KEY `queue` (`queue`),
  KEY `provider_last_access_date` (`provider_last_access_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_shipping_local_delivery_details` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `delivery_details_id` bigint unsigned NOT NULL,
  `market` int unsigned DEFAULT '0' COMMENT 'The delivery market this data applies to',
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `delivery_window_start_date` int NOT NULL DEFAULT '0',
  `delivery_window_end_date` int NOT NULL DEFAULT '0',
  `delivery_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`delivery_details_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipt_shipping_notification` (
  `shipping_notification_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `note_to_buyer` text COLLATE utf8mb4_general_ci,
  `is_visible` tinyint(1) NOT NULL DEFAULT '1',
  `notification_bcc` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `notification_scheduled_date` int unsigned NOT NULL DEFAULT '0',
  `notification_sent_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`shipping_notification_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `notification_sent_date` (`notification_sent_date`),
  KEY `notif_sched_idx` (`notification_scheduled_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `canceled_date` int unsigned NOT NULL,
  `shop_name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `order_id` bigint unsigned DEFAULT NULL,
  `purchase_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipped` tinyint unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `first_line` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `second_line` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `city` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `state` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `zip` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `shipping_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shardifier for shipping_address_id',
  `shipping_address_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'references a record in etsy_shard.users_addresses',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `payment_method` varchar(16) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `dc_payment_method` varchar(16) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `in_person_payment_type` varchar(20) COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'NA',
  `in_person_receipt_email` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `payment_email` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `payment_secret` varchar(24) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `message_from_payment` text COLLATE utf8mb4_general_ci,
  `is_echeck` tinyint unsigned DEFAULT '0',
  `checkout_version` int unsigned DEFAULT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `payment_transaction_id` varchar(24) COLLATE utf8mb4_general_ci DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `applied_vat_rate` int unsigned NOT NULL DEFAULT '0',
  `applied_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `seller_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `vat_invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipping_taxable` tinyint unsigned DEFAULT '0',
  `message_from_seller` longtext COLLATE utf8mb4_general_ci,
  `message_from_buyer` longtext COLLATE utf8mb4_general_ci,
  `google_wallet_data` varchar(2000) COLLATE utf8mb4_general_ci DEFAULT '',
  `dc_paypal_data` varchar(2000) COLLATE utf8mb4_general_ci DEFAULT '',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_funding_campaign` tinyint(1) NOT NULL DEFAULT '0',
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  KEY `buyer_user_id_status_idx` (`shop_id`,`status`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `buyer_user_id_purchase_order_id` (`buyer_user_id`,`purchase_order_id`),
  KEY `receipt_group_id` (`buyer_user_id`,`receipt_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts2` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `status` tinyint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `canceled_date` int unsigned NOT NULL,
  `shop_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `order_id` bigint unsigned DEFAULT NULL,
  `purchase_order_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipped` tinyint unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `state` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `country_id` smallint unsigned DEFAULT NULL,
  `shipping_address_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'shardifier for shipping_address_id',
  `shipping_address_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'references a record in etsy_shard.users_addresses',
  `is_paid` tinyint unsigned NOT NULL DEFAULT '0',
  `paid_date` int unsigned NOT NULL,
  `payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `dc_payment_method` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `in_person_payment_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'NA',
  `in_person_receipt_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payment_secret` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `message_from_payment` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `is_echeck` tinyint unsigned DEFAULT '0',
  `checkout_version` int unsigned DEFAULT NULL,
  `coupon_id` bigint unsigned DEFAULT NULL,
  `payment_transaction_id` varchar(24) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `applied_transaction_fee_rate` int unsigned DEFAULT NULL COMMENT 'Transaction fee applied to transactions on a receipt, not the source of truth but used for display purposes on the ledger',
  `applied_vat_rate` int unsigned NOT NULL DEFAULT '0',
  `applied_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `seller_vat_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `vat_invoice_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_shipping_taxable` tinyint unsigned DEFAULT '0',
  `message_from_seller` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `message_from_buyer` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `google_wallet_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `dc_paypal_data` varchar(2000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `is_funding_campaign` tinyint(1) NOT NULL DEFAULT '0',
  `seller_user_id` bigint unsigned DEFAULT NULL,
  `receipt_group_id` bigint unsigned DEFAULT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `structured_policies_id` bigint unsigned DEFAULT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `is_claimed` tinyint NOT NULL DEFAULT '0',
  `gift_message` varchar(4095) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `gift_buyer_first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '',
  `btn_ref` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `requested_gift_wrap` tinyint unsigned NOT NULL DEFAULT '0',
  `is_gift_wrap_taxable` tinyint unsigned NOT NULL DEFAULT '0',
  `tax_transaction_code` varchar(512) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `flagged_for_manual_fraud_review` tinyint unsigned NOT NULL DEFAULT '0',
  `applied_shipping_tax_rate` int unsigned DEFAULT NULL,
  `applied_gift_wrap_tax_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_rate` int unsigned DEFAULT NULL,
  `applied_regulatory_operating_fee_country_id` smallint unsigned NOT NULL DEFAULT '0',
  `tax_client` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `tax_finalization_date` int unsigned NOT NULL DEFAULT '0',
  `tax_reversal_finalization_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'track when/if the taxes were reversed/voided and prevent application to void taxes more than once.',
  `seller_address_id` bigint unsigned NOT NULL DEFAULT '0',
  `gift_recipient_user_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  KEY `buyer_user_id_status_idx` (`shop_id`,`status`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `buyer_user_id_purchase_order_id` (`buyer_user_id`,`purchase_order_id`),
  KEY `receipt_group_id` (`buyer_user_id`,`receipt_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts_feedback` (
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `overall_experience_rating` tinyint DEFAULT NULL,
  `overall_experience_conversation_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts_feedback_history` (
  `receipt_feedback_history_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `overall_experience_rating` tinyint DEFAULT NULL,
  `overall_experience_conversation_id` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`receipt_feedback_history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts_location` (
  `shop_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `lat` float(10,8) NOT NULL DEFAULT '0.00000000',
  `lon` float(11,8) NOT NULL DEFAULT '0.00000000',
  `geonameid` bigint unsigned DEFAULT NULL,
  `location_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `timezone` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_receipts_promotions` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`,`promotion_id`),
  KEY `shop_and_promotion_id` (`shop_id`,`promotion_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Table used to store sales & coupons in a user receipt';

CREATE TABLE `user_receipts_totals` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `usd_total_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_total_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_total_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `buyer_total_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `ros_total_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `usd_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_total_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `eur_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `shop_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ros_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_gift_wrap_tax_price` int unsigned NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `usd_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `eur_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `shop_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `buyer_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ros_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_loyalty_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`),
  UNIQUE KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_recommendation_tracker` (
  `user_id` bigint unsigned NOT NULL,
  `recommended_id` bigint unsigned NOT NULL,
  `recommended_id_type` smallint unsigned NOT NULL,
  `recommendation_context` smallint unsigned NOT NULL,
  `recommendation_time` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`recommended_id`,`recommended_id_type`,`recommendation_context`),
  KEY `idx_recommendation_time` (`recommendation_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Tracks all recommendations that have been shown to users in various recommender systems (identified by recommendation_context)';

CREATE TABLE `user_review_attribute_map` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `attribute_id` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`,`attribute_id`),
  KEY `shop_id_transaction_id` (`shop_id`,`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_review_recommendations` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `is_recommended` tinyint DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_reviews_subratings` (
  `transaction_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `item_quality` int unsigned DEFAULT '0',
  `shipping` int unsigned DEFAULT '0',
  `seller_customer_service` int unsigned DEFAULT '0',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`transaction_id`),
  KEY `shop_id_listing_id_idx` (`shop_id`,`listing_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_segment_memberships` (
  `user_id` bigint unsigned NOT NULL,
  `segment_run_id` bigint unsigned NOT NULL,
  `segment_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`segment_run_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_shipping_postmates_delivery` (
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `postmates_delivery_id` bigint unsigned NOT NULL,
  `receipt_shipping_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'id to the table shop_receipt_shipping',
  `external_postmates_key` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'String key sent to us by Postmates that they use to identify this delivery',
  `market` int unsigned NOT NULL DEFAULT '0' COMMENT 'The delivery market this delivery applies to',
  `is_test` tinyint unsigned NOT NULL DEFAULT '0',
  `delivery_status` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'Delivery status string that we get from Postmates',
  `request_state` smallint unsigned NOT NULL DEFAULT '0' COMMENT 'Enum that tells us the state of the delivery request relative to the Postmates API',
  `delivery_fee` int unsigned NOT NULL COMMENT 'The amount Postmates charged us for this delivery, in the lowest denomination for the current currency',
  `currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'The currency code for the Postmates delivery fee',
  `estimated_pickup_date` int unsigned NOT NULL DEFAULT '0',
  `estimated_dropoff_date` int unsigned NOT NULL DEFAULT '0',
  `dropoff_deadline_date` int unsigned NOT NULL DEFAULT '0',
  `pickup_address_id` bigint unsigned NOT NULL COMMENT 'id on the table user_addresses',
  `pickup_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `pickup_latitude` double DEFAULT NULL,
  `pickup_longitude` double DEFAULT NULL,
  `dropoff_notes` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `dropoff_latitude` double DEFAULT NULL,
  `dropoff_longitude` double DEFAULT NULL,
  `courier_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_phone` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_vehicle` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_image_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `courier_latitude` double DEFAULT NULL,
  `courier_longitude` double DEFAULT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`postmates_delivery_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_shoppost_comment_notifications` (
  `notification_id` bigint unsigned NOT NULL COMMENT 'Unique identifier',
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that is getting notified about a comment. Shardifier.',
  `comment_id` bigint unsigned NOT NULL COMMENT 'The id of the comment that generated this notification',
  `post_id` bigint unsigned NOT NULL COMMENT 'The id of the post of the comment that generated this notification',
  `shop_id` bigint unsigned NOT NULL COMMENT 'The id of the shop that created the post',
  `read_date` int DEFAULT NULL COMMENT 'The timestamp the user saw the notification. Null until the user sees the notification',
  `reason` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The reason the user is getting notified about a comment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`notification_id`,`user_id`),
  KEY `post_user` (`post_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id__read_date` (`user_id`,`read_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_shoppost_comments` (
  `comment_id` bigint unsigned NOT NULL COMMENT 'unique identifier',
  `shop_id` bigint unsigned NOT NULL COMMENT 'id of the shop that created the shop post',
  `shop_post_id` bigint unsigned NOT NULL COMMENT 'id of shop post in the shop_posts table',
  `user_id` bigint unsigned NOT NULL COMMENT 'id of the user that created the shop post comment. Shardifier',
  `comment_text` longtext COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'user created comment on shop post',
  `parent_comment_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'defined when this is a reply comment',
  `moderation_flags` int unsigned NOT NULL DEFAULT '0' COMMENT 'bit field of moderation actions taken on comment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`comment_id`,`shop_post_id`,`user_id`),
  KEY `shop_post_user` (`shop_post_id`,`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_sms_action_values` (
  `user_sms_action_value_id` bigint NOT NULL,
  `user_sms_code_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `name` varchar(64) NOT NULL,
  `value` varchar(256) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_sms_action_value_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_sms_code_id` (`user_sms_code_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_sms_codes` (
  `user_sms_code_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `code` varchar(20) NOT NULL,
  `action` varchar(64) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_sms_code_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_code_by_date` (`user_id`,`update_date`,`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_strike_action_category` (
  `user_strike_action_category_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `user_strike_action_id` bigint unsigned NOT NULL COMMENT 'primary key of etsy_shard.user_strike_actions table',
  `category_id` bigint unsigned NOT NULL COMMENT 'primary key of etsy_aux.strike_categories table',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_strike_action_category_id`),
  KEY `user_id` (`user_id`),
  KEY `action_id` (`user_strike_action_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_strike_actions` (
  `user_strike_action_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `action_taken` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'i.e., warning or refusal of service',
  `nova_article_id` bigint unsigned DEFAULT NULL COMMENT 'Article sent as part of action, if any',
  `current_points` int unsigned NOT NULL COMMENT 'number of points at the time this action was taken',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_strike_action_id`),
  KEY `user_id` (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_strike_pardons` (
  `user_id` bigint unsigned NOT NULL,
  `category_id` bigint unsigned NOT NULL COMMENT 'link to the strike_category_points table',
  `pardoned_as_of` int unsigned DEFAULT NULL COMMENT 'timestamp that the pardon takes effect at. null means pardon is not active',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`category_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_strikes` (
  `strike_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `target_id` bigint unsigned NOT NULL COMMENT 'ID of an entity that caused a strike. ie, listing ID',
  `target_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'type of an entity that caused a strike. ie, listing',
  `flag_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'link to the Apollo flag if exists',
  `strike_source` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'system that generated a strike: apollo, takedown, rtt, etc',
  `category_id` bigint unsigned NOT NULL COMMENT 'link to the strike_category_points table',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `deleted_at` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`strike_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_category_idx` (`user_id`,`category_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_stripe_messages` (
  `stripe_message_id` bigint unsigned NOT NULL,
  `stripe_event_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `reference_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `parent_reference_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `parent_reference_id` bigint unsigned DEFAULT NULL,
  `event_type` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '50 char is current longest on Stripe',
  `environment` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `process_state` smallint unsigned NOT NULL DEFAULT '0',
  `state_retry_count` int unsigned DEFAULT '0',
  `next_process_date` int unsigned DEFAULT '0',
  `message_body` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`stripe_message_id`),
  KEY `next_process_date_composite` (`process_state`,`environment`,`next_process_date`,`update_date`),
  KEY `update_date_index` (`update_date`),
  KEY `key_reference_id_type` (`reference_id`,`reference_type`(128)),
  KEY `key_parent_reference_id_type` (`parent_reference_id`,`parent_reference_type`(128))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_sweepstakes_eligibility` (
  `sweepstakes_record_id` bigint NOT NULL,
  `user_id` bigint NOT NULL,
  `collection_id` bigint NOT NULL,
  `status` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'States defined in EtsyModel_Sweepstakes_Status',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_source` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'undefined' COMMENT 'States defined in EtsyModel_Sweepstakes_CreationSources',
  PRIMARY KEY (`user_id`,`collection_id`,`sweepstakes_record_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_terms_acceptance` (
  `user_terms_acceptance_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `type` int NOT NULL DEFAULT '0',
  `link_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_terms_acceptance_id`),
  UNIQUE KEY `key_user_id_type` (`user_id`,`type`),
  KEY `key_update_date` (`update_date`),
  KEY `key_create_date` (`create_date`),
  KEY `key_type_link` (`type`,`link_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transaction_notification_state_transitions` (
  `user_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `state_transition_id` bigint unsigned NOT NULL,
  `queue_type` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'EMAIL = 1, BOE_PUSH = 2',
  `previous_state` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'INITIALIZED = 1, QUEUED = 2, SENT = 3, FAILED = 4, INELIGIBLE = 5',
  `updated_state` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'INITIALIZED = 1, QUEUED = 2, SENT = 3, FAILED = 4, INELIGIBLE = 5',
  `transition_note` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `experiment_flags` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`state_transition_id`),
  KEY `user_id_transaction_id_idx` (`user_id`,`transaction_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transaction_notification_states` (
  `user_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `queue_type` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'EMAIL = 1, BOE_PUSH = 2',
  `open_date` int unsigned NOT NULL,
  `state` tinyint unsigned NOT NULL DEFAULT '1' COMMENT 'INITIALIZED = 1, QUEUED = 2, SENT = 3, FAILED = 4, INELIGIBLE = 5',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`transaction_id`,`queue_type`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `queue_type_state_open_date_idx` (`queue_type`,`state`,`open_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transaction_review` (
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `rating` tinyint DEFAULT NULL,
  `review` longtext COLLATE utf8mb4_unicode_ci,
  `is_anonymous` tinyint NOT NULL DEFAULT '1',
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `language` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `seller_feedback` longtext COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `buyer_user_id_shop_id` (`buyer_user_id`,`shop_id`,`is_deleted`),
  KEY `buyer_user_id_rating` (`buyer_user_id`,`rating`,`is_deleted`),
  KEY `buyer_user_id_receipt_id` (`buyer_user_id`,`receipt_id`,`is_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transaction_review_badge_seen` (
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transaction_review_open_date` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_type` tinyint unsigned NOT NULL DEFAULT '0',
  `was_notified` tinyint NOT NULL,
  `open_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `buyer_user_id_open_date_was_notified` (`buyer_user_id`,`open_date`,`was_notified`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transactions` (
  `shop_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `title` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `seller_user_id` bigint unsigned NOT NULL,
  `quantity` int NOT NULL,
  `image_listing_id` bigint unsigned DEFAULT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `seller_feedback_id` bigint unsigned DEFAULT NULL,
  `buyer_feedback_id` bigint unsigned DEFAULT NULL,
  `transaction_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT 'listing',
  `images_listing_id` longtext COLLATE utf8mb4_unicode_ci,
  `suppressed` tinyint(1) DEFAULT NULL,
  `tags_str` longtext COLLATE utf8mb4_unicode_ci,
  `materials_str` longtext COLLATE utf8mb4_unicode_ci,
  `listing_type` int DEFAULT NULL,
  `listing_inventory_id` bigint unsigned DEFAULT NULL,
  `variation_data_version` int DEFAULT NULL,
  `required_variation_details` longtext COLLATE utf8mb4_unicode_ci,
  `optional_variation_details` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `paid_date` int unsigned DEFAULT NULL,
  `shipped_date` int unsigned DEFAULT NULL,
  `status` tinyint unsigned NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `listing_personalization_revision_id` bigint unsigned DEFAULT NULL,
  `applied_tax_rate` int unsigned DEFAULT NULL,
  `csp_country_id` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `listing_id_create_date_idx` (`listing_id`,`create_date`),
  KEY `receipt_id_idx` (`receipt_id`),
  KEY `buyer_status_idx` (`buyer_user_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transactions_feedback` (
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `item_review_rating` tinyint DEFAULT NULL,
  `item_review_text` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`),
  KEY `buyer_user_id_shop_id` (`buyer_user_id`,`shop_id`),
  KEY `buyer_user_id_item_review_rating` (`buyer_user_id`,`item_review_rating`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transactions_feedback_history` (
  `transaction_feedback_history_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `item_review_rating` tinyint DEFAULT NULL,
  `item_review_text` longtext COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`transaction_id`,`transaction_feedback_history_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transactions_totals` (
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `usd_subtotal_price` int unsigned NOT NULL,
  `usd_shipping_price` int unsigned NOT NULL,
  `usd_tax_price` int unsigned NOT NULL,
  `usd_vat_price` int unsigned NOT NULL DEFAULT '0',
  `usd_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `usd_shipping_discount` int unsigned NOT NULL,
  `usd_coupon_discount` int unsigned NOT NULL,
  `usd_tax_discount` int unsigned NOT NULL,
  `usd_fx_rate` bigint unsigned NOT NULL,
  `eur_price` int unsigned DEFAULT NULL,
  `eur_subtotal_price` int unsigned DEFAULT NULL,
  `eur_shipping_price` int unsigned DEFAULT NULL,
  `eur_tax_price` int unsigned DEFAULT NULL,
  `eur_vat_price` int unsigned DEFAULT NULL,
  `eur_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `eur_shipping_discount` int unsigned DEFAULT NULL,
  `eur_coupon_discount` int unsigned DEFAULT NULL,
  `eur_tax_discount` int unsigned DEFAULT NULL,
  `eur_fx_rate` bigint unsigned DEFAULT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_subtotal_price` int unsigned NOT NULL,
  `shop_shipping_price` int unsigned NOT NULL,
  `shop_tax_price` int unsigned NOT NULL,
  `shop_vat_price` int unsigned NOT NULL DEFAULT '0',
  `shop_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `shop_shipping_discount` int unsigned NOT NULL,
  `shop_coupon_discount` int unsigned NOT NULL,
  `shop_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `shop_tax_discount` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `buyer_price` int unsigned DEFAULT NULL,
  `buyer_subtotal_price` int unsigned DEFAULT NULL,
  `buyer_shipping_price` int unsigned DEFAULT NULL,
  `buyer_tax_price` int unsigned DEFAULT NULL,
  `buyer_vat_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `buyer_shipping_discount` int unsigned DEFAULT NULL,
  `buyer_coupon_discount` int unsigned DEFAULT NULL,
  `buyer_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `buyer_tax_discount` int unsigned DEFAULT NULL,
  `buyer_fx_rate` bigint unsigned DEFAULT NULL,
  `buyer_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_subtotal_price` int unsigned NOT NULL,
  `ros_shipping_price` int unsigned NOT NULL,
  `ros_tax_price` int unsigned NOT NULL,
  `ros_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ros_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ros_shipping_discount` int unsigned NOT NULL,
  `ros_coupon_discount` int unsigned NOT NULL,
  `ros_tax_discount` int unsigned NOT NULL,
  `ros_fx_rate` bigint unsigned NOT NULL,
  `ros_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `ledger_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_subtotal_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_vat_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_shipping_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_coupon_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_tax_discount` int unsigned NOT NULL DEFAULT '0',
  `ledger_buyer_fee_price` int unsigned NOT NULL DEFAULT '0',
  `ledger_currency_code` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '',
  `ledger_markdown_fxrate` bigint unsigned NOT NULL DEFAULT '0',
  `ledger_markdown_rate` int unsigned NOT NULL DEFAULT '0',
  `ledger_fx_rate` bigint unsigned NOT NULL DEFAULT '0',
  `has_usd_transaction_fees` tinyint unsigned NOT NULL DEFAULT '1',
  `usd_pretty_price_added` int NOT NULL DEFAULT '0',
  `eur_pretty_price_added` int NOT NULL DEFAULT '0',
  `shop_pretty_price_added` int NOT NULL DEFAULT '0',
  `buyer_pretty_price_added` int NOT NULL DEFAULT '0',
  `ros_pretty_price_added` int NOT NULL DEFAULT '0',
  `ledger_pretty_price_added` int NOT NULL DEFAULT '0',
  `usd_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `eur_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ros_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  `ledger_etsy_coupon` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`),
  UNIQUE KEY `transaction_id` (`buyer_user_id`,`transaction_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_transactions_totals_personalization` (
  `shop_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `personalization_object_id` bigint unsigned NOT NULL,
  `usd_price` int unsigned NOT NULL,
  `eur_price` int unsigned NOT NULL,
  `shop_price` int unsigned NOT NULL,
  `shop_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `buyer_price` int unsigned NOT NULL,
  `buyer_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ros_price` int unsigned NOT NULL,
  `ros_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ledger_price` int unsigned NOT NULL,
  `ledger_currency_code` varchar(3) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_guest` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`receipt_id`,`transaction_id`,`personalization_object_id`),
  UNIQUE KEY `personalization_object_id` (`buyer_user_id`,`transaction_id`,`personalization_object_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_twofactor` (
  `user_id` bigint unsigned NOT NULL,
  `phone_number` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `phone_confirmed` tinyint NOT NULL DEFAULT '0',
  `totp_key` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `totp_enabled` tinyint NOT NULL DEFAULT '0',
  `totp_confirmed` tinyint NOT NULL DEFAULT '0',
  `credential_enabled` tinyint NOT NULL DEFAULT '0',
  `credential_confirmed` tinyint NOT NULL DEFAULT '0',
  `credential_challenge` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `call_enabled` tinyint NOT NULL DEFAULT '0',
  `sms_enabled` tinyint NOT NULL DEFAULT '0',
  `current_token` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `backup_tokens` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `token_create_date` bigint NOT NULL DEFAULT '0',
  `method` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `recency_tokens` varchar(512) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '{}',
  `email_enabled` tinyint NOT NULL DEFAULT '0',
  `email_confirmed` tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_twofactor_credential` (
  `user_id` bigint unsigned NOT NULL,
  `user_twofactor_credential_id` bigint unsigned NOT NULL,
  `public_key_credential_id` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `public_key` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `attestation_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `aaguid` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `sign_count` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `is_deleted` tinyint NOT NULL DEFAULT '0',
  `user_present` tinyint NOT NULL DEFAULT '0',
  `user_handle` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `transports` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `display_name` varchar(256) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`user_id`,`user_twofactor_credential_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_undelivered_transactions` (
  `user_id` bigint unsigned NOT NULL,
  `transaction_id` bigint unsigned NOT NULL DEFAULT '0',
  `receipt_id` bigint unsigned NOT NULL,
  `status` smallint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `shipped_date` int unsigned NOT NULL,
  `original_min_delivery_date` int unsigned NOT NULL,
  `original_max_delivery_date` int unsigned NOT NULL,
  `estimated_max_delivery_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`transaction_id`),
  KEY `receipt_id` (`receipt_id`),
  KEY `status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `user_vat_credit_notes` (
  `vat_credit_note_id` bigint unsigned NOT NULL,
  `buyer_user_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_user_id`,`vat_credit_note_id`),
  KEY `buyer_user_id` (`buyer_user_id`,`receipt_id`),
  KEY `update_date` (`update_date`),
  KEY `IX__receipt_id__update_date` (`receipt_id`,`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_added_discover_themes` (
  `user_added_discovery_theme_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `theme_slug` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`user_added_discovery_theme_id`),
  KEY `idx_create_date` (`create_date`),
  KEY `idx_update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_addresses` (
  `address_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `country_id` int unsigned NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `last_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `first_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `second_line` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `zip` varchar(255) DEFAULT NULL,
  `verification_state` int NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `replacement_address_id` bigint unsigned DEFAULT NULL,
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `phone` varchar(25) NOT NULL DEFAULT '',
  PRIMARY KEY (`address_id`),
  KEY `create_date` (`create_date`),
  KEY `user_id` (`user_id`,`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_cc_token` (
  `cc_token_id` bigint NOT NULL,
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `card_id` bigint unsigned NOT NULL DEFAULT '0',
  `token_provider` varchar(50) NOT NULL DEFAULT '',
  `token` varchar(1000) DEFAULT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `giftcard_id` bigint unsigned NOT NULL DEFAULT '0',
  `hashed_token` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`cc_token_id`),
  UNIQUE KEY `user_id` (`user_id`,`card_id`,`token_provider`,`hashed_token`,`giftcard_id`),
  KEY `key_card_id` (`card_id`),
  KEY `key_create_date` (`create_date`),
  KEY `key_update_date` (`update_date`),
  KEY `key_user_giftcard_id` (`user_id`,`giftcard_id`,`token_provider`,`create_date`),
  KEY `key_user_provider_hashed_token` (`user_id`,`token_provider`,`hashed_token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_credit_cards` (
  `card_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned DEFAULT NULL,
  `token` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  `type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_month` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL,
  `exp_year` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `num_head` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `num_tail` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned DEFAULT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `auth_date` int unsigned DEFAULT NULL,
  `csc_response` varchar(30) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `csc_date` int unsigned DEFAULT NULL,
  `source_type` varchar(30) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'TYPE_STANDARD',
  `pci_token_id` bigint unsigned NOT NULL DEFAULT '0',
  `cryptogram` varchar(10000) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `deleted_date` int unsigned DEFAULT NULL,
  `scheme_transaction_reference` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT '',
  `threeds_auth_date` int unsigned DEFAULT NULL,
  `payment_account_reference` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT '',
  PRIMARY KEY (`card_id`),
  KEY `token` (`token`),
  KEY `user_id` (`user_id`,`create_date`),
  KEY `user_id_2` (`user_id`,`deleted`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `key_user_id_pci_token_id` (`user_id`,`pci_token_id`),
  KEY `payment_account_reference` (`payment_account_reference`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_credit_cards_addresses` (
  `user_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned NOT NULL,
  `address_id` bigint unsigned NOT NULL COMMENT 'shipping address',
  `create_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`card_id`,`address_id`),
  KEY `card_id_2` (`card_id`,`create_date`),
  KEY `address_id` (`address_id`,`create_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_credit_cards_log` (
  `user_credit_card_log_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `card_id` bigint unsigned DEFAULT NULL,
  `type` varchar(30) NOT NULL,
  `reference_id` bigint unsigned DEFAULT NULL,
  `amount` int unsigned DEFAULT NULL,
  `disposition` varchar(20) DEFAULT NULL,
  `post_to_wp` text,
  `response_from_wp` text,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `pttid` varchar(256) DEFAULT NULL,
  `processor` varchar(25) DEFAULT '',
  `processor_response_code` varchar(64) DEFAULT '',
  `processor_acquirer_reference` varchar(64) DEFAULT '',
  `processor_liability_shift` tinyint DEFAULT '0',
  `processor_cvc_response_code` varchar(64) DEFAULT '',
  `processor_mid` varchar(64) DEFAULT '',
  `currency` varchar(3) NOT NULL DEFAULT '',
  `cart_id` bigint unsigned DEFAULT NULL,
  PRIMARY KEY (`user_credit_card_log_id`),
  UNIQUE KEY `user_id` (`user_id`,`user_credit_card_log_id`),
  KEY `card_id` (`card_id`,`create_date`),
  KEY `card_id_2` (`card_id`,`user_id`,`create_date`),
  KEY `user_id_2` (`user_id`,`type`,`create_date`),
  KEY `user_id_3` (`user_id`,`reference_id`,`create_date`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `reference_id` (`reference_id`,`type`,`create_date`),
  KEY `processor_idx` (`processor`,`processor_mid`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_dismissedlistings` (
  `user_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`listing_id`),
  KEY `createdate_idx` (`create_date`),
  KEY `updatedate_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_favoritelistings` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_id` bigint unsigned NOT NULL DEFAULT '0',
  `listing_state` varchar(10) NOT NULL DEFAULT 'active' COMMENT 'de-normalized listing state',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `state` bigint unsigned NOT NULL DEFAULT '0',
  `is_available` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing is available for purchase',
  `is_displayable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be displayed',
  `is_searchable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can appear in search results',
  `is_surfaceable` tinyint NOT NULL DEFAULT '1' COMMENT 'boolean indicating listing can be surfaced',
  `is_collection_private` tinyint NOT NULL DEFAULT '0' COMMENT 'boolean indicating whether listing is in a private collection',
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`listing_id`),
  KEY `create_date-user_id` (`create_date`,`user_id`),
  KEY `update_date-user_id` (`update_date`,`user_id`),
  KEY `user_id-listing_state-user_state-create_date` (`user_id`,`listing_state`,`user_state`,`create_date`),
  KEY `shop_id-listing_state-user_state-create_date` (`shop_id`,`listing_state`,`user_state`,`create_date`),
  KEY `shop_user_id-listing_state-user_state-create_date` (`shop_user_id`,`listing_state`,`user_state`,`create_date`),
  KEY `user_id-create_date` (`user_id`,`create_date`),
  KEY `user_id-listing_state-is_displayable` (`user_id`,`listing_state`,`is_displayable`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_favoriteshopposts` (
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that favorited the shop post. Shardifier.',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Id of the shop that owns the shop post',
  `shop_post_id` bigint unsigned NOT NULL COMMENT 'Id of shop post in the shop_posts table',
  `shop_state` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'De-normalized from shops_index status field',
  `user_state` varchar(15) CHARACTER SET utf8 NOT NULL DEFAULT 'active' COMMENT 'De-normalized from users_index user_state field',
  `shop_post_is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'De-normalized from shop_post is_deleted field',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`user_id`,`shop_post_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_favoriteshops` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `user_state` varchar(15) NOT NULL DEFAULT 'active' COMMENT 'de-normalized user state',
  `shop_state` varchar(25) NOT NULL DEFAULT 'active' COMMENT 'de-normalized from shop table',
  `shop_user_id` bigint unsigned NOT NULL DEFAULT '0',
  `create_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`shop_id`),
  KEY `create_date-user_id` (`create_date`,`user_id`),
  KEY `create_date-shop_state-user_id` (`create_date`,`shop_state`,`user_id`),
  KEY `user_id-shop_user_id-shop_state` (`user_id`,`shop_user_id`,`shop_state`),
  KEY `shop_id-user_id-shop_state` (`shop_id`,`user_id`,`shop_state`),
  KEY `shop_user_id-shop_state` (`shop_user_id`,`shop_state`),
  KEY `user_id-shop_state-create_date` (`user_id`,`shop_state`,`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_favoritetreasuries` (
  `user_id` bigint unsigned NOT NULL,
  `treasury_id` bigint unsigned NOT NULL,
  `treasury_owner_id` bigint unsigned NOT NULL,
  `treasury_private` tinyint NOT NULL,
  `treasury_deleted` tinyint NOT NULL,
  `treasury_mature` tinyint NOT NULL,
  `treasury_owner_state` varchar(15) NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`treasury_id`,`treasury_owner_id`),
  KEY `user_id_and_treasury_state_index` (`user_id`,`treasury_private`,`treasury_deleted`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_geodata` (
  `user_id` bigint unsigned NOT NULL DEFAULT '0',
  `quality` int unsigned DEFAULT NULL,
  `offsetLat` double DEFAULT NULL,
  `offsetLon` double DEFAULT NULL,
  `radius` int unsigned DEFAULT NULL,
  `line1` varchar(255) DEFAULT NULL,
  `line2` varchar(255) DEFAULT NULL,
  `line3` varchar(255) DEFAULT NULL,
  `line4` varchar(255) DEFAULT NULL,
  `cross` varchar(255) DEFAULT NULL,
  `house` varchar(255) DEFAULT NULL,
  `street` varchar(255) DEFAULT NULL,
  `xstreet` varchar(255) DEFAULT NULL,
  `unitType` varchar(255) DEFAULT NULL,
  `unit` varchar(255) DEFAULT NULL,
  `postal` varchar(255) DEFAULT NULL,
  `neighborhood` varchar(255) DEFAULT NULL,
  `city` varchar(255) DEFAULT NULL,
  `county` varchar(255) DEFAULT NULL,
  `countyCode` varchar(255) DEFAULT NULL,
  `state` varchar(255) DEFAULT NULL,
  `stateCode` varchar(255) DEFAULT NULL,
  `country` varchar(255) DEFAULT NULL,
  `countryCode` varchar(255) DEFAULT NULL,
  `hash` varchar(255) DEFAULT NULL,
  `woeId` int unsigned DEFAULT NULL,
  `woeType` int unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_groups` (
  `group_id` int NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `application_essay` mediumtext COLLATE utf8mb4_unicode_ci,
  `user_role` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `user_status` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  `login_name` varchar(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `team_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `team_last_post_date` int unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`user_id`,`group_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`),
  KEY `user_status` (`user_status`(10),`user_id`),
  KEY `user_role` (`user_role`(10),`user_id`),
  KEY `user_role-login_name` (`user_role`(191),`login_name`),
  KEY `user_role-update_date` (`user_role`(191),`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_hidden_shopposts` (
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that hid the shop post. Shardifier.',
  `post_id` bigint unsigned NOT NULL COMMENT 'Id of shop post in the shop_posts table',
  `shop_id` bigint unsigned NOT NULL COMMENT 'Id of the shop that owns the shop post',
  `is_deleted` tinyint unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`post_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_listing_credits_promotions` (
  `user_id` bigint unsigned NOT NULL,
  `promotion_id` bigint unsigned NOT NULL,
  `promotion_status` smallint unsigned DEFAULT NULL,
  `user_status` smallint unsigned DEFAULT NULL,
  `credits_remaining` int unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `activate_date` int unsigned DEFAULT NULL,
  PRIMARY KEY (`user_id`,`promotion_id`),
  KEY `user_and_status` (`user_id`,`user_status`,`promotion_status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `promotion_id` (`promotion_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='Stores listing credits promotion information for a user';

CREATE TABLE `users_pages` (
  `user_id` bigint unsigned NOT NULL,
  `page_id` bigint unsigned NOT NULL,
  `role` tinyint NOT NULL,
  `status` tinyint(1) NOT NULL,
  `create_date` int NOT NULL,
  `update_date` int NOT NULL,
  PRIMARY KEY (`user_id`,`page_id`),
  KEY `update_date` (`update_date`),
  KEY `create_date` (`create_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `users_seen_shop_posts` (
  `id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL COMMENT 'Id of the user that saw the shop post. Shardifer.',
  `post_id` bigint unsigned NOT NULL COMMENT 'Id of the shop post',
  `shop_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Id of the shop that created the shop post',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`id`,`user_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `user_id__create_date` (`user_id`,`create_date`),
  KEY `user_id__post_id` (`user_id`,`post_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `usps_tracking_events` (
  `tracking_code` varchar(34) COLLATE utf8mb4_unicode_ci NOT NULL,
  `usps_tracking_event_id` bigint unsigned NOT NULL,
  `usps_filename` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL,
  `electronic_file_number` varchar(34) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `destination_zip` varchar(5) COLLATE utf8mb4_unicode_ci NOT NULL,
  `destination_zip4` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `scanning_zip` varchar(5) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'zip code of the scan location',
  `scanning_name` varchar(35) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of Postal Service facility or city/state where event happened.',
  `event_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Code for tracking event.',
  `event_name` varchar(40) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of tracking event corresponding to Event Code.',
  `event_date` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Date of tracking event. (YYYYMMDD)',
  `event_time` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Time of tracking event. (HHMM)',
  `destination_country_code` varchar(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Two character standardized ISO International country code.',
  `recipient_name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Name of Recipient for Signature Confirmation and Priority Mail Express service.',
  `original_tracking_code` varchar(34) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `unit_of_measure` varchar(1) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Unit of measurement for mail piece: 1 - LBS, 2 - OZ',
  `weight` decimal(9,4) DEFAULT '0.0000' COMMENT 'Mail piece weight.',
  `service_guarantee_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Service Guarantee Delivery Date (YYYYMMDD)',
  `service_guarantee_time` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Service Guarantee Delivery Date (HHMM)',
  `scheduled_delivery_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The scheduled delivery date for the mail piece. (YYYYMMDD)',
  `delivery_date_modification_indicator` varchar(1) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Indicator for the modification of a scheduled delivery date (1 on time, 2 early, 3 late)',
  `predicted_delivery_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Predicted date of delivery.',
  `start_the_clock_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Start the clock date.',
  `start_the_clock_date_modification_indicator` varchar(1) COLLATE utf8mb4_unicode_ci DEFAULT '' COMMENT 'Indicates if the Start the Clock Date has been modified.',
  `postal_code` varchar(11) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'foreign postal code',
  `delivery_address` varchar(48) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'destination delivery address',
  `status` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'package status',
  `facility_identifier` varchar(16) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'indentifier of facility',
  `facility_type` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'type of facility',
  `gmt_time` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'gmt time format',
  `gmt_offset` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'gmt offset',
  `gps_latitude` varchar(12) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `gps_longitude` varchar(12) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `impb_compliance_report_code` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'IMpb Compliance Report Code',
  `address_standardized_indicator` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Indicates if the delivery address information is the original address as provided in the shipping services file, if the delivery address has been standardized or if the delivery address information is invalid address',
  `posting_date` varchar(8) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The date the MA event was created.',
  `posting_time` varchar(4) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'The time the MA event was created.',
  `barcode_input_method` varchar(2) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Barcode Input Method',
  `start_the_clock_time` varchar(6) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`tracking_code`,`usps_tracking_event_id`,`create_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='events table for a usps tracking code';

CREATE TABLE `usps_tracking_shop_shipment` (
  `tracking_code` varchar(34) COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `shipment_id` bigint unsigned NOT NULL,
  `earliest_rollup_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'earliest date we should rollup into shop shipment',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`tracking_code`,`shop_id`,`shipment_id`,`create_date`),
  KEY `earliest_rollup_date` (`earliest_rollup_date`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8 COMMENT='linkage table for associating shop shipment records with an individual tracking code';

CREATE TABLE `usps_transactions_adjustment` (
  `transaction_date` int unsigned NOT NULL,
  `usps_transaction_adjustment_id` bigint unsigned NOT NULL,
  `usage_indicator` char(2) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the two digit usage indicator representing the reconciliation type',
  `mail_class` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the mail class the adjustment applied to',
  `caps_transaction_id` varchar(26) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the transaction id on usps''s side',
  `usps_extract_id` bigint unsigned NOT NULL COMMENT 'PK to the reconciliation extract containing the adjustment',
  `total` int NOT NULL COMMENT 'the total adjustment amount (may not equal summed item amounts)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`transaction_date`,`usps_transaction_adjustment_id`),
  KEY `usage_indicator` (`usage_indicator`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `usps_transactions_adjustment_item` (
  `transaction_date` int unsigned NOT NULL,
  `usps_transaction_adjustment_id` bigint unsigned NOT NULL,
  `usps_transaction_adjustment_item_id` bigint unsigned NOT NULL,
  `tracking_code` varchar(40) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `mail_class` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `package_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `weight` decimal(12,4) NOT NULL DEFAULT '0.0000' COMMENT 'the adjusted weight',
  `length` decimal(12,4) NOT NULL DEFAULT '0.0000' COMMENT 'the adjusted length',
  `width` decimal(12,4) NOT NULL DEFAULT '0.0000' COMMENT 'the adjusted width',
  `height` decimal(12,4) NOT NULL DEFAULT '0.0000' COMMENT 'the adjusted height',
  `processing_category` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the adjusted one digit processing category',
  `zone` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the usps adjusted zone',
  `rate_indicator_code` char(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the adjusted two digit rate indicator code',
  `sampling_date` int unsigned NOT NULL DEFAULT '0' COMMENT 'the date the sampling occured',
  `sampling_zip` varchar(9) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'the zipcode of the postal facility where the sampling occured',
  `postage_cost` int NOT NULL DEFAULT '0',
  `fees` int NOT NULL DEFAULT '0',
  `total` int NOT NULL DEFAULT '0' COMMENT 'The total adjustment amount for this item, may be negative if sampled lower than declared',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`transaction_date`,`usps_transaction_adjustment_id`,`usps_transaction_adjustment_item_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `usps_transactions_charge` (
  `transaction_date` int unsigned NOT NULL,
  `usps_transaction_charge_id` bigint unsigned NOT NULL,
  `charge_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'refund or charge',
  `caps_transaction_id` varchar(26) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'the transaction id on usps''s side',
  `tracking_code` varchar(22) COLLATE utf8mb4_unicode_ci NOT NULL,
  `shop_id` bigint unsigned NOT NULL DEFAULT '0',
  `shipping_label_id` bigint unsigned NOT NULL DEFAULT '0',
  `usps_extract_id` bigint unsigned NOT NULL COMMENT 'PK to the extract containing the charge or refund',
  `processing_category` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the one digit processing category',
  `zone` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'the usps calculated zone',
  `rate_indicator_code` char(2) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'the two character rate indicator code',
  `postage_cost` int unsigned NOT NULL COMMENT 'the postage cost usps charged or refunded',
  `fees` int unsigned NOT NULL DEFAULT '0' COMMENT 'thet total fees usps charged or refunded',
  `total` int unsigned NOT NULL COMMENT 'The total charge amount USPS chared or refunded',
  `manifested_total` int unsigned NOT NULL COMMENT 'The total charge amount we manifested (excluding insurance)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `main_electronic_file_number` varchar(26) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The EFN of the first label in the manifest, may not correlate to the individual label but is used internally by USPS',
  `sub_electronic_file_number` varchar(26) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'The EFN of the label. When a scan form this will be the same as the main, if contained in a file with multiple manifests this corresponds to the header for the shops labels',
  PRIMARY KEY (`transaction_date`,`usps_transaction_charge_id`),
  UNIQUE KEY `label_caps_transaction_idx` (`shipping_label_id`,`caps_transaction_id`),
  KEY `date_extract_id` (`transaction_date`,`charge_type`,`usps_extract_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `validation_test` (
  `c1` int NOT NULL,
  PRIMARY KEY (`c1`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `variation_images` (
  `listing_variation_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `image_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL DEFAULT '0',
  `update_date` int unsigned NOT NULL DEFAULT '0',
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_variation_id`,`image_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`),
  KEY `image_id_idx` (`image_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vat_audit_log` (
  `buyer_id` bigint unsigned NOT NULL,
  `receipt_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `geo_ip_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `user_pref_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `user_profile_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `shipping_address_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `billing_address_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `tiebreaker_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `selected_region` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`buyer_id`,`receipt_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vendor_content_review` (
  `vendor_content_review_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `content_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `content_hash` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `reference_id` bigint unsigned NOT NULL,
  `vendor` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `source_environment` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_environment` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `process_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `evaluation_attempts` int unsigned NOT NULL DEFAULT '0',
  `evaluation_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `evaluation_request_time` bigint unsigned DEFAULT NULL,
  `evaluation_response_time` bigint unsigned DEFAULT NULL,
  `evaluation_time` bigint unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`vendor_content_review_id`),
  KEY `content_hash_idx` (`content_hash`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `compound_idx` (`user_id`,`reference_id`,`content_hash`,`process_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vendor_content_review_queue_handler` (
  `vendor_content_review_queue_handler_id` bigint unsigned NOT NULL,
  `shop_content_review_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `last_response_code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `process_status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Default 0, 0: pending, 1: sent, 2: failed',
  `scans` int unsigned NOT NULL,
  `environment` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`shop_id`,`listing_id`,`vendor_content_review_queue_handler_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vendor_content_review_result` (
  `vendor_content_review_result_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `vendor_content_review_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.vendor_content_review.vendor_content_review_id',
  `content_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `vendor` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `vendor_reference_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `vendor_evaluation_status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `decision_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `safe_revision_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `violative_revision_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `policies_summary` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `reviewer_iframe_url` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `raw_response` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`vendor_content_review_result_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vendor_content_review_revision` (
  `vendor_content_review_revision_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `decision_type` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `content_hash` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `payload` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`vendor_content_review_revision_id`),
  KEY `content_hash_idx` (`content_hash`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vendor_content_review_snapshot` (
  `vendor_content_review_snapshot_id` bigint unsigned NOT NULL,
  `user_id` bigint unsigned NOT NULL,
  `vendor_content_review_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.vendor_content_review.vendor_content_review_id',
  `content_type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `payload` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`vendor_content_review_snapshot_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `venue_listings_override` (
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `channel_id` bigint unsigned NOT NULL,
  `title` varchar(1024) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`listing_id`,`channel_id`,`shop_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vetting_blocklist_check` (
  `id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `check_status` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Result of the check, e.g. pass or fail',
  `failed_component` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'What field failed the check, e.g. shop section or listing title',
  `failed_listing_id` bigint unsigned DEFAULT NULL COMMENT 'Listing ID that failed the check',
  `failed_term` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'What term was found in the shop or its listings',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `shop_idx` (`shop_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video` (
  `video_id` bigint unsigned NOT NULL,
  `video_type_id` int unsigned NOT NULL DEFAULT '0',
  `provider_type_id` bigint unsigned NOT NULL,
  `provider_token` varchar(127) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `provider_status` int unsigned NOT NULL DEFAULT '0',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `duration` int NOT NULL DEFAULT '0',
  `filename` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `size_bytes` int unsigned DEFAULT NULL,
  `preview_image_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `owner_type_id` smallint NOT NULL,
  `owner_id` bigint unsigned NOT NULL,
  `crop_x` int unsigned DEFAULT NULL,
  `crop_y` int unsigned DEFAULT NULL,
  `crop_url` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `crop_thumbnail_url` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `crop_aspect_ratio` float DEFAULT NULL,
  `width` int unsigned DEFAULT NULL,
  `height` int unsigned DEFAULT NULL,
  `thumbnail_seconds_offset` float unsigned DEFAULT NULL,
  `should_disable_audio` tinyint unsigned DEFAULT NULL COMMENT 'True if a video does not have audio OR if a video has audio but the seller has selected no audio',
  PRIMARY KEY (`video_id`,`video_type_id`),
  KEY `owner_index` (`owner_id`,`owner_type_id`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_listing` (
  `video_id` bigint unsigned NOT NULL,
  `shop_id` bigint unsigned NOT NULL,
  `listing_id` bigint unsigned NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT '0',
  `create_date` int NOT NULL DEFAULT '0',
  `update_date` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`shop_id`,`listing_id`,`video_id`),
  KEY `listing_id` (`listing_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_audit` (
  `video_recognition_audit_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.videos.video_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `object_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK: etsy_shard.listings.listing_id',
  `object_type_id` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'value from ObjectType',
  `model_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '1 = for Google Video Intelligence API. This will allow integration with other model types in future',
  `video_recognition_data_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `retries_since_last_success` smallint unsigned NOT NULL DEFAULT '0',
  `is_pending` tinyint unsigned NOT NULL DEFAULT '0',
  `is_backfill` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'Flag to determine if post-processing hooks need to be called after processing successful response',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_audit_id`),
  UNIQUE KEY `video_model_type_idx` (`video_id`,`model_type`,`owner_id`,`owner_type_id`,`object_id`,`object_type_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `failed_idx` (`is_pending`,`retries_since_last_success`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_data` (
  `video_recognition_data_id` bigint unsigned NOT NULL,
  `video_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.videos.video_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `model_type` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '1 = for Google Video Intelligence API. This will allow integration with other model types in future',
  `video_data_resource` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_data_id`),
  UNIQUE KEY `video_model_type_resource_idx` (`video_id`,`model_type`,`video_data_resource`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `video_model_type_owner_idx` (`video_id`,`model_type`,`owner_id`,`owner_type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_explicit_annotations` (
  `video_recognition_explicit_annotation_id` bigint unsigned NOT NULL,
  `video_recognition_data_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `likelihood` tinyint unsigned NOT NULL,
  `score` decimal(20,19) unsigned NOT NULL COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_explicit_annotation_id`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_label_annotations` (
  `video_recognition_label_annotation_id` bigint unsigned NOT NULL,
  `video_recognition_data_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `image_recognition_label_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_aux.image_recognition_labels.image_recognition_label_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `score` decimal(20,19) unsigned NOT NULL COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_label_annotation_id`),
  KEY `image_recognition_label_idx` (`image_recognition_label_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_logo_annotations` (
  `video_recognition_logo_annotation_id` bigint unsigned NOT NULL,
  `video_recognition_data_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `image_recognition_logo_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_aux.image_recognition_logos.image_recognition_logo_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `score` decimal(20,19) unsigned NOT NULL COMMENT 'ranges from 0 (no confidence) to 1 (very high confidence)',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_logo_annotation_id`),
  KEY `image_recognition_logo_idx` (`image_recognition_logo_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_speech_annotations` (
  `video_recognition_speech_annotation_id` bigint unsigned NOT NULL,
  `video_recognition_data_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `annotation_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `language_code` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_speech_annotation_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `video_recognition_text_annotations` (
  `video_recognition_text_annotation_id` bigint unsigned NOT NULL,
  `video_recognition_data_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_shard.video_recognition_data.video_recognition_data_id',
  `owner_id` bigint unsigned NOT NULL COMMENT 'FK: etsy_index.shops_index.shop_id',
  `owner_type_id` tinyint unsigned NOT NULL COMMENT 'value from ObjectType',
  `annotation_value` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`video_recognition_text_annotation_id`),
  KEY `create_date_idx` (`create_date`),
  KEY `update_date_idx` (`update_date`),
  KEY `video_recognition_data_idx` (`video_recognition_data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `vitess_etet` (
  `id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `f_varchar` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `wedding` (
  `event_id` bigint unsigned NOT NULL,
  `creator_id` bigint unsigned NOT NULL,
  `event_date` int unsigned DEFAULT NULL,
  `status` varchar(10) NOT NULL DEFAULT 'active',
  `privacy_level` varchar(10) NOT NULL DEFAULT 'private',
  `primary_first_name` varchar(127) DEFAULT NULL,
  `primary_last_name` varchar(127) DEFAULT NULL,
  `secondary_first_name` varchar(127) DEFAULT NULL,
  `secondary_last_name` varchar(127) DEFAULT NULL,
  `event_type` smallint unsigned NOT NULL DEFAULT '1',
  `gift_type` smallint unsigned DEFAULT NULL,
  `guest_count` int unsigned DEFAULT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`event_id`),
  KEY `creator_id-status` (`creator_id`,`status`),
  KEY `create_date` (`create_date`),
  KEY `update_date` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_asset_revision` (
  `asset_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `language` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `revision_id` bigint unsigned NOT NULL,
  `content_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`asset_id`,`variant_id`,`language`,`revision_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_asset_translation` (
  `asset_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `language` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `latest_revision_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`asset_id`,`variant_id`,`language`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_document_chunk` (
  `document_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `element_key` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `chunk_id` bigint unsigned NOT NULL,
  `md5` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `project` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `feature` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `description` varchar(256) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` varchar(4096) COLLATE utf8mb4_unicode_ci NOT NULL,
  `is_translatable` tinyint NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  PRIMARY KEY (`document_id`,`variant_id`,`element_key`,`chunk_id`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_document_element` (
  `document_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `language` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `revision_id` bigint unsigned NOT NULL,
  `element_key` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content_type` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `translation_policy` varchar(16) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`document_id`,`variant_id`,`language`,`revision_id`,`element_key`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_document_revision` (
  `document_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `language` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `revision_id` bigint unsigned NOT NULL,
  `publish_date` int unsigned NOT NULL DEFAULT '0',
  `archive_date` int unsigned NOT NULL DEFAULT '0',
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `source_revision_id` bigint unsigned NOT NULL DEFAULT '0',
  `source_type` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`document_id`,`variant_id`,`language`,`revision_id`),
  KEY `update_date_idx` (`update_date`),
  KEY `document_source_revision_idx` (`document_id`,`source_revision_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `xylem_document_translation` (
  `document_id` bigint unsigned NOT NULL,
  `variant_id` bigint unsigned NOT NULL,
  `language` varchar(8) COLLATE utf8mb4_unicode_ci NOT NULL,
  `latest_revision_id` bigint unsigned NOT NULL,
  `published_revision_id` bigint unsigned NOT NULL,
  `create_date` int unsigned NOT NULL,
  `update_date` int unsigned NOT NULL,
  `translation_revision_id` bigint unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`document_id`,`variant_id`,`language`),
  KEY `update_date_idx` (`update_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

CREATE TABLE `year_in_review` (
  `user_id` bigint unsigned NOT NULL,
  `is_seller_who_did_well` tinyint(1) NOT NULL DEFAULT '0',
  `seller_data_2018` varchar(6000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `year` int unsigned NOT NULL DEFAULT '2018',
  `seller_data` varchar(6000) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`user_id`,`year`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;

